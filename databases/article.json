{ "_id" : { "$oid" : "530afe7a31a27642989254ec" }, "cache" : { "comment" : { "number" : 0 } }, "categories" : [ { "$oid" : "5310456355dfd5f7698d48b8" }, { "$oid" : "5310456355dfd5f7698d48bc" }, { "$oid" : "5310456355dfd5f7698d48b9" }, { "$oid" : "530cc2f27188099a66e9bcec" }, { "$oid" : "5310456355dfd5f7698d48bb" }, { "$oid" : "5310456355dfd5f7698d48ba" }, { "$oid" : "530ef6a6789c1a55e4fde0af" } ], "content" : "En CSS, tout comme avec le librairie JavaScript [jQuery], il faut _utiliser des sélecteurs_ pour _cibler une balise_ ou un ensemble de balise :\n\n- on utilise le **sélecteur #** si l'on désire accéder à l'élément par la valeur de son _attribut id_ ou,\n- on utilise le **sélecteur .** si on désire accéder à l'élément par une des valeurs de son _attribut class_.\n\nEn combinant les deux sélecteurs précédent on peut sélectionner une balise par son _attribut id_ **et** son _attribut class_.\n\nOn peut donc cibler la _balise HTML_ suivante :\n\n```html\n<div id=\"main\" class=\"example\"></div>\n```\n\navec le _sélecteur CSS_ suivant :\n\n```css\ndiv#main.example { /* ... */ }\n```\n\n\n\n\n\n## Comment sélectionner l'id d'une balise si celui-ci contient un point ? ##\n\nIl n'est a première vue pas possible de sélectionner une balise par la valeur de son _attribut id_ si celui-ci contient un point.\n\n\n\n\n> ### Cibler une balise HTML par son id s'il contient un point est impossible ###\n\n> _`Impossible de faire :`_ On ne peut pas cibler la _balise HTML_ suivante :\n\n> ```html\n<div id=\"main.example\">...</div>\n```\n\n> avec le _sélecteur CSS_ suivant :\n\n> ```css\ndiv#main.example { /* ... */ }\n```\n\n> parce que la partie située après le point, à savoir <em>example</em>, est interprétée non pas comme la suite du nom de l'id, mais comme une valeur d'attribut class.\n\n\n\n\n\n## La solution pour les id contenant des points sont le \\ et le \\\\\\ ##\n\nLa solution pour cibler un id ou une classe contenant le caractère `.` est simple, il suffit de l'**échapper avec le caractère \\** en CSS et **les caractères \\\\\\** avec [jQuery].\n\n\n\n\n> ### Cibler une balise HTML par son id s'il contient un point est possible avec le BackSlash ###\n\n> **`Il faut faire :`** On peut cibler la _balise HTML_ suivante,\n\n> ```html\n<div id=\"main.example\">...</div>\n```\n\n> avec le _sélecteur CSS_ suivant :\n\n> ```css\ndiv#main\\.example { /* ... */ }\n```\n\n> ou le _sélecteur [jQuery]_ suivant :\n\n> ```javascript\n$(\"div#main\\\\.example\");\n```\n\nNotez bien qu'en CSS on utilise un BackSlash _\\_ alors qu'avec jQuery il faut également échapper le caractère échappement d'où deux BackSlash** \\\\\\**.\n\n  [jQuery]: http://jquery.com/ (jQuery: The Write Less, Do More, JavaScript Library)", "dates" : { "published" : { "$date" : 1355832720000 }, "updated" : [] }, "others" : { "markdown" : true, "published" : true }, "script" : "", "stylesheet" : "", "title" : "Comment <span>cibler</span> un <span>id</span> qui contient un point", "urn" : "comment-cibler-un-id-qui-contient-un-point" }
{ "_id" : { "$oid" : "530f4a3e6f56ae3b67f67204" }, "cache" : { "comment" : { "number" : 0 } }, "categories" : [ { "$oid" : "530ef6a6789c1a55e4fde0af" }, { "$oid" : "5310456355dfd5f7698d48b7" }, { "$oid" : "5310456355dfd5f7698d48b6" }, { "$oid" : "5310456355dfd5f7698d48bb" }, { "$oid" : "5310456355dfd5f7698d48bd" }, { "$oid" : "5310456355dfd5f7698d48ba" }, { "$oid" : "530cc2f27188099a66e9bcec" } ], "content" : "Beaucoup de design demande que les bordures des cadres de contenu soient des images pour avoir des bords aux motifs complexes ou faire des effets d'ombre. Bien qu'il existe des propriétés CSS3 qui gèrent cela à présent, la compatibilité sur tous les navigateurs ne sera possible que si ceci est réalisé avec du CSS standard et du HTML.\n\n\n\n\n\n\n## Avec un tableau ou la mauvaise façon de faire ##\n\nL'objet HTML presque exclusivement utilisé pour réaliser cela est la balise `<table>` et ses enfants `<tr>` et `<td>`. C'est l'un des rares objets permettant dans sa configuration brute de gérer dynamiquement un cadre qui s'adapte au contenu qu'il contient sans CSS.\n\nCependant, l'usage premier d'une balise `<table>` est d'afficher des données sous forme de tableau **et ne doit** servir qu'à ça.\n\n> Donc se servir de la balise `<table>` pour faire du positionnement de contenu c'est mal et se servir de la balise `<table>` pour faire des cadres en image c'est mal.\n\nUn exemple de ce qui certes fonctionne mais qui n'ai pas à faire ci-dessous :\n\n\n\n\n> ### On ne doit jamais utiliser la balise `<table>` pour autre chose que du contenu de type donnée ###\n\n> _`Mauvaise façon :`_ Avec ce type de structure HTML :\n\n> ```html\n<table class=\"global\">\n    <thead>\n        <tr>\n            <td class=\"top-left\"></td>\n            <td class=\"top\"></td>\n            <td class=\"top-right\"></td>\n        </tr>\n    </thead>\n    <tbody>\n        <tr>\n            <td class=\"left\"></td>\n            <td class=\"content\">{Contenu réel}</td>\n            <td class=\"right\"></td>\n        </tr>\n    </tbody>\n    <tfoot>\n        <tr>\n            <td class=\"bottom-left\"></td>\n            <td class=\"bottom\"></td>\n            <td class=\"bottom-right\"></td>\n        </tr>\n    </tfoot>\n</table>\n```\n\n> ça marche effectivement en collant :\n\n> - des images de type coin en `background-image` des classes `top-left`, `top-right`, `bottom-left`, `bottom-right`,\n> - des images qui se répètent en `repeat-x_`des classes `top` et `bottom` et\n> - des images qui se répètent en `repeat-y` des classes `left` et `right`.\n\n\n\n\n\n## Avec une `div` ou la bonne pratique ##\n\n_Mais alors comment réaliser des bordures en images autour d'un contenu ?_\n\nPar n'importe quel autre moyen possible et imaginable ! Les seuls contraintes seront la compatibilité inter-navigateur.\n\nSachez qu'il est tout à fait possible de faire remplir ce rôle par des `<div>` de façon aussi dynamique que le tableau `<table>`. Les `<div>` divisent l'espace d'affichage et permettent au CSS d'habiller le tout.\n\nEt comme je suis de bonne humeur, je vais livrer ici ma technique qui est compatible tout navigateur ! Quelle chance ;)\n\n\n\n\n> ### Une bonne manière de créer des cadres dynamiques en image sans tableau ###\n\n> **`Bonne façon :`** En utilisant cette structure HTML :\n\n> ```html\n<div class=\"global-width\">\n    <div class=\"top-right\">\n        <div class=\"bottom-right\">\n            <div class=\"bottom-left\">\n                <div class=\"top-left\">\n                    <div class=\"top\"></div>\n                    <div class=\"left\">\n                        <div class=\"right\">\n                            <div class=\"content-height\">\n                                {Contenu réel}\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"bottom\"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n```\n\n> il suffit d'associer :\n\n> - des images de type coin en background-image des classes `top-left`, `top-right`, `bottom-left`, `bottom-right`,\n> - des images qui se répètent en `repeat-x` des classes `top` et `bottom` et\n> - des images qui se répètent en `repeat-y` des classes `left` et `right`.\n\n> La largeur du tableau ce paramètre avec la classe `global-width` et sa hauteur avec la classe `content-height`.\n\n> > **Attention :** La largeur se calcule en incluant la largeur des bords `left` et `right` alors que la hauteur se calcule en excluant la hauteur des bords `top` et `bottom`.\n\n> Voici un exemple de CSS associé pour notre tableau :\n\n> ```css\ndiv.global-width {\n    width: auto;\n}\n\n> div.content-height {\n    height: auto;\n}\n\n> div.top {\n    margin-left: 23px;\n    margin-right: 23px;\n    height: 23px;\n    background-image: url('top.png');\n    background-repeat: repeat-x;\n}\n\n> div.top-right {\n    background-image: url('top-right.png');\n    background-position: top right;\n    background-repeat: no-repeat;\n}\n\n> div.right {\n    padding-right: 23px;\n    background-image: url('right.png');\n    background-position: right;\n    background-repeat: repeat-y;\n}\n\n> div.bottom-right {\n    background-image: url('bottom-right.png');\n    background-position: bottom right;\n    background-repeat: no-repeat;\n}\n\n> div.bottom {\n    margin-left: 23px;\n    margin-right: 23px;\n    height: 23px;\n    background-image: url('bottom.png');\n    background-repeat: repeat-x;\n}\n\n> div.bottom-left {\n    background-image: url('bottom-left.png');\n    background-position: bottom left;\n    background-repeat: no-repeat;\n}\n\n> div.left {\n    padding-left: 23px;\n    background-image: url('left.png');\n    background-repeat: repeat-y;\n}\n\n> div.top-left {\n    background-image: url('top-left.png');\n    background-repeat: no-repeat;\n}\n```\n\n\n\n\n\n## Autres modèles avec des `<div>` ##\n\nSi vous avez d'autres modèles n'hésitez pas à les laisser dans les commentaires, je les ajouterai ici.\n\n\n\n\n### Structure en semi-tableau ###\n\nVoici une alternative qui vous semble peut-être plus naturelle. Cependant sous **IE7** et **IE8** il y a un décalage de pixel impossible à enlever justement au niveau des flottants,.  À réserver donc si vous ne supportez pas ces navigateurs.\n\n```html\n<div class=\"global-width\">\n    <div>\n        <div class=\"top-left\"></div>\n        <div class=\"top-right\"></div>\n        <div class=\"top\"></div>\n    </div>\n    <div class=\"left\">\n        <div class=\"right\">\n            <div class=\"content-height\">\n                {Contenu réel}\n            </div>\n        </div>\n    </div>\n    <div>\n        <div class=\"bottom-left\"></div>\n        <div class=\"bottom-right\"></div>\n        <div class=\"bottom\"></div>\n    </div>\n</div>\n```\n\nen appliquant :\n\n- à `top-left`, `bottom-left` un `float: left;`,\n- à `top-right`, `bottom-right` un `float: right;` et\n- à `top` et `bottom` un `margin-left: <largeur bord gauche>;` et `margin-right: <largeur bord droit>;`.", "dates" : { "published" : { "$date" : 1358064120000 }, "updated" : [] }, "others" : { "markdown" : true, "published" : true }, "script" : "", "stylesheet" : "", "title" : "Faire des <span>bordures</span> en image sans la balise <span>Table</span>", "urn" : "faire-des-bordures-en-image-sans-la-balise-table" }
{ "_id" : { "$oid" : "530f5e87620731fe86cb71a1" }, "cache" : { "comment" : { "number" : 1 } }, "categories" : [ { "$oid" : "5310456355dfd5f7698d48ba" }, { "$oid" : "530ef6a6789c1a55e4fde0af" }, { "$oid" : "5310456355dfd5f7698d48bf" }, { "$oid" : "5310456355dfd5f7698d48be" }, { "$oid" : "5310456355dfd5f7698d48b8" }, { "$oid" : "5310456355dfd5f7698d48b9" } ], "content" : "<img style=\"float: left; margin: 0 8px 8px 0\" src=\"http://blog.haeresis.fr/upload/image/taquin.png\" alt=\"Démonstration du jeu du taquin\" width=\"120\" height=\"120\" />\n\nVous connaissez probablement ce jeu ou l'on mélange une image composée de 4 fois 4 carrés dans le seul but de la remettre en ordre une fois celle-ci mélangée. Il peut s'agir de la reconstituer de mémoire ou à partir d'un modèle. Ce jeu c'est le Taquin et je vous le propose sous la forme d'un plugin jQuery pour votre site.\n\n\n\n\n\n## Démonstration du plugin ##\n\nEn jouant avec les paramètres ci-dessous vous pourrez construire le Taquin qui vous intéresse. Vous n'aurez plus qu'à l'inclure dans votre site. Bien entendu, pour les développeurs, le détail du plugin est fait plus loin dans cet article.\n\n\n\n\n### Paramètres ###\n\n<div>\n    <form>\n            <fieldset>\n                <legend>Image Source</legend>\n                <div>\n                    <label>Url :</label>\n                    <input id=\"taquin-url\" type=\"text\" value=\"http://blog.haeresis.fr/upload/image/image-taquin.jpg\" />\n                    <span class=\"detail\">Adresse relative ou absolue autorisée.</span>\n                </div>\n                <div>\n                    <label>Largeur :</label>\n                    <input id=\"taquin-width\" type=\"text\" value=\"0\" />px\n                    <span class=\"detail\">Laissez 0 pour la dimention originale.</span>\n                </div>\n                <div>\n                    <label>Largeur :</label>\n                    <input id=\"taquin-height\" type=\"text\" value=\"0\" />px\n                    <span class=\"detail\">Laissez 0 pour la dimention originale.</span>\n                </div>\n            </fieldset>\n            <fieldset>\n                <legend>Propriétés</legend>\n                <div>\n                    <label>Nombre de division :</label>\n                    <input id=\"taquin-division\" type=\"text\" value=\"4\" />\n                    <span class=\"detail\">Le mimnimum possible est 2.</span>\n                </div>\n                <div>\n                    <label>Partie cachée :</label>\n                    <select id=\"taquin-hide-part\">\n                        <option value=\"br\">Bas droite</option>\n                        <option value=\"bl\">Bas gauche</option>\n                        <option value=\"tr\">Haut droite</option>\n                        <option value=\"tl\">Haut gauche</option>\n                    </select>\n                    <span class=\"detail\">Valeur possible : tl, tr, bl, br.</span>\n                </div>\n                <div>\n                    <label>Profondeur de tri :</label>\n                    <input id=\"taquin-mixing\" type=\"text\" value=\"200\" />\n                    <span class=\"detail\">Nombre de déplacement pour mélange.</span>\n                </div>\n            </fieldset>\n            <fieldset>\n                <legend>Validation</legend>\n                <input id=\"validation\" type=\"button\" value=\"Générer votre Taquin\" />\n            </fieldset>\n        </form>\n</div>\n\n\n\n### Aperçu ###\n\nCliquer sur l'image ci-dessous pour voir le résultat après mélange.\n\n<div class=\"taquin\"></div>\n\n\n\n### Installation ###\n\nSi vous n'êtes pas un expert en JavaScript, vous pouvez paramétrer le jeu ci-dessus (dans « Aperçu ») avec les éléments dans « Paramètres » et inclure les codes ci-dessous dans votre site.\n\n<ul>\n    <li>Il faut auparavant avoir inclus le script jQuery dans sa page.</li>\n    <li>Le chemin du plugin est celui où vous avez placé le script sur votre site.</li>\n</ul>\n<div class=\"overflow-y\">\n    <form>\n        <fieldset>\n            <legend>Script à inclure en pied de Body</legend>\n            <div>\n                <textarea class=\"taquin-result\"></textarea>\n            </div>\n            <span class=\"detail\">En supposant que votre fichier soit accessible à l'adresse ./jquery/plugin/</span>\n        </fieldset>\n        <fieldset>\n            <legend>HTML à inclure n'importe ou dans le Body</legend>\n            <div>\n                <textarea>&lt;div id=\"taquin\"&gt;&lt;/div&gt;</textarea>\n            </div>\n        </fieldset>\n    </form>\n</div>\n\n<h2>Téléchargement</h2>\n\n<div class=\"best-practice\">\n    <div class=\"title\">Code source du fichier Plugin JQuery Game Taquin</div>\n    <div class=\"content\">\n        <p>Vous trouverez ce code à <a href=\"http://www.haeresis.fr/framework/jquery/plugin/jquery.game-taquin.js\">http://www.haeresis.fr/framework/jquery/plugin/jquery.game-taquin.js</a></p>\n        <p>sinon</p>\n        <p>Copiez-collez le code ci-dessus dans un fichier appelé par exemple <b>jquery.game-taquin.js</b> :</p>\n        <pre class=\"prettyprint linenums lang-js\">\n////////////////////////////////////////////\n// Jeu du Taquin en jQuery sur vos sites. //\n//////////////////////////////////////////////\n// Auteur : Bruno Lesieur - www.haeresis.fr //\n//////////////////////////////////////////////\n(function ($) {\n    \"use strict\";\n\n    // ==Description==\n    // Pour chaque élément 'fn' :\n    // Créé un nouvel élément juste après l'image cible composée de &lt;div&gt; en absolute. \n    // Un clique permet de mélanger le jeu.\n    // La résolution du tableau remet les éléments aux états initiaux.\n\n    // ==image==\n    // Ceci réprésente l'adresse de l'image qui sera fractionnée pour être jouée.\n\n    // ==params==\n    // width : Indique la taille que fait l'image en largeur. Si rien ou zéro est précisé, la taille par défaut est celle de l'image.\n    // height : Indique la taille que fait l'image en hauteur. Si rien ou zéro est précisé, la taille par défaut est celle de l'image.\n    // division : Indique le nombre de carré en largeur/hauteur qui compose le taquin.\n    // hidePart : Indique quelle partie du carré est masquée pour faire office de trou pour les déplacements. Les valeurs possibles sont Haut Gauche \"tl\", Haut droite \"tr\", Bas gauche \"bl\", Bas droite \"br\" (par défaut).\n    // mixing : Indique le nombre de déplacement fait aléatoirement pour simuler un mélange à la main du taquin.\n    // success : Si écrasé par une fonction, exécute cette fonction en cas de complétion du taquin. Sinon, renvoi sous chaine de caractère le message passé dans un \"alert()\".\n\n    $.fn.gameTaquin = function (image, params, success) {\n\n        // Paramètres initiaux écrasés s'ils sont passés en paramètres d'entrées.\n        params = $.extend({\n            width: 0,\n            height: 0,\n            division: 4,\n            hidePart: \"br\",\n            mixing: 200,\n            success: \"Complete\"\n        }, params);\n\n        // Si la division est inférieur à 2, la valeur est 2.\n        if (params.division &lt; 2) { params.division = 2; }\n\n        // Fonction éxécutée par défaut en cas de succès.\n        if (!$.isFunction(params.success)) {\n            var temp = params.success;\n            params.success = function () {\n                alert(temp);\n            };\n        }\n\n        /***********************************************/\n        /** Initialisation des variables et fonctions **/\n        /***********************************************/\n\n        var clickFunction,\n            gameStart,\n            gameState,\n            squareWidth = 0,\n            squareHeight = 0;\n\n        // Créer les états de jeu.\n        function initialiseGameVar(gameDivision) {\n            var game = [],\n                gameRow,\n                gameDiv,\n                xi = 0,\n                yi = 0,\n                currentDisplay;\n\n            for (xi = 0; xi &lt; gameDivision; xi += 1) {\n                gameRow = [];\n                for (yi = 0; yi &lt; gameDivision; yi += 1) {\n                    gameDiv = [];\n\n                    currentDisplay = true;\n                    if ((xi === 0) && (yi === 0) && (params.hidePart === \"tl\")) { currentDisplay = false; }\n                    if ((xi === (gameDivision - 1)) && (yi === 0) && (params.hidePart === \"tr\")) { currentDisplay = false; }\n                    if ((xi === 0) && (yi === (gameDivision - 1)) && (params.hidePart === \"bl\")) { currentDisplay = false; }\n                    if ((xi === (gameDivision - 1)) && (yi === (gameDivision - 1)) && (params.hidePart === \"br\")) { currentDisplay = false; }\n\n                    gameDiv[0] = currentDisplay;\n                    gameDiv[1] = \"taquin-\" + xi + \"-\" + yi;\n                    gameRow[yi] = gameDiv;\n                }\n                game[xi] = gameRow;\n            }\n\n            return game;\n        }\n\n        // Repéré la case dans le jeu.\n        function getId(taquin) {\n            var classList = taquin.attr(\"class\").split(/\\s+/),\n                result = \"\";\n\n            $.each(classList, function (index, item) {\n                if (index === 0) {\n                    result = item;\n                }\n            });\n\n            return result;\n        }\n\n        function getCoord(id) {\n            var coord = [],\n                xi = 0,\n                yi = 0;\n\n            for (xi = 0; xi &lt; gameStart.length; xi += 1) {\n                for (yi = 0; yi &lt; gameStart[0].length; yi += 1) {\n                    if (gameState[xi][yi][1] === id) {\n                        coord[0] = xi;\n                        coord[1] = yi;\n                    }\n                }\n            }\n\n            return coord;\n        }\n\n        // Repéré l'élément vide.\n        function getEmpty() {\n            var empty = [],\n                xi = 0,\n                yi = 0;\n\n            for (xi = 0; xi &lt; gameStart.length; xi += 1) {\n                for (yi = 0; yi &lt; gameStart[0].length; yi += 1) {\n                    if (gameState[xi][yi][0] === false) {\n                        empty[0] = xi;\n                        empty[1] = yi;\n                        empty[2] = gameState[xi][yi][1];\n                    }\n                }\n            }\n\n            return empty;\n        }\n\n        // vérifier si un élément peut être bougé.\n        function getIsMovable(x, y) {\n            var isMovable = false;\n\n            try {\n                if (gameState[x][y - 1][0] === false) { isMovable = true; }\n            } catch (err1) {}\n            try {\n                if (gameState[x + 1][y][0] === false) { isMovable = true; }\n            } catch (err2) {}\n            try {\n                if (gameState[x][y + 1][0] === false) { isMovable = true; }\n            } catch (err3) {}\n            try {\n                if (gameState[x - 1][y][0] === false) { isMovable = true; }\n            } catch (err4) {}\n\n            return isMovable;\n        }\n\n        // Mélange pièce.\n        function randomGame(mixing) {\n            var empty,\n                possibleMove,\n                temp,\n                i = 0,\n                j = 0,\n                xi = 0,\n                yi = 0,\n                xj = 0,\n                yj = 0,\n                rand = 0,\n                newPosTop = 0,\n                newPosLeft = 0;\n\n            for (j = 0; j &lt; mixing; j += 1) {\n                empty = getEmpty();\n                possibleMove = [];\n                i = 0;\n\n                // On cherche les voisins déplaçable.\n                try { if (gameState[empty[0]][empty[1] - 1][0] === true) {\n                    possibleMove[i] = [];\n                    possibleMove[i][0] = empty[0];\n                    possibleMove[i][1] = empty[1] - 1;\n                    i += 1;\n                } } catch (err1) {}\n                try { if (gameState[empty[0] + 1][empty[1]][0] === true) {\n                    possibleMove[i] = [];\n                    possibleMove[i][0] = empty[0] + 1;\n                    possibleMove[i][1] = empty[1];\n                    i += 1;\n                } } catch (err2) {}\n                try { if (gameState[empty[0]][empty[1] + 1][0] === true) {\n                    possibleMove[i] = [];\n                    possibleMove[i][0] = empty[0];\n                    possibleMove[i][1] = empty[1] + 1;\n                    i += 1;\n                } } catch (err3) {}\n                try { if (gameState[empty[0] - 1][empty[1]][0] === true) {\n                    possibleMove[i] = [];\n                    possibleMove[i][0] = empty[0] - 1;\n                    possibleMove[i][1] = empty[1];\n                    i += 1;\n                } } catch (err4) {}\n\n                // On choisit au hasard le voisin à interchanger.\n                rand = Math.floor(Math.random() * possibleMove.length);\n\n                // On l'interchange dans l'état de jeu.\n                temp = gameState[empty[0]][empty[1]];\n                gameState[empty[0]][empty[1]] = gameState[possibleMove[rand][0]][possibleMove[rand][1]];\n                gameState[possibleMove[rand][0]][possibleMove[rand][1]] = temp;\n            }\n\n            // On trouve les déplacements pour l'animation.\n            // Pour chaque élément positionné au départ.\n            for (xi = 0; xi &lt; gameStart.length; xi += 1) {\n                for (yi = 0; yi &lt; gameStart[0].length; yi += 1) {\n                    // On cherche sa nouvelle position\n                    for (xj = 0; xj &lt; gameState.length; xj += 1) {\n                        for (yj = 0; yj &lt; gameState[0].length; yj += 1) {\n                            // On trouve la nouvelle position.\n                            if (gameStart[xi][yi][1] === gameState[xj][yj][1]) {\n                                // On récupère les coordonnées de la nouvelle position.\n                                if (gameStart[xi][yi][0] === true) {\n                                    newPosTop = parseInt((squareHeight * yj) - $(\".taquin-\" + xi + \"-\" + yi).position().top, 10) + \"px\";\n                                    newPosLeft = parseInt((squareWidth * xj) - $(\".taquin-\" + xi + \"-\" + yi).position().left, 10) + \"px\";\n\n                                    $(\".taquin-\" + xi + \"-\" + yi).animate({\n                                        top: \"+=\" + newPosTop,\n                                        left: \"+=\" + newPosLeft\n                                    });\n                                } else {\n                                    $(\".taquin-\" + xi + \"-\" + yi).css({\n                                        \"top\": (squareHeight * yj),\n                                        \"left\": (squareWidth * xj)\n                                    });\n                                    break;\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n        // Démarrer le jeu\n        function launcher(generate) {\n            // On enlève l'intialisation de jeu.\n            generate.find(\".taquin-part\").unbind(\"click\");\n\n            // On cherche l'élément vide.\n            var empty = getEmpty();\n\n            $(\".\" + empty[2]).animate({ opacity: \"0\" }, function () {\n                // On le cache.\n                $(this).hide();\n\n                // On mélange le jeu.\n                randomGame(params.mixing);\n\n                // Annules toutes les animations s'il y en a de pas finie.\n                generate.find(\".taquin-part\").clearQueue();\n\n                // Permettre le déplacement des pièces, jeu jouable !\n                generate.find(\".taquin-part\").bind(\"click\", function () {\n                    clickFunction(generate, $(this));\n                });\n            });\n        }\n\n        // Quand on clique sur une partie après le lancement du jeu.\n        clickFunction = function (generate, source) { // rempli ici mais défini plus haut car appelé dans la fonction d'au dessus.\n            var empty,\n                moveTop = 0,\n                moveLeft = 0,\n                tempTop = 0,\n                tempLeft = 0,\n                temp,\n\n            // Identifier l'élément.\n                id = getId(source),\n\n            // Trouver sa position dans le jeu.\n                coord = getCoord(id),\n\n            // Vérifier si il est déplaçable.\n                isMovable = getIsMovable(coord[0], coord[1]);\n\n            // Si il est déplaçable, interchanger les positions.\n            if (isMovable) {\n                // Trouver l'élément vide.\n                empty = getEmpty();\n\n                // On trouve les déplacements pour l'animation.\n                generate.find(\".\" + empty[2]).show();\n                moveTop = generate.find(\".\" + id).position().top - generate.find(\".\" + empty[2]).position().top;\n                moveLeft = generate.find(\".\" + id).position().left - generate.find(\".\" + empty[2]).position().left;\n                generate.find(\".\" + empty[2]).hide();\n\n                //On met les variable en temporaire pour l'interchangement.\n                tempTop = source.position().top;\n                tempLeft = source.position().left;\n\n                // On inverse les positions de l'éléments vide.\n                temp = gameState[coord[0]][coord[1]];\n                gameState[coord[0]][coord[1]] = gameState[empty[0]][empty[1]];\n                gameState[empty[0]][empty[1]] = temp;\n\n                // On anime le changement.\n                source.unbind(\"click\").animate({\n                    top: \"-=\" + moveTop,\n                    left: \"-=\" + moveLeft\n                }, function () {\n                    source.bind(\"click\", function () {\n                        clickFunction(generate, source);\n                    });\n\n                    // Si l'état initial après animation est le même que l'état actuel, on a fini le jeu.\n                    if (gameState.toString() === gameStart.toString()) {\n                        // On enlève les fonctions de déplacement.\n                        generate.find(\".taquin-part\").unbind(\"click\");\n\n                        // On cherche l'élément vide pour le ré-afficher.\n                        var empty = getEmpty();\n                        $(\".\" + empty[2]).show().animate({ opacity: \"1\" }, function () {\n                            // On replace le mécanisme de démarrage du jeu.\n                            generate.find(\".taquin-part\").bind(\"click\", function () {\n                                launcher(generate);\n                            });\n                            // On exécute la fonction de réussite.\n                            params.success();\n                        });\n                    }\n                });\n\n                generate.find(\".\" + empty[2]).css({\n                    \"top\": tempTop + \"px\",\n                    \"left\": tempLeft + \"px\"\n                });\n            }\n        };\n\n        // Fonction exécutée sur chaque élément sélectionné comme model pour devenir un taquin.\n        function taquin(generate, imageOriginalSize) {\n            var gameDivision = params.division,\n                imageWidth = 0,\n                imageHeight = 0,\n                xi = 0,\n                yi = 0,\n                backgroundSizeString;\n\n            // Récupère la largeur et hauteur des partis du taquin.\n            if (parseInt(params.width, 10) !== 0) { imageWidth = params.width; } else { imageWidth = imageOriginalSize[0]; }\n            if (parseInt(params.height, 10) !== 0) { imageHeight = params.height; } else { imageHeight = imageOriginalSize[1]; }\n            squareWidth = Math.round(imageWidth / gameDivision);\n            squareHeight = Math.round(imageHeight / gameDivision);\n\n            // Initialise l'état initial et actuelle du jeu.\n            gameStart = initialiseGameVar(gameDivision);\n            gameState = initialiseGameVar(gameDivision);\n\n            generate.css({\n                \"position\": \"relative\",\n                \"width\": imageWidth + \"px\",\n                \"height\": imageHeight + \"px\"\n            });\n\n            // Générer les partis du taquin.\n            for (xi = 0; xi &lt; gameStart.length; xi += 1) {\n                for (yi = 0; yi &lt; gameStart[0].length; yi += 1) {\n                    backgroundSizeString = ((params.width != 0) ? params.width : imageOriginalSize[0]) + \"px \" + ((params.height != 0) ? params.height : imageOriginalSize[1]) + \"px\";\n                    $(\"&lt;div&gt;\", {\n                        css: {\n                            cursor: \"pointer\",\n                            backgroundImage: \"url('\" + image + \"')\",\n                            backgroundPosition : \"-\" + parseInt(squareWidth * xi, 10) + \"px -\" + parseInt(squareHeight * yi, 10) + \"px\",\n                            \"background-size\" : backgroundSizeString,\n                            position: \"absolute\",\n                            top: parseInt(squareHeight * yi, 10) + \"px\",\n                            left: parseInt(squareWidth * xi, 10) + \"px\",\n                            width: squareWidth + \"px\",\n                            height: squareHeight + \"px\"\n                        }\n                    }).appendTo(generate).addClass(gameStart[xi][yi][1]).addClass(\"taquin-part\");\n                }\n            }\n\n            // Permettre de démarrer le jeu.\n            generate.find(\".taquin-part\").bind(\"click\", function () {\n                launcher(generate);\n            });\n        }\n\n        // S'execute pour chaque élément 'fn' trouvé.\n        return this.each(function () {\n\n            // Information sur l'image.\n            var waitForImageSize,\n                forImage = new Image(),\n                element = $(this),\n                imageSize = [];\n\n            forImage.src = image;\n\n            // Quand on obtient une taille pour l'image, on execute le mécanisme.\n            waitForImageSize = setInterval(function () {\n                if (forImage.width !== 0) {\n                    imageSize[0] = forImage.width;\n                    imageSize[1] = forImage.height;\n\n                    // Génère l'élément qui contiendra les partis du taquin.\n                    var generate = $(\"&lt;div&gt;\").addClass(\"taquin-generate\");\n                    if (element.next().hasClass(\"taquin-generate\")) {\n                        element.next().remove();\n                    }\n                    element.after(generate);\n\n                    taquin(generate, imageSize);\n                    clearInterval(waitForImageSize);\n                }\n            }, 50);\n        });\n    };\n}(jQuery));\n        </pre>\n    </div>\n</div>\n\n<h2>Documentation</h2>\n\n<h3>Utilisation</h3>\n\n<p>La fonction de base s'utilise comme suit :</p>\n\n<ul>\n    <li>$(<span class=\"highlighting\">dom_element</span>).gameTaquin(<span class=\"highlighting\">image</span>);</li>\n</ul>\n\n<p>Exemple sur l'élément de DOM suivant <span class=\"highlighting\">&lt;div id=\"taquin\"&gt;&lt;/div&gt;</span>.</p>\n\n<pre class=\"prettyprint linenums lang-js\">\n$(\"#taquin\").gameTaquin(\"http://blog.haeresis.fr/upload/image/image-taquin.jpg\");\n</pre>\n\n<h4>image</h4>\n\n<p>Ceci réprésente l'adresse de l'image qui sera fractionnée pour être jouée.</p>\n\n<h3>Paramètres</h3>\n\n<p>Les paramètres se donnent sous forme d'objet JSON après l'url de l'image :</p>\n\n<ul>\n    <li>$(DOM_ELEMENT).gameTaquin(IMAGE_URL, <span class=\"highlighting\">{ PARAMETERS... }</span>);</li>\n</ul>\n\n<p>Les paramètres sont cumulables comme dans cet exemple.</p>\n\n<pre class=\"prettyprint linenums lang-js\">\n$(\"#taquin\").gameTaquin(\n    \"http://blog.haeresis.fr/upload/image/image-taquin.jpg\",\n    {\n        division: 6,\n        hidePart: \"tl\",\n        success: \"Félicitation !\"\n    }\n);\n</pre>\n\n<h4>width</h4>\n<p>Indique la taille que fait l'image en largeur. Si rien ou zéro est précisé, la taille par défaut est celle de l'image.</p>\n\n<h4>height</h4>\n<p>Indique la taille que fait l'image en hauteur. Si rien ou zéro est précisé, la taille par défaut est celle de l'image.</p>\n\n<h4>division</h4> \n<p>Indique le nombre de carré en largeur/hauteur qui compose le taquin.</p>\n\n<h4>hidePart</h4> \n<p>Indique quelle partie du carré est masquée pour faire office de trou pour les déplacements. Les valeurs possibles sont Haut Gauche \"tl\", Haut droite \"tr\", Bas gauche \"bl\", Bas droite \"br\" (par défaut).</p>\n\n<h4>mixing</h4> \n<p>Indique le nombre de déplacement fait aléatoirement pour simuler un mélange à la main du taquin.</p>\n\n<h4>success</h4>\n<p>Si écrasé par une fonction, exécute cette fonction en cas de complétion du taquin. Sinon, renvoi sous chaine de caractère le message passé dans un \"alert()\".</p>", "dates" : { "published" : { "$date" : 1359705720000 }, "updated" : [] }, "others" : { "markdown" : true, "published" : false }, "script" : "(function () {\n\tvar $scriptTaquin = $(\".script-taquin\"),\n\t\t$taquin = $(\".taquin\"),\n\t\t$taquinResult = $(\".taquin-result\"),\n\t\t$taquinUrl;\n\n\tif ($taquin.length > 0) {\n\t\tif ($scriptTaquin.length === 0) {\n\t\t\t$body.append('<\\script class=\"script-taquin\" type=\"text/javascript\" src=\"./javascript/jquery/jquery.game-taquin.js\">');\n\t\t}\n\n\t\t$taquin.gameTaquin(\"http://blog.haeresis.fr/upload/image/image-taquin.jpg\");\n\n\t\t$taquinResult.val(\n\t\t\t('&lt;script type=\"text/javascript\" src=\"jquery/plugin/jquery.game-taquin.js\"&gt;&lt;/script&gt;\\r\\n' +\n\t\t\t'&lt;script type=\"text/javascript\"&gt;\\r\\n' +\n\t\t\t'\\t$(\"#taquin\").gameTaquin(\"http://blog.haeresis.fr/upload/image/image-taquin.jpg\");\\r\\n' +\n\t\t\t\"&lt;/script&gt;\").replace(/&lt;/gi,\"<\").replace(/&gt;/gi,\">\")\n\t\t);\n\n\t\t$taquin.hide();\n\n\t\t$(\"#validation\").click(function () {\n\t\t\t$taquinUrl = $(\"#taquin-url\");\n\n\t\t\tconsole.log(typeof $taquin.gameTaquin);\n\n\t\t\t/*$taquin.gameTaquin(\n\t\t\t\t$taquinUrl.attr(\"value\"), \n\t\t\t\t{ \n\t\t\t\t\twidth: $(\"#taquin-width\").attr(\"value\"), \n\t\t\t\t\theight: $(\"#taquin-height\").attr(\"value\"), \n\t\t\t\t\tdivision: $(\"#taquin-division\").attr(\"value\"), \n\t\t\t\t\thidePart: $(\"#taquin-hide-part option:selected\").attr(\"value\"), \n\t\t\t\t\tmixing: $(\"#taquin-mixing\").attr(\"value\")\n\t\t\t\t}\n\t\t\t);*/\n\n\t\t\t$taquinResult.val(\n\t\t\t\t('&lt;script type=\"text/javascript\" src=\"jquery/plugin/jquery.game-taquin.js\"&gt;&lt;/script&gt;\\r\\n' +\n\t\t\t\t'&lt;script type=\"text/javascript\"&gt;\\r\\n' +\n\t\t\t\t'\\t$(\"#taquin\").gameTaquin(' + '\\r\\n' +\n\t\t\t\t\t'\\t\\t\"' + $taquinUrl.attr(\"value\") + '\", ' + \"\\r\\n\" +\n\t\t\t\t\t\"\\t\\t{\\r\\n\" + \n\t\t\t\t\t\"\\t\\t\\t\" + \"width: \" + $(\"#taquin-width\").attr(\"value\") + \", \\r\\n\" +\n\t\t\t\t\t\"\\t\\t\\t\" + \"height: \" + $(\"#taquin-height\").attr(\"value\") + \", \\r\\n\" +\n\t\t\t\t\t\"\\t\\t\\t\" + \"division: \" + $(\"#taquin-division\").attr(\"value\") + \", \\r\\n\" +\n\t\t\t\t\t\"\\t\\t\\t\" + 'hidePart: \"' + $(\"#taquin-hide-part option:selected\").attr(\"value\") + '\", \\r\\n' +\n\t\t\t\t\t\"\\t\\t\\t\" + \"mixing: \" + $(\"#taquin-mixing\").attr(\"value\") + \", \\r\\n\" +\n\t\t\t\t\t\"\\t\\t}\\r\\n\" +\n\t\t\t\t\"\\t);\\r\\n\" +\n\t\t\t\t\"&lt;/script&gt;\").replace(/&lt;/gi,\"<\").replace(/&gt;/gi,\">\")\n\t\t\t);\n\t\t});\n\t}\n}())", "stylesheet" : ".text form,\n.taquin-generate {\n    margin-top: 16px;\n}", "title" : "<span>Jeu</span> du Taquin en <span>jQuery</span> sur vos sites !", "urn" : "jeu-du-taquin-en-jquery-pour-vos-sites" }
{ "_id" : { "$oid" : "530f5f63620731fe86cb71a2" }, "cache" : { "comment" : { "number" : 3 } }, "categories" : [ { "$oid" : "5310456355dfd5f7698d48c1" }, { "$oid" : "5310456355dfd5f7698d48c2" }, { "$oid" : "5310456355dfd5f7698d48c0" }, { "$oid" : "5310456355dfd5f7698d48ba" } ], "content" : "<img class=\"float-left\" src=\"./upload/image/ie10.png\" alt=\"Logo Internet Explorer 10\" width=\"80\" height=\"80\" />\r\n\r\n<p>Internet Explorer 10, la dernière version d'Internet Explorer à l'heure où j'écris ce billet, est le navigateur par défaut des systèmes d'exploitations Windows 8 et Windows Phone 8 (dans sa version mobile). Cependant, depuis le 26 février 2013, IE10 est également disponible sur Windows 7 ce qui m'amène à cet article puisque j'ai enfin décidé de l'installer. Jetons un œil à cette version et surtout à la possibilité formidable de tester les anciennes versions d'IE dans IE10.</p>\r\n\r\n<h2>Faut-il installer IE10 sous Windows 7 ?</h2>\r\n\r\n<p>J'ai mis quelques semaines avant d'installer cette nouvelle version (je suis sous Seven) tout simplement parce que je ne savais pas répondre aux questions suivantes :</p>\r\n<ul>\r\n<li>Windows 8 est obligatoire pour IE10 ?</li>\r\n<li>Est-ce que IE9 et IE10 peuvent être simultanément installé ?</li>\r\n<li>Y a-t-il un mode de compatibilité IE9 dans IE10 ?</li>\r\n</ul>\r\n\r\n<p>En effet dans mon environnement actuel je développe mes interfaces web en prenant soin de tester le rendu dans IE9, FF, Chrome, Opera et Safari ainsi que sur <a href=\"https://www.google.fr/search?q=Tester+IE7%2FIE8+avec+une+VM\" title=\"Tester IE7/IE8 avec une VM\">IE7/IE8 en passant par une machine virtuelle embarquant un Windows XP</a> n'ayant pas obtenu l'entière satisfaction de <a href=\"https://www.google.fr/search?q=IETester\" title=\"Où télécharger IETester\">IETester</a> notamment du point de vue du débogue JavaScript. Je freinais des quatre pieds à l'idée de devoir passer dans une VM pour tester mes rendus sous IE9 une fois IE10 installé.</p>\r\n\r\n<p class=\"highlighting\">Soufflez un bon coup, vous pouvez passer de IE9 à IE10 dès à présent, mettre de côté vos VM IE7/IE8 et laissez tomber IETester : Internet Explorer 10 vous permet de tester les anciennes versions d'IE ! Rien que ça. Voilà comment procéder.</p>\r\n\r\n<h3>IE10 sous Vista ou XP</h3>\r\n\r\n<p>Je fais l'impasse sur les systèmes non Windows, mais afin de pousser les utilisateurs à la migration Seven et Eight, Microsoft n'a pas prévu de version pour Vista et XP.\r\n\r\n<h2>Comment debugger les anciens IE avec Internet Explorer 10</h2>\r\n\r\n<h3>Où télécharger Internet Explorer 10</h3>\r\n\r\n<p>Tout d'abord, cela va de sois, il faut tourner sous Windows 7 ou Windows 8 et vous rendre à cette adresse : <a href=\"http://windows.microsoft.com/fr-fr/internet-explorer/downloads/ie-10/worldwide-languages\" title=\"Télécharger Internet Explorer 10\">http://windows.microsoft.com/fr-fr/internet-explorer/downloads/ie-10/worldwide-languages</a>. Choisissez ensuite votre version et votre langue.</p>\r\n<p>Après l'installation et le redémarrage de votre machine. Ouvrez IE et... et ça a vraiment marché ?</p>\r\n\r\n<h3>La touche F12 pardi, la touche F12 !</h3>\r\n\r\n<div class=\"center\">\r\n<img class=\"openable\" src=\"./upload/image/ie10-development-f12.png\" alt=\"Outils de développement F12\" width=\"500\" height=\"340\" style=\"width: 76%;height: auto;\" />\r\n</div>\r\n\r\n<p>A l'instar de ses autres cousins navigateurs et même de ses vieux frères l'utilisation du mode de compatibilité Internet Explorer 10 se cache derrière la touche F12 qui affichera les outils pour développeur. Si cette touche est cassée sur votre clavier et que vous ne voulez pas en changer, vous pouvez également passer sur l'icône rouage et cliquer sur « Outils de développement F12 ».</p>\r\n\r\n<h3>Différence entre Mode navigateur et Mode de document</h3>\r\n\r\n<p>L'interface pour les développeurs se présente comme ci-dessous :</p>\r\n\r\n<div class=\"center\">\r\n<img class=\"openable\" src=\"./upload/image/ie10-development-view.png\" alt=\"Aperçu de l'outil de développement\" width=\"500\" height=\"299\" style=\"width: 76%;height: auto;\" />\r\n</div>\r\n\r\nLa zone bleue dans le menu est le « Mode de document » et juste à sa gauche se trouve le « Mode navigateur ».\r\n\r\n<h4>Mode navigateur</h4>\r\n\r\n<p>Sans que visuellement vous ne le discerniez, IE10 va se faire passer auprès des serveurs pour l'IE que vous allez lui demander d'être. Il va donc requêter et traiter les réponses comme s'il était le navigateur en question.</p>\r\n<ul>\r\n<li><span class=\"highlighting\">Internet Explorer 10</span> : Mode par défaut. Le navigateur se comporte comme un IE10.</li>\r\n<li><span class=\"highlighting\">Affichage de compatibilité Internet Explorer 10</span> : Ce mode va choisir dans quel IE il est le plus judicieux de traiter le rendu d'une page.</li>\r\n<li><span class=\"highlighting\">Internet Explorer 9</span> : Force le navigateur à se faire passer pour IE9.</li>\r\n<li><span class=\"highlighting\">Internet Explorer 8</span> : Force le navigateur à se faire passer pour IE8.</li>\r\n<li><span class=\"highlighting\">Internet Explorer 7</span> : Force le navigateur à se faire passer pour IE7.</li>\r\n</ul>\r\n\r\n<h4>Mode de document</h4>\r\n\r\n<p>IE10 va traiter le rendu visuel d'une page comme s'il avait été exécuté par le navigateur en question en prenant volontairement en compte les bogues inhérent à la version et son non respect des standards.</p>\r\n\r\n<ul>\r\n<li><span class=\"highlighting\">Normes (Pages par défaut)</span> : Prend en compte les DOCTYPEs et respecte les normes du web pour le rendu de la page.</li>\r\n<li><span class=\"highlighting\">Quirks</span> : Passe en mode Quirks (voir plus bas).</li>\r\n<li><span class=\"highlighting\">Normes d'Internet Explorer 9</span> : Affiche la page avec la totalité des standards respectés/connus de IE9.</li>\r\n<li><span class=\"highlighting\">Normes d'Internet Explorer 8</span> : Affiche la page avec la totalité des standards respectés/connus de IE8.</li>\r\n<li><span class=\"highlighting\">Normes d'Internet Explorer 7</span> : Affiche la page avec la totalité des standards respectés/connus de IE7.</li>\r\n</ul>\r\n\r\n<div class=\"best-practice\">\r\n\t<div class=\"title\">Un petit exemple</div>\r\n\t<div class=\"content\">\r\n\t\t<p>Si je visionne cette page en Mode de document « Normes d'Internet Explorer 9 » tout en restant en Mode navigateur « Internet Explorer 10 » le titre de la page s'affichera en blanc et sera illisible car les normes interprétées par IE9 ne prennent pas en compte la propriété CSS3 « text-shadow ». Pourtant j'ai indiqué grâce au commentaires conditionnels que si IE plus petit que 10, le texte devait être rouge (pour être lisible). Ce commentaire n'est pas interprété par le navigateur car il se dit IE10 interprétant comme IE9.</p>\r\n\t\t<p class=\"highlighting\">Pour avoir le rendu tel que IE9 le donnerait il faut bien switcher en Mode navigateur IE9 ET en Mode de document IE9.</p>\r\n\t</div>\r\n</div>\r\n\r\n<h3>Qu'est-ce que le mode Quirks ?</h3>\r\n\r\n<p>Cela permet de repasser à l'époque ou il n'y avait pas de normes W3C pour afficher ou déboguer les pages telles qu'elles ont été conçues à cette époque.Je vous invite à lire cet article intéressant sur le mode Quirks et sur les différences notables de rendu : <a href=\"http://www.lesintegristes.net/2008/04/06/que-se-passe-t-il-en-mode-quirks-traduction/\" title=\"Que se passe-t-il en mode Quirks ?\">Que se passe-t-il en mode Quirks ?</a></p>\r\n\r\n<h3>Pourquoi il n'y a pas de mode compatibilité IE6 dans IE10 ?</h3>\r\n\r\n<p>C'est vrai que cela peut sembler étrange. On voit bien IE5 dans la liste mais pas IE6. On peut supposer ceci :</p>\r\n\r\n<ul>\r\n<li>Le Quirks Internet Explorer 5 n'est en réalité que le Quirks IE tel que supporté par Internet Explorer 5.5 incluant peut-être le rendu Internet Explorer 6.</li>\r\n<li>Peut-être n'a-t-il pas été inclus car il ne représentait pas vraiment le réel rendu IE6 puisque celui-ci dépend peut-être de sa version Win98 ou XP.</li>\r\n</ul>\r\n\r\n<p>Cependant, je n'ai pas la réponse. Si vous l'avez, n'hésitez pas à m'en faire part, cela m'intéresse.</p>\r\n\r\n<h2>Pour conclure</h2>\r\n\r\n<p>L'outil intégré de IE10 est une excellente alternative pendant la phase de développement à IETester ou même un affichage en VM dès lors qu'on décide de supporter les sites jusqu'à IE7.</p>\r\n\r\n<p>Cependant, avant de passer un site en environnement de qualité, je recommande tout de même de faire un test dans une VM en ce qui concerne IE7 et IE8 mais on a pas de grand soucis à se faire pour IE9.<p>", "dates" : { "published" : "2013-03-14 12:12:00", "updated" : [ "2013-03-14 12:12:00" ] }, "title" : "<span>Tester</span> la <span>compatibilité</span> IE7, IE8 et IE9 avec <span>IE10</span>", "urn" : "tester-la-compatibilite-ie7-ie8-ie9-avec-ie10" }
{ "_id" : { "$oid" : "530f5f63620731fe86cb71a3" }, "cache" : { "comment" : { "number" : 4 } }, "categories" : [ { "$oid" : "530cc2f27188099a66e9bcec" }, { "$oid" : "5310456355dfd5f7698d48ba" }, { "$oid" : "5310456355dfd5f7698d48b9" }, { "$oid" : "5310456355dfd5f7698d48c3" }, { "$oid" : "530ef6a6789c1a55e4fde0af" }, { "$oid" : "5310456355dfd5f7698d48bc" }, { "$oid" : "5310456355dfd5f7698d48b8" }, { "$oid" : "5310456355dfd5f7698d48bb" } ], "content" : "<p>Les ergonomes s'accordent à dire qu'un des moyens pour informer l'utilisateur qu'il peut interagir avec un élément est de changer son apparence au survol de la souris. On peut réaliser cela rapidement en CSS avec plus ou moins d'effets et de complexité ou utiliser JavaScript pour faire quelque chose de plus poussé. Il va être question ici d'étudier une autre possibilité du survol de la souris qui consiste en l'apparition et l'animation d'éléments autres que l'objet survolé. En outre cet article va vous présenter la manière de gérer des menus contextuels en passant par jQuery et même CSS3.</p>\r\n\r\n<h2>Les bases du survol en CSS</h2>\r\n\r\n<p>Petit rappel donc sur la possibilité de changer le style d'un élément au survol de la souris grâce aux CSS en utilisant la <span class=\"eye-catching\">pseudo-class</span> <span class=\"highlighting\">:hover</span>. Celle-ci est compatible IE7+ et autres navigateurs sur toutes balises HTML survolable et seulement fonctionnelle sur la balise &lt;a&gt; dans le cas d'une utilisation IE6- (comprendre ici IE6 et versions inférieures). Comme toute <span class=\"eye-catching\">pseudo-class</span> elle ne fonctionne pas dans l'<span class=\"eye-catching\">attribut HTML</span> <span class=\"highlighting\">style</span>.</p>\r\n\r\n<h3>Exemple de menu simple avec :hover</h3>\r\n\r\n<p class=\"highlighting\">HTML dans &lt;body&gt;</p>\r\n\r\n<pre class=\"prettyprint linenums lang-html\">\r\n&lt;nav class=\"menu\"&gt;\r\n\t&lt;div&gt;\r\n\t\t&lt;a href=\"\" title=\"\"&gt;Navigateurs&lt;/a&gt;\r\n\t\t&lt;ul&gt;\r\n\t\t\t&lt;li&gt;&lt;a href=\"\" title=\"\"&gt;Chrome&lt;/a&gt;&lt;/li&gt;\r\n\t\t\t&lt;li&gt;&lt;a href=\"\" title=\"\"&gt;Firefox&lt;/a&gt;&lt;/li&gt;\r\n\t\t\t&lt;li&gt;&lt;a href=\"\" title=\"\"&gt;IE&lt;/a&gt;&lt;/li&gt;\r\n\t\t&lt;/ul&gt;\r\n\t&lt;/div&gt;\r\n\t&lt;div&gt;\r\n\t\t&lt;a href=\"\" title=\"\"&gt;OS&lt;/a&gt;\r\n\t\t&lt;ul&gt;\r\n\t\t\t&lt;li&gt;&lt;a href=\"\" title=\"\"&gt;Windows&lt;/a&gt;&lt;/li&gt;\r\n\t\t\t&lt;li&gt;&lt;a href=\"\" title=\"\"&gt;Linux&lt;/a&gt;&lt;/li&gt;\r\n\t\t\t&lt;li&gt;&lt;a href=\"\" title=\"\"&gt;Mac&lt;/a&gt;&lt;/li&gt;\r\n\t\t&lt;/ul&gt;\r\n\t&lt;/div&gt;\r\n\t&lt;div&gt;\r\n\t\t&lt;a href=\"\" title=\"\"&gt;Appareils&lt;/a&gt;\r\n\t\t&lt;ul&gt;\r\n\t\t\t&lt;li&gt;&lt;a href=\"\" title=\"\"&gt;PC/MAC&lt;/a&gt;&lt;/li&gt;\r\n\t\t\t&lt;li&gt;&lt;a href=\"\" title=\"\"&gt;Smartphone&lt;/a&gt;&lt;/li&gt;\r\n\t\t&lt;/ul&gt;\r\n\t&lt;/div&gt;\r\n&lt;/nav&gt;\r\n</pre>\r\n\r\n<p class=\"highlighting\">CSS avec link</p>\r\n\r\n<pre class=\"prettyprint linenums lang-css\">\r\n/** On prévoit de ne pas laisser écouler les flottants hors du menu. **/\r\n.menu:after { \r\n\tcontent: \"\"; /* Génération d'un élément après .menu. */\r\n\tdisplay: block; /* Donner un comportement à l'élément. */\r\n\tclear: both; /* Pas de flottement à gauche ou à droite. */\r\n}\r\n\r\n/** On arrondit la gauche et la droite du menu. **/\r\n.menu div:first-child { /* Gauche correspond au premier élément. */\r\n\tborder-top-left-radius: 8px;\r\n\tborder-bottom-left-radius: 8px;\r\n}\r\n.menu div:last-child {  /* Droite correspond au dernier élément. */\r\n\tborder-top-right-radius: 8px;\r\n\tborder-bottom-right-radius: 8px;\r\n}\r\n\r\n.menu div {\r\n\tposition: relative; /* Définition de &lt;div&gt; comme référence de positionnement. */\r\n\tfloat: left; /* display: inline-block; fait l'affaire si pas de support pour IE7. */\r\n\tpadding: 8px;\r\n\tbackground-color: #bbbbbb;\r\n\tbackground: linear-gradient(to bottom, #dddddd, #bbbbbb); /* Ajouter préfixes propriétaires -webkit-, -o-, etc... */\r\n}\r\n.menu div ul {\r\n\tposition: absolute; /* Placer l'élément par rapport à son parent et hors du flux. */\r\n\tleft: 0;\r\n\tdisplay: none; /* Cacher l'élément. */\r\n\tz-index: 7;\r\n\tmargin-left: 0;\r\n\tbackground-color: #cccccc;\r\n}\r\n\r\n/** Utilisation de :hover pour afficher les sous-liens au survol de la souris. **/\r\n.menu div:hover ul {\r\n\tdisplay: block;\r\n}\r\n\r\n.menu li {\r\n\tlist-style: none;\r\n}\r\n</pre>\r\n\r\n<div class=\"best-practice\">\r\n\t<div class=\"title\">Aperçu</div>\r\n\t<div class=\"content\">\r\n\t\t<nav class=\"ex-menu-1\">\r\n\t\t\t<div>\r\n\t\t\t\t<a href=\"\" title=\"\">Navigateurs</a>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li><a href=\"\" title=\"\">Chrome</a></li>\r\n\t\t\t\t\t<li><a href=\"\" title=\"\">Firefox</a></li>\r\n\t\t\t\t\t<li><a href=\"\" title=\"\">IE</a></li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<a href=\"\" title=\"\">OS</a>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li><a href=\"\" title=\"\">Windows</a></li>\r\n\t\t\t\t\t<li><a href=\"\" title=\"\">Linux</a></li>\r\n\t\t\t\t\t<li><a href=\"\" title=\"\">Mac</a></li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<a href=\"\" title=\"\">Appareils</a>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li><a href=\"\" title=\"\">PC/MAC</a></li>\r\n\t\t\t\t\t<li><a href=\"\" title=\"\">Smartphone</a></li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t</nav>\r\n\t</div>\r\n</div>\r\n\r\n<h3>Un peu d'animation au survol souris avec transition:</h3>\r\n\r\n<p>Il faut faire attention avec la <span class=\"eye-catching\">propriété</span> <span class=\"highlighting\">transition:</span> CSS3. Cette propriété est triviale pour de l'animation au survol de la souris sur un élément pour changer sa propre apparence et se passer de JavaScript. Cependant, dans le cas de l'exemple précédent, ou le hover modifie l'apparence d'un autre élément que celui survolé, il faut garder à l'esprit plusieurs choses :</p>\r\n\r\n<ul>\r\n\t<li>La transition sera bloquée si l'objet passe de <span class=\"eye-catching\">display: none;</span> vers un autre affichage.</li>\r\n\t<li>La transition ne fonctionnera pas vers une valeur automatique (<span class=\"eye-catching\">height: auto;</span>).</li>\r\n\t<li>La transition ne fonctionnera pas sans ses préfixes propriétaires (-webkit-, -o-, -moz-...) à ce jour.</li>\r\n</ul>\r\n\r\n<p>Modifions la CSS du code précédent pour prendre en compte ces remarques. Il va falloir cacher le menu sans utiliser <span class=\"eye-catching\">display: none;</span>. On va faire appel à <span class=\"highlighting\">heigh:</span> et <span class=\"highlighting\">overflow:</span></p>\r\n\r\n<pre class=\"prettyprint linenums lang-css\">\r\n/*** ... ***/\r\n\r\n.menu div ul {\r\n\t/*** ... ***/\r\n\r\n\t/* display: none; &lt;= On retire display: none;. */\r\n\r\n\t/*** ... ***/\r\n\r\n\t/** On simule le display: none; d'une autre façon. **/\r\n\theight: 0;\r\n\tpadding: 0;\r\n\toverflow: hidden;\r\n\r\n\t/** Au survol de l'élément, on changera sa hauteur avec transition pendant 0.5s. **/\r\n\ttransition: height 0.5s; /* Ajouter -webkit-, -o-, etc... */\r\n}\r\n\r\n.menu div:hover ul {\r\n\t/* display: block; &lt;= Plus besoin de display:block;. */\r\n\theight: 80px; /* Obligation de forcer la valeur de la propriété de transition sur autre que auto. */\r\n}\r\n\r\n/*** ... ***/\r\n\r\n/** On remplace la perte padding de &lt;ul&gt; par des marges sur les &lt;li&gt;. **/\r\n.menu li {\r\n\tmargin: 0 8px 0 8px;\r\n}\r\n.menu li:first-child {\r\n\tmargin-top: 8px;\r\n}\r\n.menu li:last-child {\r\n\tmargin-bottom: 8px;\r\n}\r\n</pre>\r\n\r\n<div class=\"best-practice\">\r\n\t<div class=\"title\">Aperçu</div>\r\n\t<div class=\"content\">\r\n\t\t<nav class=\"ex-menu-2\">\r\n\t\t\t<div>\r\n\t\t\t\t<a href=\"\" title=\"\">Navigateurs</a>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li><a href=\"\" title=\"\">Chrome</a></li>\r\n\t\t\t\t\t<li><a href=\"\" title=\"\">Firefox</a></li>\r\n\t\t\t\t\t<li><a href=\"\" title=\"\">IE</a></li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<a href=\"\" title=\"\">OS</a>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li><a href=\"\" title=\"\">Windows</a></li>\r\n\t\t\t\t\t<li><a href=\"\" title=\"\">Linux</a></li>\r\n\t\t\t\t\t<li><a href=\"\" title=\"\">Mac</a></li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<a href=\"\" title=\"\">Appareils</a>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li><a href=\"\" title=\"\">PC/MAC</a></li>\r\n\t\t\t\t\t<li><a href=\"\" title=\"\">Smartphone</a></li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t</nav>\r\n\t</div>\r\n</div>\r\n\r\n<p class=\"eye-catching\">On note un changement pour le troisième élément &lt;ul&gt; puisque sa hauteur a été imposée. Il faudrait donc régler toutes les hauteurs en fonction du nombre d'élément &lt;i&gt; (pas très pratique...).</p>\r\n\r\n<h2>Animation et survol avec JavaScript et jQuery</h2>\r\n\r\n<p>Nous allons voir ici comment produire l'effet CSS3 précédent en JavaScript avec la librairie jQuery. Cela permettra aux navigateurs ne supportant pas la <span class=\"eye-catching\">propriété</span> CSS3 <span class=\"highlighting\">transition:</span> de tout de même afficher cette animation. Nous allons dans un premier temps conserver la CSS précédente, mais couper la transition CSS3.</p>\r\n\r\n<pre class=\"prettyprint linenums lang-css\">\r\n/*** ... ***/\r\n\r\n.menu div ul {\r\n\t/*** ... ***/\r\n\r\n\t/* transition: height 0.5s; &lt;= Sera géré en JavaScript. */\r\n}\r\n\r\n.menu div:hover ul {\r\n\t/* height: 80px; &lt;= Peut repasser en automatique. */\r\n\theight: auto;\r\n}\r\n\r\n/*** ... ***/\r\n</pre>\r\n\r\n<h3>Equivalence simple</h3>\r\n\r\n<p>C'est parti pour un code JavaScript équivalent à <span class=\"highlighting\">transition:</span>. N'oubliez pas d'inclure jQuery.</p>\r\n\r\n<pre class=\"prettyprint linenums lang-javascript\">\r\n$(document).ready(function () { // Si le script n'est pas en pied de page, on va attendre le chargement complet du DOM.\r\n\r\n\t/* Pour chacune des 3 &lt;div&gt; du menu, on va... */\r\n\t$(\".menu div\").each(function () {\r\n\t\tvar $ul = $(this).find(\"ul\"); // ...rendre accessible les variables dans les deux parties de hover...\r\n\r\n\t\t/* ...et initialiser un comportement au passage/retrait de la souris. */\r\n\t\t$(this).hover(function () {\r\n\t\t\t/* Pour le survol on... */\r\n\t\t\tvar tempHeight = $ul.css(\"height\", \"auto\").height(); // ...garde en mémoire la taille réelle de &lt;ul&gt; si affichée...\r\n\t\t\t$ul\r\n\t\t\t\t.height(0) // ...repart d'une hauteur de zéro...\r\n\t\t\t\t.stop() // ...stop l'éventuelle animation de fermeture...\r\n\t\t\t\t.animate({ height: tempHeight.toString() }, 500); // ...et on déclenche l'animation d'ouverture.\r\n\t\t}, function () {\r\n\t\t\t/* Pour le retrait on... */\r\n\t\t\t$ul\r\n\t\t\t\t.stop() // ...stop l'éventuelle animation d'ouverture...\r\n\t\t\t\t.animate({ height: \"0\" }, 500); // ...et on déclenche l'animation de fermeture.\r\n\t\t});\r\n\t});\r\n});\r\n</pre>\r\n\r\n<div class=\"best-practice\">\r\n\t<div class=\"title\">Aperçu</div>\r\n\t<div class=\"content\">\r\n\t\t<nav class=\"ex-menu-3\">\r\n\t\t\t<div>\r\n\t\t\t\t<a href=\"\" title=\"\">Navigateurs</a>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li><a href=\"\" title=\"\">Chrome</a></li>\r\n\t\t\t\t\t<li><a href=\"\" title=\"\">Firefox</a></li>\r\n\t\t\t\t\t<li><a href=\"\" title=\"\">IE</a></li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<a href=\"\" title=\"\">OS</a>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li><a href=\"\" title=\"\">Windows</a></li>\r\n\t\t\t\t\t<li><a href=\"\" title=\"\">Linux</a></li>\r\n\t\t\t\t\t<li><a href=\"\" title=\"\">Mac</a></li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<a href=\"\" title=\"\">Appareils</a>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li><a href=\"\" title=\"\">PC/MAC</a></li>\r\n\t\t\t\t\t<li><a href=\"\" title=\"\">Smartphone</a></li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t</nav>\r\n\t</div>\r\n</div>\r\n\r\n<h3>Effectuer l'animation avec plus de condition qu'un simple survol</h3>\r\n\r\n<p>Afin d'éviter l'ouverture intempestive de votre menu au passage de la souris au-dessus de celui-ci vous avez plusieurs alternatives qui s'offrent à vous. Je vais en fournir deux ici, mais libre à vous de trouver d'autres solutions.</p>\r\n\r\n<h4>N'effectuer le hover que si la souris reste plus d'un certain temps</h4>\r\n\r\n<pre class=\"prettyprint linenums lang-javascript\">\r\n$(document).ready(function () {\r\n\t$(\".menu div\").each(function () {\r\n\t\tvar \r\n\t\t\t$ul = $(this).find(\"ul\"),\r\n\t\t\ttempTimer; // On crée une variable pour manipuler le délai dans les deux parties du hover.\r\n\r\n\t\t$(this).hover(function () {\r\n\t\t\tvar tempHeight = $ul.css(\"height\", \"auto\").height();\r\n\t\t\t$ul.height(0);\r\n\t\t\ttempTimer = setTimeout(function () { // On déclenche l'animation avec un temps de latence.\r\n\t\t\t\t$ul\r\n\t\t\t\t\t.stop()\r\n\t\t\t\t\t.animate({ height: tempHeight.toString() }, 500);\r\n\t\t\t}, 1000); // On règle l'équivalence que l'on juge adapté. J'ai mis 1 seconde pour l'exemple.\r\n\t\t}, function () {\r\n\t\t\tclearTimeout(tempTimer); // Si on sort avant la fin du délai, on n'effectuera pas l'animation.\r\n\t\t\t$ul\r\n\t\t\t\t.stop()\r\n\t\t\t\t.animate({ height: \"0\" }, 500);\r\n\t\t});\r\n\t});\r\n});\r\n</pre>\r\n\r\n<div class=\"best-practice\">\r\n\t<div class=\"title\">Aperçu</div>\r\n\t<div class=\"content\">\r\n\t\t<nav class=\"ex-menu-4\">\r\n\t\t\t<div>\r\n\t\t\t\t<a href=\"\" title=\"\">Navigateurs</a>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li><a href=\"\" title=\"\">Chrome</a></li>\r\n\t\t\t\t\t<li><a href=\"\" title=\"\">Firefox</a></li>\r\n\t\t\t\t\t<li><a href=\"\" title=\"\">IE</a></li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<a href=\"\" title=\"\">OS</a>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li><a href=\"\" title=\"\">Windows</a></li>\r\n\t\t\t\t\t<li><a href=\"\" title=\"\">Linux</a></li>\r\n\t\t\t\t\t<li><a href=\"\" title=\"\">Mac</a></li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<a href=\"\" title=\"\">Appareils</a>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li><a href=\"\" title=\"\">PC/MAC</a></li>\r\n\t\t\t\t\t<li><a href=\"\" title=\"\">Smartphone</a></li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t</nav>\r\n\t</div>\r\n</div>\r\n\r\n<p class=\"eye-catching\">En passant rapidement la souris, on ne risque pas de déclencher d'ouverture. J'ai excessivement exagéré le délai à une seconde pour le mettre en évidence.</p>\r\n\r\n<h4>N'effectuer le hover que si la souris ne bouge plus</h4>\r\n\r\n<pre class=\"prettyprint linenums lang-javascript\">\r\n$(document).ready(function () {\r\n\r\n\t/** On permet d'accéder aux valeurs réelles de la souris à tout moment avec :\r\n\t\tpour x : $(\".menu div\").data(\"x\"), \r\n\t\tpour y : $(\".menu div\").data(\"y\"). **/\r\n\t$(\".menu div\").mousemove(function (e) {\r\n\t\t$.data(this, \"x\", e.pageX); // On met a jour la souris en x.\r\n\t\t$.data(this, \"y\", e.pageY); // On met a jour la souris en y.\r\n\t}).data(\"x\", 0).data(\"y\", 0) // On initialise les valeurs.\r\n\t.each(function () {\r\n\t\tvar\r\n\t\t\t$this = $(this),\r\n\t\t\t$ul = $this.find(\"ul\"),\r\n\t\t\ttempTimer, tempX, tempY; // Variables accessibles dans les deux parties de hover.\r\n \r\n\t\t$this.hover(function () {\r\n\t\t\tvar tempHeight = $ul.css(\"height\", \"auto\").height();\r\n\t\t\t$ul.height(0);\r\n\t\t\ttempTimer = setInterval(function () { // On vérifie à intervalle régulier...\r\n\t\t\t\tif (tempX == $this.data(\"x\") && tempY == $this.data(\"y\")) { // ...si la souris ne bouge plus.\r\n\t\t\t\t\tclearInterval(tempTimer); // Alors on arrête la vérification et on ouvre le menu.\r\n\t\t\t\t\t$ul\r\n\t\t\t\t\t\t.stop()\r\n\t\t\t\t\t\t.animate({ height: tempHeight.toString() }, 500);\r\n\t\t\t\t}\r\n\t\t\t\ttempX = $this.data(\"x\"); // Noter la précédente position en x de la souris.\r\n\t\t\t\ttempY = $this.data(\"y\"); // Noter la précédente position en y de la souris.\r\n\t\t\t}, 50); // Temps entre chaque vérification de position.\r\n\t\t}, function () {\r\n\t\t\tclearInterval(tempTimer); // Si on quitte l'objet, on arrête également la vérification.\r\n\t\t\t$ul\r\n\t\t\t\t.stop()\r\n\t\t\t\t.animate({ height: \"0\" }, 500);\r\n\t\t});\r\n\t});\r\n});\r\n</pre>\r\n\r\n<div class=\"best-practice\">\r\n\t<div class=\"title\">Aperçu</div>\r\n\t<div class=\"content\">\r\n\t\t<nav class=\"ex-menu-5\">\r\n\t\t\t<div>\r\n\t\t\t\t<a href=\"\" title=\"\">Navigateurs</a>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li><a href=\"\" title=\"\">Chrome</a></li>\r\n\t\t\t\t\t<li><a href=\"\" title=\"\">Firefox</a></li>\r\n\t\t\t\t\t<li><a href=\"\" title=\"\">IE</a></li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<a href=\"\" title=\"\">OS</a>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li><a href=\"\" title=\"\">Windows</a></li>\r\n\t\t\t\t\t<li><a href=\"\" title=\"\">Linux</a></li>\r\n\t\t\t\t\t<li><a href=\"\" title=\"\">Mac</a></li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<a href=\"\" title=\"\">Appareils</a>\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li><a href=\"\" title=\"\">PC/MAC</a></li>\r\n\t\t\t\t\t<li><a href=\"\" title=\"\">Smartphone</a></li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t</nav>\r\n\t</div>\r\n</div>\r\n\r\n<p class=\"eye-catching\">Tant que votre souris sera en mouvement sur le menu, le menu ne se dépliera pas. On peut également remplacer l'égalité stricte par une fourchette de valeur afin d'élargir ce que l'on considère comme une souris fixe.</p>\r\n\r\n<h4>D'autres techniques</h4>\r\n\r\n<p>Si vous aussi vous avez des tips d'utilisation du survol souris n'hésitez pas à les partager en commentaire.</p>", "dates" : { "published" : "2013-03-21 18:06:00", "updated" : [ "2013-03-21 18:06:00" ] }, "script" : "$(document).ready(function () {\r\n\t$(\".ex-menu-3 div\").each(function () {\r\n\t\tvar $ul = $(this).find(\"ul\");\r\n\t\t$(this).hover(function (e) {\r\n\t\t\tvar tempHeight = $ul.css(\"height\", \"auto\").height();\r\n\t\t\t$ul\r\n\t\t\t\t.height(0)\r\n\t\t\t\t.stop()\r\n\t\t\t\t.animate({ height: tempHeight.toString() }, 500);\r\n\t\t}, function () {\r\n\t\t\t$ul\r\n\t\t\t\t.stop()\r\n\t\t\t\t.animate({ height: \"0\" }, 500);\r\n\t\t});\r\n\t});\r\n});\r\n\r\n$(\".ex-menu-4 div\").each(function () {\r\n\tvar \r\n\t\t$ul = $(this).find(\"ul\"),\r\n\t\ttempTimer; \r\n\r\n\t$(this).hover(function () {\r\n\t\tvar tempHeight = $ul.css(\"height\", \"auto\").height();\r\n\t\t$ul.height(0);\r\n\t\ttempTimer = setTimeout(function () {\r\n\t\t\t$ul\r\n\t\t\t\t.stop()\r\n\t\t\t\t.animate({ height: tempHeight.toString() }, 500);\r\n\t\t}, 1000);\r\n\t}, function () {\r\n\t\tclearTimeout(tempTimer);\r\n\t\t$ul\r\n\t\t\t.stop()\r\n\t\t\t.animate({ height: \"0\" }, 500);\r\n\t});\r\n});\r\n\r\n$(\".ex-menu-5 div\").mousemove(function (e) {\r\n\t$.data(this, \"x\", e.pageX);\r\n\t$.data(this, \"y\", e.pageY);\r\n}).data(\"x\", 0).data(\"y\", 0)\r\n.each(function () {\r\n\tvar\r\n\t\t$this = $(this),\r\n\t\t$ul = $this.find(\"ul\"),\r\n\t\ttempTimer, tempX, tempY;\r\n\r\n\t$this.hover(function () {\r\n\t\tvar tempHeight = $ul.css(\"height\", \"auto\").height();\r\n\t\t$ul.height(0);\r\n\t\ttempTimer = setInterval(function () {\r\n\t\t\tif (tempX == $this.data(\"x\") && tempY == $this.data(\"y\")) {\r\n\t\t\t\tclearInterval(tempTimer);\r\n\t\t\t\t$ul\r\n\t\t\t\t\t.stop()\r\n\t\t\t\t\t.animate({ height: tempHeight.toString() }, 500);\r\n\t\t\t}\r\n\t\t\ttempX = $this.data(\"x\");\r\n\t\t\ttempY = $this.data(\"y\");\r\n\t\t}, 50);\r\n\t}, function () {\r\n\t\tclearInterval(tempTimer);\r\n\t\t$ul\r\n\t\t\t.stop()\r\n\t\t\t.animate({ height: \"0\" }, 500);\r\n\t});\r\n});", "style" : ".ex-menu-1 div:nth-child(1),\r\n.ex-menu-2 div:nth-child(1),\r\n.ex-menu-4 div:nth-child(1),\r\n.ex-menu-5 div:nth-child(1),\r\n.ex-menu-3 div:nth-child(1) {\r\n\tborder-top-left-radius: 8px;\r\n\tborder-bottom-left-radius: 8px;\r\n}\r\n.ex-menu-1 div:last-child,\r\n.ex-menu-2 div:last-child,\r\n.ex-menu-4 div:last-child,\r\n.ex-menu-5 div:last-child,\r\n.ex-menu-3 div:last-child {\r\n\tborder-top-right-radius: 8px;\r\n\tborder-bottom-right-radius: 8px;\r\n}\r\n.ex-menu-1:after,\r\n.ex-menu-2:after,\r\n.ex-menu-4:after,\r\n.ex-menu-5:after,\r\n.ex-menu-3:after {\r\n\tcontent: \"\";\r\n\tdisplay: block;\r\n\tclear: left;\r\n}\r\n.ex-menu-1 div,\r\n.ex-menu-2 div,\r\n.ex-menu-4 div,\r\n.ex-menu-5 div,\r\n.ex-menu-3 div {\r\n\tbackground-color: #bbbbbb;\r\n\tbackground: -webkit-linear-gradient(top, #dddddd, #bbbbbb);\r\n\tbackground: -o-linear-gradient(top, #dddddd, #bbbbbb);\r\n\tbackground: -moz-linear-gradient(top, #dddddd, #bbbbbb);\r\n\tbackground: linear-gradient(to bottom, #dddddd, #bbbbbb);\r\n\tpadding: 8px;\r\n\tfloat: left;\r\n\tposition: relative;\r\n}\r\n.ex-menu-1 div ul,\r\n.ex-menu-2 div ul,\r\n.ex-menu-4 div ul,\r\n.ex-menu-5 div ul,\r\n.ex-menu-3 div ul {\r\n\tmargin-left: 0;\r\n\tbackground-color: #cccccc;\r\n\r\n\tdisplay: none;\r\n\tposition: absolute;\r\n\tz-index: 7;\r\n\tleft: 0;\r\n}\r\n.ex-menu-1 div:hover ul,\r\n.ex-menu-2 div:hover ul,\r\n.ex-menu-4 div:hover ul,\r\n.ex-menu-5 div:hover ul,\r\n.ex-menu-3 div:hover ul {\r\n\tdisplay: block;\r\n}\r\n.ex-menu-2 div ul,\r\n.ex-menu-4 div ul,\r\n.ex-menu-5 div ul,\r\n.ex-menu-3 div ul {\r\n\tpadding: 0;\r\n\tdisplay: block;\r\n\theight: 0;\r\n\toverflow: hidden;\r\n}\r\n.ex-menu-2 div ul {\r\n\t-webkit-transition: height 0.5s;\r\n\t-moz-transition: height 0.5s;\r\n\t-o-transition: height 0.5s;\r\n\ttransition: height 0.5s;\r\n}\r\n.ex-menu-2 div:hover ul {\r\n\theight: 80px;\r\n}\r\n.ex-menu-3 div:hover ul,\r\n.ex-menu-5 div:hover ul,\r\n.ex-menu-4 div:hover ul {\r\n\theight: auto;\r\n}\r\n.ex-menu-1 li,\r\n.ex-menu-2 li,\r\n.ex-menu-4 li,\r\n.ex-menu-5 li,\r\n.ex-menu-3 li {\r\n\tlist-style: none;\r\n}\r\n.ex-menu-2 li,\r\n.ex-menu-4 li,\r\n.ex-menu-5 li,\r\n.ex-menu-3 li {\r\n\tmargin: 0 8px 0 8px;\r\n}\r\n.ex-menu-2 li:first-child,\r\n.ex-menu-4 li:first-child,\r\n.ex-menu-5 li:first-child,\r\n.ex-menu-3 li:first-child {\r\n\tmargin-top: 8px;\r\n}\r\n.ex-menu-2 li:last-child,\r\n.ex-menu-4 li:last-child,\r\n.ex-menu-5 li:last-child,\r\n.ex-menu-3 li:last-child {\r\n\tmargin-bottom: 8px;\r\n}", "title" : "L'<span>animation</span> et le <span>survol</span> <span>souris</span> avec <span>CSS3</span> ou <span>jQuery</span>", "urn" : "gerer-l-animation-et-le-survol-souris-avec-jquery" }
{ "_id" : { "$oid" : "530f5f63620731fe86cb71a4" }, "cache" : { "comment" : { "number" : 1 } }, "categories" : [ { "$oid" : "5310456355dfd5f7698d48b8" }, { "$oid" : "5310456355dfd5f7698d48ba" }, { "$oid" : "5310456355dfd5f7698d48bb" }, { "$oid" : "530ef6a6789c1a55e4fde0af" }, { "$oid" : "5310456355dfd5f7698d48c4" }, { "$oid" : "5310456355dfd5f7698d48bc" } ], "content" : "Vous connaissez tous l'instruction `switch` en _JavaScript_ ; c'est une bonne alternative à la suite d'instruction `if, else if, else if, else if... else` dans le cas de choix multiples. Et si vous vous en débarrassiez pour quelque chose de plus ~~simple~~ concis ?\n\n\n\n\n\n## Les cas d'école ##\n\n\n\n\n### if, else if, encore else if, toujours else if... et else ###\n\nTout d'abord, rappelons la façon la plus ~~simple~~ connue de faire un choix parmi plusieurs valeurs :\n\n```javascript\n// On a la variable \"character\" à tester.\n\nvar description /* = \"Information obtenue d'une input, d'une variable GET/POST ou d'un cookie etc.\" */;\n\nif (character === \"edward\") {\n    description = \"Edward Elric fait 1m57 + 6cm de mèche + 2 cm de talon.\";\n} else if (character === \"alphonse\") {\n    description = \"Alphonse Elric change de voix durant FMA Brotherhood.\";\n} else if (character === \"winry\") {\n    description = \"Winry Rockbell est secrètement amoureuse de R2D2.\";\n} else {\n    description = \"Y a pas mal de personnage.\";\n}\n\n// On récupère la valeur de description.\n```\n\n\n\n\n### Tu as trop de choix, utilise un Switch ! ###\n\nAvec l'instruction `switch`, on peut également produire le même résultat. Et oui, paraît que c'est plus rapide, ça utilise moins de caractères (346 au lieu de 352 !), c'est mieux de faire ça (on me l'a dit), ça sauve plus de chatons prématurés, bref c'est formidable !\n\n```javascript\n// On a encore la variable \"character\" à tester.\n\nvar description /* = \"Information obtenue d'une input, d'une variable GET/POST ou d'un cookie etc...\" */;\n\nswitch (character) {\n    case \"edward\":\n        description = \"Edward Elric fait 1m57 + 6cm de mèche + 2 cm de talon.\";\n        break;\n    case \"alphonse\":\n        description = \"Alphonse Elric change de voix durant FMA Brotherhood.\";\n        break;\n    case \"winry\":\n        description = \"Winry Rockbell est secrètement amoureuse de R2D2.\";\n        break;\n    default : \n        description = \"Y a pas mal de personnage.\";\n}\n\n// On récupère encore la valeur de description.\n```\n\n_Simplement, il y a quelques petites choses qui m'ennuient avec le `switch`_. Non pas que ce soit une mauvaise idée de l'utiliser, mais j'ai du mal avec sa syntaxe (bien que je m'y sois fait) et oublier le mot clé `break` vous envoie droit au bûché. C'est vrai, dans la majorité des cas il est nécessaire : alors ça aurait été sympa qu'il soit implicite, quitte à utiliser un mot-clé pour simuler le fonctionnement d'un `switch` sans `break`.</p>\n\n\n\n\n\n## Ce problème fait l'Objet d'une astuce ##\n\n\n\n\n#### L'alternative au Switch, (et au If) ? ####\n\nLes deux cas ci-dessus peuvent être remplacés élégamment par un parcourt de valeur dans un **litérale JSON** ! Voyez plutôt :\n\n```javascript\n// On a toujours la variable \"character\" à tester.\nvar description /* = \"Information obtenue d'une input, d'une variable GET/POST ou d'un cookie etc...\" */, \n    descriptions;\n\n/* J'associe à une clé, une valeur. Une sorte de dictionnaire. */\ndescriptions = {\n    \"edward\" : \"Edward Elric fait 1m57 + 6cm de mèche + 2 cm de talon.\",\n    \"alphonse\" : \"Alphonse Elric change de voix durant FMA Brotherhood.\",\n    \"winry\" : \"Winry Rockbell est secrètement amoureuse de R2D2.\",\n    \"other\" : \"Y a pas mal de personnage.\"\n}\n\n/* Je cherche la valeur clé dans mon dictionnaire. Si elle n'est pas trouvé,\n'descriptions[character]' renvoi 'undefinded' qui est testé comme 'false' et on prend alors la valeur par défaut 'other'. */\ndescription = descriptions[character] || descriptions[\"other\"];\n\n// On récupère toujours la valeur de description.\n```\n\nCela a l'avantage de séparer la logique (dernière ligne), des données (l'objet JSON) ; ce qui n'est pas le cas de nos précédents exemples.\n\n\n\n\n### Et pour plusieurs instructions ? ###\n\nRien ne vous empêche de vous créer ce genre de \"Switch\" avec un Objet qui fait un calcule avant retour :\n\n```javascript\n// On a toujours la variable \"character\" à tester.\nvar description /* = \"Information obtenue d'une input, d'une variable GET/POST ou d'un cookie etc...\" */, \n    descriptions;\n\ndescriptions = {\n    \"edward\" : function () {\n        // Trucs un peu plus conséquents.\n        return; // Le résultat. \n    },\n    \"alphonse\" : function () {\n        // Trucs un peu plus conséquents.\n        return; // Le résultat. \n    },\n    \"winry\" : function () {\n        // Trucs un peu plus conséquents.\n        return; // Le résultat. \n    },\n    \"other\" : function () {\n        // Trucs un peu plus conséquents.\n        return; // Le résultat. \n    }\n}\n\n// On choisit le bon calcul/résultat à obtenir.\ndescription = descriptions[character] || descriptions[\"other\"];\n\n// Et on l'exécute.\ndescription();\n```\n\nVous pouvez également préparer des traitements différents en fonction de la variable.\n\n```javascript\n// On a toujours la variable \"character\" à tester.\nvar description /* = \"Information obtenue d'une input, d'une variable GET/POST ou d'un cookie etc...\" */, \n    descriptions = {};\n\ndescriptions[\"edward\"] = function () {\n    // Traitement de controle ici.\n};\n\ndescriptions[\"winry\"] = function () {\n    // Traitement de controle ici.\n};\n\ndescriptions[\"edward\"] = function () {\n    // Traitement de controle ici.\n};\n\ndescriptions[\"other\"] = function () {\n    // Traitement de controle ici.\n};\n\n// On choisit la bonne fonction à exécuter.\ndescription = descriptions[character] || descriptions[\"other\"];\n\n// Et on l'exécute.\ndescription();\n```\n\n\n\n\n\n## Le(s) mot(s) de la fin ##\n\nJe ne me risquerais pas à dire que c'est une bonne pratique, mais c'est au moins une bonne astuce que j'utilise régulièrement. Qu'en pensez vous ?", "dates" : { "published" : { "$date" : 1364035440000 }, "updated" : [] }, "others" : { "markdown" : true, "published" : true }, "script" : "", "stylesheet" : "", "title" : "Une <span>alternative</span> au <span>Switch</span>, c'est possible en <span>JavaScript</span>", "urn" : "une-alternative-au-switch-c-est-possible-en-javascript" }
{ "_id" : { "$oid" : "530f5f63620731fe86cb71a5" }, "cache" : { "comment" : { "number" : 0 } }, "categories" : [ { "$oid" : "5310456355dfd5f7698d48c3" }, { "$oid" : "5310456355dfd5f7698d48bb" }, { "$oid" : "5310456355dfd5f7698d48b6" }, { "$oid" : "5310456355dfd5f7698d48ba" }, { "$oid" : "530cc2f27188099a66e9bcec" }, { "$oid" : "5310456355dfd5f7698d48c5" }, { "$oid" : "530ef6a6789c1a55e4fde0af" } ], "content" : "Savez-vous qu'en _HTML5_, l'attribut `lang` (équivalent _xHTML_ de `xml:lang`) peut être placé dans n'importe quelles balises de la page. Il définit alors dans quelle langue doit être interprétée la portion de code dans cette balise et ses enfants. Cet attribut fonctionne de paire avec la pseudo-class `:lang()` que l'on retrouve en _CSS3_.\n\nNous allons mettre en avant ces deux amis le temps d'un article et le temps de comprendre à quel point ils s'entendent bien.\n\n\n\n\n\n## L'attribut `lang` en HTML5 ##\n\nAbordons en premier lieu l'utilisation de l'attribut `lang` en [HTML5 telle que décrite par le W3C] simple coup d'œil à la page minimale de tous documents _HTML5_. Voyons plutôt :\n\n [HTML5 telle que décrite par le W3C]: http://www.w3.org/TR/2011/WD-html5-20110525/elements.html#the-lang-and-xml:lang-attributes (L'attribut HTML5 lang tel que décrit par le W3C)\n\n\n\n### Exemple de sémantique d'une page HTML5 ###\n\n```html\n<!DOCTYPE html>\n<html lang=\"fr-fr\">\n    <head>\n        <meta charset=\"utf-8\" />\n        <title>Document HTML5 de base</title>\n    </head>\n    <body>\n        <blockquote lang=\"en\" cite=\"http://www.ffdream.com/encyclopedie-mythe_ultimecia2.html\">\n            <p>I'll be here...</p>\n            <p>Why...?</p>\n            <p>I'll be waiting...here...</p>\n            <p>For what?</p>\n            <p>I'll be waiting...for you...so...</p>\n            <p>If you come here...</p>\n            <p>You'll find me.</p>\n            <p>I promise.</p>\n        </blockquote>\n        <p>Citation de l'introduction de Final Fantasy VIII</p>\n    </body>\n</html>\n```\n\nVous l'avez remarqué, il est là, à la ligne 2, `<html lang=\"fr-fr\">`. Vous aurez probablement lu également qu'il remplace `<meta http-equiv=\"content-language\" content=\"fr-fr\" />` en _xHTML_. C'est aussi juste que c'est incorrecte. En réalité, un _http-equiv_ complète/corrige/remplace le travail d'une _entête http_. Ainsi quand une réponse du serveur web ne contient pas l'entête `Content-Language: fr-fr`, le navigateur sait quand même dans quelle langue interpréter les données (ici française). Si le document est en _HTML5_ (Le navigateur le sait grâce à `<!DOCTYPE html>`) il sait d'avance qu'il faut interpréter chaque nœud du document dans la langue indiquée par son plus proche parent ayant un attribut `lang` remplis.\n\nVous l'avez peut-être compris, en _HTML5_, on ne dit pas \"mon document est écris en français\" mais \"cette partie de mon document est écrite en française, mais celle-ci est écrite en anglaise\". C'est exactement le cas dans mon exemple précédent ; si vous regardez attentivement à la ligne 8, la balise `<blockquote>` contient un attribut `lang` \"en\" ! Par conséquent —car l'action de langue se propage sur tous les nœuds fils— toutes les balises `<p>` enfants sont également à interpréter en anglais.\n\nRien n’empêche tout de même de définir dans le _header http_ renvoyé par le serveur `Content-Language:` pour définir la langue principale du document.\n\n\n\n\n\n## La pseudo-class :lang() en CSS3 ##\n\nAbordons à présent l'utilisation de la pseudo-class `:lang()` en [CSS3 telle que décrite par le W3C]. A l'instar de `:nth-child()`, elle prend un paramètre pour fonctionner. La langue d'interprétation de l'élément cible est le paramètre en question (par exemple `:lang(fr-fr)`). Et je vous laisse deviner quel mécanisme permet à la pseudo-class de définir la langue d'interprétation du nœud ? Bingo ! L'attribut `lang` HTML5 du/des nœud(s) ciblé(s) ou de son/leur plus proche parent contenant l'attribut `lang`.</p>\n\n  [CSS3 telle que décrite par le W3C]: \"http://www.w3.org/TR/css3-selectors/#lang-pseudo\" (La pseudo-class CSS3 :lang() telle que décrite par le W3C)\n\n\n\n\n### Exemple de ciblage CSS ###\n\n<pre class=\"prettyprint linenums lang-css\">\n/* La seule phrase en rouge sera : */\n/* \"Citation de l'introduction de Final Fantasy VIII\". */\n/* Les autres phrases ne le seront pas car elles ne sont pas interprétées en français. */\np:lang(fr-fr) { \n\tcolor: #ff0000;\n}\n</pre>\n\n<p class=\"warning\">Attention : <samp>&lt;html lang=\"fr-fr\"&gt;</samp> peut être ciblée par <samp>:lang(fr)</samp> et <samp>:lang(fr-fr)</samp> mais <samp>&lt;html lang=\"fr\"&gt;</samp> ne peut être ciblée que par <samp>:lang(fr)</samp> et pas par <samp>:lang(fr-fr)</samp>.</p>\n\n<pre class=\"prettyprint linenums lang-css\">\n/* Ceci fonctionne aussi pour fr-fr ! */\np:lang(fr) { \n\tcolor: #ff0000;\n}\n</pre>\n\n<p class=\"highlighting\">A savoir : <samp>:lang()</samp> est fonctionnelle IE8+ (pour un support plus vaste vous pouvez plutôt faire appel aux classes CSS conditionnelles).</p>\n\n<p class=\"example\">C'est bien beau tout ça, mais quel intérêt ? Voyons ça plus bas.</p>\n\n<h2>Synergie des deux technologies pour du multilingue</h2>\n\n<p>Imaginons un template HTML taillé pour afficher une même page en multilingue. Un moteur de template pour PHP, ASP, Ruby, Node.js etc... transforme le template en deux pages distinctes fournis au client en fonction de la demande de la page en français ou en anglaise (avec une url différente par exemple). Il pourrait ressembler à cela :</p>\n\n<pre class=\"prettyprint linenums lang-html\">\n&lt;html lang=\"{CULTURE_COUNTRY}\"&gt;\n\n&lt;!-- ... header, body, etc... --&gt;\n\n&lt;section&gt;\n\t&lt;div class=\"languages\"&gt;\n\t\t&lt;span&gt;{OTHERS_LANGUAGES}&lt;/span&gt;\n\t\t&lt;a href=\"\" title=\"\" lang=\"fr-fr\"&gt;{LANG_FRENCH}&lt;/a&gt;\n\t\t&lt;a href=\"\" title=\"\" lang=\"en-gb\"&gt;{LANG_ENGLISH}&lt;/a&gt;\n\t\t&lt;a href=\"\" title=\"\" lang=\"es-es\"&gt;{LANG_SPANISH}&lt;/a&gt;\n\t&lt;/div&gt;\n\t&lt;form id=\"form\" method=\"post\" action=\"./\"&gt;\n\t\t&lt;header&gt;{TITLE}&lt;/header&gt;\n\t\t&lt;aside&gt;\n\t\t\t&lt;header&gt;{TITLE_ALLOWS}&lt;/header&gt;\n\t\t\t&lt;ul&gt;\n\t\t\t\t&lt;!-- BEGIN allows --&gt;\n\t\t\t\t&lt;li&gt;{allows.ELEMENT_ALLOWS}&lt;/li&gt;\n\t\t\t\t&lt;!-- END allows --&gt;\n\t\t\t&lt;/ul&gt;\n\t\t\t&lt;footer&gt;{END_ALLOWS}&lt;/footer&gt;\n\t\t&lt;/aside&gt;\n\t\t&lt;div class=\"field\"&gt;\n\t\t\t&lt;label for=\"form-email\"&gt;{LABEL_EMAIL}&lt;/label&gt;\n\t\t\t&lt;input id=\"form-email\" type=\"text\" placeholder=\"{LABEL_EMAIL}\" /&gt;\n\t\t&lt;/div&gt;\n\t\t&lt;div class=\"field\"&gt;\n\t\t\t&lt;label for=\"form-password\"&gt;{LABEL_PASSWORD}&lt;/label&gt;\n\t\t\t&lt;input id=\"form-password\" type=\"password\" placeholder=\"{LABEL_PASSWORD}\" /&gt;\n\t\t&lt;/div&gt;\n\t\t&lt;div class=\"field\"&gt;\n\t\t\t&lt;label&gt;&lt;input id=\"form-submit\" type=\"submit\" value=\"{LABEL_REGISTRATION}\" /&gt;&lt;/label&gt;\n\t\t&lt;/div&gt;\n\t&lt;/form&gt;\n&lt;/section&gt;\n</pre>\n\n<p class=\"highlighting\">et génèrerait en français :</p>\n\n<pre class=\"prettyprint linenums lang-html\">\n&lt;html lang=\"fr-fr\"&gt;\n\n&lt;!-- ... header, body, etc... --&gt;\n\n&lt;section&gt;\n\t&lt;div class=\"languages\"&gt;\n\t\t&lt;span&gt;Autres langues&lt;/span&gt;\n\t\t&lt;a href=\"\" title=\"\" lang=\"fr-fr\"&gt;Français&lt;/a&gt;\n\t\t&lt;a href=\"\" title=\"\" lang=\"en-gb\"&gt;English&lt;/a&gt;\n\t\t&lt;a href=\"\" title=\"\" lang=\"es-es\"&gt;Español&lt;/a&gt;\n\t&lt;/div&gt;\n\t&lt;form id=\"form\" method=\"post\" action=\"./\"&gt;\n\t\t&lt;header&gt;Inscription&lt;/header&gt;\n\t\t&lt;aside&gt;\n\t\t\t&lt;header&gt;Notre service permet&lt;/header&gt;\n\t\t\t&lt;ul&gt;\n\t\t\t\t&lt;li&gt;de tchatter avec d'autres utilisateurs&lt;/li&gt;\n\t\t\t\t&lt;li&gt;de partager vos photos&lt;/li&gt;\n\t\t\t\t&lt;li&gt;de rencontrer des personnes en vrai&lt;/li&gt;\n\t\t\t&lt;/ul&gt;\n\t\t\t&lt;footer&gt;Pour le reste, vous êtes grand !&lt;/footer&gt;\n\t\t&lt;/aside&gt;\n\t\t&lt;div class=\"field\"&gt;\n\t\t\t&lt;label for=\"form-email\"&gt;Email&lt;/label&gt;\n\t\t\t&lt;input id=\"form-email\" type=\"text\" placeholder=\"Email\" /&gt;\n\t\t&lt;/div&gt;\n\t\t&lt;div class=\"field\"&gt;\n\t\t\t&lt;label for=\"form-password\"&gt;Mot de passe&lt;/label&gt;\n\t\t\t&lt;input id=\"form-password\" type=\"password\" placeholder=\"Mot de passe\" /&gt;\n\t\t&lt;/div&gt;\n\t\t&lt;div class=\"field\"&gt;\n\t\t\t&lt;label&gt;&lt;input id=\"form-submit\" type=\"submit\" value=\"Inscription\" /&gt;&lt;/label&gt;\n\t\t&lt;/div&gt;\n\t&lt;/form&gt;\n&lt;/section&gt;\n</pre>\n\n<p class=\"highlighting\">et génèrerait en anglais :</p>\n\n<pre class=\"prettyprint linenums lang-html\">\n&lt;html lang=\"en-gb\"&gt;\n\n&lt;!-- ... header, body, etc... --&gt;\n\n&lt;section&gt;\n\t&lt;div class=\"languages\"&gt;\n\t\t&lt;span&gt;Others languages&lt;/span&gt;\n\t\t&lt;a href=\"\" title=\"\" lang=\"fr-fr\"&gt;Français&lt;/a&gt;\n\t\t&lt;a href=\"\" title=\"\" lang=\"en-gb\"&gt;English&lt;/a&gt;\n\t\t&lt;a href=\"\" title=\"\" lang=\"es-es\"&gt;Español&lt;/a&gt;\n\t&lt;/div&gt;\n\t&lt;form id=\"form\" method=\"post\" action=\"./\"&gt;\n\t\t&lt;header&gt;Registration&lt;/header&gt;\n\t\t&lt;aside&gt;\n\t\t\t&lt;header&gt;Our service allows you&lt;/header&gt;\n\t\t\t&lt;ul&gt;\n\t\t\t\t&lt;li&gt;to chat with other users&lt;/li&gt;\n\t\t\t\t&lt;li&gt;to share your photos&lt;/li&gt;\n\t\t\t\t&lt;li&gt;to meet people in real life&lt;/li&gt;\n\t\t\t&lt;/ul&gt;\n\t\t\t&lt;footer&gt;It's your ride now!&lt;/footer&gt;\n\t\t&lt;/aside&gt;\n\t\t&lt;div class=\"field\"&gt;\n\t\t\t&lt;label for=\"form-email\"&gt;Email&lt;/label&gt;\n\t\t\t&lt;input id=\"form-email\" type=\"text\" placeholder=\"Email\" /&gt;\n\t\t&lt;/div&gt;\n\t\t&lt;div class=\"field\"&gt;\n\t\t\t&lt;label for=\"form-password\"&gt;Password&lt;/label&gt;\n\t\t\t&lt;input id=\"form-password\" type=\"password\" placeholder=\"Password\" /&gt;\n\t\t&lt;/div&gt;\n\t\t&lt;div class=\"field\"&gt;\n\t\t\t&lt;label&gt;&lt;input id=\"form-submit\" type=\"submit\" value=\"Registration\" /&gt;&lt;/label&gt;\n\t\t&lt;/div&gt;\n\t&lt;/form&gt;\n&lt;/section&gt;\n</pre>\n\n<h3>Premier exemple : habillage deux colonnes</h3>\n\n<p>Habillons le code précédent avec la CSS suivante, je vous invite à lire attentivement la partie <span class=\"highlighting\">Partie langues et ponctuation</span> :</p>\n\n<pre class=\"prettyprint linenums lang-css\">\n/********************************/\n/** Partie design et placement **/\n/********************************/\n\n/* Les langues en haut à droite. */\nsection .languages {\n\tfloat: right;\n\tfont-size: 0.8em;\n}\n\n/* Pas de flottants qui dépassent du formulaire. */\nsection form:after {\n\tcontent: \"\";\n\tdisplay: block;\n\tclear: both;\n}\n\n/* Mise du titre en avant. */\nsection > header {\n\tfont-size: 1.5em;\n\tborder-bottom: dashed 1px #cccccc;\n}\n\n/* Les informations accompagnant le formulaire à droite. */\nsection aside {\n\tfloat: right;\n\tpadding: 6px 6px 6px 16px;\n\twidth: 55%;\n\tbox-sizing: border-box;\n\t-moz-box-sizing: border-box;\n}\n\n/* Homogénéité des tailles pour les labels. */\nsection label {\n\tdisplay: inline-block;\n\twidth: 100px;\n\tbox-sizing: border-box;\n\t-moz-box-sizing: border-box;\n}\n\n/* Alignement et espacement des champs. */\nsection .field {\n\tpadding: 16px 16px 0 8px;\n\twidth: 45%;\n\tbox-sizing: border-box;\n\t-moz-box-sizing: border-box;\n\ttext-align: right;\n}\n\n/***********************************/\n/** Partie langues et ponctuation **/\n/***********************************/\n\n/* lang(fr) cible l'élément que si lui-même ou l'un de ses parents contient lang=\"fr\" ou lang=\"fr-*\", */\n/* contrairement à [lang=fr-fr] qui ne cible l'élément que s'il a un attribut lang. */\nsection:lang(fr) a[lang=fr-fr]:after { \n\tcontent: \" -\"; /* Ajout d'un tiret après le français en français. */\n}\nsection:lang(en) a[lang=en-gb]:after {\n\tcontent: \" -\"; /* Ajout d'un tiret après l'anglais en anglais. */\n}\n\n/* Après {OTHERS_LANGUAGES}, en français un espace sépare les \":\" du texte, et pas en anglais. */\nsection .languages span:lang(fr):after {\n\tcontent: \" :\";\n}\nsection .languages span:lang(en):after {\n\tcontent: \":\";\n}\n\n/* On cache le lien de changement vers la langue courante, utiliser :lang() sur \".lang\" ou \"section\" revient au même, */\n/* les balises héritent toutes deux de l'attribut lang de la balise &lt;html&gt;. */\nsection .languages:lang(fr) a[lang=fr-fr] {\n\tdisplay: none;\n}\nsection .languages:lang(en) a[lang=en-gb] {\n\tdisplay: none;\n}\n\n/* Deux points après le {OTHERS_LANGUAGES} et chaque label pour cet exemple : */\n/* en français, */\nsection aside header:lang(fr):after,\nsection label:lang(fr):after {\n\tcontent: \" :\";\n}\n/* en anglais, */\nsection aside header:lang(en):after,\nsection label:lang(en):after {\n\tcontent: \":\";\n}\n/* mais pas de tiret après le bouton de validation. */\nsection label:last-child:after {\n\tcontent: \"\";\n}\n/* Une virgule après chaque item de la liste. */\n/* Sauf pour le dernier qui a un point. */\nsection li:after {\n\tcontent: \",\";\n}\nsection li:last-child:after {\n\tcontent: \".\";\n}\n</pre>\n\n<p>Ce qui nous donne en français puis en anglais :</p>\n\n<div class=\"best-practice\">\n\t<div class=\"title\">Exemple 1 en Français</div>\n\t<div class=\"content\">\n\t\t<section class=\"example-1\" lang=\"fr-fr\">\n\t\t\t<div class=\"lang\">\n\t\t\t\t<span>Autres langues</span>\n\t\t\t\t<span class=\"a fr-fr\">Français</span>\n\t\t\t\t<span class=\"a en-gb\">English</span>\n\t\t\t\t<span class=\"a es-es\">Español</span>\n\t\t\t</div>\n\t\t\t<form id=\"form-fr-1\">\n\t\t\t\t<div class=\"subscribe\">Inscription</div>\n\t\t\t\t<div class=\"aside\">\n\t\t\t\t\t<div class=\"header\">Notre service permet</div>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li>de tchatter avec d'autres utilisateurs</li>\n\t\t\t\t\t\t<li>de partager vos photos</li>\n\t\t\t\t\t\t<li>de rencontrer des personnes en vrai</li>\n\t\t\t\t\t</ul>\n\t\t\t\t\t<div class=\"footer\">Pour le reste, vous êtes grand !</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"field\">\n\t\t\t\t\t<label for=\"form-fr-email-1\">Email</label>\n\t\t\t\t\t<input id=\"form-fr-email-1\" type=\"text\" placeholder=\"Email\" />\n\t\t\t\t</div>\n\t\t\t\t<div class=\"field\">\n\t\t\t\t\t<label for=\"form-fr-password-1\">Mot de passe</label>\n\t\t\t\t\t<input id=\"form-fr-password-1\" type=\"password\" placeholder=\"Mot de passe\" />\n\t\t\t\t</div>\n\t\t\t\t<div class=\"field\">\n\t\t\t\t\t<label><input id=\"form-fr-submit-1\" type=\"button\" value=\"Inscription\" /></label>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</section>\n\t</div>\n</div>\n\n<div class=\"best-practice\">\n\t<div class=\"title\">Exemple 1 en Anglais</div>\n\t<div class=\"content\">\n\t\t<section class=\"example-1\" lang=\"en-gb\">\n\t\t\t<div class=\"lang\">\n\t\t\t\t<span>Others languages</span>\n\t\t\t\t<span class=\"a fr-fr\">Français</span>\n\t\t\t\t<span class=\"a en-gb\">English</span>\n\t\t\t\t<span class=\"a es-es\">Español</span>\n\t\t\t</div>\n\t\t\t<form id=\"form-en-1\">\n\t\t\t\t<div class=\"subscribe\">Registration</div>\n\t\t\t\t<div class=\"aside\">\n\t\t\t\t\t<div class=\"header\">Our service allows you</div>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li>to chat with other users</li>\n\t\t\t\t\t\t<li>to share your photos</li>\n\t\t\t\t\t\t<li>to meet people in real life</li>\n\t\t\t\t\t</ul>\n\t\t\t\t\t<div class=\"footer\">It's your ride now!</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"field\">\n\t\t\t\t\t<label for=\"form-en-email-1\">Email</label>\n\t\t\t\t\t<input id=\"form-en-email-1\" type=\"text\" placeholder=\"Email\" />\n\t\t\t\t</div>\n\t\t\t\t<div class=\"field\">\n\t\t\t\t\t<label for=\"form-en-password-1\">Password</label>\n\t\t\t\t\t<input id=\"form-en-password-1\" type=\"password\" placeholder=\"Password\" />\n\t\t\t\t</div>\n\t\t\t\t<div class=\"field\">\n\t\t\t\t\t<label><input id=\"form-en-submit-1\" type=\"button\" value=\"Registration\" /></label>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</section>\n\t</div>\n</div>\n\n<p class=\"highlighting\">Quel intérêt de séparer quelques éléments de ponctuation des phrases elles-mêmes. Vous allez le comprendre avec le second exemple qui utilise la même structure HTML que le premier</p>\n\n<h3>Deuxième exemple : habillage en ligne</h3>\n\n<p>Changeons l'apparence précédente avec cette nouvelle CSS :</p>\n\n<pre class=\"prettyprint linenums lang-css\">\n/********************************/\n/** Partie design et placement **/\n/********************************/\n\n/* Les langues en haut à droite */\nsection .languages {\n\tfloat: right;\n\tfont-size: 0.9em;\n}\n\n/* On cache {OTHERS_LANGUAGES} */\nsection .languages span {\n\tdisplay: none;\n}\n\n/* On cache le lien de changement vers la langue courante, utiliser :lang() sur \".lang\" ou \"section\" revient au même, */\n/* les balises héritent toutes deux de l'attribut lang de la balise &lt;html&gt;. */\nsection .languages:lang(fr) a[lang=fr-fr] {\n\tdisplay: none;\n}\nsection .languages:lang(en) a[lang=en-gb] {\n\tdisplay: none;\n}\n\n/* Mise en avant du titre. */\nsection > header {\n\tfont-size: 1.2em;\n\tfont-weight: bold;\n}\n\n/* Mise en ligne d'élément nativement en block dans l'aside. */\n/* Le texte de l'aside ne sera plus en liste mais en ligne. */\nsection aside header,\nsection aside footer,\nsection ul,\nsection li {\n\tdisplay: inline;\n}\n/* On rend inexistant le &lt;ul&gt;. */\nsection ul {\n\tmargin-left: 0;\n\tpadding: 0;\n}\n/* on centre le texte */\nsection aside {\n\ttext-align: center;\n\tpadding: 16px;\n}\n\n/* Mise en ligne d'élément nativement en block dans le formulaire. */\n/* Le formulaire ne sera plus en liste mais en ligne. */\nsection .field {\n\tpadding: 8px;\n}\n\n/***********************************/\n/** Partie langues et ponctuation **/\n/***********************************/\n\n/* lang(fr) cible l'élément que si lui même ou l'un de ses parents contient lang=\"fr\" ou lang=\"fr-*\", */\n/* contrairement à [lang=fr-fr] qui ne cible l'élément que s'il a un attribut lang. */\nsection:lang(fr) a[lang=fr-fr]:after { \n\tcontent: \" |\"; /* Ajout d'un pipe après le français en français. */\n}\nsection:lang(en) a[lang=en-gb]:after {\n\tcontent: \" |\"; /* Ajout d'un pipe après l'anglais en anglais. */\n}\n\n/* On décide, car la liste n'est plus qu'une phrase, de l'entourer de guillemets. */\nsection aside header:lang(fr):before {\n\tcontent: \"« \";\n}\nsection aside footer:lang(fr):after {\n\tcontent: \" »\";\n}\nsection aside header:lang(en):before {\n\tcontent: \"“\";\n}\nsection aside footer:lang(en):after {\n\tcontent: \"”\";\n}\n\n/* Ponctuation de la liste devenue une phrase. */\nsection li:after {\n\tcontent: \", \"; /* Chaque item est séparé par une virgule */\n}\nsection li:nth-last-child(2):lang(fr):after {\n\tcontent: \" et \"; /* Mais l'avant dernier, en français, par un \"et\" */\n}\nsection li:nth-last-child(2):lang(en):after {\n\tcontent: \" and \"; /* Alors qu'en anglais, se sera par un \"and\" */\n}\nsection li:last-child:after {\n\tcontent: \".\"; /* Finalement, on remplace la virgule finale par un point. */ \n}\n</pre>\n\n<p>Ce qui nous donne en français puis en anglais :</p>\n\n<div class=\"best-practice\">\n\t<div class=\"title\">Exemple 2 en Français</div>\n\t<div class=\"content\">\n\t\t<section class=\"example-2\" lang=\"fr-fr\">\n\t\t\t<div class=\"lang\">\n\t\t\t\t<span>Autres langues</span>\n\t\t\t\t<span class=\"a fr-fr\">Français</span>\n\t\t\t\t<span class=\"a en-gb\">English</span>\n\t\t\t\t<span class=\"a es-es\">Español</span>\n\t\t\t</div>\n\t\t\t<form id=\"form-fr-2\">\n\t\t\t\t<div class=\"subscribe\">Inscription</div>\n\t\t\t\t<div class=\"aside\">\n\t\t\t\t\t<div class=\"header\">Notre service permet</div>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li>de tchatter avec d'autres utilisateurs</li>\n\t\t\t\t\t\t<li>de partager vos photos</li>\n\t\t\t\t\t\t<li>de rencontrer des personnes en vrai</li>\n\t\t\t\t\t</ul>\n\t\t\t\t\t<div class=\"footer\">Pour le reste, vous êtes grand !</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"field\">\n\t\t\t\t\t<label for=\"form-fr-email-2\">Email</label>\n\t\t\t\t\t<input id=\"form-fr-email-2\" type=\"text\" placeholder=\"Email\" />\n\t\t\t\t</div>\n\t\t\t\t<div class=\"field\">\n\t\t\t\t\t<label for=\"form-fr-password-2\">Mot de passe</label>\n\t\t\t\t\t<input id=\"form-fr-password-2\" type=\"password\" placeholder=\"Mot de passe\" />\n\t\t\t\t</div>\n\t\t\t\t<div class=\"field\">\n\t\t\t\t\t<label><input id=\"form-fr-submit-2\" type=\"button\" value=\"Inscription\" /></label>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</section>\n\t</div>\n</div>\n\n<div class=\"best-practice\">\n\t<div class=\"title\">Exemple 2 en Anglais</div>\n\t<div class=\"content\">\n\t\t<section class=\"example-2\" lang=\"en-gb\">\n\t\t\t<div class=\"lang\">\n\t\t\t\t<span>Others languages</span>\n\t\t\t\t<span class=\"a fr-fr\">Français</span>\n\t\t\t\t<span class=\"a en-gb\">English</span>\n\t\t\t\t<span class=\"a es-es\">Español</span>\n\t\t\t</div>\n\t\t\t<form id=\"form-en-2\">\n\t\t\t\t<div class=\"subscribe\">Registration</div>\n\t\t\t\t<div class=\"aside\">\n\t\t\t\t\t<div class=\"header\">Our service allows you</div>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li>to chat with other users</li>\n\t\t\t\t\t\t<li>to share your photos</li>\n\t\t\t\t\t\t<li>to meet people in real life</li>\n\t\t\t\t\t</ul>\n\t\t\t\t\t<div class=\"footer\">It's your ride now!</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"field\">\n\t\t\t\t\t<label for=\"form-en-email-2\">Email</label>\n\t\t\t\t\t<input id=\"form-en-email-2\" type=\"text\" placeholder=\"Email\" />\n\t\t\t\t</div>\n\t\t\t\t<div class=\"field\">\n\t\t\t\t\t<label for=\"form-en-password-2\">Password</label>\n\t\t\t\t\t<input id=\"form-en-password-2\" type=\"password\" placeholder=\"Password\" />\n\t\t\t\t</div>\n\t\t\t\t<div class=\"field\">\n\t\t\t\t\t<label><input id=\"form-en-submit-2\" type=\"button\" value=\"Registration\" /></label>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</section>\n\t</div>\n</div>\n\n<h2>De l'utilisation de lang et lang</h2>\n\n<p>Je viens de vous présenter l'une des possibilités offertes par l'attribut <samp>lang</samp> et la pseudo-class <samp>:lang()</samp>. Cet article n'a pas pour but de dire si la déportation de certains éléments de ponctuations dans une CSS est une bonne ou une mauvaise pratique, mais plutôt de présenter nos deux éléments à travers un exemple concret et surtout de les découvrir pour ceux qui ne les connaissaient pas. Il ne vous aura peut-être pas échappé non plus que l'utilisation de la technique des classes CSS conditionnelles peut remplacer ce mécanisme natif.</p>", "dates" : { "published" : { "$date" : 1364297460000 }, "updated" : [] }, "others" : { "markdown" : true, "published" : false }, "script" : "", "style" : ".example-1 .lang {\r\n\tfloat: right;\r\n\tfont-size: 0.8em;\r\n}\r\n.example-1 .a {\r\n\tcolor: #0000ff;\r\n\tcursor: pointer;\r\n}\r\n.example-1 .a:hover {\r\n\tcolor: #ff0000;\r\n}\r\n.example-1 form:after {\r\n\tcontent: \"\";\r\n\tdisplay: block;\r\n\tclear: both;\r\n}\r\n.example-1 .subscribe {\r\n\tfont-size: 1.5em;\r\n\tborder-bottom: dashed 1px #cccccc;\r\n}\r\n.example-1 .aside {\r\n\tfloat: right;\r\n\tpadding: 8px 8px 8px 16px;\r\n\twidth: 55%;\r\n\tbox-sizing: border-box;\r\n\t-moz-box-sizing: border-box;\r\n}\r\n.example-1 label {\r\n\tdisplay: inline-block;\r\n\twidth: 100px;\r\n\tbox-sizing: border-box;\r\n\t-moz-box-sizing: border-box;\r\n}\r\n.example-1 .field {\r\n\tpadding: 16px 16px 0 8px;\r\n\twidth: 45%;\r\n\tbox-sizing: border-box;\r\n\t-moz-box-sizing: border-box;\r\n\ttext-align: right;\r\n}\r\n\r\n.example-1 .lang .fr-fr:after {\r\n\tcontent: \" -\";\r\n}\r\n.example-1 .lang .en-gb:after {\r\n\tcontent: \" -\";\r\n}\r\n.example-1 .lang span:first-child:lang(fr):after {\r\n\tcontent: \" :\";\r\n}\r\n.example-1 .lang span:first-child:lang(en):after {\r\n\tcontent: \":\";\r\n}\r\n.example-1 .lang:lang(fr) .a.fr-fr {\r\n\tdisplay: none;\r\n}\r\n.example-1 .lang:lang(en) .a.en-gb {\r\n\tdisplay: none;\r\n}\r\n.example-1 .header:lang(fr):after,\r\n.example-1 label:lang(fr):after {\r\n\tcontent: \" :\";\r\n}\r\n.example-1 .header:lang(en):after,\r\n.example-1 label:lang(en):after {\r\n\tcontent: \":\";\r\n}\r\n.example-1 label:last-child:after {\r\n\tcontent: \"\";\r\n}\r\n.example-1 li:after {\r\n\tcontent: \",\";\r\n}\r\n.example-1 li:last-child:after {\r\n\tcontent: \".\";\r\n}\r\n\r\n.example-2 .lang {\r\n\tfloat: right;\r\n\tfont-size: 0.9em;\r\n}\r\n.example-2 .lang span:first-child {\r\n\tdisplay: none;\r\n}\r\n.example-2 .a {\r\n\tcolor: #0000ff;\r\n\tcursor: pointer;\r\n}\r\n.example-2 .a:hover {\r\n\tcolor: #ff0000;\r\n}\r\n.example-2 .lang:lang(fr) .a.fr-fr {\r\n\tdisplay: none;\r\n}\r\n.example-2 .lang:lang(en) .a.en-gb {\r\n\tdisplay: none;\r\n}\r\n.example-2 .subscribe {\r\n\tfont-size: 1.2em;\r\n\tfont-weight: bold;\r\n}\r\n.example-2 .header,\r\n.example-2 .footer,\r\n.example-2 ul,\r\n.example-2 li {\r\n\tdisplay: inline;\r\n}\r\n.example-2 .aside {\r\n\ttext-align: center;\r\n\tpadding: 16px;\r\n}\r\n.example-2 .field {\r\n\tdisplay: inline-block;\r\n\tpadding: 8px;\r\n}\r\n.example-2 ul {\r\n\tmargin-left: 0;\r\n\tpadding: 0;\r\n}\r\n\r\n.example-2 .lang .fr-fr:after {\r\n\tcontent: \" |\";\r\n}\r\n.example-2 .lang .en-gb:after {\r\n\tcontent: \" |\";\r\n}\r\n.example-2 li:after {\r\n\tcontent: \", \";\r\n}\r\n.example-2 .header:lang(fr):before {\r\n\tcontent: \"« \";\r\n}\r\n.example-2 .footer:lang(fr):after {\r\n\tcontent: \" »\";\r\n}\r\n.example-2 .header:lang(en):before {\r\n\tcontent: \"“\";\r\n}\r\n.example-2 .footer:lang(en):after {\r\n\tcontent: \"”\";\r\n}\r\n.example-2 li:nth-last-child(2):lang(fr):after {\r\n\tcontent: \" et \";\r\n}\r\n.example-2 li:nth-last-child(2):lang(en):after {\r\n\tcontent: \" and \";\r\n}\r\n.example-2 li:last-child:after {\r\n\tcontent: \".\";\r\n}", "stylesheet" : "", "title" : "L'<span>attribut</span> <span>HTML5</span> <span>lang</span> et la <span>pseudo-class</span> <span>CSS3</span> :lang()", "urn" : "l-attribut-html5-lang-et-la-pseudo-class-css3-lang" }
{ "_id" : { "$oid" : "530f5f63620731fe86cb71a6" }, "cache" : { "comment" : { "number" : 1 } }, "categories" : [ { "$oid" : "5310456355dfd5f7698d48b8" }, { "$oid" : "530ef6a6789c1a55e4fde0af" }, { "$oid" : "5310456355dfd5f7698d48bb" }, { "$oid" : "5310456355dfd5f7698d48b6" }, { "$oid" : "5310456355dfd5f7698d48b9" }, { "$oid" : "5310456355dfd5f7698d48ba" } ], "content" : "<p>La navigation interne à une page web d'un site consiste à utiliser une ancre et y faire référence pour forcer l'affichage du navigateur sur la zone en question. Penchons nous d'abord sur l'utilisation « légacy* » de ce mécanisme et ensuite sur les améliorations ergonomiques envisageables avec du JavaScript (et du jQuery).</p>\r\n\r\n<p id=\"pdefinition\" class=\"eye-catching\"><a id=\"adefinition\">*</a> tel qu'il fonctionne de manière standard depuis sa création.</p>\r\n\r\n<h2>L'ancre interprétée nativement par le navigateur</h2>\r\n\r\n<p>L'utilisation standard de la balise <samp>&lt;a&gt;</samp> est celle de permettre la navigation entre différentes pages d'un même site ou d'autre sites/ressources sur la toile.</p>\r\n\r\n<p>Une seconde utilisation —celle qui nous intéresse dans cet article— est de permettre la navigation interne à une page. Cette seconde utilisation peu grosso-modo être divisée en 3 types de lien :</p>\r\n<ul>\r\n\t<li>\r\n\t\t<span class=\"highlighting\">accès rapide</span> : on va plus loin dans la page (\"Aller au menu\", \"Aller à l'article\"...),\r\n\t</li>\r\n\t<li>\r\n\t\t<span class=\"highlighting\">navigation interne</span> : réservée pour des intéractions (\"Retour en haut de page\", \"Référence au commentaire 14\"...),\r\n\t</li>\r\n\t<li>\r\n\t\t<span class=\"highlighting\">évitement</span> : plus de détails dans l'article <a href=\"http://www.alsacreations.com/article/lire/572-Les-liens-d-evitement.html\" title=\"Les liens d'évitement - Alsacreations\">Les liens d'évitement - Alsacreations</a>.\r\n\t</li>\r\n</ul> \r\n<p>Bien que la finalité de chaque utilisation soit différente, le mécanisme de mise en place est identique.</p>\r\n\r\n<h3>La balise a et l'attribut name</h3>\r\n\r\n<p>Dans les débuts, il n'y avait qu'une façon d'atteindre une zone précise d'un document : le couple balise <samp>&lt;a&gt;</samp> et attribut <samp>name</samp>. Prenons l'exemple d'une phrase présente plus haut dans cet article et voyons comment l'ancrer de manière à y accéder par un lien.</p>\r\n\r\n<p>Pour atteindre l'ancre « adefinition » :</p>\r\n<pre class=\"prettyprint linenums lang-html\">\r\n&lt;a name=\"adefinition\"&gt;*&lt;/a&gt; tel qu'il fonctionne de manière standard depuis sa création.\r\n</pre>\r\n\r\n<p>On utilise le lien :</p>\r\n<pre class=\"prettyprint linenums lang-html\">\r\nCliquer sur &lt;a href=\"la-navigation-interne-dans-une-page-web/#adefinition\"&gt;Atteindre&lt;/a&gt;\r\n</pre>\r\n\r\n<p><span class=\"highlighting\">Résultat :</span> Cliquer sur <a href=\"la-navigation-interne-dans-une-page-web/#adefinition\">Atteindre</a></p>\r\n\r\n<p class=\"warning\">Gardez à l'esprit qu'en xHTML ou en HTML5 l'attribut name sur la balise <samp>&lt;a&gt;</samp> est obsolète.</p>\r\n\r\n<p class=\"eye-catching\">Note : comme vous pouvez le constater dans notre exemple, la phrase est cachée par le menu. Malheureusement l'ancre ne permet pas de définir une valeur de décalage (offset). On peut facilement envisager d'ancrer un élément plus haut que la zone véritablement souhaitée pour la rendre bien lisible mais QUID de l'accessibilité et de la maintenance des ancres à posteriori.</p>\r\n\r\n<h3>L'attribut id comme ancre</h3>\r\n\r\n<p>Puis très vite les navigateurs se sont nativement affranchis de la balise <samp>&lt;a name=\"\"&gt;</samp> en permettant de cibler n'importe quel élément HTML. Pour cela —parce que l'attribut <samp>name</samp> n'est pas disponible sur toutes les balises— on utilise l'attribut <samp>id</samp> disponible sur toutes les balises.</p>\r\n\r\n<p>Pour atteindre l'ancre « pdefinition » :</p>\r\n<pre class=\"prettyprint linenums lang-html\">\r\n&lt;p id=\"pdefinition\" class=\"eye-catching\"&gt;\r\n\t&lt;a name=\"adefinition\"&gt;*&lt;/a&gt; tel qu'il fonctionne de manière standard depuis sa création.\r\n&lt;/p&gt;\r\n</pre>\r\n\r\n<p>On utilise le lien :</p>\r\n<pre class=\"prettyprint linenums lang-html\">\r\nCliquer sur &lt;a href=\"la-navigation-interne-dans-une-page-web/#pdefinition\"&gt;Atteindre&lt;/a&gt;\r\n</pre>\r\n\r\n<p><span class=\"highlighting\">Résultat :</span> Cliquer sur <a href=\"la-navigation-interne-dans-une-page-web/#pdefinition\">Atteindre</a></p>\r\n\r\n<p class=\"eye-catching\">Note : vous remarquerez que le système natif impose d'ajouter l'ancre à l'url. Cela peut s'avérer être un avantage pour communiquer l'adresse et la position précise d'un commentaire en un seul lien cependant pour les mécanismes AJAX utilisant le détournement de l'ancre (la partie hash de l'adresse se situant après le « # ») cela est un handicape certain.</p>\r\n\r\n<h2>Les ancres HTML et le JavaScript</h2>\r\n\r\n<p>A présent voyons quelques exemples de manipulation d'ancres avec du JavaScript.</p>\r\n\r\n<h3>Décaller l'affichage de l'ancre du haut du navigateur</h3>\r\n\r\n<p>Comme noté précédemment, il serait possible de simplement placer son ancre plus haut que l'endroit réel où l'on souhaite arriver. Cependant pour des questions d'accessibilité, il vaut mieux que l'élément ancré soit réellement l'élément que l'on souhaite afficher.</p>\r\n\r\n<p>Le script JavaScript ci-dessous va vous permettre de décaler l'affichage de vos ancres :</p>\r\n\r\n<pre class=\"prettyprint linenums lang-javascript\">\r\n\t// Pour tous les liens commençant par #.\r\n\t$(\"a[href^='#']\").click(function (e) {\r\n\t\t// On annule le comportement initial au cas ou la base soit différente de la page courante.\r\n\t\te.preventDefault(); \r\n\t\t\t\t\r\n\t\t// On ajoute le hash dans l'url.\r\n\t\twindow.location.hash = $(this).attr(\"href\");\r\n\t\t\r\n\t\t// Une fois en place on va forcer l'affichage 40 pixels plus haut.\r\n\t\t$(window).scrollTop( $(window).scrollTop() - 40 );\r\n\t});\r\n</pre>\r\n\r\n<p><span class=\"highlighting\">Exemple :</span> <a id=\"ddefinition\" href=\"#pdefinition\" title=\"Atteindre #pdefinition avec un offset de -40\">Atteindre #pdefinition avec un offset de -40</a></p>\r\n\r\n<h3>Faire défiler la page jusqu'à une ancre</h3>\r\n\r\n<p>Nous allons rajouter un effet pour surcharger le comportement de base. La page ne sautera plus du lien vers l'ancre, mais accompagnera l'utilisateur jusqu'à l'ancre ce qui lui permettra de ne pas être perdu. Il pourra ainsi appréhender où se situe la nouvelle zone dans la page courante.</p>\r\n\r\n<pre class=\"prettyprint linenums lang-javascript\">\r\n\t// Pour tous les liens commençant par #.\r\n\t$(\"a[href^='#']\").click(function (e) {\r\n\t\tvar \r\n\t\t\tyPos,\r\n\t\t\tyInitPos,\r\n\t\t\ttarget = ($($(this).attr(\"href\") + \":first\"));\r\n\t\t\t\r\n\t\t// On annule le comportement initial au cas ou la base soit différente de la page courante.\r\n\t\te.preventDefault(); \r\n\t\t\r\n\t\tyInitPos = $(window).scrollTop();\r\n\t\t\r\n\t\t// On ajoute le hash dans l'url.\r\n\t\twindow.location.hash = $(this).attr(\"href\");\r\n\t\t\r\n\t\t// Comme il est possible que l'ajout du hash perturbe le défilement, on va forcer le scrollTop à son endroit inital.\r\n\t\t$(window).scrollTop(yInitPos);\r\n\t\t\r\n\t\t// On cible manuellement l'ancre pour en extraire sa position.\r\n\t\t// Si c'est un ID on l'obtient.\r\n\t\ttarget = ($($(this).attr(\"href\") + \":first\"));\r\n\r\n\t\t// Sinon on cherche l'ancre dans le name d'un a.\r\n\t\tif (target.length == 0) {\r\n\t\t\ttarget = ($(\"a[name=\" + $(this).attr(\"href\").replace(/#/gi,\"\") + \"]:first\"))\r\n\t\t}\r\n\t\t\r\n\t\t// Si on a trouvé un name ou un id, on défile.\r\n\t\tif (target.length == 1) {\r\n\t\t\tyPos = target.offset().top; // Position de l'ancre.\r\n\t\t\r\n\t\t\t// On anime le défilement jusqu'à l'ancre.\r\n\t\t\t$('html,body').animate({ scrollTop: yPos - 40 }, 1000); // On décale de 40 pixels l'affichage pour ne pas coller le bord haut de l'affichage du navigateur et on défile en 1 seconde jusqu'à l'ancre.\r\n\t\t}\r\n\t});\r\n</pre>\r\n\r\n<p><span class=\"highlighting\">Exemple :</span></p>\r\n<ul>\r\n\t<li>Sur id : <a id=\"edefinition\" href=\"#pdefinition\" title=\"Défiler juqu'à #pdefinition\">Défiler juqu'à #pdefinition</a></li>\r\n\t<li>Sur name : <a id=\"fdefinition\" href=\"#adefinition\" title=\"Défiler juqu'à #adefinition\">Défiler juqu'à #adefinition</a></li>\r\n</ul>\r\n\r\n<h4>Variante : ne pas conserver le hash dans l'url</h4>\r\n\r\n<p>Cela permet aux d'applications web avec de l'AJAX se servant du hash pour la navigation globale de ne pas perturber l'adresse. Il suffit de supprimer les lignes suivantes de l'exemple précédent :</p>\r\n\r\n<pre class=\"prettyprint linenums lang-javascript\">\r\n\t...\r\n\tyInitPos,\r\n\t...\r\n\tyInitPos = $(window).scrollTop();\r\n\twindow.location.hash = $(this).attr(\"href\");\r\n\t$(window).scrollTop(yInitPos);\r\n</pre>\r\n\r\n<h4>Variante : ne pas conserver le hash dans l'url sans défilement</h4>\r\n\r\n<p>Au cas où vous préféreriez simplement annuler l'ajout du hash, mais conserver le comportement initial (sans défilement) il suffit de remplacer la ligne :</p>\r\n\r\n<pre class=\"prettyprint linenums lang-javascript\">\r\n\t$('html,body').animate({ scrollTop: yPos - 40 }, 1000);\r\n</pre>\r\n\r\n<p>par la ligne</p>\r\n\r\n<pre class=\"prettyprint linenums lang-javascript\">\r\n\t$(window).scrollTop(yPos - 40);\r\n</pre>\r\n\r\n<p>Quoi de plus simple :)</p>\r\n\r\n<h3>Problème d'ancre avec la balise base</h3>\r\n\r\n<p>Si vous ne la connaissez pas encore, sachez que la balise <samp>&lt;base&gt;</samp> permet de choisir la référence d'une url dans le cas d'un appel relatif à une page dans un lien. Elle est réellement pratique pour les fichiers appelés par réécriture d'url incluant donc de faux sous répertoires.</p>\r\n\r\n<h4>Résoudre un problème...</h4>\r\n\r\n<p>Voyez plutôt l'exemple :</p>\r\n\r\n<div class=\"worst-practice\">\r\n\t<div class=\"title\">Problème de chemin relatif avec réécriture d'url</div>\r\n\t<div class=\"content\">\r\n\t\t<p>Je décide de ne pas utiliser d'url absolue car mon site peut changer d'adresse racine. Je n'ai pas envie de changer tous mes liens en base de données si changement d'adresse par exemple. J'utilise donc l'url relative.</p>\r\n\t\t<p>À cette adresse <span class=\"highlighting\">http://blog.haeresis.fr/</span>, je dois inclure ma CSS comme suit :</p>\r\n<pre class=\"prettyprint linenums lang-html\">\r\n&lt;link type=\"text/css\" rel=\"stylesheet\" href=\"css/common.css\" media=\"screen\" /&gt;\r\n</pre>\r\n\t\t<p>Et à cette adresse <span class=\"highlighting\">http://blog.haeresis.fr/categories/</span>, je dois inclure ma CSS comme suit :</p>\r\n<pre class=\"prettyprint linenums lang-html\">\r\n&lt;link type=\"text/css\" rel=\"stylesheet\" href=\"../css/common.css\" media=\"screen\" /&gt;\r\n</pre>\r\n\t\t<p>Le problème intervient donc dès lors que l'inclusion de <samp>&lt;link&gt;</samp> est dans un fichier commun à toutes les pages. Avec la réécriture d'url, je n'ai aucune idée du niveau d'arborescence qui sépare mon fichier de la page courante.</p>\r\n\t</div>\r\n</div>\r\n<div class=\"best-practice\">\r\n\t<div class=\"title\">Exemple de résolution avec base</div>\r\n\t<div class=\"content\">\r\n\t\t<p>Grâce à l'utilisation de <samp>&lt;base&gt;</samp> avant tous mes liens je peux définir la base de l'appel d'un fichier qui se fait initialement depuis le dossier de l'adresse courante de manière identique à toutes les pages (quel que soit le niveau d'arborescence) et ceux pour tous les liens de la page.</p>\r\n<pre class=\"prettyprint linenums lang-html\">\r\n&lt;base href=\"http://blog.haeresis.fr/\" /&gt;\r\n&lt;link type=\"text/css\" rel=\"stylesheet\" href=\"css/common.css\" media=\"screen\" /&gt;\r\n</pre>\r\n\t\t<p>Cela n'empêchera pas de devoir changer la base s'il y a changement d'adresse du site. Mais le travail est alors minime et les liens relatifs enregistrés en base (ceux d'un article par exemple) marcheront partout, quel que soit la profondeur de l'adresse de l'article.</p>\r\n\t</div>\r\n</div>\r\n\r\n<h4>...peut en apporter un autre</h4>\r\n\r\n<p>Tout semble aller pour le mieux dans le meilleur des mondes ; mais revenons à notre lien <samp>&lt;a href=\"#pdefinition\"&gt;</samp>. Il pointe maintenant vers la base du site et non plus vers la page courante à cause de <samp>&lt;base&gt;</samp> ! Cela a pour effet de bord de ne pas atteindre l'ancre dans la page mais de chercher à atteindre l'ancre à l'adresse de &lt;base&gt;. Il faut alors compléter son lien pour se ré-accorder à la base du site.</p>\r\n\r\n<div class=\"worst-practice\">\r\n\t<div class=\"title\">Mise en évidence de l'effet de bord</div>\r\n\t<div class=\"content\">\r\n\t\t<p>Nous sommes à l'adresse : <span class=\"highlighting\">http://blog.haeresis.fr/la-navigation-interne-dans-une-page-web/</span></p>\r\n<pre class=\"prettyprint linenums lang-html\">\r\n&lt;head&gt;\r\n\t...\r\n\t&lt;base href=\"http://blog.haeresis.fr/\" /&gt;\r\n\t...\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n\t...\r\n\t&lt;a href=\"#pdefinition\" title=\"Atteindre l'ancre\"&gt;Atteindre l'ancre&lt;a&gt; <!-- Ne marche plus car la nouvelle base n'est plus la page courante. -->\r\n\t&lt;a href=\"la-navigation-interne-dans-une-page-web/#pdefinition\" title=\"Atteindre l'ancre\"&gt;Atteindre l'ancre&lt;a&gt; <!-- Marche puisque base + a concorde avec la page courante. -->\r\n\t...\r\n&lt;/body&gt;\r\n</pre>\r\n\t\t<p><span class=\"highlighting\">Problème : </span> <a href=\"#pdefinition\" title=\"Atteindre l'ancre\">Cette ancre ne marche pas à cause de la base du site</a></p>\r\n\t</div>\r\n</div>\r\n<div class=\"best-practice\">\r\n\t<div class=\"title\">Un peu de JavaScript et on oublit</div>\r\n\t<div class=\"content\">\r\n\t\t<p>Si vous voulez absolument éviter de réécrire l'url de la page courante (parce que si elle change d'adresse, le monde s'éteindra) vous pouvez remplacer :</p>\r\n<pre class=\"prettyprint linenums lang-html\">\r\n\t&lt;a href=\"#pdefinition\" title=\"Ancre\"&gt;Ancre&lt;a&gt;\r\n</pre>\r\n\t\t<p>par :</p>\r\n<pre class=\"prettyprint linenums lang-html\">\r\n\t&lt;a href=\"#pdefinition\" onclick=\"window.location.hash = 'pdefinition'; return false\" title=\"Ancre\"&gt;Ancre&lt;/a&gt;\r\n</pre>\r\n\t\t<p>ou automatiser le système avec jQuery :</p>\r\n<pre class=\"prettyprint linenums lang-javascript\">\r\n\t// Pour tous les liens commençant par #.\r\n\t$(\"a[href^='#']\").click(function (e) {\r\n\t\te.preventDefault(); // On annule le comportement initial.\r\n\t\twindow.location.hash = $(this).attr(\"href\"); // On change le hash de l'adresse.\r\n\t});\r\n</pre>\r\n\t\t<p class=\"eye-catching\">Note : Vous me direz que sans JavaScript on retournera à l'accueil et vous aurez raison...</p>\r\n\t</div>\r\n</div>\r\n\r\n<h2>En conclusion</h2>\r\n\r\n<p>La simplicité avec laquelle on peut atteindre une ancre s'envole dès l'instant où l'on souhaite faire plus que cela. Ainsi utiliser les ancres avec la balise base, décaler l'offset d'une ancre ou animer la page jusqu'à l'ancre sont autant de tâches réalisables mais qui nécessitent un minimum de connaissances et de précautions.</p>", "dates" : { "published" : "2013-04-19 16:49:00", "updated" : [ "2013-04-19 16:49:00" ] }, "script" : "$(document).ready(function () {\r\n\t$(\"#edefinition, #fdefinition\").click(function (e) {\r\n\t\t\tvar \r\n\t\t\tyPos,\r\n\t\t\tyInitPos,\r\n\t\t\ttarget = ($($(this).attr(\"href\") + \":first\"));\r\n\t\t\t\r\n\t\t// On annule le comportement initial au cas ou la base soit différente de la page courante.\r\n\t\te.preventDefault(); \r\n\t\t\r\n\t\tyInitPos = $(window).scrollTop();\r\n\t\t\r\n\t\t// On ajoute le hash dans l'url.\r\n\t\twindow.location.hash = $(this).attr(\"href\");\r\n\t\t\r\n\t\t// Comme il est possible que l'ajout du hash perturbe le défilement, on va forcer le scrollTop à son endroit inital\r\n\t\t$(window).scrollTop(yInitPos);\r\n\t\t\r\n\t\t// On cible manuellement l'ancre pour en extraire sa position.\r\n\t\t// Si c'est un ID on l'obtient.\r\n\t\ttarget = ($($(this).attr(\"href\") + \":first\"));\r\n\r\n\t\t// Sinon on cherche l'ancre\r\n\t\tif (target.length == 0) {\r\n\t\t\ttarget = ($(\"a[name=\" + $(this).attr(\"href\").replace(/#/gi,\"\") + \"]:first\"))\r\n\t\t}\r\n\t\t\r\n\t\t// Si on a eu un name ou un id, on défile.\r\n\t\tif (target.length == 1) {\r\n\t\t\tyPos = target.offset().top; // Position de l'ancre.\r\n\t\t\r\n\t\t\t// On anime le défilement jusqu'à l'ancre.\r\n\t\t\t$('html,body').animate({ scrollTop: yPos - 40 }, 1000); // On décale de 40 pixels l'affichage pour ne pas coller le bord haut de l'affichage du navigateur et on défile en 1 seconde jusqu'à l'ancre.\r\n\t\t}\r\n\t});\r\n\t$(\"#ddefinition\").click(function (e) {\r\n\t\t// On annule le comportement initial au cas ou la base soit différente de la page courante.\r\n\t\te.preventDefault(); \r\n\t\t\t\t\r\n\t\t// On ajoute le hash dans l'url.\r\n\t\twindow.location.hash = $(this).attr(\"href\");\r\n\t\t\r\n\t\t// Une fois en place on va forcer l'affichage 40 pixel plus haut.\r\n\t\t$(window).scrollTop( $(window).scrollTop() - 40 );\r\n\t});\r\n});", "title" : "La <span>navigation</span> interne dans une <span>page</span> web", "urn" : "la-navigation-interne-dans-une-page-web" }
{ "_id" : { "$oid" : "530f5f63620731fe86cb71a7" }, "cache" : { "comment" : { "number" : 3 } }, "categories" : [ { "$oid" : "5310456355dfd5f7698d48b9" }, { "$oid" : "5310456355dfd5f7698d48ba" }, { "$oid" : "5310456355dfd5f7698d48c6" }, { "$oid" : "5310456355dfd5f7698d48c1" }, { "$oid" : "5310456355dfd5f7698d48be" }, { "$oid" : "5310456355dfd5f7698d48c2" }, { "$oid" : "5310456355dfd5f7698d48c0" } ], "content" : "<p>Alors que certains s'en réjouissent et que d'autres le craignent, le support des vieux navigateurs tel que Internet Explorer 6, Internet Explorer 7 et Internet Explorer 8 est terminé pour jQuery...</p>\r\n\r\n<p>...et cela dès aujourd'hui puisque jQuery 2.0 est arrivé. Alignons quelques faits pour aider à juger l'utilité de la chose.</p>\r\n\r\n<h2>La part des navigateurs en Mars 2013</h2>\r\n\r\n<p>Celle-ci concerne le monde entier :</p>\r\n\r\n<ul>\r\n\t<li>Chrome fait <span class=\"highlighting\">38%</span></li>\r\n\t<li>Firefox fait <span class=\"highlighting\">20%</span></li> \r\n\t<li>Safari fait <span class=\"highlighting\">8%</span></li>\r\n\t<li>Opera fait <span class=\"highlighting\">1%</span></li>\r\n\t<li>IE10 fait <span class=\"highlighting\">2%</span></li>\r\n\t<li>IE9 fait <span class=\"highlighting\">16%</span></li>\r\n\t<li>IE8 fait <span class=\"highlighting\">10%</span></li>\r\n\t<li>IE7 fait <span class=\"highlighting\">0.6%</span></li>\r\n\t<li>IE6 fait <span class=\"highlighting\">0.0...%</span></li>\r\n</ul>\r\n\r\n<p class=\"eye-catching\">\r\n\tSource : <a href=\"http://gs.statcounter.com/#browser_version_partially_combined-ww-monthly-201303-201303-bar\" title=\"Source de la part des navigateurs en Mars 2013\">StatCounter.com</a>\r\n</p>\r\n\r\n<h2>Le support de jQuery</h2>\r\n\r\n<h3>Support et poids de jQuery 1.9.1</h3>\r\n\r\n<p>La version 1.9.1 de jQuery supporte IE6/7/8/9/10, Chrome, Firefox, Safari, Opera. Elle supporte donc <span class=\"highlighting\">95.6%</span> des navigateurs (et surement d'autres).</p>\r\n<p>Elle pèse en production <span class=\"highlighting\">90.4kB</span>.</p>\r\n\r\n<p class=\"eye-catching\">\r\n\tSource : <a href=\"http://code.jquery.com/jquery-1.9.1.min.js\" title=\"Source de la production jQuery1.9.1\">jquery-1.9.1.min.js</a>\r\n</p>\r\n\r\n<h3>Support et poids de jQuery 2.0</h3>\r\n\r\n<p>La version 2.0 supporte IE9/10, Chrome, Firefox, Safari, Opera.\r\nElle supporte donc <span class=\"highlighting\">85%</span> des navigateurs (et surement d'autres en moins).</p>\r\n<p>Elle pèse en production <span class=\"highlighting\">81.1kB</span>.</p>\r\n\r\n<p class=\"eye-catching\">\r\n\tSource : <a href=\"http://code.jquery.com/jquery-2.0.0.min.js\" title=\"Source de la production jQuery2.0\">jquery-2.0.0.min.js</a>\r\n</p>\r\n\r\n<h2>Conparaison poids/support de jQuery 1.9.1 et 2.0</h2>\r\n\r\n<p>La librairie jQuery 2.0 de production est <span class=\"highlighting\">9%</span> (et pas 12%) plus légère que jQuery 1.9.1</p>\r\n<p>La librairie jQuery 2.0 supporte <span class=\"highlighting\">9%</span> d'utilisateurs en moins que jQuery 1.9.1</p>\r\n\r\n<h2>Que faut-il en penser ?</h2>\r\n\r\n<p>Pour ma part, cela soulève trois questions :</p>\r\n\r\n<ul class=\"highlighting\">\r\n\t<li>N'est-il pas encore tôt pour balayer le support IE8 ? (10% des navigateurs)</li>\r\n\t<li>N'est-il pas tant d'arrêter le support IE6 et IE7 ? (moins de 1% des navigateurs)</li>\r\n\t<li>Supporter 9% d'utilisateurs en moins pour être 9% moins lourds est-il justifié ?</li>\r\n</ul>\r\n\r\n<p>Et vous ? Que pensez-vous de l'arrêt du support IE6/7/8 de jQuery ?</p>", "dates" : { "published" : "2013-04-20 11:49:00", "updated" : [ "2013-04-20 11:49:00" ] }, "title" : "<span>jQuery</span> 2.0 ne supporte plus <span>IE6, IE7 et IE8</span>", "urn" : "jquery-2-ne-supporte-plus-ie6-ie7-et-ie8" }
{ "_id" : { "$oid" : "530f5f63620731fe86cb71a8" }, "cache" : { "comment" : { "number" : 0 } }, "categories" : [ { "$oid" : "5310456355dfd5f7698d48ba" }, { "$oid" : "5310456355dfd5f7698d48c7" }, { "$oid" : "5310456355dfd5f7698d48c8" }, { "$oid" : "5310456355dfd5f7698d48b8" } ], "content" : "<p>N'avez-vous jamais rêvé d'utiliser jQuery dans vos traitements serveur ? N'avez-vous jamais cherché un équivalent pour PHP ou C# dans l'espoir de manipuler aisément les templates HTML de vos cher moteurs de template avant envoie côté client ? Êtes-vous tombé amoureux de JavaScript ? Ce langage étrange qui semble basique, mais qui est finalement objet, sans type mais finalement typé, procédurale mais finalement événementiel, mono-thread mais finalement multi-traitement asynchrone...</p>\r\n\r\n<p>Et si vous réalisiez vos développements Back-end en JavaScript ? C'est possible avec Node.js !</p>\r\n\r\n<div class=\"correct-practice\">\r\n\t<div class=\"title highlighting\">À la découverte de Node.js sous Windows</div>\r\n\t<nav class=\"content\">\r\n\t\t<ol>\r\n\t\t\t<li><a class=\"highlighting\" href=\"./developper-en-javascript-cote-serveur-avec-nodejs/\" title=\"Développer en JavaScript côté serveur avec Node.js\">Qu'est-ce que Node.js ?</a></li>\r\n\t\t\t<li><a href=\"./installer-et-utiliser-nodejs-sous-windows/\" title=\"Installer et utiliser Node.js sous Windows\">Installation de Node.js</a></li>\r\n\t\t\t<li><a href=\"./serveur-web-et-application-web-en-javascript/\" title=\"Serveur web et application web en JavaScript\">Simple application web avec Node.js</a></li>\r\n\t\t\t<li><a href=\"./utiliser-jquery-avec-nodejs-sous-windows/\" title=\"Utiliser jQuery avec Node.js sous Windows\">Utiliser jQuery côté serveur avec Node.js</a></li>\r\n\t\t\t<li>Une architecture MVC2 avec Node.js</li>\r\n\t\t\t<li>Appels client asynchrones avec Node.js</li>\r\n\t\t\t<li>Un moteur de template avec Node.js</li>\r\n\t\t\t<li>Des sites multilingues avec Node.js</li>\r\n\t\t\t<li>La base de données MySQL et Node.js</li>\r\n\t\t</ol>\r\n\t</nav>\r\n</div>\r\n\r\n<h2>Avantages de Node.js</h2>\r\n\r\n<p>Node.js ? Oui mais pourquoi ? Voici une petite liste non-exhaustive des points forts de Node.js.</p>\r\n<ul>\r\n\t<li>Un seul langage Front-end et Back-end, le langage est connu de tous (au moins des développeurs Front-end) et rien est à réapprendre (peut-être une mise à niveau pour les Back-end).</li>\r\n\t<li>Open Source sous licence MIT.</li>\r\n\t<li>Projet soutenu par de grandes sociétés comme Microsoft et Google.</li>\r\n\t<li>Un gestionnaire de modules performant et très simple.</li>\r\n\t<li>Pas de serveur web lourd (voir plus loin).</li>\r\n\t<li>Mono-thread et événementiel avec une grande performance.</li>\r\n\t<li>Simplicité de mise en oeuvre (si si).</li>\r\n\t<li>Développement temps réel pour de vrais applications web grâce à socket.io.</li>\r\n\t<li>Manipulation de DOM côté serveur simple (jQuery).</li>\r\n\t<li>...</li>\r\n</ul>\r\n\r\n<p>Bref, passons à la suite.</p>\r\n\r\n<h2>Passer de Apache/PHP à Node.js</h2>\r\n\r\n<p>Je devine déjà quelles sont vos premières interrogations. Comment diable utiliser JavaScript pour faire du développement côté serveur ? Je veux bien mais :</p>\r\n\r\n<h3>Questions existentielles</h3>\r\n\r\n<ul>\r\n\t<li>Comment je fais de la lecture/écriture de fichier ? C'est impossible en JavaScript.</li>\r\n\t<li>Comment je fais de l'inclusion de fichier ? C'est impossible en JavaScript.</li>\r\n\t<li>Comment un setInterval ou un setTimeout peuvent marcher côté serveur ?</li>\r\n\t<li>Comment ça fonctionne avec Apache ? IIS ?</li>\r\n\t<li>Moi je veux bien, mais ça se débogue ?</li>\r\n\t<li>...</li>\r\n</ul>\r\n\r\n<p>J'aurais dit la même chose il y a quelques temps. Essayons d'y voir plus clair.</p>\r\n\r\n<p>Le JavaScript que vous avez l'habitude de côtoyer dans vos navigateurs, chers intégrateurs, n'est qu'une partie de l'iceberg. Il n'est pas interprété de la même manière en fonction des navigateurs car chacun met à disposition des briques de JavaScript pour le développement web. Cependant tout le monde s'accorde à dire que permettre au JavaScript de manipuler des fichiers coté client ce n'est pas très nette, et tout le monde s'accorde à dire que cibler un noeud HTML avec <samp>document.getElementById</samp> c'est la moindre des choses. Sachez que si l'implémentation de JavaScript est si uniforme entre différents interpréteurs c'est parce qu'ils suivent tous les mêmes directives : celle de ECMA International qui définie les standards du « ECMAScript scripting langage » alias notre bon vieux JavaScript. Vous trouverez plus de détails sur l'historique de ECMAScript/JavaScript sur la toile (et découvrirez que certaines implémentations connues de tous ne sont pas des standards).</p>\r\n\r\n<figure>\r\n\t<figcaption>Le JavaScript des navigateurs et celui de Node.js</figcaption>\r\n\t<img class=\"openable\" src=\"./upload/image/js-browser-vs-node.png\" alt=\"Le JavaScript des navigateurs et celui de Node.js\" width=\"618\" height=\"428\" style=\"width: 94%;height: auto;\" />\r\n</figure>\r\n\r\n<p>Tout en suivant au mieux les directives de <a href=\"http://www.ecma-international.org/default.htm\" title=\"Site de l'ECMA International\">ECMA International</a>, il est donc tout à fait possible de développer un interpréteur JavaScript pour une utilisation du langage hors d'un navigateur qui pourrait faire appel à des fichiers dans des fichiers, lire et écrire dans des fichiers, etc... Cet interpréteur s'appelle Node.js. Cependant, Node.js n'a pas réinventé la roue, il utilise comme socle le même interpréteur JavaScript que celui qu'utilise Google Chrome le « <a href=\"https://code.google.com/p/v8/\" title=\"Site du projet V8 JavaScript Engine\">V8 JavaScript Engine</a> ». Par exemple, là où la variable mère du socle du moteur « JavaScript V8 Engine » sous Chrome est <samp>window</samp>, celui de Node.js (même socle) est <samp>global</samp></p>\r\n\r\n<h3>Architecture web avec Node.js</h3>\r\n\r\n<p>Comment faire fonctionner Apache ou IIS avec Node.js ? C'est très simple, il suffit de ne pas les faire fonctionner du tout. En fait, avec Node.js, vous n'en avez pas besoin. Il va falloir re-créer vous-même un serveur web. Hola... il est possible que vous n'ayez jamais mis les mains dans Apache bien que vous ayez quelques notions d'échanges Client/Serveur alors de là à développer votre serveur web... Et bien dite vous que c'est très simple et que ça sera l'occasion de bien comprendre les rôles de PHP, Apache, de vos pages en PHP, etc...</p>\r\n\r\n<figure>\r\n\t<figcaption>Architecture PHP vs Node.js</figcaption>\r\n\t<img class=\"openable\" src=\"./upload/image/php-vs-node.png\" alt=\"Architecture PHP vs Node.js\" width=\"618\" height=\"400\" style=\"width: 94%;height: auto;\" />\r\n</figure>\r\n\r\n<h2>En résumé</h2>\r\n\r\n<p>Finalement Node.js n'est qu'un interpréteur JavaScript enrichissant celui-ci avec diverses API (appelées module) qui permet d'exécuter des fichier .js (Ca remplace donc aisément des scripts PHP, Ruby, Python, Bash...).</p>\r\n\r\n<p>Pour faire un site web, la première étape sera donc de créer un serveur web. Mais si on commençait par le commencement ? <a href=\"http://blog.haeresis.fr/installer-et-utiliser-nodejs-sous-windows/\" title=\"Installer et utiliser Node.js sous Windows\">Installer Node.js</a> !</p>", "dates" : { "published" : "2013-04-24 14:09:00", "updated" : [ "2013-04-24 14:09:00" ] }, "title" : "<span>Développer</span> en <span>JavaScript</span> côté <span>serveur</span> avec <span>Node.js</span>", "urn" : "developper-en-javascript-cote-serveur-avec-nodejs" }
{ "_id" : { "$oid" : "530f5f63620731fe86cb71a9" }, "cache" : { "comment" : { "number" : 0 } }, "categories" : [ { "$oid" : "5310456355dfd5f7698d48c9" }, { "$oid" : "5310456355dfd5f7698d48cb" }, { "$oid" : "5310456355dfd5f7698d48ca" } ], "content" : "Avez-vous déjà ressenti de la Flemme empathique ? Mais qu'est-ce que c'est au juste la Flemme empathique ou Flemme par empathie. Je ne sais pas réellement le définir ; ça s'apparente à « ne pas vouloir déranger » ou encore ça signifie ce que ça signifie : avoir la flemme à la place de quelqu'un.\n\n\n\n\n\n## Quelques exemples ##\n\nVoici quelques mises en situation pour comprendre le principe :\n\n### La bouteille d'eau ###\n\nVotre collègue passe à côté de vous et voit votre bouteille d'eau vide. Il va à la source remplir la sienne, à l'accueil, à trois portes d'ici dans une fontaine où il faut \"plier\" sa bouteille pour la remplir plus ou moins. Il vous interpelle et vous dit « Je te remplis ta bouteille ? ».\n\nVous ne lui avez rien demandé, ça fait une heure que vous n'avez pas forcément soif mais qu'à la réflexion un peu d'eau ne serait pas de refus.\n\nMais y a ce code à faire marcher, vous y êtes presque. Remplir une bouteille d'eau nécessiterait de se lever, d'ouvrir les portes, de peut-être se faire distraire au passage, de lutter avec la fontaine... bref... « la flemme », ça attendra ; et vous répondez seulement pour je ne sais quelle raison : « Non merci, ça ira ».\n\n**En réalité... vous avez probablement été frappé par la Flemme empathique !** Ça ne dérangeait absolument pas votre collègue de remplir la bouteille, sinon il ne l'aurait pas proposé. Vous, ça ne vous aurait rien coûté, vous aviez juste à continuer ce que vous faisiez. « J'ai pas envie de le déranger ». Ouais... Flemme empathique :)\n\n\n\n\n### La question à 10 sous ###\n\nVous exposez une question à quelqu'un dont vous n'avez pas la réponse. On sait jamais des fois qu'il sache. Au delà de ça, vous savez où trouver la réponse, mais il faut se déplacer quelque part par exemple pour l'obtenir, ou sortir son portable et —avec le réseau du coin— mettre 5 minutes à trouver une réponse qui sera, vu la nature particulière de la question, incomplète. Votre interlocuteur vous dit que justement il va à cet endroit demain pour une raison X, qu'ils ont surement la réponse et vous dit : « Je leur poserai la question pour toi, si tu veux ? ». **Et là... probablement frappé par la Flemme empathique,** vous répondez : « Non, c'est pas grave ne t'embête pas ». Quoi ?! Mais c'était qu'une simple question à poser.</p>\n\n\n\n\n## Palier au problème ##\n\nEn fait on pourrait se dire que c'est dramatique... mais pas vraiment. Dans notre premier cas le collègue à juste à répondre : « Non, mais ça ne me dérange pas, sinon je n'aurai pas demandé » pour obtenir aisément un « Bon, puisque tu insistes ! » et dans notre second cas à dire « Je demanderai quand même car la réponse m'intéresse aussi ».\n\n_Si vous repérez des personnes souffrant de Flemme empathique : **il est de votre devoir d'insister** !_\n\n\n\n\n\n## Attention aux faux-positif ##\n\nIl ne faut cependant pas négliger le cas du faux-positif. Et oui, il est aussi possible que dans notre premier cas la personne ai répondu « Non merci, ça ira » seulement parce qu'elle avait presque corrigé l'erreur dans son algorithme et que son collègue vient de lui faire perdre 10 minutes en la coupant. On pourrait alors qualifier ça de « Psycopathie refoulé ». C'est vrai, il n'aura pourtant pas tué son collègue !", "dates" : { "published" : { "$date" : 1366966800000 }, "updated" : [] }, "others" : { "markdown" : true, "published" : false }, "script" : "", "stylesheet" : "", "title" : "La <span>Flemme</span> empathique ou Flemme par <span>empathie</span>", "urn" : "la-flemme-empathique-ou-flemme-par-empathie" }
{ "_id" : { "$oid" : "530f5f63620731fe86cb71aa" }, "cache" : { "comment" : { "number" : 1 } }, "categories" : [ { "$oid" : "5310456355dfd5f7698d48c8" }, { "$oid" : "5310456355dfd5f7698d48b8" }, { "$oid" : "5310456355dfd5f7698d48bb" }, { "$oid" : "5310456355dfd5f7698d48c0" } ], "content" : "<p>Je vous propose à travers cet article de découvrir Node.js pour le système d'exploitation Windows 7. Node.js est multi-plateforme et s'exécute tout aussi bien sous Unix que sous Mac. Mais QUID de Windows ? Vous allez voir que c'est assez trivial même si les modules ne fonctionnent pas (encore) tous de base. À travers une suite d'article vous verrez qu'il est tout à fait possible de développer des sites web et applications web très interactives et avec une grande vélocité d'exécution le tout avec JavaScript ! Je vais vous prouvez que Node.js, ce n'est pas seulement réservé aux gros sites dynamiques mais que des petits sites vitrines sont tout aussi bien en Node.js.</p>\r\n\r\n<div class=\"correct-practice\">\r\n\t<div class=\"title highlighting\">À la découverte de Node.js sous Windows</div>\r\n\t<nav class=\"content\">\r\n\t\t<ol>\r\n\t\t\t<li><a href=\"./developper-en-javascript-cote-serveur-avec-nodejs/\" title=\"Développer en JavaScript côté serveur avec Node.js\">Qu'est-ce que Node.js ?</a></li>\r\n\t\t\t<li><a class=\"highlighting\" href=\"./installer-et-utiliser-nodejs-sous-windows/\" title=\"Installer et utiliser Node.js sous Windows\">Installation de Node.js</a></li>\r\n\t\t\t<li><a href=\"./serveur-web-et-application-web-en-javascript/\" title=\"Serveur web et application web en JavaScript\">Simple application web avec Node.js</a></li>\r\n\t\t\t<li><a href=\"./utiliser-jquery-avec-nodejs-sous-windows/\" title=\"Utiliser jQuery avec Node.js sous Windows\">Utiliser jQuery côté serveur avec Node.js</a></li>\r\n\t\t\t<li>Une architecture MVC2 avec Node.js</li>\r\n\t\t\t<li>Appels client asynchrones avec Node.js</li>\r\n\t\t\t<li>Un moteur de template avec Node.js</li>\r\n\t\t\t<li>Des sites multilingues avec Node.js</li>\r\n\t\t\t<li>La base de données MySQL et Node.js</li>\r\n\t\t</ol>\r\n\t</nav>\r\n</div>\r\n\r\n<h2>Télécharger Node.js pour Windows 7</h2>\r\n\r\n<p>Je passe les <a href=\"./developper-en-javascript-cote-serveur-avec-nodejs/\" title=\"Développer en JavaScript côté serveur avec Node.js\">présentations qui ont déjà été faites dans cet article</a> et ajoute que même si cet article a été réalisé avec des tests parallèles sous Seven, je ne vois pas pourquoi il ne serait pas valable pour Windows 8 (mais cela est à confirmer par d'autres dans les commentaires).</p>\r\n\r\n<h3>Le site officiel de Node.js</h3>\r\n\r\n<p>Site du projet : <a href=\"http://nodejs.org/\" title=\"Site du projet Node.js\">nodejs.org</a></p>\r\n\r\n<div class=\"center\">\r\n\t<a href=\"http://nodejs.org/images/logos/nodejs-2560x1440.png\" title=\"Logo Node.js en HD\"><img src=\"http://nodejs.org/images/logos/nodejs-1024x768.png\" alt=\"Le logo Node.js\" width=\"1024\" height=\"768\" style=\"width: 75%;height: auto;\" /></a>\r\n</div>\r\n\r\n<p>Avant de nous jeter sur la partie « Download », jetons un œil aux parties du site que je ne vais pas détailler plus dans cet article. Vous pourrez apprendre à l'accueil (<a href=\"http://nodejs.org/\" title=\"node.js\">Home</a>) que Microsoft, Google, Yahoo!, LinkedIn, Ebay... et bien d'autres utilisent d'ores et déjà Node.js, découvrir le projet dans <a href=\"http://nodejs.org/about/\" title=\"node.js\">About</a> et le suivre avec le <a href=\"http://blog.nodejs.org/\" title=\"node.js\">Node.js Blog</a> ainsi que la <a href=\"http://nodejs.org/community/\" title=\"node.js\">Community</a>. Vous pourrez même trouver du travail dans la partie <a href=\"http://jobs.nodejs.org/a/jobs/find-jobs\" title=\"node.js\">Jobs</a>. Pour finir un jolie fond d'écran traine sur la page <a href=\"http://nodejs.org/logos/\" title=\"node.js\">Logos</a>.</p>\r\n\r\n<h3>Intaller node et npm</h3>\r\n\r\n<p>Depuis l'accueil rendez-vous donc dans <a href=\"http://nodejs.org/download/\" title=\"node.js\">Download</a> pour obtenir au choix le <span class=\"eye-catching\">Windows Installer (.msi)</span> et le <span class=\"eye-catching\">Windows Binary (.exe)</span> en 32/64 bit ou cliquez simplement sur « Install » qui choisira le zip le plus adapté à votre système (pour ma part il me propose le fichier <span class=\"eye-catching\">node-v0.10.5-x64.msi</span>.</p>\r\n\r\n<figure>\r\n\t<figcaption>Liste des composants de l'installeur Node.js</figcaption>\r\n\t<img class=\"openable\" src=\"./upload/image/node-install.png\" alt=\"Liste des composants de l'installeur Node.js\" width=\"495\" height=\"362\" style=\"width: 75.2%;height: auto;\" />\r\n</figure>\r\n\r\n<p>Exécutez votre fichier, acceptez la licence, déposez-le dans \"Program files\" et ce package va vous installer :</p>\r\n\r\n<ul>\r\n\t<li><span class=\"highlighting\">L'exécuteur node.js</span> : le programme permettant d'exécuter des fichiers .js (comme php.exe le ferait avec des .php).</li>\r\n\t<li><span class=\"highlighting\">Le module npm (Node Package Manager)</span> : un gestionnaire de modules qui va vous permettre simplement d'ajouter et retirer les librairies dont vous aurez besoin pour vos applications (pas de surplus, seulement le nécessaire donc).</li>\r\n\t<li><span class=\"highlighting\">Un raccourci vers la documentation en ligne</span>.</li>\r\n\t<li><span class=\"highlighting\">Des variables d'environnements</span> : Ainsi vous pourrez exécuter les commandes <samp>node</samp> et <samp>npm</samp> dans votre invité de commande.</li>\r\n</ul>\r\n\r\n<figure>\r\n\t<figcaption>Dossier de Node.js après installation</figcaption>\r\n\t<img class=\"openable\" src=\"./upload/image/node-folder.png\" alt=\"Dossier de Node.js après installation\" width=\"650\" height=\"274\" style=\"width: 98.7%;height: auto;\" />\r\n</figure>\r\n\r\n<p>Quand l'installeur aura fini vous aurez un joli dossier d'environ 12Mo contenant entre autre node.js et npm.cmd qui seront appelables depuis n'importe quel dossier avec les commandes <samp>node</samp> et <samp>npm</samp>.</p>\r\n\r\n<h3>Compiler les modules natifs sous Windows</h3>\r\n\r\n<p>Pour la suite de cet article, il n'est pas nécessaire de se préoccuper de ce point. Vous pourrez vous en préoccuper plus tard et d'ores et déjà commencer à développer ! Cependant, si vous voulez exploiter Node.js sans aucun soucis et pouvoir compiler les modules écrits en langage natif (pas en JavaScript) il va falloir <a href=\"./utiliser-jquery-avec-nodejs-sous-windows/#prerequis\" title=\"Python et Microsoft Visual Studio comme pré-requis Node.js sous Windows\">installer Python et Microsoft Visual Studio</a>.</p>\r\n\r\n<h2>Un Hello world en Node.js</h2>\r\n\r\n<p>Juste après l'installation, tentons notre premier « Hello World ». Tout d'abord, définissez vous un endroit ou installer vos projets Node.js. Pour ma part j'ai décidé de placer tous mes projets dans <samp>C:\\nodejs</samp>. Je vais donc y <span class=\"highlighting eye-catching\">créer un fichier</span> <samp>hello-world.js</samp> accéssible à cette adresse sur mon poste : <samp>C:\\nodejs\\hello-world.js</samp>. Rien ne vous empèche de placer ça dans un autre dossier, sur un autre disque dur, dans le workplace de votre IDE ou le repository de votre logiciel de gestion de code source et version.</p>\r\n\r\n<h3>Édition de hello-world.js</h3>\r\n\r\n<p>Faisons la chose la plus simple possible, affichons un message dans la console d'exécution. Ouvrez le fichier en édition avec <a href=\"http://notepad-plus-plus.org/fr/\" title=\"Site de Nodepad++\">Nodepad++</a> ou <a href=\"http://www.sublimetext.com/2\" title=\"Site de Sublime Text 2\">Sublime Text 2</a> ou l'IDE de votre choix et remplissez le avec ces lignes :</p>\r\n\r\n<pre class=\"prettyprint linenums lang-js\">\r\nconsole.log(\"Hello World !\"); // Va écrire dans la console \"Hello World !\".\r\n\r\nglobal.console.log(\"Hello World !\"); // Va écrire dans la console \"Hello World !\".\r\n\r\nwindow.console.log(\"Hello World !\"); // Va faire planter le programme.\r\n</pre>\r\n\r\n<h3>Exécution de script avec node.exe</h3>\r\n\r\n<p>Il y a plusieurs façons d'appeler du code JavaScript depuis le programme node.exe.</p>\r\n\r\n<p>Tout d'abord :</p>\r\n<ul>\r\n\t<li>appuyez/cliquez sur la touche/bouton « Windows » puis</li>\r\n\t<li>écrivez <samp>cmd</samp> dans « Rechercher les programmes et fichiers » et appuyez sur la touche « Entrer ».</li>\r\n</ul>\r\n<p>Ensuite deux possibilités.</p>\r\n\r\n<h4>Exécution en absolue</h4>\r\n<ul>\r\n\t<li>Écrivez <samp>node C:\\nodejs\\hello-world.js</samp> puis appuyez sur « Entrer » pour exécuter le script,</li>\r\n\t<li>ou écrivez <samp>node C:\\nodejs\\hello-world</samp> (pas d'extension).</li>\r\n</ul>\r\n\r\n<h4>Exécution en relatif</h4>\r\n<ul>\r\n\t<li>Écrivez <samp>cd C:\\nodejs\\</samp> puis appuyez sur « Entrer » pour vous rendre dans le dossier,</li>\r\n\t<li>écrivez \"<samp>node hello-world.js</samp>\" puis appuyez sur « Entrer » pour exécuter le script,</li>\r\n\t<li>ou <samp>node hello-world</samp> (pas d'extension).</li>\r\n</ul>\r\n\r\n<figure>\r\n\t<figcaption>Résultat d'exécution du fichier C:\\nodejs\\hello-world.js</figcaption>\r\n\t<img class=\"openable\" src=\"./upload/image/hello-world-crash.png\" alt=\"Résultat d'exécution du fichier C:\\nodejs\\hello-world.js\" width=\"658\" height=\"302\" style=\"width: 100%;height: auto;\" />\r\n</figure>\r\n\r\n<h3>L'équivalent de window est global</h3>\r\n\r\n<p>Notre code plante et c'est normal ! Revenons sur le résultat obtenu (image ci-avant) et voyons se que l'on peut en déduire.</p>\r\n\r\n<ul>\r\n\t<li>Les commandes <samp>global.console.log</samp> et <samp>console.log</samp> sont identiques. La base global est donc implicite comme <samp>window.document</samp> et <samp>document</samp> dans les navigateurs.</li>\r\n\t<li>\r\n\t\tLa pile d'exécution nous indique qu'au lancement de node.exe, avant même le traitement du fichier en paramètre, il y a :\r\n\t\t<ul>\r\n\t\t\t<li>Lecture du fichier <samp>node.js</samp> et exécution de <samp>startup</samp>.</li>\r\n\t\t\t<li>Lecture du fichier <samp>module.js</samp> exécutant la fonction <samp>Function.Module.runMain</samp> exécutant la fonction <samp>Function.Module._load</samp> exécutant la fonction <samp>Module.load</samp> exécutant la fonction <samp>Object.Module._extensions..js</samp> exécutant la fonction <samp>Module._compile</samp>.</li>\r\n\t\t</ul>\r\n\t\tOr, il n'y a pas de fichier node.js ou module.js dans le dossier de node.exe. Ce traitement est donc réalisé par le cœur de Node.js, node.exe.\r\n\t</li>\r\n\t<li><samp>window</samp> n'est pas défini. Il est de type Undefined et renvoi \"undefined\" puisqu'il fait planter le script. <samp>global</samp> remplace donc <samp>window</samp> en Node.js.</li>\r\n</ul>\r\n\r\n<h2>La documentation, les modules et le principe</h2>\r\n\r\n<p>Effectivement, notre exemple précédent est loin de servir à quelque chose et même loin de nous permettre de développer un site Internet (mais pas si loin que ça tout de même). Faisons quelque chose de plus conséquant.</p>\r\n\r\n<p>Nous allons manipuler le contenu d'un dossier avec le code ci-après. Pour le moment, nous allons nous attacher à la syntaxe du langage.</p>\r\n\r\n<pre class=\"prettyprint linenums lang-js\">\r\n// Déclaration de plusieurs variables.\r\nvar\r\n\tfs = require(\"fs\"), // Instanciation du module natif \"File System\" dans la variable \"fs\".\r\n\twalk = require(\"walk\"), // Instanciation du module communautaire \"node-walk\" dans la variable \"walk\".\r\n\tfiles = [], // Instanciation d'un tableau vide dans la variable \"files\".\r\n\ttargetFolder = process.argv[2] || \"./\", // Instanciation d'une variable avec \"process.argv[2]\". Si process.argv[2] est de type Undefined alors il renvoi \"false\" et targetFolder vaut \"./\";.\r\n\t\r\n\t// Appel à la fonction \"walk\" du module \"walk\".\r\n\twalker = walk.walk(\r\n\t\ttargetFolder, // Passage d'une \"String\" en premier paramètre.\r\n\t\t{ followLinks: false } // Passage d'un \"Objet\" JSON en second paramètre.\r\n\t);\r\n\t\r\n\t/* Equivalant du code ci-dessus\r\n\tvar walk = require(\"walk\");\r\n\tvar files = [];\r\n\tvar walker = walk.wa....;\r\n\tmais moins performant. */\r\n\r\n// Appel à la fonction \"on\" du module \"walk\".\r\nwalker.on(\"file\", function(root, stat, next) { // \"String\" en premier paramètre et \"Function\" en second paramettre.\r\n    // Ajout d'une entrée dans le tableau \"files\".\r\n    files.push(root + stat.name);\r\n\t\r\n\t// Exécution du paramètre \"next\" de type \"Function\".\r\n    next();\r\n});\r\n\r\n/* En javascript, les paramètres peuvent être également des fonctions !\r\nLa fonction de walk \"on\" est probablement défini ainsi : \r\nfunction on(String, Function) {\r\n\tvar \r\n\t\troot = String,\r\n\t\tstat = ** infos sur le fichier **\r\n\t\tnext = function () { ** du code ** }\r\n\r\n\tFunction(root, stat, next);\r\n}\r\n*/\r\n\r\n// Appel à la fonction \"end\" du module \"on\".\r\nwalker.on(\"end\", function() {\r\n\t// On affiche le contenu du tableau dans la console Windows.\r\n    console.log(files);\r\n});\r\n\r\n// Affichage de \"Traitement en cours...\" dans l'invité de commande Windows (la console).\r\nconsole.log(\"Traitement en cours...\");\r\n</pre>\r\n\r\n<p>Le code ci-dessus permet d'afficher tous les fichiers d'un dossier. Si vous êtes familier avec JavaScript il ne vous aura pas échappé que la fonction <samp>require</samp> sort d'un chapeau magique. C'est une fonction spécifique à Node.js qui permet d'inclure des fonctions en provenance d'un autre fichier (en l'occurence du cœur de Node.js pour « File System » et du module <samp>node-walk</samp> pour « walk ».</p>\r\n\r\n<h3>La documentation de Node.js et de ses modules</h3>\r\n\r\n<p>Le cœur de Node.js contient les modules vitaux lui permettant d'écrire dans des fichiers. C'est au développeur, en fonction de ses besoins, de « télécharger » les modules complémentaires qu'y vont lui permettre de réaliser ses développements.</p>\r\n\r\n<h4>Documentation des modules natifs</h4>\r\n\r\n<p>La documentation des modules natifs de Node.js se trouve sur le site officiel dans la partie <a href=\"http://nodejs.org/api/\" title=\"node.js\">Documentation</a>. Vous pourrez vous renseigner sur le fonctionnement des modules incontournables comme « <a href=\"http://nodejs.org/api/fs.html\" title=\"node.js\">File System</a> » ou encore « <a href=\"http://nodejs.org/api/http.html\" title=\"node.js\">http</a> » (pour faire des serveurs web). Vous aurez également des information sur notre fameuse fonction <a href=\"http://nodejs.org/api/all.html#all_require\" title=\"node.js\">require</a></p>\r\n\r\n<h4>Documentation des modules tiers</h4>\r\n\r\n<p>Tout un chacun peut développer son propre module Node.js et le mettre à disposition des autres utilisateurs via <a href=\"https://www.github.com/\" title=\"GitHub\">GitHub</a> et à disposition en téléchargement via le NPM de Node.js en l'ajoutant au registre de la page <a href=\"https://npmjs.org/\" title=\"node.js\">NPM Registry</a>.</p>\r\n\r\n<p>C'est par exemple le cas du module <span class=\"highlighting\">node-walk</span> qui ajoute la fonction walk équivalente à la fonction du même nom en Python mais pour Node.js. Ce module est utilisé dans le code précédent et développé par l'utilisateur <span class=\"eye-catchin\">coolaj86</span>. La documentation de <span class=\"highlighting\">node-walk</span> se trouve donc sur <a href=\"https://github.com/coolaj86/node-walk\" title=\"Page de node-walk\">la page de son projet GitHub</a> et <a href=\"https://npmjs.org/package/walk\" title=\"Module node-walk\">son module est référencé</a> dans le registre NPM sur <a href=\"https://npmjs.org/package/walk\" title=\"Module node-walk\">cette page</a>.</p>\r\n\r\n<p>En se référent à sa documentation, nous sommes à même de comprendre le code précédent :</p>\r\n\r\n<pre class=\"prettyprint linenums lang-js\">\r\nvar\r\n\tfs = require(\"fs\"),\r\n\twalk = require(\"walk\"),\r\n\tfiles = [],\r\n\t// Récupération du premier paramètre derrière le nom du fichier, sinon dossier d'exécution du fichier.\r\n\ttargetFolder = process.argv[2] || \"./\",\r\n\t\r\n\t// La fonction walk permet de lire de manière asynchrone le contenu d'un fichier mais ne renvoi rien. \r\n\t// Le code du script va continué à être lu pendant que walk va faire son boulot.\r\n\twalker = walk.walk(targetFolder, { followLinks: false }); // L'option dit qu'on ne va pas lire les fichiers derrière les raccourcis de dossier.\r\n\t\r\n// La fonction \"on\" avec en premier paramètre \"file\" est exécuté quand la fonction assynchrone précédente \"walk\" lit un fichier.\r\nwalker.on(\"file\", function(root, stat, next) {\r\n\t//... et le paramètre \"root\" contient le chemin absolue du fichier.\r\n\t//... et le paramètre \"stat\" contient diverses informations comme le \"name\" du fichier.\r\n\t//... et le paramètre \"next\" est en réalité une function.\r\n    files.push(root + stat.name);\r\n\t\r\n\t// Différent traitement avec fs (suppression, copy, etc...) sont possible.\r\n\t\r\n\t// On valide les actions.\r\n    next();\r\n});\r\n\r\n// La fonction \"on\" avec en premier paramètre \"end\" est exécuté quand tout le contenu du répertoire à été lu.\r\nwalker.on(\"end\", function() {\r\n    console.log(files);\r\n});\r\n\r\n// Va être lu immédiatement après l'exécution de la fonction \"walk\".\r\n// Si votre walk lit le dossier \"C:\\\", cela preut prendre du temps de tout lire. Mais il ne sera pas bloqué car les fonctions dans \"on\" sont appelés de façon assynchrone.\r\nconsole.log(\"Traitement en cours...\");\r\n</pre>\r\n\r\n<h3>npm et le téléchargement de modules</h3>\r\n\r\n<h4>Téléchargement depuis le registre</h4>\r\n\r\n<p>Copiez-collez le code précédent dans un fichier appelé <samp>list-file.js</samp> (par exemple dans <samp>C:\\nodejs\\routine\\list-file.js</samp>) et exécutez-le.</p>\r\n\r\n<figure>\r\n\t<figcaption>Résultat d'exécution du fichier C:\\nodejs\\routine\\list-file.js</figcaption>\r\n\t<img class=\"openable\" src=\"./upload/image/list-file-crash.png\" alt=\"Résultat d'exécution du fichier C:\\nodejs\\routine\\list-file.js\" width=\"658\" height=\"302\" style=\"width: 100%;height: auto;\" />\r\n</figure>\r\n\r\n<p>Notre code plante encore et c'est encore normal ! Revenons sur le résultat obtenu (image ci-avant) et voyons ce que l'on peut en déduire.</p>\r\n\r\n<ul>\r\n\t<li>L'exécution de ce script est identique au précédent, mais la pile ne s'affiche pas complètement (manque startup et node.js).</li>\r\n\t<li>Quand la fonction <samp>require</samp> est rencontrée, à l'instar de <samp>startup</samp> c'est <samp>require</samp> qui prend la main exécutant la fonction <samp>Function.Module._load</samp> exécutant la fonction <samp>Function.Module._resolveFilename</samp>.</li>\r\n\t<li>Si un module n'a pas été préalablement téléchargé, ça coince (logique).</li>\r\n</ul>\r\n\r\n<p class=\"eye-catching\">Note : les scripts qui plantent arrête le programme Node.js. Si votre script ne plante pas, et que vous souhaitez arrêter le programme : au lieu de fermer la console, appuyez simultanément sur « CTRL + C ».</p>\r\n\r\n<p>Nous allons donc télécharger le module « node-walk » avec les lignes de commande suivante :</p>\r\n<ul>\r\n\t<li><samp>cd C:\\nodejs\\routine\\</samp></li>\r\n\t<li><samp>npm install walk</samp></li>\r\n</ul>\r\n\r\n<figure>\r\n\t<figcaption>Téléchargement du module node-walk avec npm</figcaption>\r\n\t<img class=\"openable\" src=\"./upload/image/npm-install-walk.png\" alt=\"Téléchargement du module node-walk avec npm\" width=\"658\" height=\"302\" style=\"width: 100%;height: auto;\" />\r\n</figure>\r\n\r\n<p>Vous constaterez qu'un dossier « node_modules » est apparu. Les futurs modules que vous téléchargerez via <span class=\"highlighting\">npm</span> depuis la racine <samp>C:\\nodejs\\routine\\</samp> seront automatiquement ajoutés dans ce dossier. Les fichiers dont le fichier appelant est exécuté dans cette racine pourront tous bénéficier des modules via la commande « require » directement avec le nom du module en paramètre. Pour utiliser le module d'un autre dossier « node_modules », il ne faudra plus passer le nom du module à <samp>require</samp> mais le chemin d'accès. Pour finir si vous utilisez la commande <samp>npm install</samp> depuis un autre dossier, les modules téléchargés se mettront dans le dossier « node_modules » de cet endroit (ou le créera s'il n'existe pas).</p>\r\n\r\n<p>Votre dossier « node_modules » contient le module « walk ». Vous constatez que « walk » lui-même contient un dossier « node_modules » avec le module « forEachAsync » ! C'est une dépendance du module : « walk » à besoin de « forEachAsync » pour fonctionner. Idem dans « forEachAsync » il y a encore un dossier « node_modules » contenant « sequence ». Notez que si vous remontez « forEachAsync » et « sequence » dans le même dossier « node_modules » que « walk », les modules seront également trouvés.</p>\r\n\r\n<p>Vous pouvez de nouveau exécuter votre script et constater que \"Traitement en cours...\" s'écrit avant l'affichage des fichiers alors que c'est pourtant la dernière instruction du fichier. Là est le pouvoir de l'asynchrone !</p>\r\n\r\n<p class=\"eye-catching\">Note : vous pouvez passer des paramètres à vos scripts avec <samp>process.args[x]</samp> x représentant le xième élément séparé par un espace dans la chaine de commande (<samp>process.args[0]</samp> étant donc le mot <samp>node</samp>). Dans notre exemple <samp>node list-file C:\\</samp> affichera les fichiers de tout le disque dure !</p>\r\n\r\n<h4>Téléchargement depuis le site du module</h4>\r\n\r\n<p>Dans notre exemple précédent nous aurions tout aussi bien pu créer nous-même le dossier « node_modules » et y placer le module <span class=\"highlighting\">node-walk</span> à la main en <a href=\"https://npmjs.org/package/walk\" title=\"Module node-walk\">l'ayant téléchargé depuis le site GitHub</a>.</p>\r\n\r\n<p>Si vous voulez essayer, effacez votre dossier « walk » de « node_modules » et c'est parti !</p>\r\n\r\n<ul>\r\n\t<li>Une fois sur <a href=\"https://npmjs.org/package/walk\" title=\"Module node-walk\">la page du projet</a>, cliquez sur « ZIP » pour télécharger l'archive.</li>\r\n\t<li>Placer le dossier « node-walk-master » dans « node_modules » et renommez-le en « walk ».</li>\r\n\t<li>Dans votre nouveau dossier « walk », supprimez tout sauf le dossier « lib ».</li>\r\n\t<li>Remontez le contenu du dossier « lib » dans « walk ». Vous pouvez maintenant supprimer le dossier « lib » qui est vide.</li>\r\n\t<li>Exécutez de nouveau <samp>list-file</samp> et vous aurez l'erreur « Error: cannot find module 'forEachAsync' » (souvenez vous, « walk » dépend de « forEachAsync »).</li>\r\n\t<li>Rendez-vous sur le <a href=\"https://npmjs.org/\" title=\"node.js\">NPM registry</a> et cherchez « forEachAsync » dans « Search Packages ». Cliquez dessus dans la liste et repérez la ligne « Dependencies » : vous voyez bien que ce module est dépendant de\t« sequence ». Repérez ensuite « Homepage » : cliquez sur le lien associé et nous revoilà sur Git. Cliquez de nouveau sur « ZIP » pour télécharger l'archive. Nous trouvons dedans, entre autre, les dossiers « forEachAsync » et « sequence » ! Ça tombe bien.</li>\r\n\t<li>Deux possibilités : soit vous déplacez les dossiers « forEachAsync » et « sequence » directement au même niveau que « walk » pour avoir une arborescence de module à plat, soit vous créez dans « walk » un dossier « node_modules » pour y placer « forEachAsync », puis dans « forEachAsync » vous créez de nouveau un dossier « node_modules » pour y placer « sequence ».</li>\r\n\t<li>Exécutez de nouveau <samp>list-file</samp> et voilà, ça marche !</li>\r\n</ul>\r\n\r\n<p>Cette technique s'avèrera utile pour certaines installations npm qui ne marchent pas sous Windows. La seule solution sera l'installation manuelle.</p>\r\n\r\n<h2>Node.js pour créer des routines</h2>\r\n\r\n<p>Pour clore cet article je résumerais en mettant en avant le fait que sans même parler de site Internet, Node.js est parfais pour créer des fichiers de maintenance pour effacer des fichiers temporaires, exécuter des actions, etc... comme le ferait des fichiers .php avec php.exe. Il est tout à fait possible de mettre en place des tâches planifiées pour vider les fichiers de plus de un jour dans le répertoire temporaire des fichiers uploadés de votre site par exemple !</p>\r\n\r\n<p>Bon, maintenant qu'on voit à peut-prêt l'outil pour une utilisation standard et simple, si on passait à <a href=\"./serveur-web-et-application-web-en-javascript/\" title=\"Serveur web et application web en JavaScript\">un serveur web et notre site web ?</a></p>", "dates" : { "published" : "2013-04-27 11:00:00", "updated" : [ "2013-04-27 11:00:00" ] }, "title" : "<span>Installer</span> et <span>utiliser</span> <span>Node.js</span> sous <span>Windows</span>", "urn" : "installer-et-utiliser-nodejs-sous-windows" }
{ "_id" : { "$oid" : "530f5f63620731fe86cb71ab" }, "cache" : { "comment" : { "number" : 0 } }, "categories" : [ { "$oid" : "5310456355dfd5f7698d48ba" }, { "$oid" : "5310456355dfd5f7698d48c8" }, { "$oid" : "5310456355dfd5f7698d48b8" }, { "$oid" : "5310456355dfd5f7698d48bb" } ], "content" : "<p>L'idée ne vous a peut-être jamais effleuré l'esprit, mais sachez qu'il est tout à fait possible de se passer d'Apache et remplacer les PHP, JAVA, C#... par du JavaScript pour faire un site web. Je vous vois faire la grimace dans le fond, mais développer votre propre serveur web en JavaScript est un jeu d'enfant. Tout ceci est réalisable grâce à l'exécuteur de script Node.js et ses modules !</p>\r\n\r\n<div class=\"correct-practice\">\r\n\t<div class=\"title highlighting\">À la découverte de Node.js sous Windows</div>\r\n\t<nav class=\"content\">\r\n\t\t<ol>\r\n\t\t\t<li><a href=\"./developper-en-javascript-cote-serveur-avec-nodejs/\" title=\"Développer en JavaScript côté serveur avec Node.js\">Qu'est-ce que Node.js ?</a></li>\r\n\t\t\t<li><a href=\"./installer-et-utiliser-nodejs-sous-windows/\" title=\"Installer et utiliser Node.js sous Windows\">Installation de Node.js</a></li>\r\n\t\t\t<li><a class=\"highlighting\" href=\"./serveur-web-et-application-web-en-javascript/\" title=\"Serveur web et application web en JavaScript\">Simple application web avec Node.js</a></li>\r\n\t\t\t<li><a href=\"./utiliser-jquery-avec-nodejs-sous-windows/\" title=\"Utiliser jQuery avec Node.js sous Windows\">Utiliser jQuery côté serveur avec Node.js</a></li>\r\n\t\t\t<li>Une architecture MVC2 avec Node.js</li>\r\n\t\t\t<li>Appels client asynchrones avec Node.js</li>\r\n\t\t\t<li>Un moteur de template avec Node.js</li>\r\n\t\t\t<li>Des sites multilingues avec Node.js</li>\r\n\t\t\t<li>La base de données MySQL et Node.js</li>\r\n\t\t</ol>\r\n\t</nav>\r\n</div>\r\n\r\n<h2>Développer un serveur web avec les modules HTTP et Express</h2>\r\n\r\n<p>Si vous avez lu <a href=\"./installer-et-utiliser-nodejs-sous-windows/\" title=\"Installer et utiliser Node.js sous Windows\">mon précédent billet sur l'installation et l'utilisation de Node.js</a> ou que vous savez de quoi il s'agit exactement, vous pouvez poursuivre. Sinon je vous conseils de passer par la case départ (sans toucher 2000€) et de lire <a href=\"./developper-en-javascript-cote-serveur-avec-nodejs/\" title=\"Développer en JavaScript côté serveur avec Node.js\">mon article expliquant comment développer en JavaScript côté serveur avec Node.js</a>.</p>\r\n<h3>Un échange client/serveur simple</h3>\r\n\r\n<p>Pour créer un serveur web —élément essentiel pour présenter à notre client (un navigateur) notre site web ou application web— Node.js utilise le module HTTP qui permet « le support de plusieurs fonctionnalités du protocole qui sont habituellement difficiles à utiliser » <a href=\"http://nodejs.org/api/all.html#all_http\" title=\"node.js\">d'après la documentation</a>. En d'autres termes : il permet de répondre aux demandes des navigateurs (demande d'une page Internet par exemple). Pour que cela soit encore plus trivial, nous allons utiliser un module communautaire : le <a href=\"http://expressjs.com/\" title=\"Express - node.js web application framework\">Framework Express</a> qui va nous permettre de réaliser aisément des applications web.</p>\r\n<h4>Préparation</h4>\r\n\r\n<p>Préparons notre serveur :</p>\r\n\r\n<ul>\r\n\t<li>Nous allons avoir besoin (avec l'aide de la documentation), d'<a href=\"http://nodejs.org/api/all.html#all_http\" title=\"node.js\">appeler le module HTTP</a> de <a href=\"http://expressjs.com/\" title=\"Express - node.js web application framework\">créer un objet</a> capable de comprendre le protocole http et d'écouter les demandes clientes sur le bon couple ip / port en vue de lui répondre.</li>\r\n\t<li>Nous allons nous créer un dossier d'application web ici <samp>C:\\nodejs\\website\\</samp> dans lequel nous allons placer notre premier script <samp>website.js</samp>.</li>\r\n\t<li>Nous allons également avoir besoin de télécharger le module « Express » avec la commande <samp>npm install express</samp> depuis le dossier <samp>C:\\nodejs\\website\\</samp>. Cela ajoutera donc un dossier « node_modules » dans <samp>C:\\nodejs\\website\\</samp> au même niveau que <samp>website.js</samp>.</li>\r\n</ul>\r\n\r\n<h4>Contenu du fichier website.js</h4>\r\n\r\n<pre class=\"prettyprint linenums lang-javascript\">\r\nvar\r\n// Nous stockons l'objet HTTP dans la variable globale \"http\".\r\n\thttp = require(\"http\"),\r\n\t\r\n// Nous stockons également la fonction Express dans la variable \"express\".\r\n\texpress =  require(\"express\"),\r\n\t\r\n// Nous instancions un serveur web en exécutant la variable \"express\" dont le résultat est stocké dans l'objet httpServer.\r\n\thttpServer = express();\r\n\r\n// Nous utilisons la fonction listen de httpServer en lui passant comme premier paramètre le port d'écoute de l'application.\r\n// Par défaut une page de site Internet est réclamée via le port 80. Si vous n'avez ni Apache, ni IIS ou autre qui utilise ce port, vous pouvez le mettre sur 80.\r\n// J'ai pour ma part décidé d'écouter le port 82.\r\nhttpServer.listen(82);\r\n\r\n// Nous écoutons les requêtes GET en provenance d'un navigateur client.\r\n// Si une requête est envoyé à l'adresse : http://localhost/ à votre navigateur) le code du second paramètre (une fonction de callBack) est exécuté.\r\n// Cette fonction de callBack fourni en premier paramètre de quoi manipuler la requête et en second paramètre de quoi manipuler la réponse qui va être faites au client.\r\nhttpServer.get(\"/\", function (request, response) { // \"/\" indique que nous écoutons la racine du site web.\r\n\tvar\r\n\t\t// Nous définissons l'entête de la page qui va être renvoyé au client. \r\n\t\theader = {\r\n\t\t\t\"Content-Type\": \"text/html\",\r\n\t\t\t\"Charset\": \"utf-8\"\r\n\t\t},\r\n\t\t\r\n\t\t// Nous définissons son contenu.\r\n\t\ttemplate = \"&lt;!DOCTYPE html&gt;\" +\r\n\t\t\t\"&lt;html lang='fr'&gt;\" +\r\n\t\t\t\t\"&lt;head&gt;\"+\r\n\t\t\t\t\t\"&lt;meta charset='utf-8' /&gt;\" +\r\n\t\t\t\t\t\"&lt;title&gt;Ma première page&lt;/title&gt;\" +\r\n\t\t\t\t\"&lt;/head&gt;\" +\r\n\t\t\t\t\"&lt;body&gt;\" +\r\n\t\t\t\t\t\"&lt;p&gt;Hello World !&lt;/p&gt;\"\r\n\t\t\t\t\"&lt;/body&gt;\" +\r\n\t\t\t\"&lt;/html&gt;\";\r\n\r\n\t// Nous écrivons l'entête en indiquant que c'est une page valide (OK : 200).\r\n\tresponse.writeHead(200, header);\r\n\r\n\t// Nous écrivons le contenu de la page que l'on va faire afficher par le navigateur client.\r\n\tresponse.write(template);\r\n\r\n\t// Nous informons le serveur qu'il peut enfin envoyer la réponse au client.\r\n\tresponse.end();\r\n});\r\n</pre>\r\n\r\n<p>Faisons quelques tests :</p>\r\n<ul>\r\n\t<li>Exécutez le fichier : <samp>cd C:\\nodejs\\webserver\\</samp> puis <samp>node webserver.js</samp> dans votre console.</li>\r\n\t<li>Réclamez l'adresse <samp>http://localhost:82/</samp> (mettez le bon port) à votre navigateur.</li>\r\n\t<li>Réclamez l'adresse <samp>http://localhost:82/article</samp> (mettez le bon port) à votre navigateur.</li>\r\n</ul>\r\n\r\n<p>L'adresse <samp>http://localhost:82/</samp> nous renvoi le contenu de notre page web tandis que <samp>http://localhost:82/article</samp> nous renvoi « Cannot GET /article ». Effectivement le premier cas fonctionne puisque nous avons défini une réponse à la demande \"/\" qui correspond à la racine du site. Cependant, n'ayant pas défini une réponse à la demande \"/article\" le module Express prend la main et prend la liberté de renvoyer un message d'erreur en <samp>text/plain</samp> (pas en html) avec un code d'erreur 404 dans l'entête http (header).</p>\r\n\r\n<h2>Création d'un petit site web</h2>\r\n\r\n<p>Repartons du code précédent et ajoutons de quoi paramétrer notre site :</p>\r\n<ul>\r\n\t<li>pour que l'on puisse le changer d'adresse et de port d'écoute facilement.</li>\r\n\t<li>pour que l'on puisse passer d'un environnement de Développement/Test/Qualité/Production facilement.</li>\r\n\t<li>Pour qu'il écoute plusieurs pages et également celles qui n'existent pas.</li>\r\n</ul>\r\n\r\n<p>Je vous livre le code final de cette partie si vous souhaitez le comprendre vous-même. Nous allons le décortiquer un peu plus loin.</p>\r\n\r\n<pre class=\"prettyprint linenums lang-javascript\">\r\n/*=============================*/\r\n/*== Application web Node.js ==*/\r\n/*=============================*/\r\n\r\nvar\r\n/*== Charger les modules Node.js ==*/\r\n\thttp = require(\"http\"),\r\n\texpress =  require(\"express\"), /* npm install express */\r\n\thttpServer = express(),\r\n\r\n/*== Variables globales de l'application ==*/\r\n\tappConfig = {};\r\n\r\n/*== Paramétrage de l'application ==*/\r\n\r\nhttpServer\r\n/* == Définir un environnement d'exécution : SET NODE_ENV=dev ==*/\r\n\t.configure(function () {\r\n\t\t/* Commun à tous les environnements */\r\n\t})\r\n\t.configure(\"dev\", function () {\r\n\t\t/* Uniquement en environnement de Dev */\r\n\t\tappConfig.host = \"localhost\";\r\n\t\tappConfig.path = \"/\";\r\n\t\tappConfig.httpPort = 82;\r\n\t\tappConfig.url = appConfig.host + ((appConfig.httpPort != 80) ? \":\" + appConfig.httpPort : \"\") + appConfig.path;\r\n\t})\r\n\t.configure(\"test\", function () {\r\n\t\t/* Uniquement en environnement de Test */\r\n\t})\r\n\t.configure(\"qual\", function () {\r\n\t\t/* Uniquement en environnement de Qualité */\r\n\t})\r\n\t.configure(\"prod\", function () {\r\n\t\t/* Uniquement en environnement de Production */\r\n\t}).listen(appConfig.httpPort);\r\n\r\n/*********************************************/\r\n/*** Chemins de réponse - Réécriture d'url ***/\r\n/*********************************************/\r\n\r\n/* Accueil */\r\n// http://www.site.com/\r\nhttpServer.get(appConfig.path, function (request, response) {\r\n\tvar\r\n\t\theader = {\r\n\t\t\t\"Content-Type\": \"text/html\",\r\n\t\t\t\"Charset\": \"utf-8\"\r\n\t\t},\r\n\t\ttemplate = \"&lt;!DOCTYPE html&gt;\" +\r\n\t\t\t\"&lt;html lang='fr'&gt;\" +\r\n\t\t\t\t\"&lt;head&gt;\" +\r\n\t\t\t\t\t\"&lt;meta charset='utf-8' /&gt;\" +\r\n\t\t\t\t\t\"&lt;title&gt;Ma première page&lt;/title&gt;\" +\r\n\t\t\t\t\t\"&lt;base href='//\" + appConfig.url + \"' /&gt;\" +\r\n\t\t\t\t\"&lt;/head&gt;\" +\r\n\t\t\t\t\"&lt;body&gt;\" +\r\n\t\t\t\t\t\"&lt;p&gt;&lt;a href='./connexion/' title='Page de connexion'&gt;Page de connexion&lt;/a&gt;&lt;/p&gt;\"\r\n\t\t\t\t\"&lt;/body&gt;\" +\r\n\t\t\t\"&lt;/html&gt;\";\r\n\r\n\tresponse.writeHead(200, header);\r\n\tresponse.write(template);\r\n\tresponse.end();\r\n});\r\n\r\n/* Connexion */\r\n// http://www.site.com/connexion/\r\nhttpServer.get(appConfig.path + \"connexion\", function (request, response) {\r\n\tvar\r\n\t\theader = {\r\n\t\t\t\"Content-Type\": \"text/html\",\r\n\t\t\t\"Charset\": \"utf-8\"\r\n\t\t},\r\n\t\ttemplate = \"&lt;!DOCTYPE html&gt;\" +\r\n\t\t\t\"&lt;html lang='fr'&gt;\" +\r\n\t\t\t\t\"&lt;head&gt;\" +\r\n\t\t\t\t\t\"&lt;meta charset='utf-8' /&gt;\" +\r\n\t\t\t\t\t\"&lt;title&gt;Page de connexion&lt;/title&gt;\" +\r\n\t\t\t\t\t\"&lt;base href='//\" + appConfig.url + \"' /&gt;\" +\r\n\t\t\t\t\"&lt;/head&gt;\" +\r\n\t\t\t\t\"&lt;body&gt;\" +\r\n\t\t\t\t\t\"&lt;form id='login' action='./connexion/' method='POST'&gt;\" +\r\n\t\t\t\t\t\t\"&lt;div&gt;\" +\r\n\t\t\t\t\t\t\t\"&lt;label for='login-email' placeholser='Email'&gt;Email : &lt;/label&gt;\" +\r\n\t\t\t\t\t\t\t\"&lt;input id='login-email' type='text' /&gt;\" +\r\n\t\t\t\t\t\t\"&lt;/div&gt;\" +\r\n\r\n\t\t\t\t\t\t\"&lt;div&gt;\" +\r\n\t\t\t\t\t\t\t\"&lt;label for='login-password' placeholser='Mot de passe'&gt;Mot de passe : &lt;/label&gt;\" +\r\n\t\t\t\t\t\t\t\"&lt;input id='login-password' type='password' /&gt;\" +\r\n\t\t\t\t\t\t\"&lt;/div&gt;\" +\r\n\r\n\t\t\t\t\t\t\"&lt;label&gt;&lt;input type='submit' value='Ok' /&gt;&lt;/label&gt;\" +\r\n\t\t\t\t\t\"&lt;/form&gt;\" +\r\n\t\t\t\t\"&lt;/body&gt;\" +\r\n\t\t\t\"&lt;/html&gt;\";\r\n\r\n\tresponse.writeHead(200, header);\r\n\tresponse.write(template);\r\n\tresponse.end();\r\n});\r\n\r\n/* Si aucune page ne match */\r\nhttpServer.use(httpServer.router);\r\nhttpServer.use(function(request, response, next) {\r\n\tvar\r\n\t\theader = {\r\n\t\t\t\"Content-Type\": \"text/html\",\r\n\t\t\t\"Charset\": \"utf-8\"\r\n\t\t},\r\n\t\ttemplate = \"&lt;!DOCTYPE html&gt;\" +\r\n\t\t\t\"&lt;html lang='fr'&gt;\" +\r\n\t\t\t\t\"&lt;head&gt;\" +\r\n\t\t\t\t\t\"&lt;meta charset=\\\"utf-8\\\" /&gt;\" +\r\n\t\t\t\t\t\"&lt;title&gt;Page de connexion&lt;/title&gt;\" +\r\n\t\t\t\t\t\"&lt;base href='//\" + appConfig.url + \"' /&gt;\" +\r\n\t\t\t\t\"&lt;/head&gt;\" +\r\n\t\t\t\t\"&lt;body&gt;\" +\r\n\t\t\t\t\t\"&lt;p&gt;Cette page n'existe pas.&lt;/p&gt;\" +\r\n\t\t\t\t\"&lt;/body&gt;\" +\r\n\t\t\t\"&lt;/html&gt;\";\r\n\r\n\tresponse.writeHead(404, header);\r\n\tresponse.write(template);\r\n\tresponse.end();\r\n});\r\n</pre>\r\n\r\n<p>Si vous exécutez la commande <samp>node website.js</samp>, la console va vous renvoyer une erreur : c'est normal.</p>\r\n\r\n<figure>\r\n\t<figcaption>Plantage s'il n'y a pas de variable NODE_ENV</figcaption>\r\n\t<img class=\"openable\" src=\"./upload/image/node-no-route.png\" alt=\"Plantage s'il n'y a pas de variable NODE_ENV\" width=\"658\" height=\"302\" style=\"width: 100%;height: auto;\" />\r\n</figure>\r\n\r\n<h3>Définir des variables de portage</h3>\r\n\r\n<p>Tout d'abord, définissons les quelques variables qu'il va nous falloir changer en cas de déménagement du site.</p>\r\n<ul>\r\n\t<li><span class=\"highlighting\">Le nom de domaine / l'adresse ip du site</span> : pour ce site <span class=\"eye-catching\">blog.haeresis.fr</span></li>\r\n\t<li><span class=\"highlighting\">La racine d'accès aux fichiers</span> : si l'intégralité du site se trouvait derrière <span class=\"eye-catching\">http://www.haeresis.fr/blog/</span>alors ce serait <span class=\"eye-catching\">/blog</span>. Pour ce site c'est simplement <span class=\"eye-catching\">/</span>.</li>\r\n\t<li><span class=\"highlighting\">L'url</span> : elle est composée des deux précédents points et du port (si le port n'est pas 80).</li>\r\n</ul>\r\n\r\n<p>Voyons alors la première partie de <samp>website.js</samp> :</p>\r\n\r\n<pre class=\"prettyprint linenums lang-javascript\">\r\n/*******************/\r\n/* Haut du fichier */\r\n/*******************/\r\nvar\r\n/*== Charger les modules Node.js ==*/\r\n\thttp = require(\"http\"), // Disponible de base.\r\n\texpress =  require(\"express\"), // Disponible avec npm.\r\n\thttpServer = express(),\r\n\r\n/*== Variables globales de l'application ==*/\r\n\tappConfig = {}; //On créer un objet vide qui contiendra les variables d'environnement de l'application.\r\n\r\n/*== Paramétrage de l'application ==*/\r\nhttpServer\r\n\t/* Ajout de la configuration du serveur - elle sera utile par la suite */\r\n\t.configure(function () {\r\n\t\tappConfig.host = \"localhost\"; // Ca c'est le host/ip du site.\r\n\t\tappConfig.path = \"/\"; // Ca c'est le dossier de base du site.\r\n\t\tappConfig.httpPort = 82; // Ca c'est le port d'écoute du site.\r\n\t\t\r\n\t\t// Ci-dessous la création automatique d'un lien absolue jusqu'aux resources.\r\n\t\tappConfig.url = appConfig.host + ((appConfig.httpPort != 80) ? \":\" + appConfig.httpPort : \"\") + appConfig.path;\r\n\t})\r\n\t.listen(appConfig.httpPort); // On écoute le port paramétré.\r\n</pre>\r\n\r\n<h3>Définir un environnement d'exécution</h3>\r\n\r\n<p>Nous alons modifier le code précédent en utilisant plusieurs fonctions <samp>configure</samp> à la suite de Express. Effectivement, en ajoutant un premier paramètre, il est possible de limiter l'exécution de la configuration aux environnements dont la variable <samp>NODE_ENV</samp> sera égale à ce paramètre.</p>\r\n\r\n<p>Modifions le code précédent de <samp>website.js</samp> :</p>\r\n\r\n<pre class=\"prettyprint linenums lang-javascript\">\r\n/*******************/\r\n/* Haut du fichier */\r\n/*******************/\r\nvar\r\n/*== Charger les modules Node.js ==*/\r\n\thttp = require(\"http\"),\r\n\texpress =  require(\"express\"),\r\n\thttpServer = express(),\r\n\r\n/*== Variables globales de l'application ==*/\r\n\tappConfig = {};\r\n\r\n/*== Paramétrage de l'application ==*/\r\nhttpServer\r\n\t.configure(function () {\r\n\t\t/* Commun à tous les environnements */\r\n\t})\r\n\t.configure(\"dev\", function () { // Ne sera exécuté que si NODE_ENV vaut \"dev\". Dans le code c'est la variable process.env.NODE_ENV qui est testé par configure.\r\n\t\t/* Uniquement en environnement de Dev */\r\n\t\tappConfig.host = \"localhost\";\r\n\t\tappConfig.path = \"/\";\r\n\t\tappConfig.httpPort = 82;\r\n\t\tappConfig.url = appConfig.host + ((appConfig.httpPort != 80) ? \":\" + appConfig.httpPort : \"\") + appConfig.path;\r\n\t})\r\n\t.configure(\"test\", function () { // Ne sera exécuté que si NODE_ENV vaut \"test\". Dans le code c'est la variable process.env.NODE_ENV qui est testé par configure.\r\n\t\t/* Uniquement en environnement de Test */\r\n\t})\r\n\t.configure(\"qual\", function () { // Ne sera exécuté que si NODE_ENV vaut \"qual\". Dans le code c'est la variable process.env.NODE_ENV qui est testé par configure.\r\n\t\t/* Uniquement en environnement de Qualité */\r\n\t})\r\n\t.configure(\"prod\", function () { // Ne sera exécuté que si NODE_ENV vaut \"prod\". Dans le code c'est la variable process.env.NODE_ENV qui est testé par configure.\r\n\t\t/* Uniquement en environnement de Production */\r\n\t})\r\n\t.listen(appConfig.httpPort);\r\n</pre>\r\n\r\n<p>Revenons sur l'erreur d'exécution que nous avons eu en essayant d'exécuter le script complet (<samp>Error: Router#get() requires a path</samp>). Afin de résoudre ce problème, définissez dans votre console la variable d'environnement <samp>NODE_ENV</samp> avec la commande <samp>SET NODE_ENV=dev</samp> (uniquement sous Windows) ce qui permettra à la variable <samp>process.env.NODE_ENV</samp> d'être testée à « dev » dans la fonction <samp>configure()</samp> de Express. Il est possible que cette variable disparaisse au redémarrage de la machine.</p>\r\n\r\n<h3>Créer plusieurs pages</h3>\r\n\r\n<p>Notre site web sera constitué de plusieurs pages. Il n'y a rien de plus simple. Il suffit de router d'autres requêtes GET que « / ».</p>\r\n\r\n<pre class=\"prettyprint linenums lang-javascript\">\r\n/*********************/\r\n/* Milieu du fichier */\r\n/*********************/\r\n\r\n/* Accueil */\r\n// http://localhost:82/\r\nhttpServer.get(appConfig.path, function (request, response) {\r\n\tvar\r\n\t\theader = {\r\n\t\t\t\"Content-Type\": \"text/html\",\r\n\t\t\t\"Charset\": \"utf-8\"\r\n\t\t},\r\n\t\ttemplate = '&lt;!DOCTYPE html&gt;' +\r\n\t\t\t'&lt;html lang=\"fr\"&gt;' +\r\n\t\t\t\t'&lt;head&gt;' +\r\n\t\t\t\t\t'&lt;meta charset=\"utf-8\" /&gt;' +\r\n\t\t\t\t\t'&lt;title&gt;Ma première page&lt;/title&gt;' +\r\n\t\t\t\t\t'&lt;base href=\"//' + appConfig.url + '\" /&gt;' +\r\n\t\t\t\t'&lt;/head&gt;' +\r\n\t\t\t\t'&lt;body&gt;' +\r\n\t\t\t\t\t\"&lt;p&gt;&lt;a href='./connexion/' title='Page de connexion'&gt;Page de connexion&lt;/a&gt;&lt;/p&gt;\"\r\n\t\t\t\t'&lt;/body&gt;' +\r\n\t\t\t'&lt;/html&gt;';\r\n\r\n\tresponse.writeHead(200, header);\r\n\tresponse.write(template);\r\n\tresponse.end();\r\n});\r\n\r\n/* Connexion */\r\n// http://localhost:82/connexion/\r\nhttpServer.get(appConfig.path + \"connexion\", function (request, response) {\r\n\tvar\r\n\t\theader = {\r\n\t\t\t\"Content-Type\": \"text/html\",\r\n\t\t\t\"Charset\": \"utf-8\"\r\n\t\t},\r\n\t\ttemplate = '&lt;!DOCTYPE html&gt;' +\r\n\t\t\t'&lt;html lang=\"fr\"&gt;' +\r\n\t\t\t\t'&lt;head&gt;' +\r\n\t\t\t\t\t'&lt;meta charset=\"utf-8\" /&gt;' +\r\n\t\t\t\t\t'&lt;title&gt;Page de connexion&lt;/title&gt;' +\r\n\t\t\t\t\t\"&lt;base href='//\" + appConfig.url + \"' /&gt;\" +\r\n\t\t\t\t'&lt;/head&gt;' +\r\n\t\t\t\t'&lt;body&gt;' +\r\n\t\t\t\t\t'&lt;form id=\"login\" action=\"./connexion/\" method=\"POST\"&gt;' +\r\n\t\t\t\t\t\t'&lt;div&gt;' +\r\n\t\t\t\t\t\t\t'&lt;label for=\"login-email\" placeholser=\"Email\"&gt;Email : &lt;/label&gt;' +\r\n\t\t\t\t\t\t\t'&lt;input id=\"login-email\" type=\"text\" /&gt;' +\r\n\t\t\t\t\t\t'&lt;/div&gt;' +\r\n\r\n\t\t\t\t\t\t'&lt;div&gt;' +\r\n\t\t\t\t\t\t\t'&lt;label for=\"login-password\" placeholser=\"Mot de passe\"&gt;Mot de passe : &lt;/label&gt;' +\r\n\t\t\t\t\t\t\t'&lt;input id=\"login-password\" type=\"password\" /&gt;' +\r\n\t\t\t\t\t\t'&lt;/div&gt;' +\r\n\r\n\t\t\t\t\t\t'&lt;label&gt;&lt;input type=\"submit\" value=\"Ok\" /&gt;&lt;/label&gt;' +\r\n\t\t\t\t\t'&lt;/form&gt;' +\r\n\t\t\t\t'&lt;/body&gt;' +\r\n\t\t\t'&lt;/html&gt;';\r\n\r\n\tresponse.writeHead(200, header);\r\n\tresponse.write(template);\r\n\tresponse.end();\r\n});\r\n</pre>\r\n\r\n<p>Vous aurez à présent également du contenu à l'adresse <samp>http://localhost:82/connexion/</samp>.</p>\r\n\r\n<p class=\"eye-catching\">Note : la balise <samp>&lt;base&gt;</samp> des lignes 14 et 39 permet de forcer le début des liens relatifs. Ainsi peut importe la profondeur du chemin de la page, la racine sera toujours celle du site et non celle de la page courante.</p>\r\n\r\n<h3>Les pages non existantes</h3>\r\n\r\n<p>Afin de changer la réponse de votre serveur quand un fichier inexistant est réclamé (aucun contenu n'est associé à la demande GET) il va falloir définir un contenu 404 par défaut.</p>\r\n\r\n<pre class=\"prettyprint linenums lang-javascript\">\r\n/******************/\r\n/* Bas du fichier */\r\n/******************/\r\n\r\n/* Si aucune page ne match */\r\nhttpServer.use(httpServer.router); // On se place après la vérification de toutes les requêtes associées à un contenu.\r\n\r\n// On renvoi un contenu.\r\nhttpServer.use(function(request, response, next) {\r\n\tvar\r\n\t\theader = {\r\n\t\t\t\"Content-Type\": \"text/html\",\r\n\t\t\t\"Charset\": \"utf-8\"\r\n\t\t},\r\n\t\ttemplate = '&lt;!DOCTYPE html&gt;' +\r\n\t\t\t'&lt;html lang=\"fr\"&gt;' +\r\n\t\t\t\t'&lt;head&gt;' +\r\n\t\t\t\t\t'&lt;meta charset=\"utf-8\" /&gt;' +\r\n\t\t\t\t\t'&lt;title&gt;Page de connexion&lt;/title&gt;' +\r\n\t\t\t\t\t\"&lt;base href='//\" + appConfig.url + \"' /&gt;\" +\r\n\t\t\t\t'&lt;/head&gt;' +\r\n\t\t\t\t'&lt;body&gt;' +\r\n\t\t\t\t\t'&lt;p&gt;Cette page n\\'existe pas.&lt;/p&gt;' +\r\n\t\t\t\t'&lt;/body&gt;' +\r\n\t\t\t'&lt;/html&gt;';\r\n\r\n\tresponse.writeHead(404, header); // On précise que la page n'existe pas avec le Code : 404.\r\n\tresponse.write(template);\r\n\tresponse.end();\r\n});\r\n</pre>\r\n\r\n<h2>Récupérer du contenu avec la méthode POST</h2>\r\n\r\n<p>Rendez-vous à l'adresse <samp>http://localhost:82/connexion/</samp> et cliquez sur le bouton Ok. Quel surprise ! Un joli message : « Cette page n'existe pas. » vous attend alors que pourtant vous n'avez même pas changé de page !</p>\r\n\r\n<p>En fait, quand vous rejoignez la page « http://localhost:82/connexion/ » en suivant un lien ou directement par l'url vous réclamez ce fichier en GET. Hors la fonction <samp>get()</samp> ne répond pas à une demande faites en POST ce qui est le cas de la demande du formulaire en cliquant sur « Ok ».</p>\r\n\r\n<p>Modifions l'écoute de « http://localhost:82/connexion/ » pour ajouter une écoute POST grâce à <samp>post()</samp> en plus de l'écoute GET.</p>\r\n\r\n<pre class=\"prettyprint linenums lang-javascript\">\r\n/* *** */ \r\n\r\n/* Connexion */\r\n// http://localhost:82/connexion/\r\n\r\n// On créer une fonction chargée de répondre à la demande.\r\n// Ceci est ni plus, ni moins le code qui était directement exécuté dans httpServer.get().\r\nfunction connectionRender(request, response) {\r\n\tvar\r\n\t\theader = {\r\n\t\t\t\"Content-Type\": \"text/html\",\r\n\t\t\t\"Charset\": \"utf-8\"\r\n\t\t},\r\n\t\ttemplate = '&lt;!DOCTYPE html&gt;' +\r\n\t\t\t'&lt;html lang=\"fr\"&gt;' +\r\n\t\t\t\t'&lt;head&gt;' +\r\n\t\t\t\t\t'&lt;meta charset=\"utf-8\" /&gt;' +\r\n\t\t\t\t\t'&lt;title&gt;Page de connexion&lt;/title&gt;' +\r\n\t\t\t\t\t\"&lt;base href='//\" + appConfig.url + \"' /&gt;\" +\r\n\t\t\t\t'&lt;/head&gt;' +\r\n\t\t\t\t'&lt;body&gt;' +\r\n\t\t\t\t\t'&lt;form id=\"login\" action=\"./connexion/\" method=\"POST\"&gt;' +\r\n\t\t\t\t\t\t'&lt;div&gt;' +\r\n\t\t\t\t\t\t\t'&lt;label for=\"login-email\" placeholser=\"Email\"&gt;Email : &lt;/label&gt;' +\r\n\t\t\t\t\t\t\t'&lt;input id=\"login-email\" type=\"text\" /&gt;' +\r\n\t\t\t\t\t\t'&lt;/div&gt;' +\r\n\r\n\t\t\t\t\t\t'&lt;div&gt;' +\r\n\t\t\t\t\t\t\t'&lt;label for=\"login-password\" placeholser=\"Mot de passe\"&gt;Mot de passe : &lt;/label&gt;' +\r\n\t\t\t\t\t\t\t'&lt;input id=\"login-password\" type=\"password\" /&gt;' +\r\n\t\t\t\t\t\t'&lt;/div&gt;' +\r\n\r\n\t\t\t\t\t\t'&lt;label&gt;&lt;input type=\"submit\" value=\"Ok\" /&gt;&lt;/label&gt;' +\r\n\t\t\t\t\t'&lt;/form&gt;' +\r\n\t\t\t\t'&lt;/body&gt;' +\r\n\t\t\t'&lt;/html&gt;';\r\n\r\n\tresponse.writeHead(200, header);\r\n\tresponse.write(template);\r\n\tresponse.end();\t\r\n}\r\n// On répond à la demande en GET et/ou en POST.\r\nhttpServer.get(appConfig.path + \"connexion\", function (request, response) {\r\n\tconnectionRender(request, response);\r\n}).post(appConfig.path + \"connexion\", function (request, response) { // Ajout d'une réponse à une demande de contenu en POST.\r\n\tconnectionRender(request, response);\r\n});\r\n\r\n/* *** */\r\n</pre>\r\n\r\n<h2>Avant la suite</h2>\r\n\r\n<h3>Réflexion sur notre script</h3>\r\n\r\n<p>Là où un développement traditionnel consiste à déposer des fichiers dans des dossiers et de les fournir depuis l'adresse physique sur le serveur, Node.js embarque nativement la réécriture d'url et propose d'associer à une demande, un contenu. Avec encore plusieurs couches d'abstractions nous verrons comment déporter les contenus de fichier dans de vrais fichiers .htm à part.\r\n<p>Cela signifie également que <span class=\"highlighting\">si vous n'avez pas décidé qu'un contenu/fichier est renvoyé par le serveur sous tel requête GET, POST ou autre, rien ne parviendra jamais au client</span>. Très bon point pour la sécurité.</p>\r\n<p>Pour finir : avez-vous essayé de modifier le contenu de votre script et rechargé une page dans votre navigateur sans voir aucunes modifications ? Etonnant non ? Les fichiers serveur peuvent être modifiés à chaud et <span class=\"highlighting\">aucunes modifications</span> ne sera effectives tant que le script n'aura pas été ré-exécuté (je parle de <samp>website.js</samp>).</p>\r\n\r\n<h3>Prochaines étapes</h3>\r\n\r\n<p>La partie précédente montre comment répondre à une demande en POST mais ne montre pas comment exploiter les paramètres envoyés. De plus ce morceau de script est très frustrant : un seul fichier pour plusieurs pages, HTML mélangé dans le code, pas d'appel de CSS et/ou de JS... Je vais vous demandez un peu de patience car nous verrons ça prochainement. En attendant, l'heure est venu pour nous d'<a href=\"./utiliser-jquery-avec-nodejs-sous-windows/\" title=\"Utiliser jQuery avec Node.js sous Windows\">utiliser jQuery côté serveur sur Windows</a> !</p>\r\n\r\n<h2>Source</h2>\r\n\r\n<p>Vous pouvez <a href=\"./upload/script/website.js\" title=\"Télécharger le fichier résultat de cet article\">télécharger le fichier résultat de cet article ici</a>.</p>", "dates" : { "published" : "2013-05-02 15:30:00", "updated" : [ "2013-05-02 15:30:00" ] }, "title" : "<span>Serveur web</span> et <span>application web</span> en <span>JavaScript</span>", "urn" : "serveur-web-et-application-web-en-javascript" }
{ "_id" : { "$oid" : "530f5f63620731fe86cb71ac" }, "cache" : { "comment" : { "number" : 1 } }, "categories" : [ { "$oid" : "530ef6a6789c1a55e4fde0af" }, { "$oid" : "5310456355dfd5f7698d48b9" }, { "$oid" : "5310456355dfd5f7698d48bc" }, { "$oid" : "5310456355dfd5f7698d48bd" }, { "$oid" : "5310456355dfd5f7698d48ba" }, { "$oid" : "5310456355dfd5f7698d48b8" }, { "$oid" : "5310456355dfd5f7698d48c4" }, { "$oid" : "5310456355dfd5f7698d48bb" }, { "$oid" : "5310456355dfd5f7698d48bf" } ], "content" : "<p>Vous est-il arrivé d'utiliser une fonction JavaScript en maudissant son concepteur parce qu'il avait oublié un détail important... vous permettre de faire quelque chose <span class=\"highlighting\">après</span> l'exécution de son code ! Ça m'arrive trop souvent ces derniers temps et ça ne serait pas non plus la fin du monde si les concepteurs n'avaient pas en plus eu la bonne idée de ne fournir que la version minifiée de leur développement ! Merci pour le partage « Dude » ;)</p>\r\n\r\n<p>Je vais vous raconter une histoire.</p>\r\n\r\n<h2>C'est l'histoire d'un gars sympa qui développe un plugin jQuery...</h2>\r\n\r\n<p>Notre développeur à un besoin. Il estime également que ce besoin est assez générique, que personne n'y a encore pensé et qu'il veut aider son prochain. Notre développeur est très altruiste. Sans plus tarder voici le plugin jQuery qui écris un paragraphe en italique après un autre élément ! Enfin, il faut le développer : alors commençons.</p>\r\n\r\n<pre class=\"prettyprint linenums lang-javascript\">\r\n/*** Ce plugin est dépendant de la librairie http://www.jquery.com/ ***/\r\n\r\n// Présence du \";\" pour ne pas être influancer par les erreurs des scripts précédents.\r\n// Création d'une fonction anonyme donnant accès à la variable \"$\" via son premier paramètre. \r\n;(function ($) {\r\n\r\n\t// Ajout d'une fonction \"addItalicTextAfter\" à l'objet contenu dans \"$\" dans la liste de fonctions \"fn\".\r\n\t$.fn.addItalicTextAfter = function () {\r\n\t\r\n\t\t// Retour d'exécution de chaque élément trouvé par \"$('un sélecteur quelconque')\".\r\n\t\treturn this.each(function () {\r\n\t\t\r\n\t\t\t// Je crée, je style et je remplis une balise p.\r\n\t\t\tvar p = $(\"&lt;p&gt;\").css(\"font-style\", \"italic\").text(\"J'écris ce texte après mon exemple d'utilisation !\");\r\n\t\t\t$(this).after(p); // Et hop, on ajoute ça après la cible courante.\r\n\t\t});\r\n\t}\r\n\t\r\n// J'exécute tout de suite ma jolie fonction anonyme en lui passant comme paramètre l'objet jQuery (fourni par la librairie jQuery) pour la manipuler via \"$\" comme prévu dans la dite fonction.\r\n})(jQuery);\r\n</pre>\r\n\r\n<p>Notre gars sympa imagine déjà comment le développeur final vas utiliser son plugin sur un élément avec l'id <samp>first-example</samp>.</p>\r\n\r\n<pre id=\"first-example\" class=\"prettyprint linenums lang-javascript\">\r\n\t$(\"#first-example\").addItalicTextAfter();\r\n</pre>\r\n\r\n<h3>...qui permet de changer le texte de la fonctionnalité...</h3>\r\n\r\n<p>Mais notre développeur ne s'arrête pas là, il permet également de changer le contenu du texte à ajouter !</p>\r\n\r\n<pre class=\"prettyprint linenums lang-javascript\"> \r\n;(function ($) {\r\n\t// Ajout d'un paramètre d'utilisation pour changer le contenu.\r\n\t$.fn.addItalicTextAfter = function (content) {\r\n\t\r\n\t\t// Mais si on ne souhaite pas changer le contenu, il y en a toujours un par défaut.\r\n\t\tif (content == null) {\r\n\t\t\tcontent = \"J'écris ce texte après mon exemple d'utilisation !\";\r\n\t\t}\r\n\r\n\t\treturn this.each(function () {\r\n\t\t\tvar p = $(\"&lt;p&gt;\").css(\"font-style\", \"italic\")\r\n\t\t\t\r\n\t\t\t\t// J'ajoute mon contenu initial ou modifié.\r\n\t\t\t\t.text(content);\r\n\t\t\t\t\r\n\t\t\t$(this).after(p);\r\n\t\t});\r\n\t}\r\n})(jQuery);\r\n</pre>\r\n\r\n<p>Ce qui donne à l'utilisation sur l'id <samp>second-example</samp> :</p>\r\n\r\n<pre id=\"second-example\" class=\"prettyprint linenums lang-javascript\">\r\n\t$(\"#second-example\").addItalicTextAfter(\"Et celui-ci après mon autre exemple !\");\r\n</pre>\r\n\r\n<h3>...qui se soucie de l'aspect et des performances...</h3>\r\n\r\n<p>Il décide même de permettre la customisation de son rendu : style, classe, balise : il pense ne rien omettre.</p>\r\n\r\n<p class=\"highlighting\">Conscient qu'il ne connait pas le nombre d'éléments ciblés et donc le temps de « bloquage » imposé par son script, il va même jusqu'à rendre le traitement asynchrone ! Vraiment sympa ce gars.</p>\r\n\r\n<pre class=\"prettyprint linenums lang-javascript\"> \r\n;(function ($) {\r\n\t$.fn.addItalicTextAfter = function (content, params) {\r\n\t\r\n\t\t// Si le développeur ne souhaite pas changer la phrase initiale et qu'il met directement les paramètres...\r\n\t\tif (typeof content === \"object\") {\r\n\t\t\t// ... \"params\" est \"content\"...\r\n\t\t\tparams = content;\r\n\t\t\t// ...et il n'y a pas de \"content\" au final.\r\n\t\t\tcontent = null;\r\n\t\t}\r\n\r\n\t\tif (content == null) {\r\n\t\t\tcontent = \"J'écris ce texte après mon exemple d'utilisation !\";\r\n\t\t}\r\n\t\t\r\n\t\t// On créé un objet anonyme avec les propriétés style, class et tag dans la fonction extend.\r\n\t\t// Celle-ci va placer l'objet dans la variable \"params\" en lui ajoutant les éventuelles propriétés déjà existantes depuis \"params\" passé en paramètre.\r\n\t\t// Ça permet de définir des paramètres par défaut écrasés par ceux passés en paramètre de la fonction.\r\n\t\tparams = $.extend({\r\n\t\t\t\"style\": { \"font-style\": \"italic\" },\r\n\t\t\t\"class\": \"\",\r\n\t\t\t\"tag\": \"p\"\r\n\t\t}, params);\r\n\r\n\t\treturn this.each(function () {\r\n\t\t\t// Création de $this pour étendre l'utilisation de $(this) dans un setTimeout.\r\n\t\t\tvar $this = $(this);\r\n\t\t\t\r\n\t\t\t// A partir d'ici, le code exécuté est asynchrone.\r\n\t\t\t// La suite des instructions sera exécuté avant, après, pendant la suite... nous n'en avons aucune idée.\r\n\t\t\t// L'avantage est que si le temps de traitement ci-dessous est long, il ne bloque pas notre script, ni même notre page.\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\tvar \r\n\t\t\t\t\t// Je crée un tableau de class à ajouter (si plusieurs class sont passées).\r\n\t\t\t\t\teachClass = params.class.split(\" \"),\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tp = $(\"&lt;\" + params.tag + \"&gt;\") // Je place la balise souhaitée...\r\n\t\t\t\t\t\t.css(params.style) // ...avec le style souhaité...\r\n\t\t\t\t\t\t.text(content); // ...et le contenu souhaité.\r\n\t\t\t\t\r\n\t\t\t\t// J'ajoute chacune des classes du tableau à mon objet.\r\n\t\t\t\tfor\t(var i in eachClass) {\r\n\t\t\t\t\tp.addClass(eachClass[i]);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// Le mécanisme précédent pouvait être simplement remplacé par :\r\n\t\t\t\t// p.attr(\"class\", params.class) car il n'est pas sensé y avoir \"déjà\" des classes sur l'objet créé.\r\n\t\t\t\t// Cependant prenez l'habitude de faire ainsi pour éviter \"d'écraser\" les classes déjà présentes.\r\n\t\t\t\t\r\n\t\t\t\t// Utilisation de $this car $(this) n'existe plus dans le setTimeout.\r\n\t\t\t\t$this.after(p);\r\n\t\t\t}, 0); // Ne perdons pas une seconde à exécuter notre code donc mettons 0 milliseconde de délai.\r\n\t\t});\r\n\t}\r\n})(jQuery);\r\n</pre>\r\n\r\n<p>Ce qui donne à l'utilisation sur l'id <samp>third-example</samp> :</p>\r\n\r\n<pre id=\"third-example\" class=\"prettyprint linenums lang-javascript\">\r\n\t$(\"#third-example\").addItalicTextAfter(\r\n\t\t\"Dommage que mon nom de fonction ne veuille plus rien dire !\", {\r\n\t\t\tclass: \"warning my-example\",\r\n\t\t\tstyle: { \"font-weight\": \"bold\", \"font-size\": \"0.8em\" } \r\n\t\t}\r\n\t);\r\n</pre>\r\n\r\n<h3>...mais qui oublie de mettre une Callback !</h3>\r\n\r\n<p>C'est bien beau tout ça. Notre développeur partage donc son œuvre, sans donner le code source (non minifié), sans même mettre en place de support ou un moyen de le contacter. Il oublie même qu'il avait développé son super plugin bien utile.</p>\r\n\r\n<p>Mais ce à quoi notre développeur sympa n'a pas pensé, c'est que le développeur utilisateur du plugin veut peut-être rajouter ceci après son code :</p>\r\n\r\n<pre id=\"fourth-example\" class=\"prettyprint linenums lang-javascript\">\r\n\t$(\"#fourth-example\").addItalicTextAfter(\"Marche pas...\", { class: \"my-target like-a\" });\r\n\t\r\n\t// Souhaite permettre une alerte au clique sur l'élément.\r\n\t$(\".my-target\").click(function () {\r\n\t\talert(\"« Ah bah pas cool :/ » - Christophe L.\");\r\n\t});\r\n\t// Mais sans succès...\r\n</pre>\r\n\r\n<p class=\"highlighting\">FAIL...</p>\r\n\r\n<h2>La Callback : bonne pratique de développement asynchrone</h2>\r\n\r\n<p>C'est une énorme problème de la part de notre développeur sympa que de ne pas avoir mis de Callback ou Fonction de rappel ! Ça a rendu des tas de développeurs tristes ! Peut-être que ça a même tué des petits chats.</p>\r\n\r\n<p>Dans notre exemple précédent, l'exécution du code est asynchrone ce qui signifie qu'il n'y a aucun moyen de savoir quand le code exécuté sera fini, donc aucun moyen de savoir quand l'élément portant la classe <samp>my-target</samp> sera ajouté au DOM et donc aucun moyen de savoir si l'évènement <samp>onclick</samp> ajouté à la suite va cibler un élément ou cibler le vide. Alors on fait quoi maintenant ? On met à notre tour un <samp>setTimeout</samp> en croisant les doigts pour que nos éléments soient arrivés dans le DOM avant qu'on exécute de quoi leur associer un <samp>onclick</samp> ? On va voir ça plus loin dans les mauvaises pratiques. Pour le moment : ajoutons notre Callback.</p>\r\n\r\n<h3>La Fonction de rappel dans une fonction asynchrone</h3>\r\n\r\n<p>Voici ce qu'on aurait pu faire si nous avions au minima les sources.</p>\r\n\r\n<pre class=\"prettyprint linenums lang-javascript\"> \r\n;(function ($) {\r\n\t$.fn.addItalicTextAfter = function (content, params, callback) {\r\n\t\r\n\t\t// Si l'utilisateur tape un \"content\", mais ne donne pas de \"params\"...\r\n\t\tif (typeof params === \"function\") {\r\n\t\t\t// ...\"params\" est \"callback\"...\r\n\t\t\tcallback = params;\r\n\t\t\t// ...et il n'y a pas de \"params\".\r\n\t\t\tparams = null;\r\n\t\t}\r\n\r\n\t\t// Si l'utilisateur ne saisit qu'une fonction en premier paramètre...\r\n\t\tif (typeof content === \"function\") {\r\n\t\t\t// ...\"content\" est \"callback\"...\r\n\t\t\tcallback = content;\r\n\t\t\t// ...il n'y a pas de \"params\"...\r\n\t\t\tparams = null;\r\n\t\t\t// ...et il n'y a pas de \"content\"...\r\n\t\t\tcontent = null;\r\n\t\t} else if (typeof content === \"object\") {\r\n\t\t\tparams = content;\r\n\t\t\tcontent = null;\r\n\t\t}\r\n\t\t\r\n\t\tif (content == null) {\r\n\t\t\tcontent = \"J'écris ce texte après mon exemple d'utilisation !\";\r\n\t\t}\r\n\r\n\t\tparams = $.extend({\r\n\t\t\t\"style\": { \"font-style\": \"italic\" },\r\n\t\t\t\"class\": \"\",\r\n\t\t\t\"tag\": \"p\"\r\n\t\t}, params);\r\n\r\n\t\treturn this.each(function () {\r\n\t\t\tvar $this = $(this);\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\tvar \r\n\t\t\t\t\teachClass = params.class.split(\" \"),\r\n\t\t\t\t\tp = $(\"&lt;\" + params.tag + \"&gt;\")\r\n\t\t\t\t\t\t.css(params.style)\r\n\t\t\t\t\t\t.text(content);\r\n\t\t\t\t\r\n\t\t\t\tfor\t(var i in eachClass) {\r\n\t\t\t\t\tp.addClass(eachClass[i]);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t$this.after(p);\r\n\t\t\t\t\r\n\t\t\t\t// Dans le cas ou une Callback a été passé on l'exécute.\r\n\t\t\t\t// On ne sait pas quand elle sera exécutée, mais ce que l'on sait, c'est que l'objet créé sera déjà dans le DOM.\r\n\t\t\t\tif (typeof callback === \"function\") {\r\n\t\t\t\t\t// On exécute la Callback.\r\n\t\t\t\t\t// On a arbitrairement décidé, parce que ça semblait utile, de passer en paramètre de Callback l'objet créé.\r\n\t\t\t\t\t// Le développeur pourra même manipuler l'objet créé sans le re-cibler après traitement.\r\n\t\t\t\t\tcallback(p);\r\n\t\t\t\t}\r\n\t\t\t}, 0);\r\n\t\t});\r\n\t}\r\n})(jQuery);\r\n</pre>\r\n\r\n<p>Et je fais un utilisateur/développeur heureux qui cible l'id <samp>fifth-example</samp> :</p>\r\n\r\n<pre id=\"fifth-example\" class=\"prettyprint linenums lang-javascript\">\r\n// Définition du code qui sera exécuté après \"addItalicTextAfter\".\r\nfunction whatIwantExecuteAfter(element) {\r\n\t// \"element\" contient l'objet créé par \"addItalicTextAfter\".\r\n\telement\r\n\t\t.text(\"J'écris ce que je veux avec le style que je veux !\") // On change le texte nous-mêmes au lieu de passer par la fonction \"addItalicTextAfter\".\r\n\t\t.addClass(\"like-a\") // On change la class nous-mêmes au lieu de passer par la fonction \"addItalicTextAfter\".\r\n\t\t\r\n\t\t// On ajoute un évènement au clique sur l'élément.\r\n\t\t.click(function () {\r\n\t\t\talert(\"« Merci monsieur Morpheus ! » - Keanu R.\");\r\n\t\t});\r\n}\r\n\r\n$(\"#fifth-example\").addItalicTextAfter(whatIwantExecuteAfter);\r\n</pre>\r\n\r\n<p>Il est également possible de directement passer par une fonction anonyme. Les développeurs jQuery y sont habitués !</p>\r\n\r\n<pre id=\"sixth-example\" class=\"prettyprint linenums lang-javascript\">\r\n$(\"#sixth-example\").addItalicTextAfter(function (element) {\r\n\telement\r\n\t\t.text(\"J'écris encore ce que je veux, et ouais !\")\r\n\t\t.addClass(\"like-a\")\r\n\t\t.click(function () {\r\n\t\t\talert(\"« Monde de merde ! » - Laurence F.\");\r\n\t\t});\r\n});\r\n</pre>\r\n\r\n<h3>Déléguer à la Callback est une bonne chose</h3>\r\n\r\n<p>On s'aperçoit aisément qu'au final, l'ajout de style, ou de texte, etc... peut également être fait par la Callback à condition de lui en donner les moyens. Il faut donc se limiter à ce que votre développement doit faire et <span class=\"highlighting\">toujours</span> laisser des portes de sorties dans vos traitements.</p>\r\n\r\n<h3>Plusieurs Callbacks pour un traitement</h3>\r\n\r\n<p>Il ne faut pas hésiter à parsemer son code de Callbacks aux endroits stratégiques pour changer le comportement de votre code. Dans notre exemple précédent, on pourrait avoir une Callback pour chaque élément traité et une Callback quand tous les éléments sont traités.</p>\r\n\r\n<h2>Les mauvaises pratiques pour rattraper la boulette</h2>\r\n\r\n<p>Comme toujours les solutions ne manquent pas quand un développeur sympa à « oublié » de proposer une Fonction de rappel dans son développement qu'il a eu la délicatesse de minifier.</p>\r\n\r\n<h3>La vilaine fonction jQuery live</h3>\r\n\r\n<p>La fonction <samp>jQuery(target).live(event, callback)</samp> est utilisé à la place de <samp>jQuery(target).bind(event, callback)</samp> (ou <samp>jQuery(target).on(event, callback)</samp>) par les développeurs qui ont une méconnaissance totale de l'ordre d'exécution d'un code dans plusieurs fichiers JavaScript éparpillés sur une page HTML elle-même remplit de balises <samp>&lt;script&gt;</samp> dans tous les coins...</p>\r\n\r\n<p>Mais sinon elle permet d'associer un évènement sur un élément du DOM <span class=\"highlighting\">qui n'est pas encore présent</span> dans celui-ci. Nous allons l'utiliser de la manière la « plus propre » possible pour corriger le problème précédent. Écoutons en « live » l'arrivée d'éléments après l'id <samp>seventh-example</samp>.</p>\r\n\r\n<pre id=\"seventh-example\" class=\"prettyprint linenums lang-javascript\">\r\n\t$(\"#seventh-example\").addItalicTextAfter({ class: \"my-target like-a\" });\r\n\t\r\n\t// Je décide d'écouter en boucle les nouveaux éléments \".my-target\" ajouté dans le DOM.\r\n\t// Cette action se fera à intervalle régulier et le code exécuté ci-dessous l'ai lui-même de manière asynchrone.\r\n\t$(\".my-target\").live(\"click\", function () {\r\n\t\t// Dès qu'un élément \".my-target\" est ajouté au DOM l'évènement \"onclick\" lui est ajouté.\r\n\t\talert(\"« Hey, Mais ça sent la merde ? » - Christophe L.\");\r\n\t\t// Nous allons arrêter cette écoute de nouveaux éléments ajoutés car nous savons qu'il n'y en aura pas d'autres.\r\n\t\t$(this).die(\"click\"); // Ça, \"die\", c'est ce qui rend \"assez propre\" l'utilisation de live.\r\n\t});\r\n</pre>\r\n\r\n<p class=\"eye-catching\">Note : la fonction <samp>die</samp> n'enlève pas l'évènement \"onlclick\" d'un élément. Elle se contente de faire arrêter l'écoute des nouveaux éléments ciblés dans le DOM qui sont arrivés.</p>\r\n\r\n<p>Vous pouvez cependant constater que cela a marché car il n'y a eu qu'un seul élément d'ajouté. S'il y en avait eu plusieurs, il aurait fallu exécuter <samp>die</samp> qu'avec le dernier arrivé ce qui aurait compliquer la tâche. Une simple fonction de Callback, c'est tout ce qu'il vous aurait fallu.</p>\r\n\r\n<p>L'inconvénient de <samp>live</samp> c'est qu'il ne marche qu'avec un nombre limité d'évènement. Voyons juste après la méthode universelle.</p>\r\n\r\n<h3>Le vilain setInterval passe partout</h3>\r\n\r\n<p>Avec, comme précédemment, une utilisation propre du <samp>setInterval</samp> on peut également s'en sortir. Voyez plutôt ça sur l'id <samp>eighth-example</samp>.</p>\r\n\r\n<pre id=\"eighth-example\" class=\"prettyprint linenums lang-javascript\">\r\n\t$(\"#eighth-example\").addItalicTextAfter({ class: \"my-example like-a\" });\r\n\t// On va vérifier à intervalle de 50 millisecondes le nombre d'éléments \".my-example\" sur la page.\r\n\tvar tempExampleInterval = setInterval(function () {\r\n\t\t// On s'attend au maximum à en recevoir un.\r\n\t\tif ($(\".my-example\").length == 1) {\r\n\t\t\r\n\t\t\t// Dès qu'on a un \".my-example\" dans le DOM on ajoute l'évènement à l'objet...\r\n\t\t\t$(\".my-example\").click(function () {\r\n\t\t\t\talert(\"« Nan mais c'est bon tu m'as soûlé moi, j'en veux pas de ton monde pourri moi... » - Keanu R.\");\r\n\t\t\t});\r\n\t\t\t// ...et on arrête le \"setInterval\".\r\n\t\t\tclearInterval(tempExampleInterval);\r\n\t\t}\r\n\t}, 50);\r\n</pre>\r\n\r\n<p>Comme pour l'exemple précédent, il n'y a pas de solution miracle. Il faut connaître le nombre d'élément qu'on s'attend à avoir pour mettre fin au timer. Si on ne le fait pas, notre page peut vite devenir une foire aux timers et aux codes inutilements exécutés.</p>\r\n\r\n<h2>Un petit cas concret avec le script SyntaxHighlighter</h2>\r\n\r\n<p>Le code JavaScript présenté dans cet article (à l'heure où j'ecris ces lignes) est écrit à la source sans couleurs. C'est le script JavaScript <a href=\"https://bitbucket.org/alexg/syntaxhighlighter/issue/283/highlighter-complete-callback\" title=\"SyntaxHighlighter\">SyntaxHighlighter</a> qui repasse sur tous les éléments pour les colorier, leur ajouter un nombre de ligne, etc... Cette transformation est asynchrone et il n'existe pas de Callback.</p>\r\n\r\n<h3>Utilisation d'un setInterval pour remplacer la Callback</h3>\r\n\r\n<p>Voici le code utiliser pour vous permettre \"d'agripper\" les exemples de code au clique gauche de la souris et de faire défiler le code.</p>\r\n\r\n<pre class=\"prettyprint linenums lang-javascript\">\r\nvar \r\n\t// On compte les éléments qui vont nécessiter d'être transformé.\r\n\t// Le développeur a pensé à cette fonctionnalité.\r\n\t// Mais a oublié de mettre une Callback...\r\n\tbeforeHighlighted = SyntaxHighlighter.findElements().length,\r\n\tafterHighlighted;\r\n\r\n// Utilisation standard du script. \r\n// Voilà, à la fin de l'exécution de cette fonction asynchrone, notre code sera tout beau.\r\nSyntaxHighlighter.all();\r\n\r\n// Maintenant je veux permettre de glisser le code sur l'axe des y en maintenant ma souris enfoncée.\r\n// C'est impossible car les éléments à accrocher n'existerons qu'à la fin de l'exécution de \"SyntaxHighlighter.all();\", fin d'exécution que je ne connais pas...\r\n// Et comme déjà dit (il me semble) : pas de Callback.\r\n\r\n// On va boucler à l'intérieur de cette propre fonction jusqu'à ce que le traitement puisse commencer.\r\n(function eachElementHighlighted() {\r\n\t// Nous allons vérifier au bout de 100 milisecondes...\r\n\tsetTimeout(function () {\r\n\t\r\n\t\t// ...le nombre d'élément déjà transformé.\r\n\t\tafterHighlighted = $('.syntaxhighlighter');\r\n\t\t\r\n\t\t// S'il y a autant d'élément transformé que d'élément qu'il fallait transformer on passe dans le else.\r\n\t\t// Sinon on revérifie une nouvelle fois dans le if.\r\n\t\tif (afterHighlighted.length < beforeHighlighted) {\r\n\t\t\teachElementHighlighted();\r\n\t\t} else {\r\n\t\t\r\n\t\t\t/***************************************************************/\r\n\t\t\t/* Ici commence seulement le code utile à la fonctionnalité !! */\r\n\t\t\t/***************************************************************/\r\n\t\t\r\n\t\t\tif (!Modernizr.touch) {\r\n\t\t\t\tvar $sh = $(\".syntaxhighlighter\").css(\"overflow\",\"hidden\");\r\n\t\t\t\t$sh.mousedown(function (e) {\r\n\t\t\t\t\t$.data(this, \"draggable\", true);\r\n\t\t\t\t\t$.data(this, \"offset\", e.pageX);\r\n\t\t\t\t}).mouseup(function () {\r\n\t\t\t\t\t$.data(this, \"draggable\", false);\r\n\t\t\t\t\t$.data(this, \"offset\", 0);\r\n\t\t\t\t}).mouseleave(function () {\r\n\t\t\t\t\t$.data(this, \"draggable\", false);\r\n\t\t\t\t\t$.data(this, \"offset\", 0);\r\n\t\t\t\t}).mousemove(function (e) {\r\n\t\t\t\t\tif ($(this).data(\"draggable\")) {\r\n\t\t\t\t\t\t$(this).scrollLeft(parseInt($(this).scrollLeft() + ($(this).data(\"offset\") - e.pageX), 10));\r\n\t\t\t\t\t\t$.data(this, \"offset\", e.pageX);\r\n\t\t\t\t\t}\r\n\t\t\t\t}).data(\"draggable\", false).data(\"offset\", 0);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t/**************************************************************/\r\n\t\t}\r\n\t}, 100); // On a mis 100 millisecondes. Il faut trouver le compromis entre nombre de vérification et perte de temps possible avant première vérification.\r\n})();\r\n</pre>\r\n\r\n<h3>Adieu setInterval, merci Fonction de rappel !</h3>\r\n\r\n<p>Voici ce que pourrait donner le code précédent avec une Callback...</p>\r\n\r\n<pre class=\"prettyprint linenums lang-javascript\">\r\nSyntaxHighlighter.all(function ($sh) {\r\n\tif (!Modernizr.touch) {\r\n\t\t$sh.css(\"overflow\",\"hidden\");\r\n\t\t$sh.mousedown(function (e) {\r\n\t\t\t$.data(this, \"draggable\", true);\r\n\t\t\t$.data(this, \"offset\", e.pageX);\r\n\t\t}).mouseup(function () {\r\n\t\t\t$.data(this, \"draggable\", false);\r\n\t\t\t$.data(this, \"offset\", 0);\r\n\t\t}).mouseleave(function () {\r\n\t\t\t$.data(this, \"draggable\", false);\r\n\t\t\t$.data(this, \"offset\", 0);\r\n\t\t}).mousemove(function (e) {\r\n\t\t\tif ($(this).data(\"draggable\")) {\r\n\t\t\t\t$(this).scrollLeft(parseInt($(this).scrollLeft() + ($(this).data(\"offset\") - e.pageX), 10));\r\n\t\t\t\t$.data(this, \"offset\", e.pageX);\r\n\t\t\t}\r\n\t\t}).data(\"draggable\", false).data(\"offset\", 0);\r\n\t}\r\n});\r\n</pre>\r\n\r\n<p>Ah ouais quand même...</p>", "dates" : { "published" : "2013-05-03 13:40:00", "updated" : [ "2013-05-03 13:40:00" ] }, "script" : "(function ($) {\r\n\t$.fn.addPAfter = function () {\r\n\t\treturn this.each(function () {\r\n\t\t\tvar p = $(\"<p>\").css(\"font-style\", \"italic\").text(\"J'écris ce texte après mon exemple d'utilisation !\");\r\n\t\t\t$(this).after(p); // Et op, on ajoute ça après la cible courante.\r\n\t\t});\r\n\t}\r\n})(jQuery);\r\n\r\n$(\"#first-example\").addPAfter();\r\n\r\n(function ($) {\r\n\t$.fn.addPAfter2 = function (content) {\r\n\t\r\n\t\tif (content == null) {\r\n\t\t\tcontent = \"J'écris ce texte après mon exemple d'utilisation !\";\r\n\t\t}\r\n\r\n\t\treturn this.each(function () {\r\n\t\t\tvar p = $(\"<p>\").css(\"font-style\", \"italic\").text(content);\r\n\t\t\t$(this).after(p);\r\n\t\t});\r\n\t}\r\n})(jQuery);\r\n\r\n$(\"#second-example\").addPAfter2(\"Et celui-ci après mon autre exemple !\");\r\n\r\n(function ($) {\r\n\t$.fn.addPAfter3 = function (content, params) {\r\n\t\r\n\t\tif (typeof content === \"object\") {\r\n\t\t\tparams = content;\r\n\t\t\tcontent = null;\r\n\t\t} \r\n\t\tif (content == null) {\r\n\t\t\tcontent = \"J'écris ce texte après mon exemple d'utilisation !\";\r\n\t\t}\r\n\t\t\r\n\t\tparams = $.extend({\r\n\t\t\t\"style\": { \"font-style\": \"italic\" },\r\n\t\t\t\"class\": \"\",\r\n\t\t\t\"tag\": \"p\"\r\n\t\t}, params);\r\n\r\n\t\treturn this.each(function () {\r\n\t\t\tvar $this = $(this);\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\tvar \r\n\t\t\t\t\teachClass = params.class.split(\" \"),\r\n\t\t\t\t\tp = $(\"<\" + params.tag + \">\")\r\n\t\t\t\t\t\t.css(params.style)\r\n\t\t\t\t\t\t.text(content);\r\n\t\t\t\t\r\n\t\t\t\tfor\t(var i in eachClass) {\r\n\t\t\t\t\tp.addClass(eachClass[i]);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t$this.after(p);\r\n\t\t\t}, 0);\r\n\t\t});\r\n\t}\r\n})(jQuery);\r\n\r\n$(\"#third-example\").addPAfter3(\r\n\t\"Dommage que mon nom de fonction ne veuille plus rien dire !\", {\r\n\t\tclass: \"warning\",\r\n\t\tstyle: { \"font-weight\": \"bold\", \"font-size\": \"0.8em\" } \r\n\t}\r\n);\r\n\r\n$(\"#fourth-example\").addPAfter3(\"Marche pas...\", { class: \"like-a\" });\r\n\r\n;(function ($) {\r\n\t$.fn.addPAfter4 = function (content, params, callback) {\r\n\t\r\n\t\tif (typeof params === \"function\") {\r\n\t\t\tcallback = params;\r\n\t\t\tparams = null;\r\n\t\t}\r\n\r\n\t\tif (typeof content === \"function\") {\r\n\t\t\tcallback = content;\r\n\t\t\tparams = null;\r\n\t\t\tcontent = null;\r\n\t\t} else if (typeof content === \"object\") {\r\n\t\t\tparams = content;\r\n\t\t\tcontent = null;\r\n\t\t}\r\n\t\t\r\n\t\tif (content == null) {\r\n\t\t\tcontent = \"J'écris ce texte après mon exemple d'utilisation !\";\r\n\t\t}\r\n\r\n\t\tparams = $.extend({\r\n\t\t\t\"style\": { \"font-style\": \"italic\" },\r\n\t\t\t\"class\": \"\",\r\n\t\t\t\"tag\": \"p\"\r\n\t\t}, params);\r\n\r\n\t\treturn this.each(function () {\r\n\t\t\tvar $this = $(this);\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\tvar \r\n\t\t\t\t\teachClass = params.class.split(\" \"),\r\n\t\t\t\t\tp = $(\"<\" + params.tag + \">\")\r\n\t\t\t\t\t\t.css(params.style)\r\n\t\t\t\t\t\t.text(content);\r\n\t\t\t\t\r\n\t\t\t\tfor\t(var i in eachClass) {\r\n\t\t\t\t\tp.addClass(eachClass[i]);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t$this.after(p);\r\n\t\t\t\t\r\n\t\t\t\tif (typeof callback === \"function\") {\r\n\t\t\t\t\tcallback(p);\r\n\t\t\t\t}\r\n\t\t\t}, 0);\r\n\t\t});\r\n\t}\r\n})(jQuery);\r\n\r\nfunction whatIwantExecuteAfter(element) {\r\n\telement\r\n\t\t.text(\"J'écris ce que je veux avec le style que je veux !\")\r\n\t\t.addClass(\"like-a\")\r\n\t\t.click(function () {\r\n\t\t\talert(\"« Merci monsieur Morpheus ! » - Keanu R.\");\r\n\t\t});\r\n}\r\n\r\n$(\"#fifth-example\").addPAfter4(whatIwantExecuteAfter);\r\n\r\n$(\"#sixth-example\").addPAfter4(function (element) {\r\n\telement\r\n\t\t.text(\"J'écris encore ce que je veux, et ouais !\")\r\n\t\t.addClass(\"like-a\")\r\n\t\t.click(function () {\r\n\t\t\talert(\"« Monde de merde ! » - Laurence F.\");\r\n\t\t});\r\n});\r\n\r\n$(\"#seventh-example\").addPAfter3({ class: \"my-target like-a\" });\r\n$(\".my-target\").live(\"click\", function () {\r\n\talert(\"« Hey, Mais ça sent la merde ? » - Christophe L.\");\r\n\t$(this).die(\"click\");\r\n});\r\n\r\n$(\"#eighth-example\").addPAfter3({ class: \"my-example like-a\" });\r\nvar tempExampleInterval = setInterval(function () {\r\n\tif ($(\".my-example\").length == 1) {\r\n\t\t$(\".my-example\").click(function () {\r\n\t\t\talert(\"« Nan mais c'est bon tu m'as soulé moi, j'en veux pas de ton monde pourri moi... » - Keanu R.\");\r\n\t\t});\r\n\t\tclearInterval(tempExampleInterval);\r\n\t}\r\n}, 50);", "style" : ".like-a {\r\ncolor: #0000ff;\r\ntext-decoration: underline;\r\ncursor: pointer;\r\n}\r\n.dark .like-a {\r\ncolor: #ffff00;\r\n}\r\n.like-a:hover {\r\ncolor: #ff0000;\r\n}\r\n.dark .like-a:hover {\r\ncolor: #00ffff;\r\n}", "title" : "Une <span>Callback</span> pour vos fonctions <span>JS</span> <span>asynchrones</span>", "urn" : "une-callback-pour-vos-fonctions-js-asynchrones" }
{ "_id" : { "$oid" : "530f5f63620731fe86cb71ad" }, "cache" : { "comment" : { "number" : 0 } }, "categories" : [ { "$oid" : "5310456355dfd5f7698d48b8" }, { "$oid" : "5310456355dfd5f7698d48bb" }, { "$oid" : "5310456355dfd5f7698d48c8" }, { "$oid" : "5310456355dfd5f7698d48b9" }, { "$oid" : "5310456355dfd5f7698d48c7" }, { "$oid" : "5310456355dfd5f7698d48ba" } ], "content" : "<p>Utiliser jQuery pour du développement côté serveur serait vraiment formidable ! C'est possible avec Node.js. Nous y sommes enfin, l'une des parties très intéressante qui peut justifier l'utilisation de Node.js à la place de vos développements PHP et Cie. C'est le moment de travailler de la même façon côté client et côté serveur sur vos processus de contrôle (vos Contrôleurs en MVC) et donc de développer vos sites avec un unique langage de programmation : JavaScript. Cependant, sous Windows, il y a une petite difficulté en plus liée aux modules développés en code natif que nous allons surmonter ! C'est parti pour manipuler le DOM côté Back-end !</p>\r\n\r\n<div class=\"correct-practice\">\r\n\t<div class=\"title highlighting\">À la découverte de Node.js sous Windows</div>\r\n\t<nav class=\"content\">\r\n\t\t<ol>\r\n\t\t\t<li><a href=\"./developper-en-javascript-cote-serveur-avec-nodejs/\" title=\"Développer en JavaScript côté serveur avec Node.js\">Qu'est-ce que Node.js ?</a></li>\r\n\t\t\t<li><a href=\"./installer-et-utiliser-nodejs-sous-windows/\" title=\"Installer et utiliser Node.js sous Windows\">Installation de Node.js</a></li>\r\n\t\t\t<li><a href=\"./serveur-web-et-application-web-en-javascript/\" title=\"Serveur web et application web en JavaScript\">Simple application web avec Node.js</a></li>\r\n\t\t\t<li><a class=\"highlighting\" href=\"./utiliser-jquery-avec-nodejs-sous-windows/\" title=\"Utiliser jQuery avec Node.js sous Windows\">Utiliser jQuery côté serveur avec Node.js</a></li>\r\n\t\t\t<li>Appels client asynchrones avec Node.js</li>\r\n\t\t\t<li>Un moteur de template avec Node.js</li>\r\n\t\t\t<li>Des sites multilingues avec Node.js</li>\r\n\t\t\t<li>La base de données MySQL et Node.js</li>\r\n\t\t\t<li>Une architecture MVC2 avec Node.js</li>\r\n\t\t</ol>\r\n\t</nav>\r\n</div>\r\n\r\n<h2>À propos du module node-jquery</h2>\r\n\r\n<p>L'utilisation du module Node.js <samp>node-jquery</samp> permet de manipuler des objets jQuery dans du code JavaScript développé pour être interprété côté serveur par le moteur JavaScript V8 (l'interpréteur JavaScript socle de Node.js). <samp>node-jquery</samp> est lui-même le socle de base permettant cette utilisation de l'autre côté et comme son développeur le dit « n'est simplement que ça ».</p>\r\n\r\n<p>Initialement développé par <a href=\"https://github.com/coolaj86\" title=\"coolaj86 (AJ ONeal)\" class=\"highlighting\">coolaj86</a> —le développeur qui a également développé le module <samp>node-walk</samp> utilisé <a href=\"./serveur-web-et-application-web-en-javascript/\" title=\"Serveur web et application web en JavaScript\">dans mon précédent billet</a>)— <samp>node-jquery</samp> va être dès à présent maintenu par la Team jQuery elle-même, ce qui assure un suivi et une utilisabilité solide de cette approche comme méthode de développement dans le futur.</p>\r\n\r\n<p class=\"eye-catching\">Note : il est donc possible que dans un futur proche se soit un autre plugin que <samp>node-jquery</samp> qu'il faille installer pour utiliser jQuery côté serveur, car node-jquery n'est pas le seul module permettant d'utiliser jQuery côté serveur. Cependant, l'utilisation de jQuery en elle-même restera identique et équivalente à celle du côté client.</p>\r\n\r\n<h3>Ce que nous dit la documentation node-jquery...</h3>\r\n\r\n<p>Comme toujours, rendez-vous sur <a href=\"https://npmjs.org/\" title=\"node.js\">le registre des modules Node.js</a> pour chercher <samp><a href=\"https://npmjs.org/package/jQuery\" title=\"node.js\">node-jquery</a></samp> et ainsi atteindre <a href=\"https://github.com/coolaj86/node-jquery\" title=\"coolaj86/node-jquery\">la page de projet et de documentation</a>.</p>\r\n\r\n<p>On y apprend que :</p>\r\n<ul>\r\n\t<li><span class=\"highlighting\">pour installer le module jQuery</span> : on utilise <samp>npm install jquery</samp> (<span class=\"eye-catching\">et pas</span> npm install j<span class=\"highlighting\">Q</span>uery) et</li>\r\n\t<li><span class=\"highlighting\">pour manipuler l'objet jQuery</span> : on déclare <samp>var $ = require('jquery').create();</samp> et manipule donc <samp>$</samp>.</li>\r\n</ul>\r\n\r\n<p class=\"eye-catching\">Note : vous constaterez qu'il y a plusieurs projets de socle jQuery en place pour utiliser la librairie jQuery côté serveur si vous fouillez le registre NPM. Libre à-vous d'en choisir une autre. Il faut cependant prendre en compte le support du module dans le temps.</p>\r\n\r\n<h3>...mais ce qu'elle ne nous dit pas</h3>\r\n\r\n<p>Malheureusement, que vous exécutiez votre fichier avec la ligne <samp>require('jquery').create()</samp> avant ou après installation du module <samp>node-jquery</samp>, si vous êtes sous Windows, vous aurez toujours la même erreur : « Cannot find module 'jquery' ». Nous allons arranger cela plus loin (<span class=\"eye-catching\">bon, en fait la doc mentionnait le problème sous Windows, mais j'aimais bien mes titres !</span>).</p>\r\n\r\n<figure>\r\n\t<figcaption>Sous Windows, jQuery ne marche pas (même après installation)</figcaption>\r\n\t<img class=\"openable\" src=\"./upload/image/node-jquery-not-installed-error.png\" alt=\"Sous Windows, jQuery ne marche pas (même après installation)\" width=\"658\" height=\"302\" style=\"width: 100%;height: auto;\">\r\n</figure>\r\n\r\n<h3>jQuery ne marche pas avec Node.js sous Windows</h3>\r\n\r\n<p>Et oui ! Nous avons mis le doigt sur un problème que rencontre tous les débutants Node.js qui commence à jouer avec les modules NPM sous Windows. Effectivement, dans <a href=\"./installer-et-utiliser-nodejs-sous-windows/\" title=\"Installer et utiliser Node.js sous Windows\">mon deuxième billet</a>, j'ai passé sous silence les pré-requis qui nous auraient éviter ce souci pour entrer dans le vif du sujet. Maintenant, il est l'heure d'installer un environnement de développement Node.js plus complet pour résoudre ce problème.</p>\r\n\r\n<p>Si vous ne possédez pas sur votre machine Python, Microsoft Visual Studio et quelques autres dépendances, en tapant <samp>npm install jquery</samp> dans votre console vous allez obtenir une erreur :</p>\r\n\r\n<figure>\r\n\t<figcaption>Sans Python et Microsoft Visual Studio : jQuery ne marche pas</figcaption>\r\n\t<img class=\"openable\" src=\"./upload/image/node-jquery-not-python-error.png\" alt=\"Sans Python et Microsoft Visual Studio : jQuery ne marche pas\" width=\"658\" height=\"302\" style=\"width: 100%;height: auto;\">\r\n</figure>\r\n\r\n<p>En fouillant dans le répertoire <samp>node_modules</samp> le dossier jquery est pourtant bien là ! Alors pourquoi ça ne marche pas ! La réponse se trouve dans les logs des erreurs disponibles dans votre console ou, comme indiqué, dans le fichier npm.debug.log :</p>\r\n\r\n<p class=\"warning eye-catching\">\r\nError: Can't find Python executable \"python\", you can set the PYTHON env variable.\r\n</p>\r\n\r\n<p>et</p>\r\n\r\n<p class=\"warning eye-catching\">\r\ncontextify@0.1.5 install: `node-gyp rebuild`<br />\r\nerror `cmd \"/c\" \"node-gyp rebuild\"` failed with 1<br />\r\nerror Failed at the contextify@0.1.5 install script.<br />\r\nerror This is most likely a problem with the contextify package,<br />\r\nerror not with npm itself.<br />\r\nerror Tell the author that this fails on your system:<br />\r\nerror     node-gyp rebuild<br />\r\nerror You can get their info via:<br />\r\nerror     npm owner ls contextify<br />\r\nerror There is likely additional logging output above.\r\n</p>\r\n\r\n<p id=\"prerequis\">Résolevons ce problème !</p>\r\n\r\n<h2>Python et Microsoft Visual Studio comme pré-requis Node.js sous Windows</h2>\r\n\r\n<p>En réalité si jQuery ne fonctionne pas, c'est parce que l'un des modules Node.js dont il est dépendant n'est pas un module écrits en JavaScript mais un module écrits en code natif, le module <span class=\"highlighting\">contextify</span>, qui requiert donc d'être compilé sur la machine où il est utilisé pour fonctionner.</p>\r\n\r\n<p>C'est le module <span class=\"highlighting\">node-gyp</span> qui s'occupe de compiler les modules Node.js développés en language natif (autre qu'en JavaScript) et pour faire son travail il a besoin des logiciels Windows <span class=\"highlighting\">Python</span> ainsi que <span class=\"highlighting\">Microsoft Visual Studio</span> (ou Microsoft Visual C++).</p>\r\n\r\n<p class=\"eye-catching\">Nous ne le verrons pas dans ce billet, mais sachez qu'il est également possible de se procurer les sources compilés de contextify pour votre machine et ne pas avoir à installer Python et Microsoft Visual Studio. Cependant, puisque le cas de figure se représentera assez souvent (avec d'autres modules natifs), je vous conseille de le faire.</p>\r\n\r\n<h3>Installation de Python 2.7.x pour Windows</h3>\r\n\r\n<p>Pour commencer nous allons installer le logiciel <span class=\"highlighting\">Python</span> sur votre machine Windows. Bien que celui-ci existe en version 3.x.x il faut installer une version 2.7.x pour que cela fonctionne.</p>\r\n\r\n<ul>\r\n\t<li>Rendez-vous donc sur <a href=\"http://www.python.org/download/releases/\" title=\"Python Releases\">la page des « Releases » Windows</a> et téléchargez <a href=\"http://www.python.org/download/releases/2.7.4/\" title=\"Python 2.7.4 Release\">la dernière version 2.7.x</a> (dans mon cas c'est <a href=\"http://www.python.org/download/releases/2.7.4/\" title=\"Python 2.7.4 Release\">Python 2.7.4 du 6 avril 2013</a>)</li>\r\n\t<li>Téléchargez le <a href=\"http://www.python.org/ftp/python/2.7.4/python-2.7.4.amd64.msi\" title=\"Windows X86-64 MSI Installer\">Windows X86-64 MSI Installer (2.7.4)</a> et installez-le.</li>\r\n</ul>\r\n\r\n<p>A ce stade, en ré-essayant la commande <samp>npm install jquery</samp> l'erreur précédente est passée et la nouvelle erreur est :</p>\r\n\r\n<p class=\"eye-catching warning\">MSBUILD : error MSB3428: Impossible de charger le composant Visual C++ \"VCBuild.exe\" (MSBUILD : error MSB3428: Could not load the Visual C++ component \"VCBuild.exe\").</p>\r\n\r\n<h3>Installation de Microsoft Visual C++ pour Node.js</h3>\r\n\r\n<p>Pour vous procurer le « VCBuild.exe » dont il est question : installez le logiciel Microsoft Visual Studio 2010 (ou 2012). Vous pouvez vous contenter uniquement de la branche C++ du logiciel (Microsoft Visual C++) et vous contenter même de sa version Express (gratuite et moins lourde).</p>\r\n\r\n<ul>\r\n\t<li>Rendez-vous donc sur le site de Microsoft et téléchargez <a href=\"http://www.microsoft.com/visualstudio/eng/downloads#d-2010-express\" title=\"Download | Microsoft Visual Studio 2012\">Microsoft Visual C++ 2010 Express</a> par exemple.</li>\r\n\t<li>Ouvrez l'installeur « vc_web.exe » et suivez les « Next ». Vous n'êtes pas obligé de sélectionner les produits optionnels. Cliquez enfin sur « Install » et les fichiers sont téléchargés pour installation et installés.</li>\r\n</ul>\r\n\r\n<p>En ré-essayant de nouveau la commande <samp>npm install jquery</samp> vous obtenez à présent l'erreur :</p>\r\n<p class=\"eye-catching warning\">error MSB8007: The Plateform for project 'contextify.vcxproj' is invalid.</p>\r\n\r\n<h4>Microsoft Windows SDK for Windows 7 and .NET Framework 4</h4>\r\n\r\n<p>Pour corriger l'erreur précédente :</p>\r\n\r\n<ul>\r\n\t<li>Rendez-vous à la page de téléchargement de <a href=\"http://www.microsoft.com/en-us/download/details.aspx?id=8279\" title=\"Microsoft Windows SDK for Windows 7 and .NET Framework 4\">Microsoft Windows SDK for Windows 7 and .NET Framework 4</a>, téléchargez « winsdk_web.exe » et installez-le.</li>\r\n</ul>\r\n\r\n<p>En cas de problème :</p>\r\n\r\n<figure>\r\n\t<figcaption>En cas de problème avec Microsoft Windows SDK for Windows 7 and .NET Framework 4</figcaption>\r\n\t<img class=\"openable\" src=\"./upload/image/node-jquery-sdk71-error.png\" alt=\"En cas de problème avec Microsoft Windows SDK for Windows 7 and .NET Framework 4\" width=\"658\" height=\"440\" style=\"width: 100%;height: auto;\">\r\n</figure>\r\n<ul>\r\n\t<li>Désinstallez les Microsoft Visual C++ 2010 Redistributable x86 et x64 déjà installées (<samp>Menu Windows</samp> puis <samp>Panneau de congiguration</samp> puis <samp>Désinstaller un programmes</samp>). Ré-essayez.</li>\r\n\t<li>Vous pouvez en plus <a href=\"http://www.microsoft.com/en-us/download/details.aspx?id=8442\" title=\"Microsoft Windows SDK for Windows 7 and .NET Framework 4 (ISO)\">télécharger directement l'ISO du SDK</a> (« GRMSDK_EN_DVD.iso » pour x86 et « GRMSDKX_EN_DVD.iso » pour x64), gravez ou dézippez l'ISO et exécutez « setup.exe ».</li>\r\n</ul>\r\n\r\n<p>En ré-essayant de nouveau la commande <samp>npm install jquery</samp> vous obtenez à présent le message d'avertissement (en jaune) :</p>\r\n<p class=\"eye-catching\">warning C4530: C++ exception handler used, but unwind semantics are not enabled.</p>\r\n\r\n<p>Si c'est le cas c'est que tout s'est bien passé.</p>\r\n\r\n<h4>Visual C++ 2010 SP1 Redistributable Package</h4>\r\n\r\n<p>Pour (re)mettre les versions Microsoft Visual C++ 2010 Redistributable :</p>\r\n\r\n<ul>\r\n\t<li>Rendez-vous à la page de téléchargement de <a href=\"http://www.microsoft.com/en-us/download/details.aspx?id=13523\" title=\"Microsoft Visual C++ 2010 SP1 Redistributable Package\">Microsoft Visual C++ 2010 SP1 Redistributable Package</a>, téléchargez-le (en x86 ou x64 selon votre OS) et installez-le.</li>\r\n</ul>\r\n\r\n<h4>Microsoft Visual C++ 2010 Service Pack 1 Compiler Update for the Windows SDK 7.1</h4>\r\n\r\n<p>Pour vous assurer de posséder tout ce qu'il faut pour ne rencontrer aucun problème à l'avenir :</p>\r\n\r\n<ul>\r\n\t<li>Rendez-vous à la page de téléchargement de <a href=\"http://www.microsoft.com/en-us/download/details.aspx?id=4422\" title=\"Microsoft Visual C++ 2010 Service Pack 1 Compiler Update for the Windows SDK 7.1\">Microsoft Visual C++ 2010 Service Pack 1 Compiler Update for the Windows SDK 7.1</a>, téléchargez « VC-Compiler-KB2519277.exe » et installez-le.</li>\r\n\t<li>Redémarrez votre ordinateur... (grrr)</li>\r\n</ul>\r\n\r\n<h2>Développer côté serveur avec jQuery</h2>\r\n\r\n<p>Maintenant que les pré-requis sont en place vous ne devriez plus avoir de problème pour compiler les modules Node.js en langage natif. À présent :</p>\r\n\r\n<ul>\r\n\t<li>si ce n'est pas déjà fait : installez le module <span class=\"highlighting\">jQuery</span> (node-jquery) avec la commande <samp>npm install jquery</samp> depuis le répertoire de votre projet (pour moi C:\\nodejs\\website\\),</li>\r\n\t<li>et installez <span class=\"highlighting\">jsdom</span> depuis le même répertoire avec la commande <samp>npm install jsdom</samp>.</li>\r\n</ul>\r\n\r\n<p>En reprenant le fichier <a href=\"./upload/script/website.js\" title=\"Télécharger le fichier résultat de cet article\">website.js</a> de <a href=\"./serveur-web-et-application-web-en-javascript/\" title=\"Serveur web et application web en JavaScript\">mon billet précédent</a> ; voici comment inclure jsdom et jQuery :</p>\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">var\r\n/*== Charger les modules Node.js ==*/\r\n\thttp = require(\"http\"),\r\n\texpress =  require(\"express\"),\r\n\thttpServer = express(),\r\n\t\r\n\tjsdom = require(\"jsdom\").jsdom, // Utilisation d'un créateur de DOM.\r\n\tjquery = require('jquery'), // Utilisation de jQuery côté serveur.\r\n\t\r\n/* ... */</code></pre>\r\n\r\n<h3>Créer le DOM côté serveur avec jsdom</h3>\r\n\r\n<p>Reprenons l'exemple de la page d'accueil du site qui se présentait ainsi dans mon <a href=\"./serveur-web-et-application-web-en-javascript/\" title=\"Serveur web et application web en JavaScript\">mon billet précédent</a> :</p>\r\n\r\n<pre class=\"prettyprint linenums lang-javascript\">\r\n/* ... */\r\n\r\n/* Accueil */\r\nhttpServer.get(appConfig.path, function (request, response) {\r\n\tvar\r\n\t\theader = {\r\n\t\t\t\"Content-Type\": \"text/html\",\r\n\t\t\t\"Charset\": \"utf-8\"\r\n\t\t},\r\n\t\ttemplate = '&lt;!DOCTYPE html&gt;' +\r\n\t\t\t'&lt;html lang=\"fr\"&gt;' +\r\n\t\t\t\t'&lt;head&gt;' +\r\n\t\t\t\t\t'&lt;meta charset=\"utf-8\" /&gt;' +\r\n\t\t\t\t\t'&lt;title&gt;Ma première page&lt;/title&gt;' +\r\n\t\t\t\t\t'&lt;base href=\"//' + appConfig.url + '\" /&gt;' +\r\n\t\t\t\t'&lt;/head&gt;' +\r\n\t\t\t\t'&lt;body&gt;' +\r\n\t\t\t\t\t\"&lt;p&gt;&lt;a href='./connexion/' title='Page de connexion'&gt;Page de connexion&lt;/a&gt;&lt;/p&gt;\"\r\n\t\t\t\t'&lt;/body&gt;' +\r\n\t\t\t'&lt;/html&gt;';\r\n\r\n\tresponse.writeHead(200, header);\r\n\tresponse.write(template);\r\n\tresponse.end();\r\n});\r\n\r\n/* ... */\r\n</pre>\r\n\r\n<p>Effectuons plusieurs changements pour nous amuser avec jQuery.</p>\r\n\r\n<ul>\r\n\t<li>Tout d'abord, ligne 8, nous avions créé une variable <samp>template</samp> représentant le contenu de la page qui allait être fourni au client (le navigateur du visiteur réclamant la page).</li>\r\n\t<li>Nous allons dans un premier temps transformer cette variable de type String en un véritable <samp>document</samp> DOM côté serveur avec <span class=\"highlighting\">jsdom</span>,</li>\r\n\t<li>et ensuite l'englober dans une <samp>window</samp> (fenêtre) émulée de 1024px par défaut.</li>\r\n\t<li>Pour finir nous allons restituer ce DOM sous forme de string pour l'envoyer au client comme précédemment à la ligne 21.</li>\r\n</ul>\r\n\r\n<pre class=\"prettyprint linenums lang-javascript\">\r\n/* ... */\r\n\r\n/* Accueil */\r\nhttpServer.get(appConfig.path, function (request, response) {\r\n\tvar\r\n\t\theader = {\r\n\t\t\t\"Content-Type\": \"text/html\",\r\n\t\t\t\"Charset\": \"utf-8\"\r\n\t\t},\r\n\t\t\r\n\t\t// L'ancienne variable \"template\" de type String est remplacée\r\n\t\t// par la variable \"document\" de type Object représentant le DOM de la page.\r\n\t\tdocument = jsdom(\"&lt;!DOCTYPE html&gt;\" +\r\n\t\t\t\"&lt;html lang='fr'&gt;\" +\r\n\t\t\t\t\"&lt;head&gt;\" +\r\n\t\t\t\t\t\"&lt;meta charset='utf-8' /&gt;\" +\r\n\t\t\t\t\t\"&lt;title&gt;Ma première page&lt;/title&gt;\" +\r\n\t\t\t\t\t\"&lt;base href='//\" + appConfig.url + \"' /&gt;\" +\r\n\t\t\t\t\"&lt;/head&gt;\" +\r\n\t\t\t\t\"&lt;body&gt;\" +\r\n\t\t\t\t\t\"&lt;p&gt;&lt;a href='./connexion/' title='Page de connexion'&gt;Page de connexion&lt;/a&gt;&lt;/p&gt;\"\r\n\t\t\t\t\"&lt;/body&gt;\" +\r\n\t\t\t\"&lt;/html&gt;\"),\r\n\t\t\t\r\n\t\t// Un objet \"window\" est créé. \r\n\t\t// C'est l'émulation d'une fenêtre côté serveur qui a pour taille 1024px de large.\t\t\r\n\t\twindow = document.createWindow();\r\n\r\n\t\t// console.log(typeof document); // renvoi \"object\".\r\n\t\t// console.log(window.innerWidth); // renvoi \"1024\"\r\n\t\t\r\n\tresponse.writeHead(200, header);\r\n\t\r\n\t// On change la variable template par le rendu sous forme de string document (ou window.document).\r\n\tresponse.write(window.document.innerHTML);\r\n\tresponse.end();\r\n});\r\n\r\n/* ... */\r\n</pre>\r\n\r\n<h3>Manipuler le DOM côté serveur avec jQuery</h3>\r\n\r\n<p>Nous allons dans un exemple tout simple ajouter une balise <samp>h1</samp> à notre DOM après la création de celui-ci avec jQuery. Nous allons même effectuer un test pour démontrer comment le DOM peut être variable en fonction de conditions précises.</p>\r\n\r\n<pre class=\"prettyprint linenums lang-javascript\">\r\n/* ... */\r\n\r\n/* Accueil */\r\nhttpServer.get(appConfig.path, function (request, response) {\r\n\tvar\r\n\t\theader = {\r\n\t\t\t\"Content-Type\": \"text/html\",\r\n\t\t\t\"Charset\": \"utf-8\"\r\n\t\t},\r\n\r\n\t\tdocument = jsdom(\"&lt;!DOCTYPE html&gt;\" +\r\n\t\t\t\"&lt;html lang='fr'&gt;\" +\r\n\t\t\t\t\"&lt;head&gt;\" +\r\n\t\t\t\t\t\"&lt;meta charset='utf-8' /&gt;\" +\r\n\t\t\t\t\t\"&lt;title&gt;Ma première page&lt;/title&gt;\" +\r\n\t\t\t\t\t\"&lt;base href='//\" + appConfig.url + \"' /&gt;\" +\r\n\t\t\t\t\"&lt;/head&gt;\" +\r\n\t\t\t\t\"&lt;body&gt;\" +\r\n\t\t\t\t\t\"&lt;p&gt;&lt;a href='./connexion/' title='Page de connexion'&gt;Page de connexion&lt;/a&gt;&lt;/p&gt;\"\r\n\t\t\t\t\"&lt;/body&gt;\" +\r\n\t\t\t\"&lt;/html&gt;\"),\t\r\n\t\twindow = document.createWindow(),\r\n\t\t\r\n\t\t// Permettre à jQuery de manipuler le DOM...\r\n\t\tjQuery = jquery.create(window), // ...et au développeur de le manipuler via jQuery(\"selecteur\")...\r\n\t\t$ = jQuery, // ...ou via $(\"selecteur\").\r\n\t\t\r\n\t// On crée un nœud \"h1\" contenant le texte \"Ceci est le titre d'origine !\".\r\n\th1Title = $(\"&lt;h1&gt;\").text(\"Ceci est le titre d'origine !\");\r\n\t// On l'ajoute au DOM serveur.\r\n\t$(\"body\").prepend(h1Title);\r\n\t\r\n\t// Si la condition est réalisée...\r\n\tif (1 == 1) { // ...ce qui est le cas ; renvoi \"true\"...\r\n\t\th1Title = $(\"h1\").text(\"Ceci est le titre changé !\"); // ... alors on cible le nœud h1 et on modifie le texte avec \"Ceci est le titre changé !\".\r\n\t}\r\n\t\t\r\n\tresponse.writeHead(200, header);\r\n\tresponse.write(window.document.innerHTML);\r\n\tresponse.end();\r\n});\r\n\r\n/* ... */\r\n</pre>\r\n\r\n<figure>\r\n\t<figcaption>Résultat de notre page d'accueil côté client</figcaption>\r\n\t<img class=\"openable\" src=\"./upload/image/node-jquery-first-example.png\" alt=\"Résultat de notre page d'accueil côté client\" width=\"658\" height=\"100\" style=\"width: 100%;height: auto;\">\r\n</figure>\r\n\r\n<h3>Exemple de rendu conditionnel après un POST avec jQuery</h3>\r\n\r\n<p>Tournons nous à présent vers la seconde page de mon fichier <a href=\"./upload/script/website.js\" title=\"Télécharger le fichier résultat de cet article\">website.js</a> précédent : la page de connexion. Ajoutons lui quelques styles et prévoyons son rendu en cas d'erreur de connexion ou de réussite de l'utilisateur.</p>\r\n\r\n<pre class=\"prettyprint linenums lang-javascript\">\r\n/* ... */\r\n\r\n/* Connexion */\r\nfunction connectionRender(request, response) {\r\n \tvar\r\n\t\theader = {\r\n\t\t\t\"Content-Type\": \"text/html\",\r\n\t\t\t\"Charset\": \"utf-8\"\r\n\t\t},\r\n\t\t// LE CONTENU COMPLET DE \"document\" SE TROUVE PLUS BAS.\r\n\t\tdocument = jsdom(\"&lt;!DOCTYPE html &gt;&lt;html&gt;...\"),\r\n\t\twindow = document.createWindow(),\r\n\t\tjQuery = jquery.create(window),\r\n\t\t$ = jQuery;\r\n\t\t\r\n\t\t// Par défaut, on retire l'affichage après connexion puisqu'on vient d'arriver.\r\n\t\t// On modifiera cette partie de code plus loin.\r\n\t\t$(\"#logged\").remove();\r\n\r\n\tresponse.writeHead(200, header);\r\n\tresponse.write(window.document.innerHTML);\r\n\tresponse.end();\t\r\n}\r\nhttpServer.get(appConfig.path + \"connexion\", function (request, response) {\r\n    connectionRender(request, response);\r\n}).post(appConfig.path + \"connexion\", function (request, response) {\r\n    connectionRender(request, response);\r\n});\r\n\r\n/* ... */\r\n</pre>\r\n\r\n<p class=\"highlighting\">Contenu complet de <samp>document = jsdom(\"&lt;!DOCTYPE html&gt;&lt;html&gt;...\")</samp> :</p>\r\n\r\n<pre class=\"prettyprint linenums lang-html\">\r\n&lt;!DOCTYPE html&gt; \r\n\t&lt;html&gt; \r\n\t\t&lt;head&gt; \r\n\t\t\t&lt;meta charset=\"utf-8\" /&gt; \r\n\t\t\t&lt;title&gt;Page de connexion&lt;/title&gt; \r\n\t\t\t\"&lt;base href=//\"  appConfig.url  \" /&gt;\" \r\n\r\n\t\t\t<!-- Prévoyons de cacher les messages d'erreur s'il n'y a pas d'erreur. -->\r\n\t\t\t&lt;style text=\"text/css\"&gt; \r\n\t\t\t\t.error { \r\n\t\t\t\t\tdisplay: none;\r\n\t\t\t\t} \r\n\t\t\t\t.error.show {\r\n\t\t\t\t\tdisplay: block;\r\n\t\t\t\t}\r\n\t\t\t\t.error span { \r\n\t\t\t\t\tdisplay: none;\r\n\t\t\t\t\tcolor: #ff0000;\r\n\t\t\t\t} \r\n\t\t\t\t.error span.show {\r\n\t\t\t\t\tdisplay: block;\r\n\t\t\t\t}\r\n\t\t\t&lt;/style&gt; \r\n\r\n\t\t&lt;/head&gt; \r\n\t\t&lt;body&gt; \r\n\t\t\t&lt;form id=\"login\" action=\"./connexion/\" method=\"POST\"&gt; \r\n\t\t\t\t&lt;div class=\"field-login-email\"&gt; \r\n\t\t\t\t\t&lt;label for=\"login-email\" placeholser=\"Email\"&gt;Email : &lt;/label&gt;\r\n\t\t\t\t\t<!-- On ajoute un attribut name pour récupération côté serveur. -->\r\n\t\t\t\t\t&lt;input id=\"login-email\" type=\"text\" name=\"login[email]\" /&gt; \r\n\r\n\t\t\t\t\t<!-- Créons nous des messages d'erreur pour l'email en cas d'erreur. -->\r\n\t\t\t\t\t<!-- Par défaut ils ne sont pas visibles. -->\r\n\t\t\t\t\t&lt;div class=\"error\"&gt; \r\n\t\t\t\t\t\t&lt;span class=\"empty\"&gt;Le champ email est vide.&lt;/span&gt; \r\n\t\t\t\t\t\t&lt;span class=\"invalide\"&gt;Le champ email est invalide.&lt;/span&gt; \r\n\t\t\t\t\t&lt;/div&gt; \r\n\r\n\t\t\t\t&lt;/div&gt; \r\n\r\n\t\t\t\t&lt;div class=\"field-login-password\"&gt; \r\n\t\t\t\t\t&lt;label for=\"login-password\" placeholser=\"Mot de passe\"&gt;Mot de passe : &lt;/label&gt;\r\n\t\t\t\t\t<!-- On ajoute un attribut name pour récupération côté serveur. -->\r\n\t\t\t\t\t&lt;input id=\"login-password\" type=\"password\" name=\"login[password]\" /&gt; \r\n\r\n\t\t\t\t\t<!-- Créons nous des messages d'erreur pour le mot de passe en cas d'erreur. -->\r\n\t\t\t\t\t<!-- Par défaut ils ne sont pas visibles. -->\r\n\t\t\t\t\t&lt;div class=\"error\"&gt; \r\n\t\t\t\t\t\t&lt;span class=\"empty\"&gt;Le champ mot de passe est vide.&lt;/span&gt; \r\n\t\t\t\t\t\t&lt;span class=\"invalide\"&gt;Le couple Email/Mot de passe est incorrecte !&lt;/span&gt; \r\n\t\t\t\t\t&lt;/div&gt; \r\n\r\n\t\t\t\t&lt;/div&gt; \r\n\r\n\t\t\t\t&lt;label&gt;&lt;input type=\"submit\" value=\"Ok\" /&gt;&lt;/label&gt; \r\n\t\t\t&lt;/form&gt; \r\n\r\n\t\t\t<!-- Prévoyons un affichage en cas de connexion réussie. -->\r\n\t\t\t&lt;div id=\"logged\"&gt;Vous êtes passé !&lt;/div&gt; \r\n\t\t&lt;/body&gt; \r\n\t&lt;/html&gt;\r\n</pre>\r\n\r\n<p>Ce qui donne comme rendu :</p>\r\n\r\n<figure>\r\n\t<figcaption>Résultat de notre page identique, car ajout masqué en CSS ou retiré côté serveur</figcaption>\r\n\t<img class=\"openable\" src=\"./upload/image/node-jquery-second-example.png\" alt=\"Résultat de notre page identique, car ajout masqué en CSS ou retiré côté serveur\" width=\"658\" height=\"100\" style=\"width: 100%;height: auto;\">\r\n</figure>\r\n\r\n<h4>Gérer les erreurs</h4>\r\n\r\n<p>Quand la page de connexion est demandée suite au clique sur le bouton « Ok » c'est une requête POST qui est envoyée et le résultat est traité par le code ligne 27 de notre exemple JavaScript plus haut. À cette ligne, la fonction <samp>connectionRender</samp> est appelée tout comme en GET à la différence prêt que des variables POST existent dans le cas de figure POST (ce qui n'est pas le cas en GET).</p>\r\n\r\n<p class=\"highlighting\">Nous allons donc tester l'existence et le contenu des variables POST du formulaire pour décider de la réponse adaptée à notre visiteur.</p>\r\n\r\n<p>Tout d'abord, permettons à Express de récupérer les valeurs des champs de formulaire via l'attribut <samp>name</samp>. Pour cela il faut lui « demander » d'utiliser l'intergiciel <span class=\"highlighting\">bodyParser</span>.</p>\r\n\r\n<pre class=\"prettyprint linenums lang-javascript\">\r\n/* ... */\r\n\r\nhttpServer\r\n/* == Définir un environnement d'exécution : SET NODE_ENV=dev ==*/\r\n\t.configure(function () {\r\n\t\t/* Commun à tous les environnements */\r\n\t\t\r\n\t\t// Ajout du middleware \"bodyParser\" pour parser les attributs name\r\n\t\t// et les récupérer via request.body.\r\n\t\thttpServer.use(express.bodyParser());\r\n\t})\r\n/* ... */\r\n</pre>\r\n\r\n<p>Ensuite mettons en place le mécanisme de réception uniquement en POST.</p>\r\n\r\n<pre class=\"prettyprint linenums lang-javascript\">\r\n/* ... */\r\n\r\n/* Connexion */\r\nfunction connectionRender(request, response) {\r\n \tvar\r\n\t\theader = {\r\n\t\t\t\"Content-Type\": \"text/html\",\r\n\t\t\t\"Charset\": \"utf-8\"\r\n\t\t},\r\n\t\tdocument = jsdom(\"&lt;!DOCTYPE html &gt;&lt;html&gt;...\"),\r\n\t\twindow = document.createWindow(),\r\n\t\tjQuery = jquery.create(window),\r\n\t\t$ = jQuery;\r\n\r\n\t\t// Si on passe par ici après une réclamation en POST, on entre.\r\n\t\tif (request.method == 'POST') {\r\n\t\t\tvar\r\n\t\t\t\t// Par défaut, on estime que la validation du formulaire est bonne.\r\n\t\t\t\tisValid = true,\r\n\t\t\t\t// Normalement, cet info se récupère dans une base de donnée. C'est un des utilisateurs valide.\r\n\t\t\t\tpassEmail = \"tout@est.ok\",\r\n\t\t\t\t// Et ça c'est le mot de passe associé à l'utilisateur.\r\n\t\t\t\tpassPassword = \"azerty\",\r\n\t\t\t\t// Une regex pour vérifier la validité des emails.\r\n\t\t\t\tcheckEmail = /^[-._a-z0-9]+@[-._a-z0-9]+\\.[.a-z]{2,4}$/i;\r\n\r\n\t\t\t// Quoi qu'il arrive on réinjecte la valeur email (mais pas mot de passe).\r\n\t\t\t$(\"#login-email\").val(request.body.login.email.trim());\r\n\t\r\n\t\t\t// Le champ email est-il remplit ?\r\n\t\t\tif (request.body.login.email.trim() == \"\") {\r\n\t\t\t\t// S'il est vide, on le signale.\r\n\t\t\t\t$(\".field-login-email .error\").addClass(\"show\");\r\n\t\t\t\t$(\".field-login-email .error .empty\").addClass(\"show\");\r\n\t\t\t\t// Et on ne valide pas le formulaire.\r\n\t\t\t\tisValid = false;\r\n\r\n\t\t\t// Le champ email est-il valide ?\r\n\t\t\t} else if (!checkEmail.test(request.body.login.email.trim())) {\r\n\t\t\t\t// S'il est anormal, on le signale.\r\n\t\t\t\t$(\".field-login-email .error\").addClass(\"show\");\r\n\t\t\t\t$(\".field-login-email .error .invalide\").addClass(\"show\");\r\n\r\n\t\t\t\t// Et on ne valide pas le formulaire.\r\n\t\t\t\tisValid = false;\r\n\t\t\t}\r\n\r\n\t\t\t// Le champ mot de passe est-il remplit ?\r\n\t\t\tif (request.body.login.password.trim() == \"\") {\r\n\t\t\t\t// S'il est vide, on le signale.\r\n\t\t\t\t$(\".field-login-password .error\").addClass(\"show\");\r\n\t\t\t\t$(\".field-login-password .error .empty\").addClass(\"show\");\r\n\t\t\t\t// Et on ne valide pas le formulaire.\r\n\t\t\t\tisValid = false;\r\n\t\t\t}\r\n\r\n\t\t\tif (isValid) {\r\n\t\t\t\t// Y a-t-il une concordance email / mot de passe.\r\n\t\t\t\tif (\r\n\t\t\t\t\trequest.body.login.email.trim() == passEmail &&\r\n\t\t\t\t\trequest.body.login.password.trim() == passPassword\r\n\t\t\t\t) {\r\n\r\n\t\t\t\t\t/////////////////\r\n\t\t\t\t\t// C'est ici qu'on va mettre en place un mécanisme de remplissage de session.\r\n\t\t\t\t\t/////////////////\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// S'il y a une erreur, on le signale.\r\n\t\t\t\t\t$(\".field-login-password .error\").addClass(\"show\");\r\n\t\t\t\t\t$(\".field-login-password .error .invalide\").addClass(\"show\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Nous modifierons cette partie dans la partie suivante.\r\n\t\t$(\"#logged\").remove();\t\t\r\n\r\n\tresponse.writeHead(200, header);\r\n\tresponse.write(window.document.innerHTML);\r\n\tresponse.end();\t\r\n}\r\nhttpServer.get(appConfig.path + \"connexion\", function (request, response) {\r\n    connectionRender(request, response);\r\n}).post(appConfig.path + \"connexion\", function (request, response) {\r\n    connectionRender(request, response);\r\n});\r\n\r\n/* ... */\r\n</pre>\r\n\r\n<p>Tout manquement au formulaire sera à présent signalé.</p>\r\n\r\n<figure>\r\n\t<figcaption>En cas d'erreur du formulaire on affiche les messages cachés</figcaption>\r\n\t<img class=\"openable\" src=\"./upload/image/node-jquery-third-example.png\" alt=\"En cas d'erreur du formulaire on affiche les messages cachés\" width=\"658\" height=\"130\" style=\"width: 100%;height: auto;\">\r\n</figure>\r\n\r\n<h4>Gérer la réussite</h4>\r\n\r\n<p>Permettons également de conserver dans une variable de session des informations qui suivront l'utilisateur de page en page (un équivalent de $_SESSION en PHP par exemple) avec les intergiciels <span class=\"highlighting\">cookieParser</span> et <span class=\"highlighting\">session</span> de Express. Pour cela il va falloir allouer de la mémoire au cookie pour l'entregistrement avec <samp>express.session.MemoryStore</samp>.</p>\r\n\r\n<p>On récupère l'objet MemoryStore</p>\r\n\r\n<pre class=\"prettyprint linenums lang-javascript\">\r\n/* ... */\r\n\r\n\thttp = require(\"http\"),\r\n\texpress =  require(\"express\"),\r\n\thttpServer = express(),\r\n\r\n\t// Ajout de l'objet MemoryStore pour donner du volume au cookie de session.\r\n\tMemoryStore = express.session.MemoryStore,\r\n\r\n\tjsdom = require(\"jsdom\").jsdom, \r\n\tjquery = require('jquery'),\r\n\t\r\n/* ... */\r\n</pre>\r\n\r\n<p>On permet les sessions avec <span class=\"highlighting\">cookieParser</span> et <span class=\"highlighting\">session</span></p>\r\n\r\n<pre class=\"prettyprint linenums lang-javascript\">\r\n/* ... */\r\n\r\nhttpServer\r\n/* == Définir un environnement d'exécution : SET NODE_ENV=dev ==*/\r\n\t.configure(function () {\r\n\t\t/* Commun à tous les environnements */\r\n\t\thttpServer.use(express.bodyParser());\r\n\t\t\r\n\t\t/* Permettre de manipuler les sessions */\r\n\t    httpServer.use(express.cookieParser());\r\n\t\t/* Paramétrage des sessions */\r\n\t    httpServer.use(express.session({\r\n        \tstore: new MemoryStore(), // Allocation de place.\r\n        \tsecret: 'secret', // Secret connu du serveur rendant le cookie illisible pour le client.\r\n        \tkey: 'website.sid' // Nom du cookie.\r\n\t    }));\r\n\t})\r\n/* ... */\r\n</pre>\r\n\r\n<p>Ensuite terminons de mettre en place le mécanisme de réception.</p>\r\n\r\n<pre class=\"prettyprint linenums lang-javascript\">\r\n/* ... */\r\n\r\n\t\t\tif (isValid) {\r\n\t\t\t\tif (\r\n\t\t\t\t\trequest.body.login.email.trim() == passEmail &&\r\n\t\t\t\t\trequest.body.login.password.trim() == passPassword\r\n\t\t\t\t) {\r\n\t\t\t\t\r\n\t\t\t\t\t// En passant ici on initialise l'état d'utilisateur identifié.\r\n\t\t\t\t\trequest.session.user = request.session.user || {}; // Création ou conservation de l'objet arbitrairement nommé \"user\" s'il n'existe pas.\r\n\t\t\t\t\t\r\n\t\t\t\t\t// Passage à true de la propriété arbitrairement nommé \"isLogged\".\r\n\t\t\t\t\trequest.session.user.isLogged = true;\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$(\".field-login-password .error\").addClass(\"show\");\r\n\t\t\t\t\t$(\".field-login-password .error .invalide\").addClass(\"show\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Changement de la partie du rendu affiché en fonction d'un état connecté ou non connecté.\r\n\t\t// S'il y a un objet user avec la propriété isLogged à true.\r\n\t\tif (request.session.user && request.session.user.isLogged) {\r\n\t\t\t// On retire la partie hors-connexion.\r\n\t\t\t$(\"#login\").remove();\r\n\t\t} else {\r\n\t\t\t// On retire la partie connexion.\r\n\t\t\t$(\"#logged\").remove();\r\n\t\t}\t\r\n\r\n\tresponse.writeHead(200, header);\r\n\tresponse.write(window.document.innerHTML);\r\n\tresponse.end();\r\n\t\r\n/* ... */\r\n</pre>\r\n\r\n<p>À présent en tapant respectivement dans les champs « Email » et « Mot de passe » : \"tout@est.ok\" et \"azerty\" la page s'affichera en \"mode connecté\", même après rechargement de la page. Seul la fermeture du navigateur détruira le lien entre le client et la session car le cookie est par défaut paramétré pour expirer à la fin de la sesion. On affichera donc alors la partie \"non connecté\".</p>\r\n\r\n<figure>\r\n\t<figcaption>Si tout est okay, on est loggué.</figcaption>\r\n\t<img class=\"openable\" src=\"./upload/image/node-jquery-fourth-example.png\" alt=\"Si tout est okay, on est loggué.\" width=\"658\" height=\"100\" style=\"width: 100%;height: auto;\">\r\n</figure>\r\n\r\n<h2>Réflexion sur l'utilisation de jQuery côté serveur</h2>\r\n\r\n<h3>Séparation de la vue et du contrôleur</h3>\r\n\r\n<p>C'est probablement le plus gros avantage d'utiliser jQuery côté serveur. Il permet ainsi d'avoir un template à plat dont on n'a pas à se soucier et un intégrateur ne connaissant rien en programmation (ça existe ?) pourrait créer des designs sans problèmes.</p>\r\n\r\n<h3>Ne pas faire du Responsive Web Design côté serveur</h3>\r\n\r\n<p>Même si l'on simule une fenêtre côté serveur, il ne sert à rien de gérer de la responsivité en essayant d'obtenir la taille de la fenêtre puisque celle qui nous intéresse est celle du client et non celle du serveur émulée. D'ailleurs les fonctions se rapportant à l'affichage ne fonctionnent pas toutes, car côté serveur, le navigateur n'est pas là pour vous répondre (ainsi <samp>show()</samp> et <samp>hide()</samp> ne marcheront pas par exemple).</p>\r\n\r\n<h3>Performance ?</h3>\r\n\r\n<p>La question. Il est sûr que passer par jQuery est plus lent à l'exécution que de simplement scinder le template en dix parties et de le remplir de conditions. Cependant, à la maintenance c'est un gain de temps complètement multiplié ! Entre payer des ressources qui développeront, débogueront et maintiendront en plus de temps et payer un serveur plus puissant : voyez où sont vos économies ! De plus, nous verrons plus loin que nous pourrons limiter jQuery à des cas précis et se servir d'un moteur de template (ce qui séparera « presque » la vue du contrôleur mais qui sera bien plus lisible que la méthode « v'l'a que je te fou tout au même endroit »).</p>\r\n\r\n<p class=\"eye-catching\">Je n'ai pas assez de retour d'expérience sur la rapidité en production avec énormément d'utilisateur simultané. Si vous en avez, n'hésitez pas à la partager.</p>\r\n\r\n<h2>Source</h2>\r\n\r\n<p>Notre fichier commence à être bien remplis. Dans un prochain billet Node.js nous allons voir comment scinder notre code qui commence à être bien long dans plusieurs fichiers.</p>\r\n\r\n<p>En attendant, vous pouvez <a href=\"./upload/script/website-jquery.zip\" title=\"Télécharger le fichier résultat de cet article\">télécharger le fichier résultat de cet article ici</a>.</p>", "dates" : { "published" : "2013-05-11 10:43:00", "updated" : [ "2013-05-11 10:43:00" ] }, "title" : "<span>Utiliser</span> <span>jQuery</span> avec <span>Node.js</span> sous <span>Windows</span>", "urn" : "utiliser-jquery-avec-nodejs-sous-windows" }
{ "_id" : { "$oid" : "530f5f63620731fe86cb71ae" }, "cache" : { "comment" : { "number" : 0 } }, "categories" : [ { "$oid" : "5310456355dfd5f7698d48b8" }, { "$oid" : "5310456355dfd5f7698d48cd" }, { "$oid" : "5310456355dfd5f7698d48cc" }, { "$oid" : "5310456355dfd5f7698d48ba" }, { "$oid" : "530ef6a6789c1a55e4fde0af" }, { "$oid" : "5310456355dfd5f7698d48bb" } ], "content" : "Mais le JavaScript n'est pas typé ? Mais si, il y en a 13 ! Ah non, il y en 7... bah il me semble qu'il y a `Object`, `Function`, `Array`, `Math`, `String`, `Number`, `Boolean`. Et tu fais quoi de `RegExp` ? Attends, `Function` c'est pas un type, c'est un sous type mais `Null` c'est un type. Ho là là...\n\nSi vous faites du jQuery à vos heures ou même pas mal de JavaScript sur vos sites web, il est temps d'apprendre tout ce qu'il y a à savoir sur le typage implicite de JavaScript, car oui : contrairement à ce que certain vous ont dit, JavaScript manipule des éléments typés. Les fonctions (et les instances) `Object`, `Function`, `Array`, `Date`, `String`, `Number`, `Boolean`, `RegExp`, `Error` ou encore les objets globaux, `Date` ou `JSON` : tous sont d'un seul et même type, le type `Object`. Pourtant `String`, `Number` et `Boolean` sont eux-mêmes un type à par entière en plus des deux petits spéciaux les type `Null` et `Undefined`.\n\n\nSi vous deviez retenir quelques trucs rapidement à propos du JavaScript et des types ça serait que :</p>\n\n- Le JavaScript n'a que 6 types : **`Object`, `Number`, `String`, `Boolean`, `Null` et `Undefined`**.\n- À part le type `Object` : les **5 autres types** sont dit **des types primitifs**.\n- Les types **`Null` et `Undefined`** sont **des types spéciaux**.\n- La **`Function`** n'est qu'un type `Object` **qui peut être exécuté et instancié** avec « new ».\n- **`Array`, `Date` et `RegExp`** sont des **types Object instanciables** (Function) tandis que **`Math`** est simplement un type Object.</li>\n- Bien que **`Number`, `String` et `Boolean`** soient des types primitifs, il existe un **équivalent de type Object** instanciable (Function) **pour chacun d'eux** (à ne pas confondre).\n\n<figure>\n\t<img class=\"openable\" src=\"http://blog.haeresis.fr/upload/image/6-types-javascript-objet-primitif.png\" alt=\"Les 6 types en JavaScript\" width=\"658\" height=\"500\" style=\"width: 100%;height: auto;\">\n\t<figcaption>Les 6 types en JavaScript</figcaption>\n</figure>\n\nJe vais dans un premier temps vous proposer la traduction d'un article de Dmitry Baranovskiy —développeur JavaScript expérimenté— qui explique très bien les types en JavaScript. Je lèverai le doute sur le fameux sixième type (Null ou Function). Et je vous fournirai des lignes de code test pour mettre en évidence ce qui a été expliqué.\n\nDans cet article les propos entre [ ... ] sont les miens ainsi que ceux qui ne sont pas entre « ... ».\n\nPour finir, bien que l'auteur vous encourage à lire les [spécifications officielles](http://www.ecma-international.org/publications/standards/Ecma-262.htm) (pour les initiés), je vous encourage pour ma part à lire [JavaScript Eloquent](http://eloquentjavascript.net/) ([disponible en français ici](http://fr.eloquentjavascript.net/)).\n\n\n\n\n\n## Témoignage de Dmitry Baranovskiy, développeur JavaScript ##\n\n[Le billet original en anglais est sur le blogs d'Adobe (editeur de Flash)](http://blogs.adobe.com/webplatform/2012/08/27/javascript-types/)\n\n« J'aime le JavaScript. C'est un langage alliant puissance et flexibilité, mais à condition de bien savoir l'utiliser. Une fois que vous maîtrisez le langage JavaScript, vous pouvez construire pratiquement n'importe quoi, et cela vraiment rapidement et de manière interactive. »\n\n« Si vous pensez que le JavaScript est simple ou primitif, alors vous êtes tombé dans un piège. Vous constaterez qu'il y a pas mal de monde dans ce piège. Les soi-disant développeurs JavaScript du dimanche vous diront qu'un autre langage “X” est supérieur. Ils peuvent même vous dire que vous seriez mieux avec un système qui traduit la langue “X” en JavaScript. Pour sortir du piège et maîtriser JavaScript cela exige un effort et du dévouement. Je le sais parce que, en 1997, j'en étais là. »\n\n« Depuis, j'ai appris en long, en large et en travers le JavaScript moi-même en étudiant les [spécifications officielles](http://www.ecma-international.org/publications/standards/Ecma-262.htm). Vous pouvez apprendre l'intégralité du langage de cette manière. En tout cas, si votre intitulé de poste comprend les mots “développeur JavaScript”, vous devriez. »</p>\n\n\n\n\n### Trouverez vous la réponse ? ###\n\n« Dans ce billet je vais tenter de présenter un petit extrait de programme JavaScript et vous demander de prédire ce qu'il va renvoyer. Si vous êtes un développeur JavaScript, cela sera un jeu d'enfant pour vous. Si vous êtes toujours en train d'apprendre le langage, vous allez avoir quelques soucis et j'espère que vous lirez les explications suivantes. »\n\n« Le code JavaScript suivant va afficher une fenêtre d'alerte. Que va contenir cette fenêtre ? »\n\n```js\nvar five = 5;\nfive.three = 3;\nalert(five + five.three);\n```\n\n« Allez à la fin de cet article pour trouver la réponse. » _[En fait allez plutôt à la fin de cette partie](./les-types-en-javascript-pour-tout-savoir/#demo)._ « Et ci-dessous, je vais laisser une explication pour vous démontrer comment JavaScript arrive à ce résultat. »\n\n\n\n\n### Les six types qui existent en JavaScript ###\n\n« Il n'y a que 6 [types en JavaScript](http://ecma-international.org/ecma-262/5.1/#sec-8) : \n[Object](http://ecma-international.org/ecma-262/5.1/#sec-8.6), \n[Number](http://ecma-international.org/ecma-262/5.1/#sec-8.5), \n[String](http://ecma-international.org/ecma-262/5.1/#sec-8.4), \n[Boolean](http://ecma-international.org/ecma-262/5.1/#sec-8.3), \n[Null](http://ecma-international.org/ecma-262/5.1/#sec-8.2), et \n[Undefined](http://ecma-international.org/ecma-262/5.1/#sec-8.1). »</p>\n\n- « **Object** inclue les tableaux [_Array_], les fonctions [_Function_] et des objets ordinaires [_Object_, _Date_, _RegExp_, _Math_...]. »\n- « **Number** peut être un entier ou un nombre à virgule ou même les valeurs spécifiques _NaN_ et _Infinity_. »\n- « **String** inclue la chaîne vide _\"\"_. » _Ainsi que toute chaîne de caractère._\n- « **Booleans** n'a que deux uniques valeurs : _true_ et _false_. »\n\n« Les deux derniers types primitifs sont un peu déroutants : »\n\n- « La seule valeur du type **Null** est _null_. »\n- « La seule valeur du type **Undefined** est _undefined_. »\n\n_Note : il est important de garder à l'esprit que les types primitifs Number _(0, -10, NaN...)_, String _(\"\", \"coucou\"...)_ et Bool _(true, false)_ ont chacun leur équivalent en Object. Je parle d'équivalence car `(new String(\"\"))` n'est pas la même chose que `\"\"`, le premier est de type `Object` alors que le second de type `String`. Cela s'éclairera peut-être plus loin. Pour finir il est bon de rappeler que les valeurs _0, -10, NaN, \"\", \"coucou\", function() { return; }, { bla: \"\", blu,\"\" }_... sont appelés des expressions ou (opérandes) et _+, -, /, ==, !==_... sont appelés des opérateurs.\n\n« Tous les types à l'exception de Object sont également appelés “primitif”. Le type d'une variable JavaScript n'est pas déclaré explicitement, il est défini par le moteur d'exécution JavaScript. Dans notre exemple, le type de la variable “five” est Number parce que nous lui avons assigné un nombre entier. »\n\n« Exactement comme d'autres langages de programmation, JavaScript va implicitement convertir le type d'une valeur en fonction de l'opérateur qui est appliquée à la valeur. Et à la différence d'autres langages de programmation, JavaScript [insiste lourdement là dessus](http://ecma-international.org/ecma-262/5.1/#sec-9). Par exemple le résultat de `\"5\"` - `\"3\"` est le nombre `2` parce que l'opérateur moins demande la conversion des expressions [\"5\" et \"3\"] en Number. Si un opérateur n'arrive pas à convertir [(trouver une équivalence en Number)] l'un des membres, c'est `NaN` ([Not a Number](http://ecma-international.org/ecma-262/5.1/#sec-4.3.23)) qui est utilisé à la place. Par exemple `\"5\"` - `\"Fred\"` est implicitement converti en `5` - `Nan` ce qui donne `NaN`. »\n\n« L'ensemble complet des règles pour les conversions de types implicites n'est pas compliqué tant que vous savez quel type chaque opérateur exige pour les expressions qu'ils manipulent. »\n\n\n\n\n### Connaître et comprendre les règles de conversion implicite ###\n\n« Les Object et String suivent la règle suivante : [toute valeur doit être convertie en type primitif](http://ecma-international.org/ecma-262/5.1/#sec-9.1) ». »\n\n- Si le type d'une expression doit être [converti en] Number [par l'opérateur], cela signifie que le moteur JavaScript va appeler la méthode `valueOf()` [si l'expression n'est pas de type primitif, donc un type Object] et si le résultat [de la conversion] n'est pas un type primitif, il est converti en type String par la méthode `toString()`. »\n- Si le type de l'opérande doit être String, cela signifie que le moteur JavaScript commence d'abord par appeler la méthode `toString()` et si le résultat n'est pas un type primitif, il est converti avec la méthode `valueOf()`.\n\n« Dans chacun des cas, si le résultat obtenu au final n'est pas un type primitif. une exception est levée. »\n\nVoyons plutôt les conversions :\n\nChaque opérateur demandera la conversion de l'expression en un type primitif bien précis pour fonctionner (\"if (condition)\" demandera la conversion en un type Boolean de \"condition\", \"nombre * 3\" demandera la conversion en un type Number de \"nombre\", etc.).\n\n_Note : L'opérateur `+` est « spécial ». La majorité des opérateurs imposent un type primitif à leur expression pour effectuer leur opération mais pas `+` qui lui, peut imposer soit des types String (concaténation), soit des types Number (addition). La condition est que si au moins une des expressions est de type String initialement, l'opérateur va demander des types String, s'il n'y a pas un seul type String initialement, l'opérateur va réclamer des types Number. Ce n'est pas le seul opérateur « spécial », par exemple l'opérateur `==` est très complexe dans sa réclamation de conversion d'expression.\n\n\n\n#### L'expression doit être transformée en type Number ####\n\n« Si le type de l'expression doit être `Number`, et que son type actuel est : »\n\n- un **Number** : aucune conversion.\n- « un **Object** : la valeur est convertie en un type primitif et si le résultat n'est pas un Number alors l'une des conversions suivantes [les 4 suivantes de cette liste] est appliquée. »\n- « un _String_ : la chaîne est convertie en un nombre conformément aux règles habituelles en JavaScript. » NaN dans la majorité des cas.\n- « un **Boolean** : 1 si la valeur est true, sinon 0. »\n- « un **Null** : 0. »\n- « un **Undefined** : NaN »\n\n\n\n#### L'expression doit être transformée en type String ####\n\n« Si le type de l'expression doit être `String`, et que son type actuel est : »\n\n- un **String** : aucune conversion.\n- « un **Object** : la valeur est convertie en un type primitif et si le résultat n'est pas une chaîne de caractères alors l'une des conversions suivantes est appliquée. »\n- « un **Number** : le nombre sous forme de chaîne, par exemple \"123\" ou \"12.34\". » ou \"NaN\".\n- « un **Boolean** : \"true\" or \"false\". »\n- « un **Null** : \"null\". »\n- « un **Undefined** : \"undefined\". »\n\n\n\n#### L'expression doit être transformée en type Boolean ###\n\n« Si le type de l'expression doit être `Boolean`, et que son type actuel est : »\n\n- un **Boolean** : aucune conversion.\n- « un **Object** : true. »\n- « un **Number** : false si la valeur est zéro [ou NaN], sinon true [même pour Infinity]. »\n- « un **String** : false si la valeur est une chaîne vide, sinon true. »\n- « un **Null** : false. »\n- « un **Undefined** : false. »\n\n_Note : méfier vous ! Regardez l'exemple ci-dessous._\n\n```js\n// A première vue, si on ne cerne pas la différence entre \n// le type String (type primitif) et l'objet String (type Object),\n// et bien on peut penser que ces deux lignes sont équivalentes.\nvar primiveString = \"\";\nvar objectString = new String(\"\");\n\n// Mais la première est un type String.\nif (primiveString) {\n    console.log(\"true\");\n} else {\n    console.log(\"false\"); // On passe ici !\n}\n// Et la conversion en Bool d'un String vide renvoi \"false\".\n\n// Quant à la deuxième, elle est de type Object.\nif (objectString) {\n    console.log(\"true\"); // On passe ici !\n} else {\n    console.log(\"false\");\n}\n// Et la conversion en Bool d'un Object renvoi \"true\" quoi qu'il arrive !\n\n// Mais par contre...\nif (objectString.toString()) {\n    console.log(\"true\");\n} else {\n    console.log(\"false\"); // On passe ici\n}\n//...avec toString(), on renvoi bien \"false\".\n\n// car \"\" et (new String(\"\")).toString() sont eux bien égaux.\n```\n\n\n\n### L'expression doit être transformée en type Object ###\n\n« Si le type de l'expression doit être `Object`, et que son type actuel est : »\n\n- un **Object** : aucune conversion.\n- « un **Number** : la valeur est injecté dans l'objet équivalent à Number : (new Number(value)). »\n- « un **String** : la valeur est injecté dans l'objet équivalent à String : (new String(value)). »\n- « un **Boolean** : la valeur est injecté dans l'objet équivalent à Boolean : (new Boolean(value)). »\n- « un **Null** : Une exception est levé. »\n- « un **Undefined** : Une exception est levé. »\n\n\n\n\n### Et la réponse est ! ###\n\n« Maintenant que les règles de conversions sont claires, retournons à notre exemple du début. »\n\n```js\nvar five = 5;\nfive.three = 3;\nalert(five + five.three);\n```\n\n« Comme expliqué avant, la première ligne crée une variable nommée `five` dont le type est `Number`. »</p>\n\n« Quand l'[assesseur de propriété](http://ecma-international.org/ecma-262/5.1/#sec-11.2.1) lit `five`, il est converti en type `Object`. L'équivalent du type `Number` est le constructeur `Number` [(le type Object)] qui produit un objet [(puisque c'est une fonction)], et pas le type primitif `Number`. La seconde ligne de notre exemple est donc un équivalent [pour le moteur d'exécution dans ce cas précis] de : »\n\n```js\n(new Number(five)).three = 3;\n```\n\n« Comme vous pouvez le constater, aucune référence à une variable n'a été faite pour l'objet `new Number`. Après que cette expression ai été évaluée, la propriété `three` de l'objet `Number` est abandonnée. »\n\n« Le `five.three` de la troisième ligne créée un nouvel objet Number. Comme le nouvel objet n'a pas de propriété `three`, le type spéciale `undefined` (est [affectée et] retournée [et `five.three` est de type `Undefined`]. Le résultat est équivalent à : »\n\n```js\nalert(5 + undefined);\n```\n\n« L'opérateur d'addition converti chacune des deux expressions en type Number. Dans ce cas `undefined` est converti en `NaN` [et 5 reste de type Number] ce qui donne : »\n\n```js\n« alert(5 + NaN); »\n```\n\n<p id=\"demo\">« Ce qui explique pourquoi la fenêtre d'erreur dans notre exemple affiche `NaN`. »</p>\n\n\n\n\n### Pour aller plus loin dans la compréhension ###\n\nQue ce passerai t-il si le constructeur Number (le type Object (qui affiche 'function' testé par typeof)) possédait bel et bien une propriété nommée « three » ?</p>\n\n```js\n// Ajoutons au constructeur de la fonction Number (le type Object) la propriété « three ».\nNumber.prototype.three = 0; // Initialisation la arbitrairement à 0.\n\nvar five = 5;\nfive.three = 3;\nalert(five + five.three);\n```\n\nCette fois la sortie va t-elle être `NaN` ou `8` ?\n\nEt bien en vérité elle sera `5` (défini dans le prototype). Pourquoi ? La réponse est que `five.three` devient bien `(new Number(five)).three` et qu'une propriété three existant bien : à ce moment précis de l'exécution, `(new Number(five)).three` ne vaut plus `0` (prototype) mais bien `3` (assignation). Cependant, une fois l'instruction terminée : le `(new Number(five))` disparait et la valeur `3` de la propriété disparaît avec lui. Passé à l'instruction suivante, `five` est lu en tant que type Number et à `five.three` le moteur JavaScript recommence le processus précédent pour aboutir à `0` (pas d'assignation ici).</p>\n\n\n**Obtenir 8 en forçant la valeur du prototype**\n\nPour obtenir en sortie `8` **sans toucher au code**, la seule solution est de définir le `Number.prototype.three` à `3`\n\n```js\nNumber.prototype.three = 3;\nvar five = 5;\nfive.three = 3;\nalert(five + five.three);\n```\n\n**Obtenir 8 par avec une variable intermédiaire**\n\nPour obtenir en sortie `8` on peut également utiliser une variable intermédiaire pour « conserver » l'état de transformation `(new Number(five)).three.`\n\n```\nNumber.prototype.three = 0;\nvar \n   five = 5,\n   temp = five.three = 3;\nalert(five + temp);\n```\n\n**Obtenir 8 par déclaration Object au lieu de Number**\n\nPour obtenir en sortie `8` on peut également initialiser directement un type Number à partir du constructeur Number.\n\n```js\nNumber.prototype.three = 0;\n\nvar five = new Number(5);\nfive.three = 3;\nalert(five + five.three);\n```\n\n**Obtenir 8 en Bonus**\n\nPour obtenir en sortie `8` on pouvait aussi faire....\n\n```js\nalert(8);\n```\n\n... okay je m'arrête là :) C'était juste, pour finir en vous disant que bien que les tests ci-avant sont « inutiles » : ils sont là uniquement pour vous montrer les différents mécanismes possibles et la richesse de ceux-ci comparés à d'autres langages plus strictes. Après « c'est bien » ou « c'est mal » ; c'est une autre histoire.\n\n\n\n\n\n## Function et Null sont dans un bâteau ##\n\nD'un côté, Dmitry Baranovskiy et moi-même affirmons que les 6 types en JavaScript sont :\n\n- Object, Number, String, Boolean, **Null** et **Undefined**.\n\nEt pourtant, vous pourrez lire, comme dans [JavaScript Eloquent](http://eloquentjavascript.net/) ([ici, ligne 4](http://eloquentjavascript.net/chapter2.html)) que les 6 types de JavaScript sont :\n\n- Object, Number, String, Boolean, **Function** et **Undefined**.\n\nMais alors qui a raison ? S'il y a bien quelqu'un qui a raison ce sont les [spécifications officielles](http://www.ecma-international.org/publications/standards/Ecma-262.htm\" title=\"Standard ECMA-262) qui liste bien que les 6 types sont [Object, Number, String, Boolean, Null et Undefined](http://ecma-international.org/ecma-262/5.1/#sec-8).\n\nMais alors comment des ouvrages professionnels peuvent se tromper ? En réalité il ne se trompe pas réellement, mais ne font pas référence aux types JavaScipt mais [aux valeurs que peut retourner la fonction `typeof`](http://ecma-international.org/ecma-262/5.1/#sec-11.4.3) censé retourner le type d'une expression. En effet la spécification demande explicitement aux moteurs JavaScript de retourner 'function' et non pas 'object' pour une fonction (type Object) et de retourner 'object' plutôt que 'null' pour la valeur null (le type Null). Et bah franchement...\n\n\n\n\n\n## Mémo : les 6 types JavaScript ##\n\nAfin de tester ce qui a été évoqué par **Dmitry Baranovskiy**, voici plusieurs tests.\n\n\n\n\n### Le type Object (et déclinaisons) ###\n\n#### Object ####\n\n```js\n/********************/\n/* Le type Object */\n/********************/\n\n// Objet en JavaScript\nvar objectJS = new Object();\nconsole.log(typeof objectJS); // retourne \"object\"\nconsole.log(typeof Object); // retourne \"function\"\nconsole.log(objectJS instanceof Object); // retourne \"true\"\nconsole.log(objectJS instanceof Array); // retourne \"false\"\nconsole.log(objectJS instanceof Function); // retourne \"false\"\n\n// Objet en JSON\nvar objectJSON = {};\nconsole.log(typeof objectJSON); // retourne \"object\"\nconsole.log(typeof {}); // retourne \"object\" (la même chose que \"new Object()\")\nconsole.log(objectJSON instanceof Object); // retourne \"true\"\nconsole.log(objectJS instanceof Array); // retourne \"false\"\nconsole.log(objectJS instanceof Function); // retourne \"false\"\n```\n\n#### Array ####\n\n```js\n/**************************/\n/* Le type Object : Array */\n/**************************/\n// Tableau en JavaScript\nvar arrayJS = new Array();\nconsole.log(typeof arrayJS); // retourne \"object\"\nconsole.log(typeof Array); // retourne \"function\"\nconsole.log(arrayJS instanceof Object); // retourne \"true\"\nconsole.log(arrayJS instanceof Array); // retourne \"true\"\nconsole.log(arrayJS instanceof Function); // retourne \"false\"\n\n// Tableau en JSON\nvar arrayJSON = [];\nconsole.log(typeof arrayJSON); // retourne \"object\"\nconsole.log(typeof []); // retourne \"object\" (la même chose que \"new Array()\")\nconsole.log(arrayJSON instanceof Object); // retourne \"true\"\nconsole.log(arrayJSON instanceof Array); // retourne \"true\"\nconsole.log(arrayJSON instanceof Function); // retourne \"false\"\n```\n\n\n\n#### Function ####\n\n```js\n/*****************************/\n/* Le type Object : Function */\n/*****************************/\n\n// Fonction en JavaScript\nvar functionJS = function() {};\nconsole.log(typeof functionJS); // retourne \"function\"\nconsole.log(typeof Function); // retourne \"function\"\nconsole.log(functionJS instanceof Object); // retourne \"true\"\nconsole.log(functionJS instanceof Array); // retourne \"false\"\nconsole.log(functionJS instanceof Function); // retourne \"true\"\n```\n\n#### Date, RegExp, Error ####\n\n```js\n/****************************************/\n/* Les autres types Object instanciable */\n/****************************************/\n\n// L'objet Date\nvar date = new Date();\nconsole.log(typeof date); // retourne \"object\"\nconsole.log(typeof Date); // retourne \"function\"\nconsole.log(date instanceof Object); // retourne \"true\"\nconsole.log(date instanceof Date); // retourne \"true\"\nconsole.log(date instanceof Function); // retourne \"false\"\n\n// L'objet RegExp\nvar regex = new RegExp(\" \");\nconsole.log(typeof regex); // retourne \"object\"\nconsole.log(typeof RegExp); // retourne \"function\"\nconsole.log(regex instanceof Object); // retourne \"true\"\nconsole.log(regex instanceof RegExp); // retourne \"true\"\nconsole.log(regex instanceof Function); // retourne \"false\"\n\n// L'objet RegExp court\nvar sRegex = / /;\nconsole.log(typeof sRegex); // retourne \"object\"\nconsole.log(typeof / /); // retourne \"object\" (la même chose que \"new RegExp()\")\nconsole.log(sRegex instanceof Object); // retourne \"true\"\nconsole.log(sRegex instanceof RegExp); // retourne \"true\"\nconsole.log(sRegex instanceof Function); // retourne \"false\"\n\n// L'objet Error\nvar error = new Error();\nconsole.log(typeof error); // retourne \"object\"\nconsole.log(typeof Error); // retourne \"function\"\nconsole.log(error instanceof Object); // retourne \"true\"\nconsole.log(error instanceof Error); // retourne \"true\"\nconsole.log(error instanceof Function); // retourne \"true\"\n```\n\n#### JSON, Math, Global (Window) ####\n\n```js\n/**********************************/\n/* Les autres types Object simple */\n/**********************************/\n\n// L'objet JSON\n//var json = new JSON(); // error\nconsole.log(typeof json); // retourne \"undefined\" (n'existe pas du coup)\nconsole.log(typeof JSON); // retourne \"object\"\n//console.log(json instanceof Object); // error\n//console.log(json instanceof JSON); // error\n//console.log(json instanceof Function); // error\n\n// L'objet Math\n//var math = new Math(); // error\nconsole.log(typeof math); // retourne \"undefined\" (n'existe pas du coup)\nconsole.log(typeof Math); // retourne \"object\"\n//console.log(math instanceof Object); // error\n//console.log(math instanceof Math); // error\n//console.log(math instanceof Function); // error\n\n// L'objet Global (Window dans les navigateurs)\n//var globalVar = new global(); // error\nconsole.log(typeof globalVar); // retourne \"undefined\" (n'existe pas du coup)\nconsole.log(typeof global); // retourne \"object\"\n//console.log(globalVar instanceof Object); // error\n//console.log(globalVar instanceof global); // error\n//console.log(globalVar instanceof Function); // error\n```\n\n\n\n\n### Les types primitifs (et Objets associés) ###\n\n#### Number ####\n\n```js\n/******************/\n/* Le type Number */\n/******************/\n\n// Number primitif\nvar pNumber = 104.56;\nconsole.log(typeof pNumber); // retourne \"number\"\nconsole.log(typeof 104.56); // retourne \"number\"\nconsole.log(pNumber instanceof Object); // retourne \"false\"\nconsole.log(pNumber instanceof Number); // retourne \"false\"\n\n// L'Objet Number\nvar number = new Number(104.56);\nconsole.log(typeof number); // retourne \"object\"\nconsole.log(typeof Number); // retourne \"function\"\nconsole.log(number instanceof Object); // retourne \"true\"\nconsole.log(number instanceof Number); // retourne \"true\"\n\n// Number primitif à 0\nvar pNumber0 = 0;\nconsole.log(typeof pNumber0); // retourne \"number\"\nconsole.log(pNumber0 instanceof Object); // retourne \"false\"\nconsole.log(pNumber0 instanceof Number); // retourne \"false\"\n\n// L'Objet Number à 0\nvar number0 = new Number(0);\nconsole.log(typeof number0); // retourne \"object\"\nconsole.log(number0 instanceof Object); // retourne \"true\"\nconsole.log(number0 instanceof Number); // retourne \"true\"\n\n// Number primitif invalide\nvar pNumberN = NaN;\nconsole.log(typeof pNumberN); // retourne \"number\"\nconsole.log(pNumberN instanceof Object); // retourne \"false\"\nconsole.log(pNumberN instanceof Number); // retourne \"false\"\n\n// L'Objet Number invalide\nvar numberN = new Number(NaN);\nconsole.log(typeof numberN); // retourne \"object\"\nconsole.log(numberN instanceof Object); // retourne \"true\"\nconsole.log(numberN instanceof Number); // retourne \"true\"\n\n// Number primitif infinie\nvar pNumberI = Infinity;\nconsole.log(typeof pNumberI); // retourne \"number\"\nconsole.log(pNumberI instanceof Object); // retourne \"false\"\nconsole.log(pNumberI instanceof Number); // retourne \"false\"\n\n// L'Objet Number infinie\nvar numberI = new Number(Infinity);\nconsole.log(typeof numberI); // retourne \"object\"\nconsole.log(numberI instanceof Object); // retourne \"true\"\nconsole.log(numberI instanceof Number); // retourne \"true\"\n```\n\n#### String ####\n\n```js\n/******************/\n/* Le type String */\n/******************/\n\n// String primitif\nvar pString = \"test\";\nconsole.log(typeof pString); // retourne \"string\"\nconsole.log(typeof \"test\"); // retourne \"string\"\nconsole.log(pString instanceof Object); // retourne \"false\"\nconsole.log(pString instanceof String); // retourne \"false\"\n\n// L'Objet String\nvar string = new String(\"test\");\nconsole.log(typeof string); // retourne \"object\"\nconsole.log(typeof String); // retourne \"function\"\nconsole.log(string instanceof Object); // retourne \"true\"\nconsole.log(string instanceof String); // retourne \"true\"\n\n// String vide primitif\nvar pStringE = \"\";\nconsole.log(typeof pStringE); // retourne \"string\"\nconsole.log(pStringE instanceof Object); // retourne \"false\"\nconsole.log(pStringE instanceof String); // retourne \"false\"\n\n// L'Objet vide String\nvar stringE = new String(\"\");\nconsole.log(typeof stringE); // retourne \"object\"\nconsole.log(stringE instanceof Object); // retourne \"true\"\nconsole.log(stringE instanceof String); // retourne \"true\"\n```\n\n\n\n#### Boolean ####\n\n```js\n/*******************/\n/* Le type Boolean */\n/*******************/\n\n// Boolean primitif à true\nvar pBoolTrue = true;\nconsole.log(typeof pBoolTrue); // retourne \"boolean\"\nconsole.log(typeof true); // retourne \"boolean\"\nconsole.log(pBoolTrue instanceof Object); // retourne \"false\"\nconsole.log(pBoolTrue instanceof Boolean); // retourne \"false\"\n\n// L'Objet Boolean à true\nvar boolTrue = new Boolean(true);\nconsole.log(typeof boolTrue); // retourne \"object\"\nconsole.log(typeof Boolean); // retourne \"function\"\nconsole.log(boolTrue instanceof Object); // retourne \"true\"\nconsole.log(boolTrue instanceof Boolean); // retourne \"true\"\n\n// Boolean primitif à false\nvar pBoolTrue = false;\nconsole.log(typeof pBoolTrue); // retourne \"boolean\"\nconsole.log(pBoolTrue instanceof Object); // retourne \"false\"\nconsole.log(pBoolTrue instanceof Boolean); // retourne \"false\"\n\n// L'Objet Boolean à false\nvar boolTrue = new Boolean(false);\nconsole.log(typeof boolTrue); // retourne \"object\"\nconsole.log(boolTrue instanceof Object); // retourne \"true\"\nconsole.log(boolTrue instanceof Boolean); // retourne \"true\"\n```\n\n\n\n#### Null ####\n\n```js\n/*******************/\n/* Le type Null */\n/*******************/\n\n// Null primitif\nvar pNull = null;\nconsole.log(typeof pNull); // retourne \"object\"\nconsole.log(typeof null); // retourne \"object\"\nconsole.log(typeof Null); // retourne \"undefined\"\nconsole.log(pNull instanceof Object); // retourne \"false\"\n//console.log(pNull instanceof Null); //error\n```\n\n\n\n#### Undefined ####\n\n```js\n/*********************/\n/* Le type Undefined */\n/*********************/\n\n// Undefined primitif\nconsole.log(typeof thisVarDoesntExist); // retourne \"undefined\"\nconsole.log(typeof undefined); // retourne \"undefined\"\nconsole.log(typeof Undefined); // retourne \"undefined\"\n//console.log(thisVarDoesntExist instanceof Object); //error\n//console.log(pNull instanceof Undefined); //error\n```", "dates" : { "published" : { "$date" : 1368793200000 }, "updated" : [] }, "others" : { "markdown" : true, "published" : true }, "script" : "$(\".openable\").click(function () {\n    window.open($(this).attr(\"src\"));\n});", "stylesheet" : "", "title" : "Les <span>types</span> en <span>JavaScript</span> : pour tout savoir !", "urn" : "les-types-en-javascript-pour-tout-savoir" }
{ "_id" : { "$oid" : "530f5f63620731fe86cb71af" }, "cache" : { "comment" : { "number" : 2 } }, "categories" : [ { "$oid" : "5310456355dfd5f7698d48c4" }, { "$oid" : "5310456355dfd5f7698d48ba" }, { "$oid" : "5310456355dfd5f7698d48b9" }, { "$oid" : "530ef6a6789c1a55e4fde0af" }, { "$oid" : "5310456355dfd5f7698d48b8" }, { "$oid" : "5310456355dfd5f7698d48bb" }, { "$oid" : "5310456355dfd5f7698d48c7" }, { "$oid" : "5310456355dfd5f7698d48bd" } ], "content" : "<p>Posons le décors, le JavaScript ne possède nativement : ni classe, ni héritage, ni encapsulation... et alors ? C'est probablement le langage le plus incompris, car je vous assure que JavaScript est un puissant langage orienté objet et qu'il permet :</p>\r\n\r\n<ul>\r\n\t<li>la création de nouveaux contextes d'exécution autonomes instanciés (new) avec un constructeur, des propriétés et des méthodes personnelles internes (this...) à partir d'un gabarit de construction (classe),</li>\r\n\t<li>de dupliquer les propriétés/méthodes dans un autre gabarit (héritage) pour ajouter ou modifier des comportements (polymorphisme) le tout depuis différents endroits dans le code (partielle et virtuelle),</li>\r\n\t<li>de limiter l'accès aux propriétés/méthodes au contexte d'exécution (encapsulation privée) ou les promouvoirs (encapsulation publique)...</li>\r\n</ul>\r\n\r\n<p>avec effectivement d'autres mots clés et mécanismes que ceux dont vous avez l'habitude, et nottament grâce au <span class=\"highlighting\">Prototypage</span>.</p>\r\n\r\n<p>En ce qui concerne ceux qui ont déjà un bon pied dans le JavaScript, même si jusqu'à présent vous n'avez jamais réellement vu l'intérêt de créer des structures avancées (l'équivalent de classes) pour un développement côté client, il est indéniable que côté serveur (en <a href=\"http://blog.haeresis.fr/developper-en-javascript-cote-serveur-avec-nodejs/\" title=\"Développer en JavaScript côté serveur avec Node.js\">Node.js</a> par exemple) cela est nécessaire. Et si vous êtes plus d'un développeur Front-end sur vos sites : ça s'avère nécessaire également. Bien qu'en utilisant des bibliothèques JavaScript comme Prototype ou Mootools vous puissiez assez facilement créer des classes, je vais vous apprendre ici à comprendre la roue, vous en créer une sans l'utilisation du prototypage très simplement et cerise sur le gâteau : de jouer avec vos classes en les remplissant/appelant de la même manière qu'en jQuery !</p>\r\n\r\n<p>Pour finir nous verrons en quoi le prototypage peut vous simplifier la vie et en quoi donc JavaScript n'a finalement besoin d'aucune classe, d'aucun héritage et d'aucune encapsulation.</p>\r\n\r\n<h2>Du JavaScript, JSON, jQuery à La RACHE</h2>\r\n\r\n<p>Étant pratiquant à vos heures de la <a href=\"http://www.la-rache.com/\" title=\"Le site of the International Institute of La RACHE\">méthodologie de La RACHE</a> (Rapid Application Conception and Heuristic Extreme-programming) votre utilisation de JavaScript se limite principalement à trois cas d'utilisation, et cela vous suffit :</p>\r\n<ul>\r\n\t<li><span class=\"highlighting\">JavaScript</span> : Vous donnez un objet à manger à une fonction et celle-ci vous le ressort avec les modifications demandées.</li>\r\n\t<li><span class=\"highlighting\">JSON</span> : Vous créez des objets à la volée avec « {} » et vous les remplissez en fonction de vos besoins.</li>\r\n\t<li><span class=\"highlighting\">jQuery</span> : vous jonglez dans un DOM et faites des déplacements et duplication vraiment aisément.</li>\r\n</ul>\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">// Créer des fonctions pour faire quelque chose à mes informations.\r\nfunction checkAuth(account) {\r\n\tif (account.email /* ... */ account.password) {\r\n\t\taccount.valid = true\r\n\t}\r\n\treturn account;\r\n}\r\n\r\n// Regrouper mes informations.\r\nvar account = {\r\n\temail: $(\"...\").val(\"...\"),\r\n\tpassword: $(\"...\").val(\"...\"),\r\n\tvalid: false\r\n}\r\n\r\n// Réaliser les choses.\r\naccount = checkAuth(account);\r\n\r\n/* ... */</code></pre>\r\n\r\n<p>L'avantage est que ça va vite à écrire : vous décidez sur le moment comment organiser votre objet et comment réaliser la fonctionnalité.</p> \r\n\r\n<p>Les problèmes arrivent quand un script cumule plusieurs centaines de lignes (et plusieurs appels de fichier différents avec plusieurs centaines de lignes) basées sur une création de l'instant et qu'il doit être amélioré / débogué 6 mois plus tard par quelqu'un d'autre (et les yeux bandés !).</p>\r\n\r\n<p>Vous ne disposez pas non plus de documentation car sincèrement, même-vous, vous vous demandez comment documenter ça...</p>\r\n\r\n<p>Il est temps d'organiser votre code JavaScript avec un développement moins procédurale et plus orienté objet. Oui, mais  s'organiser autour d'objet clairement défini sur lesquels : fautes de documentations, tout le monde pourra se référer au moins dans des fichiers par structure.</p>\r\n\r\n<h2>Héritage basé sur les classes (sans prototype)</h2>\r\n\r\n<p>Les classes en JavaScript : ça n'existe pas. À la place JavaScript a un mécanisme de prototypage qui est différent de celui des classes et donc des mécanismes que vous avez l'habitude de côtoyer dans vos langages objets. Laissons le prototypage un instant dans cette partie et revenons à nos classes. Une classe est un modèle qui, en l'instanciant (attacher « this » à un contexte d'exécution dédié), donne naissance à des objets formés selon la nomenclature de ladite classe. Mais puisque le JavaScript lui-même est déjà composé d'objet, à première vu on en a pas besoin. Oui mais l'avantage apporté par une classe est de générer facilement des objets complexes et tous formés de la même manière, de les étendres, etc. Si les classes n'existent pas nativement, rien ne nous empêche de simuler leur comportement.</p>\r\n\r\n<h3>Même objet, mais syntaxe et structure différente</h3>\r\n\r\n<p>L'élément clé <span class=\"highlighting\">new</span> existe également en JavaScript. Mais comment va-t-il nous aider à <span class=\"highlighting\">instancier des classes</span> pour <span class=\"highlighting\">créer des objets</span> en JavaScript ?</p>\r\n\r\n<p>Revenons aux sources un moment. Si je désire créer deux autres objets « <samp>account</samp> »  en continuant mon exemple précédent, il est vrai que je n'ai pas besoin de passer par une classe après tout. Je peux écrire à la suite :</p>\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">/* ... */\r\n\r\n// SYNTAXE JSON : Création d'un Object littérale avec la syntaxe JSON (JavaScript Object Notation).\r\n\r\nvar bruno = { // Instanciation d'une variable \"bruno\" avec un nouvel élément de type Object selon la syntaxe JSON.\r\n\temail: \"bruno@email.ici\", // Ajout, en tant que membre, de la propriété \"email\" (en même temps) avec un nouveau type primitif String.\r\n\tpassword: \"bépoB\" // Ajout, en tant que membre, de la propriété \"password\" (en même temps) avec un nouveau type primitif String.\r\n};\r\n\r\n/* ... */</code></pre>\r\n\r\n<p>Ensuite, quelque part plus loin... peut-être dans un autre fichier... je peux également écrire de cette autre façon :</p>\r\n   \r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">/* ... */\r\n\r\n// SYNTAXE STANDARD : Création et assemblage d'Objets avec la syntaxe JavaScript standard.\r\n\r\nvar magalie = new Object(); // Instanciation d'une variable \"magalie\" avec un nouvel élément de type Object.\r\nmagalie.mail = new String(\"magalie@email.ici\").toString(); // Ajout, en tant que membre, de la propriété \"mail\" avec un nouveau type Object converti en type primitif String.\r\nmagalie.pwd = new String(\"azertyM\").toString(); // Ajout, en tant que membre, de la propriété \"pwd\" avec un nouveau type Object converti en type primitif String.\r\n\r\n/* ... */</code></pre>\r\n\r\n<p>Et, arrivé au moment de vérifier mes « account »,...</p>\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">/* ... */\r\n\r\nbruno = checkAuth(bruno);\r\nmagalie = checkAuth(magalie);\r\n\r\n/* ... */</code></pre>\r\n\r\n<p>... les problèmes commencent. Que c'est-il passé ? En fait j'ai bien créé deux « account » et mes deux syntaxes sont bonnes. Sauf que la fonction <samp>checkUser()</samp> s'attendait à pouvoir toucher à une propriété nommée <samp>valid</samp> qu'on a oublié de déclarer pour notre premier objet et qui était sensé faire un test sur les propriétés <samp>email</samp> et <samp>password</samp> qui n'existent pas dans notre second objet (en plus de <samp>valid</samp>) car on ne les a pas nommés ainsi...</p>\r\n\r\n<p>Pour résoudre cela il nous faudrait :</p>\r\n<ul>\r\n\t<li>Être sûr que quoi qu'il arrive en créant un « user » les propriétés <samp>username</samp>, <samp>password</samp> et <samp>valid</samp> existent.</li>\r\n\t<li>Être sur que la fonction <samp>checkUser</samp> soit liée d'une manière ou d'une autre à l'objet « user » puis qu'elle fasse un traitement sur lui.</li>\r\n</ul>\r\n<p class=\"highlighting\">Bref : pour résoudre cela il nous faudrait une classe.</p>\r\n\r\n<h3>Des brouillons de classe</h3>\r\n\r\n<p>Ce qu'il nous faut, c'est un générateur d'objet déjà formé pour être sûr que, si j'utilise ce générateur pour créer mes objets : ils auront tous une structure identique. Ne sautons pas des étapes et faisons des tests de compréhension.</p>\r\n\r\n<div class=\"worst-practice\">\r\n\t<div class=\"title\">Première <del>idée</del> <ins>erreur</ins> : un objet modèle pour nos structures</div>\r\n\t<div class=\"content\">\r\n\t\r\n\t<p>Afin d'éviter de se retrouver avec des objets tous formés différemments ; on décide de se référer à un modèle :</p>\r\n\t\r\n<p class=\"highlighting\">Code</p>\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">// Création d'un brouillon de classe \"Account\" : un gabarit.\r\nvar account = {\r\n\temail: \"\", // Ajout de la propriétés \"email\" à \"account\".\r\n\tpassword: \"\" // Ajout de la propriétés \"password\" à \"account\".\r\n};</code></pre>\r\n\r\n<p class=\"highlighting\">Tests</p>\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">var bruno, magalie;\r\n\r\n// J'associe ma structure à la variable \"bruno\" et la remplie.\r\nbruno = account;\r\nbruno.email = \"bruno@email.ici\";\r\nbruno.password = \"bépoB\";\r\nconsole.log(bruno.email); // renvoi \"bruno@email.ici\".\r\nconsole.log(bruno.password); // renvoi \"bépoB\".\r\n\r\n// J'associe ma structure à la variable \"magalie\" et la remplie.\r\nmagalie = account;\r\nmagalie.email = \"magalie@email.ici\";\r\nmagalie.pwd = \"azertyM\"; // Bien que \"pwd\" n'existe pas dans mon gabarit, je peux quand même l'associer et oublier \"password\".\r\nconsole.log(magalie.email); // renvoi \"magalie@email.ici\".\r\nconsole.log(magalie.pwd); // renvoi \"azertyM\".\r\n\r\nconsole.log(bruno.email); // renvoi \"magalie@email.ici\".\r\n\r\n// Je constate que la ré-association à \"magalie\" (ligne 9, 10 et 11) a remplacée celle de \"bruno\" (ligne 2, 3 et 4).</code></pre>\r\n\r\n\t\t<p>On constate rapidement plusieurs problèmes :</p>\r\n\t\t\r\n\t\t<ul>\r\n\t\t\t<li>Même si j'ai créé mon gabarit : qui m'empêche de remplir par erreur une valeur inexistante ? C'est le cas ligne 11 des tests avec \"pwd\" et ça marche comme le prouve la ligne 13 des tests qui ne renvoi pas d'erreur.</li>\r\n\t\t\t<li>Le contexte d'exécution généré en créant un « Account » à la ligne 6 du code ne ce duplique pas lors de l'association à d'autre variable (ligne 2 et 9 des tests) ce qui a pour résultat de fournir les informations de \"magalie\" via \"bruno\" (ligne 16 des tests).</li>\r\n\t\t</ul>\r\n\t\t\r\n\t\t<p>Bref, il va falloir faire mieux que ça !</p>\r\n\t</div>\r\n</div>\r\n\r\n<div class=\"correct-practice\">\r\n\t<div class=\"title\">Deuxième <del>idée</del> <ins>piste</ins> : création de contextes d'exécution autonomes différents</div>\t\r\n\t<div class=\"content\">\r\n\t\r\n\t<p>Pour résoudre nos problèmes majeurs précédents, nous allons utiliser le mot clé <samp>function</samp> et créer une fonction ce qui va créer des contexte d'exécution différent pour nos deux « account » :</p>\r\n\t\r\n\t<p class=\"highlighting\">Code</p>\r\n\t\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">// Création d'un brouillon de classe « Account » avec comme paramètres : \"email\" et \"password\".\r\nvar account = function (email, password) {\r\n\t// Création d'un objet à l'intérieur de Account, sa portée est donc limitée à \"Account\".\r\n\tvar newAccount = {};\r\n\t\r\n\tnewAccount.email = email; // Ajout de la propriétés \"email\" à \"newAccount\" avec comme valeur le paramètre \"email\".\r\n\tnewAccount.password = password; // Ajout de la propriétés \"password\" à \"account\" avec comme valeur le paramètre \"password\".\r\n\t\r\n\t// Notre fonction retourne un objet de nomenclature \"Account\".\r\n\treturn newAccount;\r\n};</code></pre>\r\n\r\n<p class=\"highlighting\">Tests</p>\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">var bruno, magalie;\r\n\r\nbruno = account(\"bruno@email.ici\", \"bépoB\");\r\nconsole.log(bruno.email); // renvoi \"bruno@email.ici\".\r\nconsole.log(bruno.password); // renvoi \"bépoB\".\r\n\r\nmagalie = account(\"magalie@email.ici\", \"azertyM\");\r\nmagalie.pwd = \"azertyM\";\r\nconsole.log(magalie.email); // renvoi \"magalie@email.ici\".\r\nconsole.log(magalie.pwd); // renvoi \"azertyM\".\r\n\r\nconsole.log(bruno.email); // renvoi toujours \"bruno@email.ici\".</code></pre>\r\n\r\n\t\t<p>Bon, cette fois au moins, c'est fonctionnel :</p>\r\n\t\t\r\n\t\t<ul>\r\n\t\t\t<li>Même si l'on peut toujours inventer des propriétés (ligne 6 des tests), dans notre cas ce n'est plus génant car grâce aux paramètres imposées par la fonction (ligne 6 du code) on a au moins une certitude : les propriétés <samp>email</samp> et <samp>password</samp> sont remplies.</li>\r\n\t\t\t<li>On constate bien à la ligne 10 des tests que <samp>bruno.email</samp> n'a pas été écrasé par <samp>magalie.email</samp> (deux contextes distincts).</li>\r\n\t\t</ul>\r\n\t\r\n\t</div>\r\n</div>\r\n\r\n<h3>Une Classe en JavaScript</h3>\r\n\r\n<p>Effectivement, tout cela marche. Mais si on veut se rapprocher du comportement des classes dans les langages objets il va falloir faire mieux que ça. Pourquoi ? Par exemple : de quel type est notre objet dans le cas précédent ?</p>\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">var \r\n\tbruno,\r\n\taccount = function (email, password) {\r\n\t\tvar newAccount = {};\r\n\t\tnewAccount.email = email; \r\n\t\tnewAccount.password = password;\r\n\t\treturn newAccount;\r\n\t};\r\n\t\r\nbruno = account(\"bruno@email.ici\", \"bépoB\");\r\n\r\nconsole.log(bruno instanceof Object); // renvoi \"true\".\r\nconsole.log(bruno instanceof account); // renvoi \"false\".</code></pre>\r\n\r\n<p>On s'aperçoit à la ligne 13 qu'il va être difficile de faire des objets distincts de cette façon, et je ne vous parle même pas d'héritage !</p>\r\n\r\n<h4>Instance, Constructeur, propriétés d'instance et propriétés d'objet</h4>\r\n\r\n<p>Voilà ce que l'on va permettre :</p>\r\n<ul>\r\n\t<li>Instanciation d'un contexte d'exécution avec une fonction grâce au mot-clé <samp class=\"highlighting\">new</samp>. Une telle fonction en JavaScript est appelée « Constructeur ». Dans ce cas, la pratique veut que l'on commence le nom de la variable par une majuscule.</li>\r\n\t<li>Attribut d'instance attaché grâce au mot-clé <samp class=\"highlighting\">this</samp>.</li>\r\n\t<li>Propriétés d'instances et propriétés statiques (utilisables sans instanciation).</li>\r\n</ul>\r\n\r\n<p class=\"highlighting\">Classe</p>\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">// Création d'une classe \"Account\" avec comme paramètres : \"email\" et \"password\".\r\nvar Account = function (email, password) {\r\n\r\n\t// Cette fois on attache les variables au contexte d'exécution avec comme base \"this\".\r\n\t// En appelant cette fonction avec <samp>new</samp>, \r\n\t// <samp>this</samp> correspond alors au contexte d'exécution d'une nouvelle instance d'Account.\r\n\tthis.email = email;\r\n\tthis.password = password;\r\n\r\n\t// On attache une propriété à la variable \"Account\" (qui sera un objet, une fois la fonction instanciée).\r\n\t// Si \"Account.nbrOfAccount\" n'existe pas, (premier passage), il vaut 1. \r\n\t// Sinon il vaut lui-même plus 1.\r\n\tAccount.nbrOfAccount = (typeof Account.nbrOfAccount != 'undefined') ? Account.nbrOfAccount + 1 : 1;\r\n\t\r\n\t// Il n'est pas nécessaire d'inclure de \"return\". Une fonction retourne son instance quand elle est appelée avec new.\r\n};</code></pre>\r\n\r\n<p class=\"eye-catching\">Note : vous pouvez constater que la variable « Account » prend maintenant une majuscule. C'est une convention pour indiquer que cette fonction devra être instanciée avec le mot-clé « new ».</p>\r\n\r\n<p class=\"highlighting\">Tests</p>\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">var bruno, magalie, badUseCase;\r\n\t\r\n// Lecture de \"Account.nbrOfAccount\" sans instanciation.\r\nconsole.log(Account.nbrOfAccount); // renvoi \"undefined\".\r\n\r\n// Instanciation d'un premier \"Account\".\r\nbruno = new Account(\"bruno@email.ici\", \"bépoB\");\r\n\r\n// Tentative de lecture d'une propriété d'instance depuis :\r\n/* Une instance */ console.log(bruno.email); // renvoi \"bruno@email.ici\".\r\n/* Un objet (classe) */ console.log(Account.email); // renvoi \"undefined\".\r\n\r\n// Tentative de lecture d'une propriété d'objet (de classe) depuis :\r\n/* Une instance */ console.log(bruno.nbrOfAccount); // renvoi \"undefined\".\r\n/* Un objet (classe) */ console.log(Account.nbrOfAccount); // renvoi \"1\".\r\n\r\n// Instanciation d'un deuxième \"Account\".\r\nmagalie = new Account(\"magalie@email.ici\", \"azertyB\");\r\n\r\n// Lecture de \"Account.nbrOfAccount\" après deux instanciations.\r\nconsole.log(Account.nbrOfAccount);\t// renvoi 2.\r\n\r\n// Création d'une variable dans le contexte d'exécution global.\r\nglobal.email = \"Rien ici\"; // window.email est un équivalent dans les navigateurs.\r\nconsole.log(global.email); // renvoi \"Rien ici\".\r\n\r\nbadUseCase = Account(\"badusecase@email.ici\", \"azertyB\"); // On n'utilise pas le mot clé \"new\" pour instancier la classe.\r\n// console.log(badUseCase.email); // error.\r\nconsole.log(global.email); // renvoi \"badusecase@email.ici\".</code></pre>\r\n\t\r\n<p>Il y a deux problèmes à relever ici :</p>\r\n<ul>\r\n\t<li>On s'aperçoit à la ligne 4 des « Tests » que si aucune instance n'a été créée, la propriété <samp>nbrOfAccount</samp> de <samp>Account</samp> n'est jamais remplie. Elle est donc de type Undefined (au lieu de par exemple renvoyer 0).</li>\r\n\t<li>Le second problème vient de l'utilité de <span class=\"highlighting\">this</span>. Si vous utilisez <samp>new</samp> lors de l'appel de <samp>Account</samp> (ligne 7 et 18 des « Tests »), cela permet à <samp>this</samp> d'être associé au <span class=\"eye-catching\">contexte d'exécution de la fonction</span> (nouvelle instance). Cependant, sans le mot-clé <samp>new</samp>, <samp>this</samp> reste associé <span class=\"eye-catching\">au contexte d'exécution global</span> à savoir la variable <samp>global</samp> (par exemple avec Node.js) et la variable <samp>window</samp> dans vos navigateurs (par exemple sous IE, Chrome, Firefox...).</li>\r\n</ul>\r\n<p>Réglons ces problèmes avec le code ci-dessous :</p>\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">var Account = function (email, password) {\r\n\t// On vérifie bien que this est attaché au contexte d'exécution d'une nouvelle instance.\r\n\tif (this instanceof Account) {\r\n\t\tthis.email = email;\r\n\t\tthis.password = password;\r\n\t\tAccount.nbrOfAccount = (typeof Account.nbrOfAccount != 'undefined') ? Account.nbrOfAccount + 1 : 1;\r\n\t} else {\r\n\t\t// On crache à la figure (mais gentiment) du développeur qui a fait une bétise :)\r\n\t\t// L'erreur suivante s'affichera dans votre console (\"La fonction 'Account' doit être instanciée avec le mot-clé 'this'.\").\r\n\t\tthrow Error(\"'Account' function must be instantiated with the keyword 'this'.\");\r\n\t}\r\n};\r\n// On initialise la variable statique en dehors de la fonction pour qu'elle soit sur 0 initialement.\r\nAccount.nbrOfAccount = 0;</code></pre>\r\n\r\n<p>Malheureusement, l'utilisation de <samp>if (this instanceof Account) {</samp> empêche également à la fonction d'être utilisée par les fonctions « call(this) » ou apply(this) ». Et peut-être même que parfois il est intentionnel d'attacher le contexte à l'objet global. Dans la suite de cet article, nous n'allons pas utiliser ce contrôle (mais sachez qu'il existe).</p>\r\n\r\n<p class=\"eye-catching\">Note : comment <samp>Account</samp> peut-être une fonction (ligne 1) et posséder une propriété <samp>nbrOfAccount</samp> (ligne 14). Et bien c'est tout simplement parce qu'une fonction est également un objet. Le type fonction (bien que renvoyé par <samp>typeof</samp>) n'existe pas. Une fonction n'est qu'un objet que l'on peut invoquer. Vous trouverez <a href=\"./les-types-en-javascript-pour-tout-savoir/\" title=\"Les types en JavaScript : pour tout savoir !\">plus d'informations sur les 6 types en JavaScript dans mon billet précédent</a>.</p>\r\n\r\n<h4>Accesseurs, encapsulation publique, encapsulation privée</h4>\r\n\r\n<p>Cela est fonctionnel, mais minimal. Comment pouvons-nous par exemple contrôller la façon dont une valeur doit être assignée ou renvoyée ? Dans notre exemple, nous aimerions pouvoir assigner un type String (et non un Object String) en valeur de l'attribut <samp>email</samp> et la renvoyer uniquement en minuscule par exemple. Nous allons utiliser pour cela des fonctions. Quand une fonction est une propriété d'un objet instancié par un constructeur, on l'appelle alors « Méthode », même en JavaScript.</p>\r\n\r\n<p class=\"highlighting\">Classe</p>\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">var Account = function (email, password) {\r\n\t/*** Variables conteneurs. ***/\r\n\tthis.email = email;\r\n\tthis.password = password;\r\n\t\r\n\t/*** Variables statiques. ***/\r\n\tAccount.nbrOfAccount = (typeof Account.nbrOfAccount != 'undefined') ? Account.nbrOfAccount + 1 : 1;\r\n\r\n\t/*****************************************************/\r\n\t/*** Méthodes d'accession de retour - Getters. ***/\r\n\r\n\t// J'associe à la propriété \"getEmail\" d'une instance d'\"Account\" une fonction.\r\n\t// La différence entre le \"this.email\" et \"this.getEmail()\" est que\r\n\t// \"this.getEmail()\" va renvoyer l'email en minuscule même si il a été passé avec des majuscules.\r\n\tthis.getEmail = function () {\r\n\t\treturn this.email.toLowerCase();\r\n\t}\r\n\r\n\t// J'associe à la propriété \"getPassword\" d'une instance d'\"Account\" une fonction.\r\n\t// La différence entre le \"this.password\" et \"this.getPassword()\" est que\r\n\t// \"this.getPassword()\" me permet de hasher le résultat avant de l'affficher.\r\n\tthis.getPassword = function (hashFunction) {\r\n\t\tif (typeof hashFunction != 'function') { // Si le premier paramètre n'est pas une fonction.\r\n\t\t\treturn this.password; // On affiche le mot de passe normalement.\r\n\t\t} else {\r\n\t\t\treturn hashFunction(this.password); // Sinon on l'affiche en fonction de ce qu'aura fait la fonction 'hashFunction'.\r\n\t\t}\r\n\t}\r\n\r\n\t// Les Getters nous permettent donc d'afficher différemment la valeur stockée dans l'instance de l'objet.\r\n\t// Mais la valeur reste conservée sans les modifications renvoyées.\r\n\r\n\r\n\t/*****************************************************/\r\n\t/*** Méthodes d'accession d'attribution - Setters. ***/\r\n\r\n\t// J'associe à la propriété \"setEmail\" d'une instance d'\"Account\" une fonction.\r\n\t// La différence entre le \"this.email\" et \"this.setEmail()\" est qu'avant d'attribuer la valeur à mon instance,\r\n\t// \"this.setEmail()\" me permet de vérifier si c'est bien un email.\r\n\tthis.setEmail = function (value, isAnEmailFunction) {\r\n\t\tvalue = (new String(value)).toString(); // On s'assure de travailler avec un type String.\r\n\t\tif (typeof isAnEmailFunction != 'function') {\r\n\t\t\tthis.email = value;\r\n\t\t} else {\r\n\t\t\tthis.email = isAnEmailFunction(value); // La valeur attribuée passe d'abord un test : est-elle un email valide ?\r\n\t\t}\r\n\t}\r\n\r\n\t// J'associe à la propriété \"setPassword\" d'une instance d'\"Account\" une fonction.\r\n\t// La différence entre le \"this.password\" et \"this.setPassword()\" est qu'avant d'attribuer la valeur à mon instance,\r\n\t// \"this.setPassword()\" me permet de hasher la valeur.\r\n\tthis.setPassword = function (value, hashFunction) {\r\n\t\tvalue = (new String(value)).toString();\r\n\t\tif (typeof hashFunction != 'function') {\r\n\t\t\tthis.password = value;\r\n\t\t} else {\r\n\t\t\tthis.password = hashFunction(value); // La valeur attribuée sera hashée comme 'hashFunction' l'aura décidée.\r\n\t\t}\r\n\t}\r\n\r\n\t// Les Setters nous permettent donc avant stockage d'exercer un certain nombre de contrôles ou transformations à la valeur passée.\r\n\t// La valeur reste alors conservée telle qu'elle a été modifiée et non telle qu'elle a été envoyée.\r\n};\r\nAccount.nbrOfAccount = 0;</code></pre>\r\n\r\n<p class=\"eye-catching\">Note : <samp>this</samp>, à l'intérieur des méthodes, fait bien référence à une instance de « Account » car il fait référence au contexte d'exécution de l'instance. Comme expliqué plus tôt, il faudrait l'appeler avec le mot clé <samp>new</samp> pour que this fasse référence à la méthode en elle-même (ce qui ne sert à rien).</p>\r\n\r\n<p class=\"highlighting\">Petit scénario de test</p>\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">// Ayons un peu d'imagination !\r\n\r\n// \"md5(value)\" est une fonction de hash qui existe plus haut dans mon code. \r\n// Elle hash la chaîne \"value\" en md5 pour empêcher de connaître le mot de passe tout en sachant vérifier si il est bon.\r\n\r\n// \"isEmail(value)\" est une fonction qui existe plus haut. \r\n// Elle vérifie que \"value\" soit un email valide. Si ce n'est pas le cas elle renvoi une erreur.\r\n\r\n/* ... */\r\n\r\nvar bruno = new Account(); // Si les paramètres ne sont pas passés, \"this.email\" et \"this.password\" sont de type Undefined.\r\nbruno.setEmail(\"COUCOU\");\r\nbruno.setPassword(\"bépoB\");\r\nconsole.log(bruno.email); // renvoi \"COUCOU\".\r\nconsole.log(bruno.password); // renvoi \"bépoB\" (le mot de passe a été passé en clair).\r\nconsole.log(bruno.getEmail()); // renvoi \"coucou\" (getEmail renvoi en minuscule).\r\nconsole.log(bruno.getPassword(md5)); // renvoi \"88255bfff0707a085e2f3faa5aa0d8cc\".\r\n\r\nvar magalie = new Account();\r\n// magalie.setEmail(\"COUCOU\", isEmail); // error, car ce n'est pas un email.\r\nmagalie.setPassword(\"AzertyM\", md5);\r\nconsole.log( magalie.password ); // renvoi \"237e4d6319a517c12bfbc8dc4c9c4fa4\" (la valeur est transformée avant stockage).\r\nconsole.log( magalie.getPassword() ); // renvoi \"237e4d6319a517c12bfbc8dc4c9c4fa4\".\r\nconsole.log( magalie.getPassword(md5) ); // renvoi \"eb20d719c7709e19a31936e36753244a\" (le md5 de 237e4d6319a517c12bfbc8dc4c9c4fa4).\r\n\r\nmagalie.email = 17;\r\n// console.log( magalie.getEmail() ); // error, on nous dit que \"toLowerCase()\" n'existe pas sur 17.</code></pre>\r\n\r\n<p>Les Getters et Setters vont nous être d'une grande utilité comme vous avez pu le constater cependant, tout ce travail est mis en l'air puisque l'on peut (les développeurs) passer directement par <samp>this.email</samp> par exemple (ligne 26 du scénario) et attribuer des valeurs sans vérification.</p>\r\n\r\n<p>On va donc privatiser les propriétés comme suit :</p>\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">var Account = function (email, password) {\r\n\tvar \r\n\t\tpublics = this, // On attache this à publique pour utiliser un mot avec du sens qu'en on associe les variables au contexte d'exécution.\r\n\t\tprivates = {}; // On créé un objet conteneur uniquement visible dans la fonction et ses sous fonctions. Pour rester cohérent, on l'appel privates.\r\n\t\r\n\t/*** Variables privées. ***/\r\n\tprivates.email = email; // Cette propriété est attachée à privates, elle n'est donc pas accessible de l'extérieur.\r\n\tprivates.password = password;\r\n\t\r\n\t/*** Variables statiques. ***/\r\n\tAccount.nbrOfAccount = (typeof Account.nbrOfAccount != 'undefined') ? Account.nbrOfAccount + 1 : 1;\r\n\r\n\t/*** Méthodes publiques. ***/\r\n\tpublics.getEmail = function () { // Cette méthode est attachéé à publics, elle est donc accessible de l'extérieur.\r\n\t\treturn privates.email.toLowerCase(); // \"privates.email\" est accessible car une méthode fait partie du contexte d'exécution de son constructeur.\r\n\t}\r\n\tpublics.setEmail = function (value, isAnEmailFunction) {\r\n\t\tvalue = (new String(value)).toString();\r\n\t\tif (typeof isAnEmailFunction != 'function') {\r\n\t\t\tprivates.email = value;\r\n\t\t} else {\r\n\t\t\tprivates.email = isAnEmailFunction(value);\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublics.getPassword = function (hashFunction) {\r\n\t\tif (typeof hashFunction != 'function') {\r\n\t\t\treturn privates.password;\r\n\t\t} else {\r\n\t\t\treturn hashFunction(privates.password);\r\n\t\t}\r\n\t}\r\n\tpublics.setPassword = function (value, hashFunction) {\r\n\t\tvalue = (new String(value)).toString();\r\n\t\tif (typeof hashFunction != 'function') {\r\n\t\t\tprivates.password = value;\r\n\t\t} else {\r\n\t\t\tprivates.password = hashFunction(value);\r\n\t\t}\r\n\t}\r\n};\r\nAccount.nbrOfAccount = 0;</code></pre>\r\n\r\n<p>En n'associant plus les propriétés <samp>email</samp> et <samp>password</samp> à <samp>this</samp> mais seulement à une simple variable interne (ligne 5), elles ne sont plus accessibles de l'extérieur.</p>\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">var bruno = new Account();\r\nbruno.setEmail(\"bruno.lesieur@gmail.com\");\r\nconsole.log(bruno.email); // renvoi \"undefined\".\r\nconsole.log(bruno.getEmail()); // renvoi \"bruno.lesieur@gmail.com\".\r\n\r\nbruno.email = 17;\r\nconsole.log(bruno.getEmail()); // renvoi \"bruno.lesieur@gmail.com\".\r\n\r\nconsole.log(Account.nbrOfAccount); // renvoi 1.</code></pre>\r\n\r\n<p class=\"eye-catching\">Note : le fait d'utiliser <samp>publics</samp> au lieu de <samp>this</samp> ou même d'attacher des variables en propriété à <samp>privates</samp> n'est absoluement pas obligatoire. Cela sert dans notre exemple à bien différencier ce qui est publique de ce qui est privé.</p>\r\n\r\n<div class=\"best-practice\">\r\n\t<div class=\"title\">Une classe acceptable</div>\r\n\t<div class=\"content\">\r\n\t\r\n\t<p>Un dernier problème reste à régler. Si je passe non pas par <samp>setEmail</samp> ou <samp>setPassword</samp> mais directement par mon constructeur, je ne pourrais pas par exemple vérifier que l'email est bon. Il suffit alors de ne plus associer les propriétés aux variables privées directement mais en passant par les Setters eux-mêmes dans le constructeur.</p>\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">var Account = function (email, password) {\r\n\tvar \r\n\t\tpublics = this,\r\n\t\tprivates = {};\r\n\t\r\n\t// Je n'assigne plus directement les propriétés sous peine de devoir réécrire les contrôles, ou ne pas en avoir du tout.\r\n\t\r\n\t/*** Variables/Méthodes statiques. ***/\r\n\tAccount.nbrOfAccount = (typeof Account.nbrOfAccount != 'undefined') ? Account.nbrOfAccount + 1 : 1;\r\n\r\n\t/*** Méthodes publiques. ***/\r\n\tpublics.getEmail = function () {\r\n\t\treturn privates.email.toLowerCase();\r\n\t}\r\n\tpublics.setEmail = function (value, isAnEmailFunction) {\r\n\t\tvalue = (new String(value)).toString();\r\n\t\tif (typeof isAnEmailFunction != 'function') {\r\n\t\t\tprivates.email = value;\r\n\t\t} else {\r\n\t\t\tprivates.email = isAnEmailFunction(value);\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublics.getPassword = function (hashFunction) {\r\n\t\tif (typeof hashFunction != 'function') {\r\n\t\t\treturn privates.password;\r\n\t\t} else {\r\n\t\t\treturn hashFunction(privates.password);\r\n\t\t}\r\n\t}\r\n\tpublics.setPassword = function (value, hashFunction) {\r\n\t\tvalue = (new String(value)).toString();\r\n\t\tif (typeof hashFunction != 'function') {\r\n\t\t\tprivates.password = value;\r\n\t\t} else {\r\n\t\t\tprivates.password = hashFunction(value);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/*** Constructeur ***/\r\n\t\r\n\t// À la place je fais appel directement aux Setters dans ma classe.\r\n\t// Je fais appel à eux après qu'ils aient été définis pour éviter les erreurs.\r\n\t// Je m'aperçois que je ne peux pas passer de fonction md5 à \"setPassword\" de cette manière.\r\n\t// Rien ne m'empêche de modifier les paramètres du constructeur pour permettre de le faire passer par là.\r\n\t\r\n\tif (email) {\r\n\t\tpublics.setEmail(email); // Je vérifie que la construction est bonne pour le paramètre \"email\".\r\n\t}\r\n\tif (password) {\r\n\t\tpublics.setPassword(password); // Je vérifie que la construction est bonne pour le paramètre \"password\".\r\n\t}\r\n};\r\nAccount.nbrOfAccount = 0;</code></pre>\r\n\t</div>\r\n</div>\r\n\r\n<h4>Getters et Setters rassemblés et chaînage à la jQuery</h4>\r\n\r\n<p>Utiliser un Getter et un Setter distinct est peut-être ce que vous avez toujours fait, mais pourquoi ne pas utiliser la même fonction pour attribuer une valeur ou la retourner ? Pure folie me dites-vous ? Avez-vous entendu parler d'une librairie se nommant jQuery ? Peut-être Prototype ou Mootools ? Bon, ça vous dit peut-être rien, mais c'est exactement ce qu'elles font.</p>\r\n<p>Voici le principe des Getters et Setters tout en un, ce qui permet le chaînage.</p>\r\n<ul>\r\n\t<li>Si je dois manipuler la propriété privée \"email\", je le fais via la fonction publique \"email()\".</li>\r\n\t<li>Si je veux retourner la propriété \"email\", j'appel \"email()\" sans arguments.</li>\r\n\t<li>Si je veux attribuer une valeur à \"email\", j'appel \"email(value)\" avec pour \"value\" la valeur que je veux assigner.</li>\r\n\t<li>Quand j'attribue une valeur, au lieu que ma fonction ne retourne rien, elle retourne l'objet qui contient \"email\". Cela permet le chaînage.</li>\r\n</ul>\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">var Account = function (email, password) {\r\n\tvar \r\n\t\tpublics = this,\r\n\t\tprivates = {};\r\n\t\r\n\t/*** Variables/Méthodes statiques. ***/\r\n\tAccount.nbrOfAccount = (typeof Account.nbrOfAccount != 'undefined') ? Account.nbrOfAccount + 1 : 1;\r\n\r\n\t/*** Méthodes publiques. ***/\r\n\t\r\n\t// \"getEmail\" et \"setEmail\" deviennent une seule et même fonction, \"email\".\r\n\t// Nous pouvons nous permettre de l'appeler comme cela, car \"email\" n'existe pas.\r\n\t// Effectivement, maintenant que \"email\" est associée à \"privates\", ce nom est libre.\r\n\t\r\n\tpublics.email = function (value, isAnEmailFunction) {\r\n\t\r\n\t\t// On vérifie que la fonction est utilisée comme un Getter.\r\n\t\t// Pour en être sûr, il suffit de vérifier si la fonction n'a aucun paramètre.\r\n\t\t// On vérifie donc que \"value\" a comme type Undefined.\r\n\t\r\n\t\tif (typeof value == 'undefined') {\r\n\t\t\treturn privates.email.toLowerCase();\r\n\t\t\t\r\n\t\t// Cependant, si une valeur est passée, c'est qu'on utilise la fonction comme un Setter.\r\n\t\t// Dans ces cas-là, on y met la partie Setter.\r\n\t\t\t\r\n\t\t} else {\r\n\t\t\tvalue = (new String(value)).toString();\r\n\t\t\tif (typeof isAnEmailFunction != 'function') {\r\n\t\t\t\tprivates.email = value;\r\n\t\t\t} else {\r\n\t\t\t\tprivates.email = isAnEmailFunction(value);\r\n\t\t\t}\r\n\t\t\treturn publics;\r\n\t\t}\r\n\t}\r\n\t\r\n\t// Idem par ici.\r\n\t\r\n\tpublics.password = function (value, hashFunction) {\r\n\t\r\n\t\t// Cependant, comme notre Getter peut prendre en premier paramètre une fonction,\r\n\t\t// on vérifie que \"value\" ne soit pas de type Function (Object donc), car si c'est le cas,\r\n\t\t// nous réclamons tout de même le Getter.\r\n\t\r\n\t\tif (typeof value == 'undefined' || typeof value == 'function') {\r\n\t\t\t\r\n\t\t\t// Nous passons donc \"value\" à \"hashFunction\" puisqu'en réalité lui n'a pas été demandé en mode \"Getter\". \r\n\t\t\thashFunction = value;\r\n\t\t\r\n\t\t\tif (typeof hashFunction != 'function') {\r\n\t\t\t\treturn privates.password;\r\n\t\t\t} else {\r\n\t\t\t\treturn hashFunction(privates.password);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvalue = (new String(value)).toString();\r\n\t\t\tif (typeof hashFunction != 'function') {\r\n\t\t\t\tprivates.password = value;\r\n\t\t\t} else {\r\n\t\t\t\tprivates.password = hashFunction(value);\r\n\t\t\t}\r\n\t\t\treturn publics;\r\n\t\t}\r\n\t}\r\n\t\r\n\t/*** Constructeur ***/\r\n\tif (email) {\r\n\t\tpublics.email(email);\r\n\t}\r\n\tif (password) {\r\n\t\tpublics.password(password);\r\n\t}\r\n};\r\nAccount.nbrOfAccount = 0;</code></pre>\r\n\r\n<p>Avec un exemple d'utilisation du chainage :</p>\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">console.log((new Account()).email(\"BRUNO@EMAIL.ICI\").password(\"bépoB\").email()); // renvoi \"bruno@email.ici\".</code></pre>\r\n\r\n<p class=\"eye-catching\">Note : pour faciliter la compréhension de la suite de notre article, nous allons retirer le support de \"isAnEmailFunction\" et de \"hashFunction\" dans nos exemples.</p>\r\n\r\n<h3>L'héritage de classe en JavaScript</h3>\r\n\r\n<p>On ne peut pas parler de classe sans parler d'héritage. Il n'existe pas plus que de réelle classe de quoi les faire hériter. Pourtant, le mécanisme de polymorphisme existe bien en JavaScript et nous allons reproduire ce que l'on peut appeler de l'héritage. L'idée c'est qu'une classe fille possède l'intégralité des méthodes publiques de sa classe mère en plus de ses propres méthodes. Voyons ensemble un moyen de faire de l'héritage de classe à partir du pattern de la partie précédente (et toujours sans prototypage).</p>\r\n\r\n<p>Nous allons créer une classe « User ». Un user est un « Account » amélioré qui possède son propre nom et pourquoi pas diverses informations relatives à son état d'utilisateur (nom, prénom, date de naissance...). Nous allons juste ajouter une nouvelle propriété : le <span class=\"highlighting\">username</span>.</p>\r\n\r\n<p class=\"highlighting\">Classe héritée</p>\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">// Créons un objet \"User\" prennant en paramètre la même chose que \"Account\".\r\n// Cependant, \"username\" est un paramètre en plus spécifique à \"User\". \r\nvar User = function (username, password, email /* , firstname, lastname, birthdate */) {\r\n\tvar \r\n\t\tpublics = this,\r\n\t\tprivates = {};\r\n\t\r\n\t/****************/\r\n\t/*** Héritage ***/\r\n\t\r\n\t// Voici ce qui nous permet de faire de l'héritage, la méthode \"call\" (ou \"apply\") de tous les objets Function.\r\n\t// Normalement, seul \"Account\" peut créer un \"Account\", c'est-à-dire un contexte d'exécution qu'il s'auto-associe.\r\n\t// Cela lui permet de disposer de toutes les méthodes publiques qu'on lui a assigné.\r\n\t\r\n\t// Mais la méthode \"call\" permet de lier le contexte d'exécution instancié de la fonction appelante (ici celui de \"Account\")\r\n\t// au contexte d'exécution d'une autre fonction (ici \"this\", c'est-à-dire celui de \"User\").\r\n\t// Le premier paramètre est donc \"this\" et les autres sont ceux qu'aurait normalement reçu le constructeur de \"Account\".\r\n\tAccount.call(this, email, password);\r\n\t\r\n\t// L'héritage multiple est donc ici permis, nous pourrions associer et une classe \"Account\", \r\n\t// et un classe \"Person\" pour former le contexte d'exécution rempli de la toute nouvelle classe \"User\".\r\n\t// Ainsi User = Account + Person.\r\n\t\r\n\t// Person.call(this, firstname, lastname, birthdate);\r\n\r\n\t/*** Variables/Méthodes statiques. ***/\r\n\tUser.nbrOfUser = (typeof User.nbrOfUser != 'undefined') ? User.nbrOfUser + 1 : 1;\r\n\r\n\t/*** Méthodes publiques. ***/\r\n\tpublics.username = function (value) {\r\n\t\tif (typeof value == 'undefined') {\r\n\t\t\treturn privates.username;\r\n\t\t} else {\r\n\t\t\tprivates.username = value;\r\n\t\t\treturn publics;\r\n\t\t}\r\n\t}\r\n\t\r\n\t/*** Constructeur ***/\t\t\r\n\tif (username) {\r\n\t\tpublics.username(username);\r\n\t}\r\n};\r\nUser.nbrOfUser = 0;</code></pre>\r\n\r\n<p class=\"highlighting\">Tests</p>\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">var bruno = (new Account())\r\n\t.email(\"bruno@email.ici\")\r\n\t.password(\"bépoB\");\r\n\r\nvar magalie = (new User())\r\n\t.username(\"Magalie\")\r\n\t.password(\"AzertyM\")\r\n\t.email(\"magalie@email.ici\");\r\n\r\nconsole.log(bruno.email()); // renvoi \"bruno@email.ici\".\r\nconsole.log(magalie.email()); // renvoi \"magalie@email.ici\".\r\n// console.log(bruno.username()); // error\r\nconsole.log(magalie.username());  // renvoi \"Magalie\".\r\nconsole.log(Account.nbrOfAccount); // renvoi 2 (puisqu'un \"User\" est également un \"Account\").\r\nconsole.log(User.nbrOfUser); // renvoi 1.</code></pre>\r\n\r\n<p>Vous pouvez trouver gênant que <samp>nbrOfAccount</samp> s'incrémente quand même lors de la création d'un nouveau « User ». Est-ce que vous vous rappelez de <samp>(this instanceof Account)</samp> sensé n'exécuter le code que si <samp>this</samp> s'attache à un contexte d'exécution émanent d'une fonction « Account » uniquement ? Et bien sachez que son défaut (ou son avanbtage, c'est au choix) est qu'il interdit l'exécution de code dans le contexte d'exécution global mais également dans les classes héritées.</p>\r\n\r\n<p>Nous pouvons dès lors ajouter une variable statique à « Account » :</p>\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">var Account = function (email, password) {\r\n\t/* ... */\r\n\r\n\t/*** Variables/Méthodes statiques. ***/\r\n\tAccount.nbrOfAccount = (typeof Account.nbrOfAccount != 'undefined') ? Account.nbrOfAccount + 1 : 1;\r\n\t\r\n\t// Ajout d'une fonction pour ne compter que les objets non hérités.\r\n\tAccount.nbrOfRealAccount = (typeof Account.nbrOfRealAccount != 'undefined') ? ((this instanceof Account) ? Account.nbrOfRealAccount + 1 : Account.nbrOfRealAccount) : 1;\r\n\t\r\n\t/* ... */\r\n};\r\nAccount.nbrOfAccount = 0;\r\nAccount.nbrOfRealAccount = 0;</code></pre>\r\n\r\n<h2>Héritage par délégation ou prototypal</h2>\r\n\r\n<p>La partie précédente, bien que fonctionnelle, ne va pas nous permettre d'aller plus loin dans notre exercice de simuler le comportement de classe en JavaScript. La réelle question c'est : est-ce réellement important ? Et si plutôt que de nous focaliser sur la façon de faire ressembler le système à celui des autres langages nous tirions plutôt partie des mécanismes en place pour faire mieux que ça ? Je vais vous présenter le prototypage en JavaScript.</p>\r\n\r\n<h3>Variable privées ou prototypes, il faut choisir</h3>\r\n\r\n<p>Actuellement, nous créons nos méthodes au sein du constructeur (faisant office de classe). Cela est possible mais il existe le mécanisme de prototypage qui nous permet de réaliser cela de manière plus performante. Cependant, il va y avoir des changements à opérer, notamment celui de perdre le bénéfice d'une vrai encapsulation privée.</p>\r\n\r\n<div class=\"worst-practice\">\r\n\t<div class=\"title\">L'encapsulation privée n'est pas possibe avec le prototypage</div>\r\n\t<div class=\"content\">\r\n\t\r\n\t<p>Utilisons le prototypage avec notre <span class=\"useless\">classe</span> constructeur « Account »</p>\r\n\t\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">var Account = function (email, password) {\r\n\tvar \r\n\t\tpublics = this,\r\n\t\tprivates = {};\r\n\t\r\n\t/*** Variables/Méthodes statiques. ***/\r\n\tAccount.nbrOfAccount = (typeof Account.nbrOfAccount != 'undefined') ? Account.nbrOfAccount + 1 : 1;\r\n\tAccount.nbrOfRealAccount = (typeof Account.nbrOfRealAccount != 'undefined') ? ((this instanceof Account) ? Account.nbrOfRealAccount + 1 : Account.nbrOfRealAccount) : 1;\r\n\t\r\n\t// Nous sortons les méthodes publiques du corps du constructeur.\r\n\t// Cela afin de les associer par la voix du prototype.\r\n\t// Nous verrons plus loin en quoi cela est différent.\r\n\t\r\n\t/*** Constructeur ***/\r\n\tif (email) {\r\n\t\tpublics.email(email);\r\n\t}\r\n\tif (password) {\r\n\t\tpublics.password(password);\r\n\t}\r\n};\r\nAccount.nbrOfAccount = 0;\r\nAccount.nbrOfRealAccount = 0;\r\n\r\n/*** Méthodes publiques. ***/\r\n\r\n// Nous accrochons les méthodes au prototype de \"Account\".\r\n// Et le premier constat est que la variable \"privates\" n'existe plus dans notre prototype.\r\n// Nous pourrions la redéfinir dans la fonction elle-même...\r\n\r\nAccount.prototype.email = function (value) {\r\n\r\n\t// Vérifions si \"privates\" est conservée dans un contexte d'exécution.\r\n\tconsole.log(privates);\r\n\r\n\t// Si \"privates\" n'existe pas on le créé, sinon on l'utilise.\r\n\tvar privates = privates || {};\r\n\r\n\tif (typeof value == 'undefined') {\r\n\r\n\t\t// Que nous renvoi \"privates.email\" ?\r\n\t\tconsole.log(privates.email);\t\t\r\n\t\t\r\n\t\treturn privates.email.toLowerCase();\r\n\t} else {\r\n\t\tprivates.email = (new String(value)).toString();\r\n\r\n\t\t// Que nous renvoi \"privates.email\" ?\r\n\t\tconsole.log(privates.email);\r\n\r\n\t\t// Transformation de \"publics\" en \"this\" car publics n'existe plus.\r\n\t\treturn this;\r\n\t}\r\n}\r\nAccount.prototype.password = function (value) {\r\n\tvar privates = privates || {};\r\n\r\n\tif (typeof value == 'undefined') {\r\n\t\treturn privates.password;\r\n\t} else {\r\n\t\tprivates.password = (new String(value)).toString();\r\n\t\treturn this;\r\n\t}\r\n}\r\n\r\nvar bruno = (new Account())\r\n\t.email(\"bruno@email.ici\")\r\n\t.password(\"bépoB\");\r\n\r\nconsole.log(bruno.email()); // error</code></pre>\r\n\t\t<p>En exécutant la ligne 66 tout ce passe bien. Quand la fonction <samp>email()</samp> est appelée avec un paramètre ligne 67, on passe dans le code ligne 34. La variable <samp>privates</samp> est alors undefinded ce qui est normal. Puis on passe par la ligne 37 qui nous créé notre variable <samp>privates</samp> et par la ligne 49 qui nous affiche bien notre valeur. Tout baigne ! Le problème viens quand on réclame cette valeur à la ligne 70. On pourrait s'attendre à ce que cette fois-ci la ligne 34 nous renvoi « { email: \"bruno@email.ici\" } » mais non, elle retourne de nouveau « undefined ». Ce qui fait qu'à la ligne 37 on recréé de nouveau la variable « privates », que la ligne 42 nous affiche « undefined » et qu'on nous crache à la figure ligne 44 car <samp>toLowerCase()</samp> n'est pas une méthode du type Undefined.</p>\r\n\t\r\n\t</div>\r\n</div>\r\n\r\n<p>Une méthode attachée à un Objet par son prototype n'a :</p>\r\n<ul>\r\n\t<li>pas accès aux variables définis dans le constructeur,</li>\r\n\t<li>et n'a pas de contexte d'exécution personnel auquel se référer lui permettant de conserver des valeurs après la fin de l'exécution de la fonction.</li>\r\n</ul>\r\n<p>Cette limitation est dû au fonctionnement même du prototypage. En réalité les méthodes attachées au prototype d'un objet n'appartiennent pas à l'instance de l'objet une fois celui-ci appelé avec <samp>new</samp> mais peuvent tout de même manipuler les propriétés et méthodes de l'instance qui sont attachées à <samp>this</samp> et sont elles-mêmes disponible via <samp>this</samp>. Cela signifie que les méthodes ne sont pas « dupliquées » à chaque instance mais seulement appelées par elle et référencées une unique fois dans le prototype.</p>\r\n\r\n<ul>\r\n\t<li>C'est un gain indéniable de performance et de place mémoire occupée par les objets.</li>\r\n\t<li>Cela permet de définir ou redéfinir des méthodes dans des fichiers séparés.</li>\r\n\t<li class=\"warning\">Mais cela limite l'utilisation des variables privées.</li>\r\n</ul>\r\n\r\n<h3>De fausses variables privées</h3>\r\n\r\n<p>Une solution simple est donc d'attacher les variables anciennement privées à <samp>this</samp> de manière à les rendre disponibles à l'utilisation par les prototypes. Le problème est bien évidemment qu'elles pourront être lues ou assignées sans passer par leurs méthodes respectives. C'est un problème que nous allons limiter en indiquant qu'elles sont privées (bien qu'elles ne le soient pas). Il sera convenu avec vos développeurs qu'il ne faut jamais toucher à ces variables en dehors du constructeur et des prototypes.</p>\r\n\r\n<div class=\"best-practice\">\r\n\t<div class=\"title\">Objet : constructeur + prototypes</div>\r\n\t<div class=\"content\">\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">var Account = function (email, password) {\r\n\t\r\n\t// Voici notre fausse variable privée.\r\n\t// Elle est bien accessible en passant par \r\n\t// l'objet __private qui est accessible par une instance.\r\n\t// Mais vous vous l'interdirez.\r\n\t// Pour prévenir l'écrasement de this.__privates, on test d'abords son existence.\r\n\t \r\n\tthis.__privates = this.__privates || {};\r\n\t\r\n\t/*** Constructeur ***/\r\n\tif (email) {\r\n\t\tthis.email(email);\r\n\t}\r\n\tif (password) {\r\n\t\tthis.password(password);\r\n\t}\r\n\r\n\t/*** Variables/Méthodes statiques. ***/\r\n\tAccount.nbrOfAccount = (typeof Account.nbrOfAccount != 'undefined') ? Account.nbrOfAccount + 1 : 1;\r\n\tAccount.nbrOfRealAccount = (typeof Account.nbrOfRealAccount != 'undefined') ? ((this instanceof Account) ? Account.nbrOfRealAccount + 1 : Account.nbrOfRealAccount) : 1;\r\n\t\t\r\n};\r\nAccount.nbrOfAccount = 0;\r\nAccount.nbrOfRealAccount = 0;\r\n\r\n/*** Méthodes publiques. ***/\r\nAccount.prototype.email = function (value) {\r\n\tvar privates = this.__privates; // On crée un raccourci aux variables privées.\r\n\tif (typeof value == 'undefined') {\r\n\t\treturn privates.email.toLowerCase();\r\n\t} else {\r\n\t\tprivates.email = (new String(value)).toString();\r\n\t\treturn this;\r\n\t}\r\n}\r\nAccount.prototype.password = function (value) {\r\n\tvar privates = this.__privates; // On crée un raccourci aux variables privées.\r\n\tif (typeof value == 'undefined') {\r\n\t\treturn privates.password;\r\n\t} else {\r\n\t\tprivates.password = (new String(value)).toString();\r\n\t\treturn this;\r\n\t}\r\n}</code></pre>\r\n\t</div>\r\n</div>\r\n\r\n<h3>Héritage de prototype</h3>\r\n\r\n<p>Occupons nous à présent du cas de « User ». Les constructeurs sont bien hérités avec notre appel à <samp>call</samp> mais quand est-il des prototypes ? Et bien pour simuler un héritage il va falloir « recopier » l'intégralité des prototypes de « Account » dans « User » en prenant soin de ne jamais écraser un prototype portant le même nom dans la classe héritière.</p>\r\n\r\n<div class=\"best-practice\">\r\n\t<div class=\"title\">Héritage : constructeurs + prototypes</div>\r\n\t<div class=\"content\">\r\n\t\r\n\t<p class=\"highlighting\">Héritage (multiple)</p>\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">var User = function (username, password, email /* , firstname, lastname, birthdate */) {\r\n\tthis.__privates = this.__privates || {};\r\n\r\n\t/*** Héritage ***/\r\n\r\n\t// Ici on recopie l'intégralité des prototypes de \"Account\" dans \"User\".\r\n\t// Il faut le faire avant l'appel de \"Account.call()\" sinon arrivé à \"this.email()\"\r\n\t// dans le constructeur \"Account\" ça plantera car \"User\" n'aura pas encore le prototype de \"email()\".\r\n\t\r\n\t// On parcourt tous les prototypes de \"Account\".\r\n\tfor (var p in Account.prototype) {\r\n\t\t// On empèche d'écraser un prototype qu'on aurait volontairement surchargé pour le constructeur fils.\r\n\t\tif (typeof User.prototype[p] != 'function') {\r\n\t\t\tUser.prototype[p] = Account.prototype[p];\t\t\t\t\r\n\t\t}\r\n\t}\r\n\tAccount.call(this, email, password);\r\n\t\r\n\t/*********************/\r\n\t/* Héritage multiple */\r\n\t\r\n\t// Nous pourrions également hériter d'un constructeur \"Person\" ici et obtenir un objet contenant les prototypes des deux constructeurs \"Account\" et \"Person\".\r\n\t/*\r\n\t\tfor (var p in Person.prototype) {\r\n\t\t\tif (typeof User.prototype[p] != 'function') {\r\n\t\t\t\tUser.prototype[p] = Person.prototype[p];\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t\tPerson.call(this, firstname, lastname, birthdate);\r\n\t*/\r\n\t\t\r\n\t/*** Variables/Méthodes statiques. ***/\r\n\tUser.nbrOfUser = (typeof User.nbrOfUser != 'undefined') ? User.nbrOfUser + 1 : 1;\r\n\t\r\n\t/*** Constructeur ***/\t\t\r\n\tif (username) {\r\n\t\tthis.username(username);\r\n\t}\r\n};\r\nUser.nbrOfUser = 0;\r\n\r\n/*** Méthodes publiques. ***/\r\nUser.prototype.username = function (value) {\r\n\tvar privates = this.__privates;\r\n\tif (typeof value == 'undefined') {\r\n\t\treturn privates.username;\r\n\t} else {\r\n\t\tprivates.username = value;\r\n\t\treturn this;\r\n\t}\r\n}</code></pre>\r\n\t<p class=\"highlighting\">Tests globaux</p>\r\n\t\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">console.log(\r\n\t(new Account()).email(\"bruno@email.ici\").password(\"bépoB\").email() // renvoi \"bruno@email.ici\".\r\n);\r\nvar magalie = new User(\"Magalie\", \"AzertyM\", \"magalie@email.ici\");\r\nconsole.log(magalie.email()); // renvoi \"magalie@email.ici\".\r\n\r\nconsole.log(magalie instanceof Account); // renvoi true.\r\nconsole.log(magalie instanceof User); // renvoi true.\r\n\r\nconsole.log(Account.nbrOfAccount); // renvoi 2.\r\nconsole.log(Account.nbrOfRealAccount); // renvoi 1.\r\nconsole.log(User.nbrOfUser); // renvoi 1.</code></pre>\r\n\t</div>\r\n</div>\r\n\r\n<p>Pour finir, je vous offre un moyen de complètement prototyper votre classe mais qui vous interdira de l'héritage multiple.</p>\r\n\r\n<div class=\"correct-practice\">\r\n\t<div class=\"title\">Création complète par prototype</div>\r\n\t<div class=\"content\">\r\n\t\r\n\t<p class=\"highlighting\">Code</p>\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">/********************/\r\n/** Account Object **/\r\n/********************/\r\nvar Account = function (email, password) {\r\n\tthis.init(email, password);\r\n\r\n\t/*** Variables/Méthodes statiques. ***/\r\n\tAccount.nbrOfAccount = (typeof Account.nbrOfAccount != 'undefined') ? Account.nbrOfAccount + 1 : 1;\r\n\tAccount.nbrOfRealAccount = (typeof Account.nbrOfRealAccount != 'undefined') ? ((this instanceof Account) ? Account.nbrOfRealAccount + 1 : Account.nbrOfRealAccount) : 1;\r\n}\r\nAccount.nbrOfAccount = 0;\r\nAccount.nbrOfRealAccount = 0;\r\n\r\n/*** Constructeur ***/\r\nAccount.prototype.init = function (email, password) {\r\n\tthis.__privates = this.__privates || {};\r\n\t\r\n\tif (email) {\r\n\t\tthis.email(email);\r\n\t}\r\n\tif (password) {\r\n\t\tthis.password(password);\r\n\t}\r\n};\r\n\r\n/*** Méthodes ***/\r\nAccount.prototype.email = function (value) {\r\n\tvar privates = this.__privates;\r\n\tif (typeof value == 'undefined') {\r\n\t\treturn privates.email.toLowerCase();\r\n\t} else {\r\n\t\tprivates.email = (new String(value)).toString();\r\n\t\treturn this;\r\n\t}\r\n}\r\nAccount.prototype.password = function (value) {\r\n\tvar privates = this.__privates;\r\n\tif (typeof value == 'undefined') {\r\n\t\treturn privates.password;\r\n\t} else {\r\n\t\tprivates.password = (new String(value)).toString();\r\n\t\treturn this;\r\n\t}\r\n}\r\n\r\n/*****************/\r\n/** User Object **/\r\n/*****************/\r\nvar User = function (username, password, email) {\r\n\tthis.init(username, password, email);\r\n\t\r\n\t// Variables/Méthodes statiques. //\r\n\tUser.nbrOfUser = (typeof User.nbrOfUser != 'undefined') ? User.nbrOfUser + 1 : 1;\r\n};\r\nUser.nbrOfUser = 0;\r\n\r\n/*** Passage de prototype ***/\r\nUser.prototype = new Account();\r\nUser.prototype.super = User.prototype.init;\r\n\r\n/*** Constructeur ***/\r\nUser.prototype.init = function (username, password, email) {\r\n\tthis.super(email, password);\r\n\tthis.__privates = this.__privates || {};\r\n\t\t\r\n\tif (username) {\r\n\t\tthis.username(username);\r\n\t}\r\n};\r\n\r\n/*** Méthodes ***/\r\nUser.prototype.username = function (value) {\r\n\tvar privates = this.__privates;\r\n\tif (typeof value == 'undefined') {\r\n\t\treturn privates.username;\r\n\t} else {\r\n\t\tprivates.username = value;\r\n\t\treturn this;\r\n\t}\r\n}</code></pre>\r\n\r\n<p class=\"highlighting\">Tests</p>\r\n\t\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">console.log(\r\n\t(new Account()).email(\"bruno@email.ici\").password(\"bépoB\").email() // renvoi \"bruno@email.ici\".\r\n);\r\nvar magalie = new User(\"Magalie\", \"AzertyM\", \"magalie@email.ici\");\r\nconsole.log(magalie.email()); // renvoi \"magalie@email.ici\".\r\n\r\nconsole.log(magalie instanceof Account); // renvoi true.\r\nconsole.log(magalie instanceof User); // renvoi true.\r\n\r\nconsole.log(Account.nbrOfAccount); // renvoi 2.\r\nconsole.log(Account.nbrOfRealAccount); // renvoi 1.\r\nconsole.log(User.nbrOfUser); // renvoi 1.</code></pre>\r\n\t</div>\r\n</div>\r\n\r\n<h2>Pour aller plus loin</h2>\r\n\r\n<p>Je suis certain que ces patterns sont non exhaustifs et qu'il existe encore bien d'autres variantes pour structurer ses données dans sa partie modèle en JavaScript. Si cela vous a inspiré, que vous-même vous connaissez des astuces pour contourner certaines limitations que j'ai mentionnées ou pour tout autre remarque n'hésitez pas.</p>\r\n\r\n<p>Pour finir, si des points vous ont semblé un peu vagues ou que vous voulez en savoir plus sur les Prototypes ainsi que tous les mécanismes qui ont permis de réaliser ces pseudo-classes, je vous invite à lire <a href=\"http://fgribreau.com/articles/voyage-au-coeur-de-javascript.html\" title=\"Voyage au coeur de JavaScript\">Voyage au coeur de JavaScript</a> qui est un long article résumant de manière détaillée et concise les mécanismes mis en jeu dans JavaScript.</p>", "dates" : { "published" : "2013-06-01 10:00:00", "updated" : [ "2013-06-01 10:00:00" ] }, "title" : "<span>Classes</span>, <span>héritage</span>, <span>encapsulation</span> <span>vs</span> <span>Prototype</span> en <span>JS</span>", "urn" : "classes-heritage-encapsulation-vs-prototype-en-js" }
{ "_id" : { "$oid" : "530f5f63620731fe86cb71b0" }, "cache" : { "comment" : { "number" : 0 } }, "categories" : [ { "$oid" : "530cc2f27188099a66e9bcec" }, { "$oid" : "5310456355dfd5f7698d48b6" }, { "$oid" : "5310456355dfd5f7698d48bd" }, { "$oid" : "5310456355dfd5f7698d48ba" }, { "$oid" : "530ef6a6789c1a55e4fde0af" } ], "content" : "<p>Je rencontre souvent des personnes se plaignant de problèmes de <samp>z-index</samp> et qui les évitent ou se contente de dire que les <samp>z-index</samp> ça pose problème. Bien souvent le problème vient du fait que le développeur ne s'attend pas à ce que la priorité d'affichage des <samp>z-index</samp> fonctionnent en cascade dans le DOM. Voyez plutôt l'exemple suivant :</p>\r\n\r\n<h2>Un exemple d'utilisation du z-index problématique</h2>\r\n\r\n<div id=\"ex-global\">\r\n\t<div id=\"ex-content\">\r\n\t\tCoucou je suis le contenu principale !<br />\r\n\t\tz-index: 1;\r\n\t\t<div id=\"ex-test\">\r\n\t\t\tCoucou je suis un problème !<br />\r\n\t\t\tz-index: 7777;\r\n\t\t</div>\r\n\t</div>\r\n\t<div id=\"ex-footer\">\r\n\t\t<div>\r\n\t\t\tCoucou je suis le pied de page !<br />\r\n\t\t\tz-index: 2;\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n\r\n<p>Nous observons que la zone avec un z-index de 7777 passe en dessous de la zone avec un z-index de 2. Comment cela est-il possible ? « J'ai des problèmes de z-index ».</p>\r\n\r\n<p>Regardons de plus prêt le code :</p>\r\n\r\n<h3>HTML</h3>\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-html\">&lt;div id=\"content\"&gt;\r\n\tCoucou je suis le contenu principale !&lt;br /&gt;\r\n\tz-index: 1;\r\n\t&lt;div id=\"test\"&gt;\r\n\t\tCoucou je suis un problème !&lt;br /&gt;\r\n\t\tz-index: 7777;\r\n\t&lt;/div&gt;\r\n&lt;/div&gt;\r\n&lt;div id=\"footer\"&gt;\r\n\t&lt;div&gt;\r\n\t\tCoucou je suis le pied de page !&lt;br /&gt;\r\n\t\tz-index: 2;\r\n\t&lt;/div&gt;\r\n&lt;/div&gt;</code></pre>\r\n\r\n<h3>CSS</h3>\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-css\">#content {\r\n\tposition: absolute;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tz-index: 1; /* Le contenu doit s'afficher en arrière plan */\r\n}\r\n#footer  {\r\n\tpadding-top: 100px;\r\n\tmargin: 0 auto;\r\n\twidth: 50%;\r\n}\r\n#footer > div {\r\n\tposition: relative;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tz-index: 2; /* Le contenu s'affiche au-dessus de #content */\r\n}\r\n#test {\r\n\tposition: absolute;\r\n\twidth: 80%;\r\n\theight: 200px;\r\n\tz-index: 7777; /* Le contenu ne s'affiche pas au-dessus de #footer comme attendu... */\r\n\tleft: 10%;\r\n}</code></pre>\r\n\r\n<h2>z-index et priorité d'affichage en cascade dans le DOM</h2>\r\n<p>Tous les éléments dont nous allons parler sont des éléments en <samp>position: relative</samp>, <samp>position: absolute</samp> ou <samp>position: fixed</samp>.</p>\r\n\r\n<h3>Priorité aux éléments frères bas</h3>\r\n<p>On part des éléments les plus hauts dans le DOM et de même niveau (frères). C'est l'élément situé en dessous d'un autre dans le code source qui s'affiche par dessus l'autre.</p>\r\n\r\n<h3>Changer les priorités</h3>\r\n<p>Pour modifier ce comportement on applique un z-index plus grand aux éléments plus haut pour les forcer à passer par dessus.</p>\r\n\r\n<h3>Priorité aux éléments parents</h3>\r\n<p>Quoi qu'il arrive, et peut importe le z-index utilisé, un élément fils d'un élément avec un z-index plus faible qu'un de ses frères ne passera jamais au-dessus de ce frère.</p>\r\n\r\n<h2>Mon conseil</h2>\r\n\r\n<p class=\"highlighting\">Le mieux est de ne pas mélanger l'affichage relatif/absolue/fixe d'éléments fils venant de différent pères eux-mêmes relatifs.</p>", "dates" : { "published" : "2013-06-28 18:11:00", "updated" : [ "2013-06-28 18:11:00" ] }, "style" : "#ex-content {\r\n\t-moz-box-sizing: border-box;\r\n\tbox-sizing: border-box;\r\n\tpadding: 8px;\r\n\tcolor: #ffffff;\r\n\tposition: absolute;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tbackground-color: #800000;\r\n\tz-index: 1;\r\n}\r\n#ex-footer  {\r\n\tpadding-top: 100px;\r\n\tmargin: 0 auto;\r\n\twidth: 50%;\r\n\t-moz-box-sizing: border-box;\r\n\tbox-sizing: border-box;\r\n}\r\n#ex-footer > div {\r\n\tposition: relative;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tbackground-color: #008000;\r\n\tz-index: 2;\r\n\tpadding: 8px;\r\n\t-moz-box-sizing: border-box;\r\n\tbox-sizing: border-box;\r\n\tcolor: #ffffff;\r\n}\r\n#ex-test {\r\n\tposition: absolute;\r\n\twidth: 80%;\r\n\theight: 200px;\r\n\tbackground-color: #000080;\r\n\tz-index: 7777;\r\n\tleft: 10%;\r\n\tpadding: 8px;\r\n\t-moz-box-sizing: border-box;\r\n\tbox-sizing: border-box;\r\n\tcolor: #ffffff;\r\n}\r\n#ex-global {\r\n\theight: 300px;\r\n\tposition: relative;\r\n\tmargin: 16px;\r\n\t-moz-box-sizing: border-box;\r\n\tbox-sizing: border-box;\r\n}", "title" : "<span>Problème</span> de <span>z-index</span> et <span>priorité</span> d'<span>affichage</span>", "urn" : "probleme-de-z-index-et-priorite-d-affichage" }
{ "_id" : { "$oid" : "530f5f63620731fe86cb71b2" }, "cache" : { "comment" : { "number" : 0 } }, "categories" : [ { "$oid" : "5310456355dfd5f7698d48bd" }, { "$oid" : "5310456355dfd5f7698d48ba" }, { "$oid" : "5310456355dfd5f7698d48c5" }, { "$oid" : "5310456355dfd5f7698d48ce" }, { "$oid" : "530ef6a6789c1a55e4fde0af" }, { "$oid" : "5310456355dfd5f7698d48b7" }, { "$oid" : "5310456355dfd5f7698d48b6" }, { "$oid" : "5310456355dfd5f7698d48bb" } ], "content" : "C'est suite à plusieurs conversations m'invitant à ne pas utiliser de multiples balises `h1` dans mes intégrations HTML (et plus récemment une demande « insistante » sur le fait de ne pas le faire) que je me vois forcé de marcher sur les pas de <a href=\"http://www.goetter.fr/\" title=\"Site Raphaël Goetter\">Raphaël Goetter</a> -qui avait <a href=\"http://blog.goetter.fr/articles/mythe-h1-unique-html/\" title=\"Le mythe de l’élément H1 unique en HTML\">déjà abordé le sujet</a>- pour expliquer pourquoi : en plus d'être tout à fait valide, cette pratique est bénéfique.\n\nTout document HTML5 dispose de cloison de contenu ([Sectionneur de contenu](http://www.w3.org/TR/2011/WD-html5-20110525/content-models.html#sectioning-content)) que sont `article`, `aside`, `nav` et `section`. Ces zones de contenu peuvent chacune contenir une balise `header` et `footer` (ne cloisonnant pas elles-mêmes le contenu) et de multiple éléments de titrage ([Titre en HTML](http://www.w3.org/TR/html-markup/h1.html)) allant de `h1` à `h6`.\n\nBien que l'utilisation de plus d'une balise `h1` ai pu rationnellement laisser à débattre (même si techniquement les standards ne l'interdise pas), les recommandations et même l'interdiction d'une telle pratique ne sont plus pertinentes et rationnelles à l'heure du HTML5.\n\n\n\n\n\n## La balise h1 et les balises entêtes h2-h6 ##\n\n\n\n### Que dit la référence HTML ###\n\nLe [W3C], sans parler de HTML5, nous explique [ici](http://www.w3.org/TR/html-markup/h1.html) que : « Les éléments h1 à h6 servent de titre pour les sections auxquelles ils sont rattachés. ». Dans les contraintes additionnelles (là où logiquement nous devrions donc trouver notre interdiction de multiple `h1`) il est seulement mentionné que :\n\n- « L'élément h1 ne doit pas être contenu comme élément enfant d'un élément address. »\n- « L'attribut align sur l'élément h1 est obsolète. Utilisez CSS à la place. »\n\nAucune interdiction n'est donc mentionnée dans cette partie. Ces balises sont autorisés dans [les éléments listés ici](http://www.w3.org/TR/html-markup/common-models.html#common.elem.flow).\n\n [W3C]: http://www.w3.org/TR/html-markup/h1.html\n\n\n\n### Que dit la référence HTML5 ###\n\nLe [W3C] nous explique ([ici](http://www.w3.org/TR/2011/WD-html5-20110525/sections.html#the-section-element)) : « L'élément section représente une zone ou une application générique à un document. Une section, dans ce contexte, est un regroupement de contenu avec une même thématique, et de fait avec des balises d'entêtes. ».\n\nLe [W3C] nous explique également [ici](http://www.w3.org/TR/2011/WD-html5-20110525/sections.html#headings-and-sections) que : « Les éléments `h1–h6` et l'élément `hgroup` sont des éléments d'entêtes. ».\n\n## Exemple donné par le W3C ##\n\nAvant de présenter des exemples tous valide, soulignons que le [W3C] explique : « Les sections peuvent contenir des balises d'entête de n'importe quel niveau. Mais l'auteur insiste lourdement sur le fait de n'utiliser que des éléments `h1`, ou d'utiliser les éléments de rang appropriés pour les sections imbriquées à différents niveaux. »\n\n### Exemple valide ###\n\n```html\n<body>\n    <h1>Foo</h1>\n\n    <h2>Bar</h2>\n    <blockquote>\n        <h3>Bla</h3>\n    </blockquote>\n\n    <p>Baz</p>\n\n    <h2>Quux</h2>\n\n    <section>\n        <h3>Thud</h3>\n    </section>\n\n    <p>Grunt</p>\n</body>\n```\n\n\n\n### Deux exemples valides, mais avec une différence de clarté ###\n\n**Peu lisible**\n\n```html\n<body>\n    <h4>Apples</h4>\n    <p>Apples are fruit.</p>\n\n    <section>\n        <h2>Taste</h2>\n        <p>They taste lovely.</p>\n\n        <h6>Sweet</h6>\n        <p>Red apples are sweeter than green ones.</p>\n\n        <h1>Color</h1>\n        <p>Apples come in various colors.</p>\n    </section>\n</body>\n```\n\n**Plus lisible**\n\n```html\n<body>\n    <h1>Apples</h1>\n    <p>Apples are fruit.</p>\n\n    <section>\n        <h2>Taste</h2>\n        <p>They taste lovely.</p>\n\n        <section>\n            <h3>Sweet</h3>\n            <p>Red apples are sweeter than green ones.</p>\n        </section>\n    </section>\n\n    <section>\n        <h2>Color</h2>\n        <p>Apples come in various colors.</p>\n    </section>\n</body>\n```\n\n\n\n### Le plus facile à maintenir (les sections peuvent bouger) ###\n\n```html\n<body>\n    <h1>Apples</h1>\n    <p>Apples are fruit.</p>\n\n    <section>\n        <h1>Taste</h1>\n        <p>They taste lovely.</p>\n\n        <section>\n            <h1>Sweet</h1>\n            <p>Red apples are sweeter than green ones.</p>\n        </section>\n    </section>\n\n    <section>\n        <h1>Color</h1>\n        <p>Apples come in various colors.</p>\n    </section>\n</body>\n```\n\n\n\n\n\n## Les multiples h1 et le SEO ##\n\nEt qu'en dise les moteurs ? Cela est tout à fait pris en compte par les moteurs et heureusement. En se posant deux minutes : on s'aperçoit aisément qu'une architecture sectionné avec plusieurs `h1` est plus facilement maintenable qu'une architecture à plat parsemée de `h1` à `h6`.\n\nMais je laisse la parole à [Matt Cutts](http://www.mattcutts.com/blog/), ingénieur chez Google depuis 2000 communiquant énormément via son blog du SEO chez Google :\n\n<div class=\"video\">\n\t<iframe width=\"500\" height=\"330\" src=\"//www.youtube.com/embed/GIn5qJKU8VM\" frameborder=\"0\" allowfullscreen></iframe>\n</div>\n\nLe monsieur nous explique que s'il y a une raison logique à avoir plusieurs sections et plusieurs balises `h1` dans une page, ce n'est pas mauvais de les mettre en place. Il insiste sur le fait qu'une page intégralement remplis de `h1` est problématique en ce qui concerne par exemple un rendu sans CSS (si celle-ci ne se charge pas par exemple) et qu'il est toujours bon d'utiliser les autres balises de niveau. L'important est que les balises h1 restent réservées si possible à la partie entête de chaque section. Mais si elles sont utilisées de manière logique et avec parcimonie il n'y a aucun inconvénient SEO.\n\n## Il est autorisé d'avoir plusieurs h1 dans une page HTML5 ##\n\nEn conclusion utilisés plusieurs balises `h1` dans un document HTML5 est non seulement valide, mais recommandé par le W3C pour respecter une logique de hiérarchie. De plus si deux éléments de premier niveau se valent en importance, il n'y a pas de problème à utiliser deux balises `h1`, le `title` étant l'unique élément pouvant représenter un titre unique pour une page donnée.", "dates" : { "published" : { "$date" : 1375876320000 }, "updated" : [] }, "others" : { "markdown" : true, "published" : true }, "script" : "", "style" : ".video {\r\n\tmargin: 8px 0;\r\n}\r\n.video iframe {\r\n\twidth: 100%;\r\n\tmargin: 0 auto;\r\n}\r\n", "stylesheet" : ".video {\n\tmargin: 8px 0;\n}\n.video iframe {\n\twidth: 100%;\n\tmargin: 0 auto;\n}\n", "title" : "Les <span>balises</span> <span>h1</span> multiples autorisées en <span>HTML5</span>", "urn" : "les-balises-h1-multiples-autorisees-en-html5" }
{ "_id" : { "$oid" : "530f5f63620731fe86cb71b3" }, "cache" : { "comment" : { "number" : 0 } }, "categories" : [ { "$oid" : "5310456355dfd5f7698d48be" }, { "$oid" : "530cc2f27188099a66e9bcec" }, { "$oid" : "5310456355dfd5f7698d48c5" }, { "$oid" : "5310456355dfd5f7698d48ba" }, { "$oid" : "530ef6a6789c1a55e4fde0af" }, { "$oid" : "5310456355dfd5f7698d48c3" } ], "content" : "Le « Responsive Web Design » comme son nom l’indique est le concept de « Responsive Design » adapté au Web. Il est parfois raccourci par le terme  « RWD » ou simplement par « Responsive ».\n\n<figure>\n<img src=\"http://tridentdesign.com/wp-content/uploads/2012/09/responsive-web-design-630x387.jpg\" alt=\"Responsive Web Design\">\n<figcaption>Source : www.tridentdesign.com</figcaption>\n</figure>\n\nDans la majorité des cas d’utilisations, il est utilisé comme raccourci pour désigner la version Mobile d’un site web originalement conçu pour un écran d’ordinateur.\n\nLa vérité est que le Responsive Web Design n’est qu’un des nombreux concepts appliqués à un site web pour le rendre « utilisable agréablement » sur mobile tout en sachant qu’il ne se limite pas qu’aux mobiles et qu’il vaut tout aussi bien pour :\n\n- une tablette,\n- une phablette (terminal intermédiaire se situant entre le smartphone et la tablette),\n- un ordinateur et tous ses types d’écrans (HD, 3D, tactile),\n- une télévision numérique,\n- un tableau de bord de voiture,\n- une console de jeu portable,\n- …et tout appareil capable d’afficher un site web par l’intermédiaire d’un navigateur web.\n\nEn plus du fait que Responsive Web Design ne signifie donc pas obligatoirement « version mobile », il est le porte étendard d’une liste de concept comme l’« Adaptative Web Design ». Difficile de comprendre ce dont on parle réellement quand il est question de Responsive Web Design.\n\n\n\n\n\n## Les concepts permettant (entre autre) de faire du web mobile ##\n\nFaisons un petit tour des termes et concepts autour de la réalisation mobile d’une interface web.\n\n\n\n### Adaptatif Web Design ###\n\nL’idée derrière ce terme est que la partie fonctionnelle d’un site web est différente en fonction du périphérique qui réclame la page web. Si je demande une page sur un téléphone, il est probable que je ne fournisse pas la vidéo HD que j’aurais fourni si elle avait été demandée sur un ordinateur. Il est également probable que je ne fournisse pas de carte Google Maps sur mobile mais plutôt un lien ouvrant l’application Google Maps sur le téléphone alors que sur ordinateur, une grande carte interactive aurait été proposée.\n\nCe concept repose donc sur un design fonctionnel (et donc visuel) adapté au périphérique de l’utilisateur. Le cas le plus extrême de ce concept pourrait être de ne pas proposer seulement des fonctionnalités adaptées mais un site dédié complet (un site version ordinateur à une adresse, un site version mobile à une autre).\n\n<figure>\n<img src=\"http://blog.lesieur.name/upload/schema-mobile-dedie.png\" alt=\"Responsive Web Design\" width=\"424\">\n<figcaption>Source : www.alsacreations.fr</figcaption>\n</figure>\n\n*__Technique__ : Cela demande d’utiliser du JavaScript côté client et également de communiquer des informations clientes au serveur pour qu’il décide quelles sont les fonctionnalités nécessaires au périphérique. Le serveur peut donc décider de renvoyer certaines fonctionnalités. Dans un cas de site mobile dédié, de renvoyer l’utilisateur sur le site mobile en question.*\n\n\n\n### Responsive Web Design ###\n\nNotre fameux Responsive Web Design, expression fourre-tout dont l’idée originale associée au terme est qu'en fonction de la taille et des interactions utilisateurs possibles (souris ou doigts) le design n’est pas présenté de la même manière.\n\nAussi un affichage sur 3 grandes colonnes côte à côte sur grand écran se résumera à 3 éléments l’un en dessous de l’autre sur mobile. Un menu large vertical se permettant de prendre de la place sur grand écran se résumera à un menu vertical masqué par défaut pour garder de la place visible sur mobile, etc… Il est donc tout à fait possible qu’avec le même périphérique, en fonction qu’il affiche la page en mode portrait ou en mode paysage, le rendu soit différent.</p>\n\nLe Responsive Design adapté au web utilise principalement la technique de « Responsive Layout » (ou Fluid Layout) qui est la fusion de deux concepts sous-jacents. Voici donc (Responsive Layout inclus) les 3 principes responsives.\n\n#### Basic Layout ####\n\nChaque partie du design bouge de manière fluide en fonction de la largeur du périphérique qui l’affiche. On obtient donc des titres sur 1 ligne qui peuvent passer sur 3 et tous les éléments ne font que s’étirer et passer les un sous les autres. Il n’y a aucune disposition spéciale ou changement notable de design entre une basse et une haute résolution, seulement un étirement infini : c’est le concept de « fluidité ». Il est dit basique dans le sens ou le rendu « sans CSS » d’une page web possède ces caractéristiques.\n\nCe concept est utilisé majoritairement pour les sites mobiles dédiés (un autre site web uniquement réservé à l’affichage mobile) permettant éventuellement un affichage sur grand mobile et tablette).\n\n*__Technique__ : La feuille CSS est simple et ne fait pas intervenir de Media Queries. Les tailles sont fournies en % et non en pixel et beaucoup de valeur sont en auto. Les éléments ne prennent qu’une ligne et s’empile les un sous les autres.*\n\n#### Adaptative Layout ####\n\nÀ ne pas confondre avec l’Adaptative Web Design, ce concept défini le fait qu’un même site web revêt une apparence différente en fonction de résolution d’écran défini à l’avance. Il peut donc en résulter un affichage pour bureau et un affichage pour mobile (et même un affichage pour tablette) sur la même application (page web). Cependant le design est donc adapté uniquement pour 2 ou 3 résolution faisant office de « gap ».\n\nIl en découle donc qu’un périphérique dont l’affichage se situe entre deux gaps prendra l’apparence du gap le plus petit et laissera des blancs de part et d’autre de la page. Ce blanc peut être masqué en forçant alors le zoom de l’écran pour qu’ils n’apparaissent plus.\n\n*__Technique__ : La feuille CSS utilise des Media Queries. L’approche « if … else if  …  else » est envisageable dans le sens ou entre les gaps il n’y a aucune modification CSS. Il y a donc un pend mobile, un pend tablette et un pend ordinateur par exemple. L’approche en cascade (on commence par le desktop, puis on écrase les propriétés différentes au fur et à mesure qu’on descend) est tout aussi valide et permet à terme d’évoluer vers du (Limited) Responsive Layout.*\n\n#### Responsive Layout ####\n\nCe concept est un mélange des deux précédentes approches. Il y a toujours des gaps visuels définis à des résolutions précises mais ces gaps, tout en présentant une disposition différente, garde une cohérence en terme de placement permettant « entre les gaps » de faire intervenir le concept de fluidité. Ainsi quel que soit la résolution du périphérique, le design est toujours adapté à l’écran en rendant fluide le gap précédent ou suivant.\n\n\n> #### Limited Responsive Layout ####\n\n> C’est le concept le plus répandu et le plus associé au « Responsive Web Design ». Il est identique au concept du dessus cependant :\n> - en-dessous du plus petit gap le site n’est plus Responsive mais scrollable et/ou\n> - au-dessus du plus grand gap le site n’est plus Responsive mais des zones vides s’étendent de part et d’autre de l’écran.\n\n\n\n### Desktop First ###\n\nCe concept ne portait pas de nom avant l’arrivée du concept de « Mobile First » mais il désigne tout simplement un site qui a été créé pour s’afficher sur un ordinateur en premier lieu. Ce n’est qu’ensuite, avec le concept de « Progressive Enhancement » (Amélioration Progressive) que vient se greffer des gaps visuels pour les versions tablette et mobile (avec éventuellement de la fluidité).\n\nCette approche donne lieu en générale à des sites finaux « Limited Responsive Layout » ou le site original est le gap final du rendu visuel. En générale ce type d’approche permet de supporter des vieux navigateurs comme IE7 et IE8 tout en permettant du « Responsive Web Design » sur les autres. Cette approche à le défaut d’alourdir en poids les fichiers au fur et à mesure qu’on habille des périphériques aux écrans plus petits.\n\n*__En bref__ : Desktop First supporte les vieux navigateurs facilement mais impose un travail spécifique pour les tablettes et mobiles.*\n\n\n\n### Mobile First ###\n\nC’est l’approche se rapprochant le plus de l’idée première du « Responsive Web Design » permettant un affichage Responsive du petit écran vers les écrans très grand. Cette approche consiste à d’abord pensé le site et le design sur petit périphérique comme des mobiles (d’où le nom) puis ensuite d’augmenter le design vers des périphériques plus gros.\n\nCette approche, en plus de permettre une responsivité infinie permet également de s’assurer que ce sont les plus petits périphériques qui chargent le moins de ressources. Cette approche impose cependant le concept de « Fallback Mechanism » (Dégradation élégante) pour ajouter le support de IE8 et/ou IE7 n’étant pas supporté de base dans cette approche (ou ayant alors l’apparence mobile).\n\n*__En bref__ : Supporte les tablettes et mobiles facilement mais également les écrans HD, etc..., impose un travail spécifique pour IE8 et/ou IE7.*\n\n<figure>\n<img src=\"http://bradfrostweb.com/wp-content/uploads/2012/03/43-650x487.png\" alt=\"Responsive Web Design\">\n<figcaption>Source : www.bradfrostweb.com</figcaption>\n</figure>\n\n\n\n### Progressive Enhancement ###\n\nL’amélioration progressive est un concept visant à développer une application (dans notre cas un site web) en partant de standard volontairement âgé et encore supporté par les navigateurs les plus récents pour couvrir une compatibilité maximale avec les anciens périphériques, navigateurs, etc... Elle permet notamment un support sans JavaScript ou un support IE7 ou IE8 plus facile à mettre en place mais bride l’accès aux technologies récentes dans le sens ou les mettre en place devient excessivement complexe et couteux puisqu’il faut continuer le support des navigateurs ne permettant pas nativement de tel chose.\n\nS’ajoute comme une nouvelle brique le passage en Responsive Web Design, très chronophage, et demandant bien souvent une refonte profonde du code initiale de manière à l’améliorer. Bien qu’ils conviennent aux sites existant il est parfois bien plus judicieux dans le cas du passage en Responsive d’un site de le refaire avec l’approche qui va suivre.\n\n\n\n### Fallback Mechanism ###\n\nÀ contre-pied de l’amélioration progressive, la dégradation élégante consiste à utiliser des standards à la pointe de la technologie et en phase avec les périphériques de nos temps de manière à offrir une expérience utilisateur la plus agréable possible compte tenu des outils que leur appareil leur offre.\n\nCela permet facilement d’adapter les designs et les fonctionnalités au monde actuel du web. Il va ensuite être question d’ajouter une surcouche pour gérer les anciens périphériques ne disposant pas de quoi utiliser les nouvelles fonctionnalités (comme IE8 ou IE7). Il convient alors de les rendre utilisable sans nécessairement reproduire à l’identique la fonctionnalité ou le visuel. La structure initiale est souvent légère et adaptée pour une approche Responsive et donc pour faire des versions mobiles (même avec une approche Desktop First).\n\n\n\n\n\n## Maintenant que tout le monde se comprend... ##\n\n...Peut-être pourrez-vous plus aisément bien border le périmètre d'action quand vous réalisez un site Responsive Web Design ou plus vulgairement une « Version Mobile ».", "dates" : { "published" : { "$date" : 1378480500000 }, "updated" : [] }, "others" : { "markdown" : true, "published" : true }, "script" : "", "style" : "p.eye-catching,\r\n.variation {\r\nmargin-left: 32px;\r\nfont-size: 0.9em;\r\n}", "stylesheet" : "", "title" : "Les <span>concepts</span> autour du <span>Responsive Web Design</span>", "urn" : "les-concepts-autour-du-responsive-web-design" }
{ "_id" : { "$oid" : "530f5f63620731fe86cb71b4" }, "cache" : { "comment" : { "number" : 0 } }, "categories" : [ { "$oid" : "5310456355dfd5f7698d48c8" }, { "$oid" : "5310456355dfd5f7698d48ba" }, { "$oid" : "5310456355dfd5f7698d48cc" }, { "$oid" : "5310456355dfd5f7698d48be" }, { "$oid" : "5310456355dfd5f7698d48b8" } ], "content" : "On parle souvent de la grande vélocité de Node.js et de son brillant avenir. Mais il n'est pas toujours judicieux de l'utiliser. Pour certains cas d'utilisations, c'est le meilleur choix à faire (application web temps réel). Pour d'autres cas, ça le deviendra mais c'est encore un peu tôt (CMS web). Et pour d'autre il ne sera jamais réellement adapté (intelligence artificielle). Voici [l'adaptation française] d'un article de [Felix Geisendörfer], contributeur Node.js. Il nous explique de manière pragmatique comment raisonnablement et rationnellement il est possible d'utiliser Node.js pour son business.\n\n [l'adaptation française]: \"http://nodeguide.com/convincing_the_boss.html\" (Felix's Node.js Convincing the boss guide)\n [Felix Geisendörfer]: \"http://felixge.de/\" (Felix Geisendörfer) \n\n« Maintenant que vous êtes au point sur l'utilisation de Node.js, il est temps de convaincre votre boss. Enfin peut-être. J'ai eu l'occasion de conseiller différente entreprise sur la question : Node.js est la bonne technologie ? Et parfois, la réponse est tout simplement non.\n\nCe guide est ma collection opiniâtre des conseils pour ceux d'entre vous qui veulent savoir si Node.js fait sens pour leur entreprise, et si oui, comment convaincre la direction.\n\n\n\n\n\n## Les mauvais cas d'utilisation ##\n\n### Des applications à forte charge CPU ###\n\nMême si j'adore Node.js, il y a plusieurs cas d'utilisation où ça n'a pas de sens de l'utiliser. Les cas les plus évidents sont ceux des applications avec une importante utilisation du CPU avec peu de communication Entrée/Sortie. Donc, si vous avez l'intention d'écrire un logiciel d'encodage vidéo, d'intelligence artificielle ou un logiciel similaire gourmand en processeur, s'il vous plaît n'utiliser pas Node.js. Alors qu'en Node.js vous allez un peu galérer, vous aurez probablement de meilleurs résultats avec C ou C++.\n\nCela étant dit, Node.js vous permet d'écrire facilement des addons C++, de sorte que vous pourriez l'utiliser comme un moteur de script utilisant lui-même vos algorithmes ultra-secrets.\n\n\n\n\n### Des applications HTML simple (Créer, Lire, Mettre à jour et Effacer) ###\n\nAlors que Node.js devient un outil amusant pour écrire toutes sortes d'applications web, ne vous attendez pas à ce qu'il vous fournisse plus que PHP, Ruby ou Python sur ces points. Oui, votre application sera probablement plus évolutive, mais cependant votre application ne vous permettra pas, magiquement, d'obtenir plus de trafic tout simplement parce que vous l'écrivez en Node.js.\n\nLa vérité est que si nous commençons à regarder du côté de bons frameworks Node.js, il n'y a rien de plus puissant que Rails, CakePHP ou Django sur la scène à l'heure actuelle. Si la plupart de vos applications se contente d'un simple rendu HTML basé sur une base de données précise, s'aider de Node.js ne vous fournira pas beaucoup d'avantages commerciaux tangibles.\n\n\n\n\n### NoSQL + Node.js + Truc qui fait classe mais c'est tout ###\n\nSi l'architecture pour vos prochaines applications contient du NoSQL, arrêtez vous un instant, et lisez ceci :\n\nOui, Redis, CouchDB, MongoDB, Riak, Casandra, etc... ont tous l'air vraiment tentant, mais c'est peut-être la pomme rouge à laquelle Eve n'a pas pu résister. Si vous prenez déjà un risque technologique avec Node.js, vous ne devriez pas les multiplier avec plus de technologie que vous ne comprenez probablement pas encore complètement.\n\nBien sûr, il y a des cas d'utilisation légitimes pour choisir une base de données orientée document. Mais si vous essayez de créer une entreprise basée sur votre logiciel, s'en tenir à la technologie des bonnes vieilles base de données relationnelles (comme postgres ou mysql) pourrait bien être plus pertinent que satisfaire votre esprit de nerd et d'impressionner vos amis.\n\n\n\n\n\n## Les bons cas d'utilisation ##\n\n### Les APIs JSONP ###\n\nConstruire des APIs légère REST / JSON est quelque chose pour laquelle Node.js brille vraiment. Son modèle non-bloquant Entrée/Sortie combiné à JavaScript en font un excellent choix pour emballer d'autres sources de données telles que des bases de données ou des services Web et de les exposer via une interface JSON.\n\n\n\n\n### Applications simple d'une seule page ###\n\nSi vous envisagez d'écrire une application avec une page lourde unique avec AJAX (pensez à Gmail), Node.js répond parfaitement au besoin. La capacité de traiter de nombreuses demandes à la secondes avec un temps de réponse faible, ainsi que le partage des tâches comme la validation d'informations entre le client et le serveur en font un excellent choix pour les applications web modernes qui font beaucoup de traitement sur ​​le client.\n\n\n\n\n### Les lignes de commande des OS ###\n\nAvec Node.js qui est encore jeune, c'est tentant de re-inventer toutes sorte de software pour lui. Cependant, une meilleure approche est de taper dans le vaste univers des lignes de commandes de vos OS. Les capacités de Node permettent de créer des milliers de processus fils et de traiter leurs retours comme un flux permettant de tirer partie des développements existants.\n\n\n\n\n### Flux de données ###\n\nGénéralement les traitements web se limitent aux requêtes et réponses http et aux évènements piochés dans une pile. La vérité est que ces informations font partie d'un flux et les applications Node.js peuvent tirer partie de cela. Le plus gros exemple est celui des uploads en temps réel et également des ponts entre les différentes couches de données.\n\n\n\n\n### Les applications en temps réel ###\n\nUn autre grand aspect de Node.js est la facilité avec laquelle vous pouvez développer des systèmes temps réel souples. Par cela j'entends des trucs comme Twitter, des logiciels de chat, de paris sportifs ou des interfaces avec les réseaux de messageries instantanées.\n\nMais soyez prudent, bien que JavaScript soit un langage dynamique avec garbage collector, votre temps de réponse peut dépendre du temps que mets le garbage collector à faire son ménage (à ce moment votre programme est arrêté). Donc n'essayez pas de créer un system temps réel ultra-précis en Node, cela nécessite des temps de réponses cohérents. Erlang est probablement un meilleurs choix pour ce type d'application.\n\n\n\n\n\n## Convaincre le Boss ##\n\nUne fois que vous avez déterminé que votre cas d'utilisation est parfait pour Node.js, il est temps pour convaincre votre patron ou votre hiérarchie qu'il faut l'utiliser.\n\n\n\n\n### Construction d'un prototype ###\n\nLa meilleure façon de mettre le pied dans la porte, est de suggérer de prendre une semaine pour construire un prototype simple d'une certaine partie de l'application que vous avez à l'esprit. Il est généralement facile d'obtenir le feu vert pour cela, car cela n'implique pas encore un engagement à long terme.\n\n\n\n\n### Trouver des développeurs ###\n\nPensez ce que vous voulez du JavaScript, mais il devient le langage commun à tout les appareils de programmation. Quasiment tous les ordinateurs personnels à un ou plusieurs interpréteurs JavaScript (navigateurs) installés, ce qui signifie qu'il est presque impossible à la plupart des développeurs web de ne pas l'apprendre à un moment donné dans leur carrière.\n\nCela signifie que vous avez un grand pannel de compétences dans vos rangs, et vous avez probablement déjà beaucoup de talent dans votre propre entreprise. Donc, si vous travaillez pour une entreprise en pleine croissance, c'est un solide argument favorisant Node.js.\n\n\n\n\n### Communauté dynamique ###\n\nA ce stade, la communauté Node.js se développe à un rythme fou, attirant certains des développeurs les plus brillants de l'industrie. Cela signifie aussi que l'écosystème de Node augmente chaque jour, et il est également facile d'obtenir un support gratuit et commercial auprès de diverses sources.\n\n\n\n\n### Performance ###\n\nCet argument doit être soigneusement avancé, mais si la performance est un aspect essentiel de votre demande, Node.js a beaucoup à offrir. Avec cinq entreprises (Mozilla, Google, Apple, Microsoft, Opera) en compétition sur la meilleure mise en œuvre JavaScript, l'interprèteur sous-jacente de Node (V8 de Google) est devenu incroyablement rapide, et cela s'améliore de jour en jour.\n\nEn combinant cela avec le modèle non-bloquant de Node en Entrée/Sortie, vous pouvez toujours vous accrocher pour avoir un programme moux. La plupart des applications Node sont facilement capable de gérer des milliers de connexions simultanées, ce qui peut-être considéré comme un standard pour lui.\n\n\n\n\n### Risque pour l'entreprise ###\n\nL'un des risques avec un jeune projet open source est le manque d'engagement à long terme par ses auteurs. Ce n'est pas le cas avec Node.js. Node est actuellement sponsorisé par Joyent, qui a embauché Ryan Dahl et plusieurs autres contributeurs de base, il y a donc une véritable force économique soutenant le développement futur du projet.\n\nEntre autres choses, cela a déjà tenté des sociétés comme Yahoo! et HP (anciennement Palm) qui ont assez de confiance en Node.js pour construire leurs produits de prochaine génération dessus. Votre Boss peut certainement se détendre en lisant leurs témoignages rassurants.\n\n\n\n\n\n## Convaincre un client ##\n\nSi vous êtes une société autonome ou un freelance, convaincre un client d'utiliser Node.js peut-être une autre histoire. Après tout, ils sont généralement très dépendant de votre avis, tout autant que du support continu que vous appportez à leur logiciels.\n\nMon conseil est d'être un peu plus conservateur, et vérifier tout de même si Node est un bon ajustement. Si c'est le cas, assurez-vous que vous avez les ressources et le temps pour soutenir la demande sur le long terme. L'équipe Node.js publie de nouvelles versions à un rythme rapide, et donc vous ne devez jamais attendre plus de 3 à 6 mois pour le mettre à jour vers la dernière version. »", "dates" : { "published" : { "$date" : 1378717860000 }, "updated" : [] }, "others" : { "markdown" : true, "published" : true }, "script" : "", "stylesheet" : "", "title" : "Node.js : le <span>guide</span> pour convaincre son Boss", "urn" : "node-js-le-guide-pour-convaincre-son-boss" }
{ "_id" : { "$oid" : "530f5f63620731fe86cb71b6" }, "cache" : { "comment" : { "number" : 0 } }, "categories" : [ { "$oid" : "5310456355dfd5f7698d48bb" }, { "$oid" : "5310456355dfd5f7698d48c8" }, { "$oid" : "5310456355dfd5f7698d48be" }, { "$oid" : "5310456355dfd5f7698d48cc" }, { "$oid" : "5310456355dfd5f7698d48b6" }, { "$oid" : "5310456355dfd5f7698d48bd" }, { "$oid" : "5310456355dfd5f7698d48b8" }, { "$oid" : "5310456355dfd5f7698d48c7" }, { "$oid" : "5310456355dfd5f7698d48ba" } ], "content" : "Cet article est une adaptation du **[Google JavaScript Style Guide]** en **français**. Je n'applique pas nécessairement moi-même toutes les bonnes pratiques listées ci-dessous mais si vous ne vous êtes jamais posé la question : « Comment maintenir un code gardant l'équilibre entre lisibilité et performance avec mon équipe ou les personnes susceptibles de relire mon code » cet article peut s'avérer intéressant. Si vous avez déjà vos pratiques : c'est peut-être l'occasion (comme pour moi) d'en revoir certaines.\n\n> **Google JavaScript Style Guide en français**\n- **[Les bonnes pratiques JavaScript selon Google](./les-bonnes-pratiques-javascript-selon-google/)**\n- Convention de nommage et commentaires JavaScript selon Google\n\n[Google JavaScript Style Guide]: http://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml\n\n\n\n\n\n## Google JavaScript Style Guide en français ##\n\nVous pourrez trouver l'article original [Google JavaScript Style Guide] derrière [ce lien][Google JavaScript Style Guide]. Au moment où je réalise cette traduction, le document est en _version 2.93_. À partir de maintenant, tout ce qui suit provient de l'article de Google.\n\n\n\n\n\n## Avant-propos ##\n\nJavaScript est le principal langage de programmation de la partie cliente d'un navigateur web utilisé par beaucoup de projets Google open-source. Ce guide de style représente la liste _des bonnes_ et _des mauvaises_ pratiques lors d'un développement JavaScript.</p>\n\n\n\n\n\n## Règles du langage JavaScript ##\n\n### var ###\n\nDéclarations des variables avec `var` : Toujours - <a class=\"toggle-more\" href=\"javascript:;\">En savoir plus</a>\n\n> **_En savoir plus_** Quand vous ne spécifiez pas `var`, la variable est attachée au contexte global de l'application, entrant en conflit avec des valeurs de variables potentiellement existantes. De la même manière, sans cette déclaration, il est difficile de définir à quelle portée lexicale la variable est rattachée (ex : La variable pourrait tout aussi bien être attachée à `document`, à `window` ou à la fonction courante). Donc n'oubliez jamais de déclarer avec `var`.\n\n\n\n### Constante ###\n\n- Utiliser des `NAMES_LIKE_THIS` comme nom de variable pour les _valeurs_ constantes.\n- Utiliser `@const` (en commentaire) pour indiquer la non ré-affectabilité d'une variable (une variable ou une propriété).\n- Ne jamais utiliser le mot clé `const` car il n'est pas supporté par Internet Explorer.\n\n<a class=\"toggle-more\" href=\"javascript:;\">En savoir plus</a>\n\n> #### Valeurs constantes ####\n\n> **_En savoir plus_** Si la valeur d'une variable doit restée constante et inchangeable tout au long de l'exécution du programme, on peut lui donner un nom tel que `CONSTANT_VALUE_CASE` Les variable nommées en `ALL_CAPS` impliquent donc le commentaire `@const` (car la valeur n'est pas ré-affectable).\n\n> Les [types primitifs](http://blog.haeresis.fr/les-types-en-javascript-pour-tout-savoir/ \"Les types en JavaScript : pour tout savoir !\") (`Number`, `String` et `Boolean`) peuvent être des valeurs constantes.\n\n> La constance d'un type `Object` est plus subjective — Les objets peuvent être considérés comme constant uniquement s'ils ne montrent aucun signe de changement d'état. Cela n'est pas nécésairement triviale à appréhender pour un compilateur.\n\n> #### Pointeurs constants (variables et propriétés) ####\n\n> La notation `@const` (en commentaire) d'une variable ou d'une propriété implique qu'elle ne sera pas ré-affectable. Ceci est géré par un compilateur lors de la compilation. Cette convention est cohérente avec le mot-clé `const` (que nous n'utilisons pas en raison du manque de support dans Internet Explorer).\n\n> La notation `@const` sur une méthode implique que cette fonction ne sera pas surchargeable sur des sous classes lors d'un héritage.\n\n> La notation `@const` sur un constructeur implique que cette classe ne pourra pas être héritée (comme le `final` de Java).\n\n> #### Exemples ####\n\n> À noter que `@const` n'implique pas nécéssairement une écriture de variable comme celle-ci : `CONSTANT_VALUES_CASE<`. Cependant, écrire une variable comme cela `CONSTANT_VALUES_CASE` implique `@const`.\n\n> > **`Bon`** Code\n\n> > ```js\n/**\n * Temps maximal pour la Demande en millisecondes.\n * @type {number}\n */\ngoog.example.TIMEOUT_IN_MILLISECONDS = 60 * 1000;\n```\n\n> Le nombre de secondes dans une minute ne change jamais. C'est une valeur constante. L'écriture `ALL_CAPS` requière le commentaire `@const`, et donc la constante ne peut pas être ré-affectée.\n\n> Centains compilateurs open-source permettront à une variable d'être ré-affectée si elle **n'est pas** marquée comme `@const`.</p>\n\n> > **`Bon`** Code\n\n> > ```js\n/**\n * URL associée à la Carte en tant que chaine de caractères.\n * @const\n */\nMyClass.fetchedUrlCache_ = new goog.structs.Map();\n```\n\n> > ```js\n/**\n * La Classe ne peut pas être héritée.\n * @const\n * @constructor\n */\nsloth.MyFinalClass = function() {};\n```\n\n> Dans ce cas, le pointeur ne sera jamais ré-affectée, cependant il peut changer d'un appel à l'autre (C'est pourquoi il est écrit en `camelCase`, et non en `ALL_CAPS`).\n\n\n\n### Point-virgule ###\n\nToujours utiliser les point-virgules - <a class=\"toggle-more\" href=\"javascript:;\">En savoir plus</a>\n\n> **_En savoir plus_** Une utilisation implicite des point-virgules (ne pas les mettre) pose problème, des problèmes difficiles à debboguer. Ne le faites pas. Ça vaudra mieux pour vous.\n\n> Il y a quelques endroits ou l'oubli de point-virgule est particulièrement dangereux :\n\n> > *`Mauvais`* Code\n\n> > ```js  \nMyClass.prototype.myMethod = function() {\n    return 42;\n}  // Pas de point-virgule ici.\n> > \n(function() {\n    // Du code à exécuter ici et isolé dans un champ lexical localisé.\n})();\n```\n\n\n> **Quel est le problème ?**\n\n> Erreur JavaScript - Tout d'abord la première fonction retourne 42 puis est appelé en tant que paramètre par la seconde fonction, quand 42 est appelé cela cause une erreur.", "dates" : { "published" : { "$date" : 1385765580000 }, "updated" : [] }, "others" : { "markdown" : true, "published" : false }, "script" : "var $toggleMore = $(\".toggle-more\");\n\n$toggleMore.addClass(\"visible\");\n\n$toggleMore.each(function () {\n    $(this).parents(\"p\").next(\"blockquote\").hide();\n}).click(function () {\n\t$(this).parents(\"p\").next(\"blockquote\").toggle('fast');\n});", "style" : ".toggle-content {\r\n\tdisplay: none;\r\n}", "stylesheet" : ".toggle-more {\n    display: none;\n}\n.toggle-more.visible {\n    display: inline;\n}", "title" : "Les <span>bonnes pratiques</span> <span>JavaScript</span> selon <span>Google</span>", "urn" : "les-bonnes-pratiques-javascript-selon-google" }
{ "_id" : { "$oid" : "530f5f63620731fe86cb71b7" }, "title" : "<span>Conventions</span> et <span>commentaires</span> <span>JavaScript</span> selon <span>Google</span>", "urn" : "conventions-et-commentaires-javascript-selon-google", "dates" : { "published" : "2013-11-30 11:53:00", "updated" : [ "2013-11-30 11:53:00" ] }, "content" : "<p>Cet article est une adaptation du Google JavaScript Style Guide en FR. La partie ci dessous est spécifique à la manière de travailler de Google et ne constitue pas en soit une manière de procéder absolue, cependant cela peut vous servir de base de travail en groupe. Plusieurs conseils sont d'ailleurs très bon à suivre comme le fait d'attacher explicitement ses contextes d'exécution à une variable faisant office de « namespace » et d'autres discutable comme le nombre d'espace nécéssaire à l'indentation. J'espère que tout ceci pourra vous aiguiller du mieux possible.</p>\r\n\r\n<div class=\"correct-practice\">\r\n\t<div class=\"title highlighting\">Google JavaScript Style Guide en français</div>\r\n\t<nav class=\"content\">\r\n\t\t<ol>\r\n\t\t\t<li><a class=\"highlighting\" href=\"./les-bonnes-pratiques-javascript-selon-google/\" title=\"Les bonnes pratiques JavaScript selon Google\">Les bonnes pratiques JavaScript selon Google</a></li>\r\n\t\t\t<li><a class=\"highlighting\" href=\"./conventions-et-commentaires-javascript-selon-google/\" title=\"Conventions et commentaires JavaScript selon Google\">Conventions et commentaires JavaScript selon Google</a></li>\r\n\t\t</ol>\r\n\t</nav>\r\n</div>\r\n\r\n<h2>Google JavaScript Style Guide en français</h2>\r\n\r\n<p>Vous pourrez trouver l'article original <a href=\"http://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml\" title=\"Google JavaScript Style Guide\">Google JavaScript Style Guide</a> derrière <a href=\"http://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml\" title=\"Google JavaScript Style Guide\">ce lien</a>. Au moment où je réalise cette traduction, le document est en <span class=\"eye-catching\">version 2.93</span>.</p>\r\n\r\n<h2>Avant-propos</h2>\r\n\r\n<p>JavaScript est le principal langage de programmation de la partie cliente d'un navigateur web utilisé par beaucoup de projets Google open-source. Ce guide de style représente la liste des bonnes et des mauvaises pratiques lors d'un développement JavaScript.</p>\r\n\r\n<h2>Règles du langage JavaScript</h2>\r\n\r\n<p>Lire mon précédent article : <a class=\"highlighting\" href=\"./les-bonnes-pratiques-javascript-selon-google/\" title=\"Les bonnes pratiques JavaScript selon Google\">Les bonnes pratiques JavaScript selon Google</a>.</p>\r\n\r\n<h2>Conventions pour le JavaScript</h2>\r\n\r\n<h3>Nommage</h3>\r\n\r\n<p>\r\n\tEn générale, nommé \r\n\tles fonctions <samp>functionNamesLikeThis</samp>, \r\n\tles variables <samp>variableNamesLikeThis</samp>,\r\n\tles classes (constructeur) <samp>ClassNamesLikeThis</samp>,\r\n\tles énumérations <samp>EnumNamesLikeThis</samp>,\r\n\tles méthodes <samp>methodNamesLikeThis</samp>,\r\n\tles constantes <samp>CONSTANT_VALUES_LIKE_THIS</samp>,\r\n\tles propriétés <samp>foo.namespaceNamesLikeThis.bar</samp> et\r\n\tles noms de fichier <samp>filenameslikethis.js</samp>.\r\n\t- <span class=\"eye-catching a-like toggle-more\">En savoir plus</span>\r\n</p>\r\n\r\n<div class=\"toggle-content\">\r\n\r\n\t<h4>Propriétés et méthodes</h4>\r\n\r\n\t<ul>\r\n\t\t<li>Les propriétés et méthodes privées (Private) doivent commencé par un underscore.</li>\r\n\t\t<li>Les propriétés et méthodes protégées (Protected) doivent être nommée sans commencé par un underscore (comme les publiques).</li>\r\n\t</ul>\r\n\r\n\t<p>\r\n\t\tPour plus d'informations sur <samp>private</samp> et <samp>protected</samp>, rendez-vous à la section ««««««««««««««visibilité»»»»»»»»»»»».\r\n\t</p>\r\n\r\n\t<h4>Paramètres de fonctions et de méthodes</h4>\r\n\r\n\t<p>\r\n\t\tLes arguments de fonction optionnelle doivent commencé par <samp>opt_</samp>.\r\n\t</p>\r\n\r\n\t<p>\r\n\t\tLes fonctions pouvant prendre un nombre variable d'arguments en entrée doivent avoir un dernier argument nommé <samp>var_args</samp>. Vous ne devez, dans votre code, non plus faire référence à <samp>var_args</samp> ; utilisez un tableau d'arguments.\r\n\t</p>\r\n\r\n\t<p>\r\n\t\tLes arguments optionnelles peuvent également prendre l'annotation <samp>@param</samp> en commentaire. Comme les deux conventions sont accepté par les compilateurs, utiliser les deux est préférable.\r\n\t</p>\r\n\r\n\t<h4>Accesseurs Get et Set</h4>\r\n\r\n\t<p>\r\n\t\tNous vous décourageons d'utiliser les accesseurs EcmaScript 5 pour rendre accessible les propriétés. Cependant, s'ils douvent être utilisés, les getteurs ne montre aucan signe d'utilité.\r\n\t</p>\r\n\r\n\t<div class=\"worst-practice\">\r\n\t\t<div class=\"content\">\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">/**\r\n * MAUVAIS -- Ne faites PAS ça.\r\n */\r\nvar foo = { get next() { return this.nextId++; } };</code></pre>\r\n\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<h4>Des fonctions comme accesseurs</h4>\r\n\r\n\t<p>\r\n\t\tLes méthodes de Get ou de Set pour les propriétés ne sont pas requis. Cependant s'ils doivent être utilisés, les Getters doivent être nommés <samp>getFoo()</samp> et les Setters doivent être nommés <samp>setFoo(value)</samp> (Pour les booléen, <samp>isFoo()</samp> est également possible, et souvent cela sonne mieux).\r\n\t</p>\r\n\r\n\t<h4>Les espaces de nom (Namespaces)</h4>\r\n\r\n\t<p>\r\n\t\tJavaScript n'a pas de base de système de package et d'espace de nom.\r\n\t</p>\r\n\r\n\t<p>\r\n\t\tLes conflits de nom de Variables Globales sont difficile à débogguer, et cause des problèmes insolubles quand deux projets essaient d'être intégrés ensemble. Dans l'optique de rendre du code JavaScript commun partageable, nous avons adopté une convention pour prévenir les conflits. \r\n\t</p>\r\n\r\n\t<p><span class=\"highlighting\">Utilisation de namespaces pour le code global</span></p>\r\n\r\n\t<p>\r\n\t\tTOUJOURS préfixer une variable dans le champ lexical global avec un espace de nom relatif au projet ou à la librairie. Si vous travaillez sur « Project Sloth », un nom possible serait le namespace <samp>sloth.*</samp>\r\n\t</p>\r\n\r\n\t<div class=\"best-practice\">\r\n\t\t<div class=\"content\">\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">var sloth = {};\r\n\r\nsloth.sleep = function() {\r\n  ...\r\n};</code></pre>\r\n\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<p>\r\n\t\tBeaucoup de librairie JavaScript, tout comme <a href=\"http://code.google.com/closure/library/\" title=\"the Closure Library\">the Closure Library</a> et <a href=\"http://www.dojotoolkit.org/\" title=\"Dojo toolkit\">Dojo toolkit</a> vous fournissent des fonctions de hauts niveaux pour déclarer vos espaces de nom.\r\n\t</p>\r\n\r\n\t<div class=\"best-practice\">\r\n\t\t<div class=\"content\">\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">goog.provide('sloth');\r\n\r\nsloth.sleep = function() {\r\n  ...\r\n};</code></pre>\r\n\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<p><span class=\"highlighting\">Respecter la paternité d'espace de nom</span></p>\r\n\r\n\t<p>Quand vous choisissez de créer un espace de nom enfant, assurez-vous que les propriétaire de l'espace de nom parent en sont informés. Si vous démarrez un projet qui créé des « hats » pour les « sloths », soyez sure que l'équipe en charge de <samp>sloth</samp> sait que vous utilisez <samp>sloth.hats</samp>.</p>\r\n\r\n\t<p><span class=\"highlighting\">Utiliser des espaces de nom différent pour le code externe et le code interne</span></p>\r\n\r\n\t<p>« Un code externe » est un code qui vient de l'extérieur de la base de code, et il est compilé indépendemment. Les espaces de nom externe et interne doivent être strictement séparé. Si vous utilisez une librairie externe vous donnant accès à <samp>foo.hats.*</samp>, votre code interne ne doit pas être défini dans <samp>foo.hats.*</samp>, car cela pourrait poser problème à d'autre équipe voulant ajouter des espaces de nom au votre (qui ne vous appartient pas).</p>\r\n\r\n\t<div class=\"worst-practice\">\r\n\t\t<div class=\"content\">\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">foo.require('foo.hats');\r\n\r\n/**\r\n * MAUVAIS -- Ne faites PAS ça.\r\n * @constructor\r\n * @extends {foo.hats.RoundHat}\r\n */\r\nfoo.hats.BowlerHat = function() {\r\n};</code></pre>\r\n\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<p>\r\n\t\tSi vous avez besoin de définir de nouvelles APIs dans un espace de nom externe, vous allez devoir exporter explicitement ces fonctions. Votre code appelera des APIs internes par leurs espaces de nom internes, ceci pour la robustesse et une optimisation du code par le compileur.\r\n\t</p>\r\n\r\n\t<div class=\"best-practice\">\r\n\t\t<div class=\"content\">\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">foo.provide('googleyhats.BowlerHat');\r\n\r\nfoo.require('foo.hats');\r\n\r\n/**\r\n * @constructor\r\n * @extends {foo.hats.RoundHat}\r\n */\r\ngoogleyhats.BowlerHat = function() {\r\n  ...\r\n};\r\n\r\ngoog.exportSymbol('foo.hats.BowlerHat', googleyhats.BowlerHat);</code></pre>\r\n\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<p><span class=\"highlighting\">Créer des alias pour les longs espace de nom facilite la lecture</span></p>\r\n\r\n\t<p>Utilisez des alias locals sur les variables pour augmenter la lisibilité de votre code. Le nom pourra concorder avec le dernier nom de variable de la chaine d'espace de nom.</p>\r\n\r\n\t<div class=\"best-practice\">\r\n\t\t<div class=\"content\">\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">/**\r\n * @constructor\r\n */\r\nsome.long.namespace.MyClass = function() {\r\n};\r\n\r\n/**\r\n * @param {some.long.namespace.MyClass} a\r\n */\r\nsome.long.namespace.MyClass.staticHelper = function(a) {\r\n  ...\r\n};\r\n\r\nmyapp.main = function() {\r\n  var MyClass = some.long.namespace.MyClass;\r\n  var staticHelper = some.long.namespace.MyClass.staticHelper;\r\n  staticHelper(new MyClass());\r\n};</code></pre>\r\n\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<p>Ne créer pas d'alias sur les espaces de nom. Les alias d'espace de nom doivent uniquement être créé en utilisant «««««««««««««««««««««««««goog.scope »»»»»»»»»»»»»»»»»»»»»»»»».</p>\r\n\r\n\t<div class=\"worst-practice\">\r\n\t\t<div class=\"content\">\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">myapp.main = function() {\r\n  var namespace = some.long.namespace;\r\n  namespace.MyClass.staticHelper(new namespace.MyClass());\r\n};</code></pre>\r\n\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<p>\r\n\t\tIl est donc interdit d'accéder à une propriété d'un alias, sauf si c'est un enumérateur.\r\n\t</p>\r\n\r\n\t<div class=\"best-practice\">\r\n\t\t<div class=\"content\">\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">/** @enum {string} */\r\nsome.long.namespace.Fruit = {\r\n  APPLE: 'a',\r\n  BANANA: 'b'\r\n};\r\n\r\nmyapp.main = function() {\r\n  var Fruit = some.long.namespace.Fruit;\r\n  switch (fruit) {\r\n    case Fruit.APPLE:\r\n      ...\r\n    case Fruit.BANANA:\r\n      ...\r\n  }\r\n};</code></pre>\r\n\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div class=\"worst-practice\">\r\n\t\t<div class=\"content\">\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">myapp.main = function() {\r\n  var MyClass = some.long.namespace.MyClass;\r\n  MyClass.staticHelper(null);\r\n};</code></pre>\r\n\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<p>Ne jamais créer d'alias dans le champ lexical global. Utilisez-les uniquement dans des contextes d'exécution interne.</p>\r\n\r\n\t<h4>Nom de fichier</h4>\r\n\r\n\t<p>Les noms de fichier doivent être écris uniquement avec des minuscules en vu d'enrayer la confusion sur les plateformes sensibles à la casse. Les nom de fichier doivent finir par <samp>.js</samp>, et ne doivent contenir aucune ponctuation excepté pour - ou _ (préferrez - à _).</p>\r\n</div>\r\n\r\n<h3>Méthodes toString() personnalisées</h3>\r\n\r\n<p>\r\nDoit toujours marcher sans effets de bord.\r\n- <span class=\"eye-catching a-like toggle-more\">En savoir plus</span>\r\n</p>\r\n\r\n<div class=\"toggle-content\">\r\n\t<p>\r\n\t\tVous pouvez contrôler la manière dont un objet ce retourne sous forme de chaine de caractère en définissant une méthode <samp>toString()</samp> personnalisée. Cela est bien, mais vous devez vous assurer que votre méthode (1) fontionne dans tous les cas et (2) qu'elle n'a pas d'effets de bord. Si votre méthode ne possède pas ces critères, vous irez droit à la catastrophe. Par exemple, si <samp>toString()</samp> appelle une méthode qui doit faire une assertion, l'assertion peut se solder par le retour du nom de l'objet qui l'a fait rater, ce qui bien sur requier d'appeler <samp>toString()</samp>.\r\n\t</p>\r\n</div>\r\n\r\n<h3>Initialisation différée</h3>\r\n\r\n<p>\r\nOK.\r\n- <span class=\"eye-catching a-like toggle-more\">En savoir plus</span>\r\n</p>\r\n\r\n<div class=\"toggle-content\">\r\n\t<p>\r\n\t\tIl n'est pas toujours possible d'initialiser une variable au moment ou elle est déclarée, en ce sens l'initialisation différée est une bonne chose.\r\n\t</p>\r\n</div>\r\n\r\n<h3>Champ lexical explicite (contexte d'execution / scope)</h3>\r\n\r\n<p>\r\nToujours.\r\n- <span class=\"eye-catching a-like toggle-more\">En savoir plus</span>\r\n</p>\r\n\r\n<div class=\"toggle-content\">\r\n\t<p>\r\n\t\tUtilisez toujours un champ lexical explicite - cela améliore la portabilité et la clarté. Par exemple, n'attaché pas implicitement un ensemble de variable à l'objet <samp>window</samp>. Il est possible ainsi d'utiliser votre code dans un autre programme ou l'objet <samp>window</samp> n'existerrait pas.\r\n\t</p>\r\n</div>\r\n\r\n<h3>Formattage de code</h3>\r\n\r\n<p>\r\nDéplier pour plus d'informations.\r\n- <span class=\"eye-catching a-like toggle-more\">En savoir plus</span>\r\n</p>\r\n\r\n<div class=\"toggle-content\">\r\n\t<p>\r\n\t\tNous suivons (chez Google) <a href=\"http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml#Formatting\" title=\"Règle de formatage C++\">les règles de formatage C++</a> dans l'idée, avec des clarifications additionnelles.\r\n\t</p>\r\n\r\n\t<h4>Accolades</h4>\r\n\r\n\t<p>À cause des insertions de points virgules, toujours ouvrir ceux-ci sur la même ligne que ce qui demande l'ouverture d'une accolade. Par example :</p>\r\n\r\n\t<div class=\"best-practice\">\r\n\t\t<div class=\"content\">\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">if (something) {\r\n\t// ...\r\n} else {\r\n\t// ...\r\n}</code></pre>\r\n\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<h4>Initialisation d'objet et de tableau</h4>\r\n\r\n\t<p>L'initialisation ce fait sur une seule ligne autant que possible.</p>\r\n\r\n\t<div class=\"best-practice\">\r\n\t\t<div class=\"content\">\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">var arr = [1, 2, 3]; // Pas d'espace aprés [ ni avant ].\r\nvar obj = {a: 1, b: 2, c: 3}; // Pas d'espace aprés { ni avant }.</code></pre>\r\n\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<p>Les tableaux et objets initialisés sur plusieurs lignes sont indentés de deux espaces, avec l'accolade ouvrante sur la même ligne :</p>\r\n\r\n\t<div class=\"best-practice\">\r\n\t\t<div class=\"content\">\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">// Initialisation d'objet.\r\nvar inset = {\r\n  top: 10,\r\n  right: 20,\r\n  bottom: 15,\r\n  left: 12\r\n};\r\n\r\n// Initialisation de tableau.\r\nthis.rows_ = [\r\n  '\"Slartibartfast\" &lt;fjordmaster@magrathea.com&gt;',\r\n  '\"Zaphod Beeblebrox\" &lt;theprez@universe.gov&gt;',\r\n  '\"Ford Prefect\" &lt;ford@theguide.com&gt;',\r\n  '\"Arthur Dent\" &lt;has.no.tea@gmail.com&gt;',\r\n  '\"Marvin the Paranoid Android\" &lt;marv@googlemail.com&gt;',\r\n  'the.mice@magrathea.com'\r\n];\r\n\r\n// Utilisé en paramètre de méthode.\r\ngoog.dom.createDom(goog.dom.TagName.DIV, {\r\n  id: 'foo',\r\n  className: 'some-css-class',\r\n  style: 'display:none'\r\n}, 'Hello, world!');</code></pre>\r\n\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<p>Les longs attributs ou valeurs presentent des problèmes dans une liste d'initialisation, aussi préférrez toujours une initialisation non alignée. Par exemple :</p>\r\n\r\n\t<div class=\"best-practice\">\r\n\t\t<div class=\"content\">\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">CORRECT_Object.prototype = {\r\n  a: 0,\r\n  b: 1,\r\n  lengthyName: 2\r\n};</code></pre>\r\n\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<p>Mais pas comme ça :</p>\r\n\r\n\t<div class=\"worst-practice\">\r\n\t\t<div class=\"content\">\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">WRONG_Object.prototype = {\r\n  a          : 0,\r\n  b          : 1,\r\n  lengthyName: 2\r\n};</code></pre>\r\n\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<h4>Paramètres de fonctions</h4>\r\n\r\n\t<p>Quand cela est possible, touts les paramètres de fonctions doivent être écrits sur la même ligne. S'il dépasse 80 caractères, les paramètres doivent être renvoyé à la ligne de manière lisible. Pour gagner de la place, vous pouvez les aligner par groupe de 80 caractères ou le cas échéant em mettre un par ligne pour augmenter la lisibilité. L'indentation doit être faites de 4 espaces, ou être alignée avec la paranthèse ouvrante. Ci-dessous vous trouverrez les exemples les plus commun de mise en groupe et retour à la ligne des arguments :</p>\r\n\r\n\t<div class=\"best-practice\">\r\n\t\t<div class=\"content\">\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">// Quatre espace, par groupe de 80. Marche avec les longs nom de fonctions.\r\n// Par groupe de 80, prend peu de place.\r\ngoog.foo.bar.doThingThatIsVeryDifficultToExplain = function(\r\n    veryDescriptiveArgumentNumberOne, veryDescriptiveArgumentTwo,\r\n    tableModelEventHandlerProxy, artichokeDescriptorAdapterIterator) {\r\n  // ...\r\n};\r\n\r\n// Quatre espace, un paramètre par ligne. Marche avec les longs nom de fonctions,\r\n// Gardez le nom, et mettez en avant chaque paramètres.\r\ngoog.foo.bar.doThingThatIsVeryDifficultToExplain = function(\r\n    veryDescriptiveArgumentNumberOne,\r\n    veryDescriptiveArgumentTwo,\r\n    tableModelEventHandlerProxy,\r\n    artichokeDescriptorAdapterIterator) {\r\n  // ...\r\n};\r\n\r\n// Indentation alignée à la paranthèse, par groupe de 80.\r\n// Prend peu de place.\r\nfunction foo(veryDescriptiveArgumentNumberOne, veryDescriptiveArgumentTwo,\r\n             tableModelEventHandlerProxy, artichokeDescriptorAdapterIterator) {\r\n  // ...\r\n}\r\n\r\n// Indentation alignée à la paranthèse, un paramètre par ligne.\r\n// Gardez le nom, et mettez en avant chaque paramètres.\r\nfunction bar(veryDescriptiveArgumentNumberOne,\r\n             veryDescriptiveArgumentTwo,\r\n             tableModelEventHandlerProxy,\r\n             artichokeDescriptorAdapterIterator) {\r\n  // ...\r\n}</code></pre>\r\n\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<p>Quand une fonction appelée est elle même indenté vis à vis de son parent, vous êtes libre d'indenter les paramètres par rapport à l'indentation du parent. Ceux qui suit est un exemple d'indentation acceptable.</p>\r\n\t\r\n\t<div class=\"best-practice\">\r\n\t\t<div class=\"content\">\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">if (veryLongFunctionNameA(\r\n        veryLongArgumentName) ||\r\n    veryLongFunctionNameB(\r\n        veryLongArgumentName)) {\r\n  veryLongFunctionNameC(veryLongFunctionNameD(\r\n      veryLongFunctioNameE(\r\n          veryLongFunctionNameF)));\r\n}</code></pre>\r\n\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<h4>Passage de fonction anonymes</h4>\r\n\r\n\t<p>Quand vous déclarez une fonction anonyme dans une liste de paramètre d'appel d'une fonction, le corps de la fonction doit être indenté de deux espaces vis à vis de la ligne d'ouverture de la fonction, ou de deux espace par rapport au mot-clé <samp>function</samp>. Ceci dans le but de rendre le corps de la fonction anonyme plus facile à lire (c'est-à-dire pas écrasé à droite de votre éditeur).</p>\r\n\r\n\t<div class=\"best-practice\">\r\n\t\t<div class=\"content\">\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">prefix.something.reallyLongFunctionName('whatever', function(a1, a2) {\r\n  if (a1.equals(a2)) {\r\n    someOtherLongFunctionName(a1);\r\n  } else {\r\n    andNowForSomethingCompletelyDifferent(a2.parrot);\r\n  }\r\n});\r\n\r\nvar names = prefix.something.myExcellentMapFunction(\r\n    verboselyNamedCollectionOfItems,\r\n    function(item) {\r\n      return item.name;\r\n    });</code></pre>\r\n\r\n\t\t</div>\r\n\t</div>\r\n\r\n \t<h4>Créer des alias avec goog.scope</h4>\r\n\r\n \t<p><samp><a href=\"https://docs.google.com/document/pub?id=1ETFAuh2kaXMVL-vafUYhaWlhl6b5D9TOvboVg7Zl68Y\" title=\"Créer des alias avec goog.scope\">goog.scope</a></samp> peut être utilisé pour racourcir les références à un espace de nom (namespace) dans les programmes en utilisant la librairie <a href=\"http://code.google.com/closure/library/\" title=\"the Closure Library\">the Closure Library</a>.</p>\r\n\r\n\t<p>Seulement un <samp>goog.scope</samp> peut être invoqué par fichier. Toujours placé dans le contexte d'exécution global.</p>\r\n\r\n\t<p>L'ouverture <samp>goog.scope (function () {</samp> doit être exactement précédée par un saut de ligne et être à la suite de l'utilisation des <samp>goog.provide</samp>, des <samp>goog.require</samp>, ou des commentaires de haut de fichiers. La fermeture doit se faire à la dernière ligne du fichier. Ajoutez <samp>// goog.scope</samp> à la suite de la ferneture. Séparrez le commentaire du point-virgule de deux espaces.</p>\r\n\r\n\t<p>De la même manière qu'avec les espaces de nom en C++, n'indentez pas après l'utilisation de <samp>goog.scope</samp>. À la place, continuez au caractère 0 de la ligne.</p>\r\n\r\n\t<p>Les alias de nom ne pourront pas être ré-assignés à d'autres objets (ex : la plupard des constructeurs, les enumérateurs ou même les espaces de nom). Ne faites pas ça (voir plus loin comment réassigné un alias à un constructeur) :</p>\r\n\r\n\t<div class=\"worst-practice\">\r\n\t\t<div class=\"content\">\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">goog.scope(function() {\r\nvar Button = goog.ui.Button;\r\n\r\nButton = function() { ... };\r\n...</code></pre>\r\n\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<p>Les noms doivent être les mêmes que la dernière propriété du contexte global qui en faisait un alias.</p>\r\n\r\n\t<div class=\"best-practice\">\r\n\t\t<div class=\"content\">\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">goog.provide('my.module.SomeType');\r\n\r\ngoog.require('goog.dom');\r\ngoog.require('goog.ui.Button');\r\n\r\ngoog.scope(function() {\r\nvar Button = goog.ui.Button;\r\nvar dom = goog.dom;\r\n\r\n// Faire un nouvel alias juste après la déclaration d'un constructeur.\r\nmy.module.SomeType = function() { ... };\r\nvar SomeType = my.module.SomeType;\r\n\r\n// Déclarer une méthode sur le prototype comme à l'accoutumé.\r\nSomeType.prototype.findButton = function() {\r\n  // Button as été défini comme alias plus haut.\r\n  this.button = new Button(dom.getElement('my-button'));\r\n};\r\n...\r\n});  // goog.scope</code></pre>\r\n\r\n\t\t</div>\r\n\t</div>\r\n\r\n \t<h4>Indentation des retours à la ligne</h4>\r\n\r\n \t<p>À l'exception de l'?????????????écriture litéral des tableaux ou objets????????????</a>, ainsi que les fonctions anonymes, tous les retours à la ligne doivent être indenté alignée à côté de l'expression du dessus, de quatre espaces (pas de deux) de manière plus marquée que l'expression parente (Ici « à côté de l'expression du dessus » et « expression parente » font référence aux parenthèses du niveau courant).</p>\r\n\r\n\t<div class=\"best-practice\">\r\n\t\t<div class=\"content\">\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">someWonderfulHtml = '' +\r\n                    getEvenMoreHtml(someReallyInterestingValues, moreValues,\r\n                                    evenMoreParams, 'a duck', true, 72,\r\n                                    slightlyMoreMonkeys(0xfff)) +\r\n                    '';\r\n\r\nthisIsAVeryLongVariableName =\r\n    hereIsAnEvenLongerOtherFunctionNameThatWillNotFitOnPrevLine();\r\n\r\nthisIsAVeryLongVariableName = siblingOne + siblingTwo + siblingThree +\r\n    siblingFour + siblingFive + siblingSix + siblingSeven +\r\n    moreSiblingExpressions + allAtTheSameIndentationLevel;\r\n\r\nthisIsAVeryLongVariableName = operandOne + operandTwo + operandThree +\r\n    operandFour + operandFive * (\r\n        aNestedChildExpression + shouldBeIndentedMore);\r\n\r\nsomeValue = this.foo(\r\n    shortArg,\r\n    'Some really long string arg - this is a pretty common case, actually.',\r\n    shorty2,\r\n    this.bar());\r\n\r\nif (searchableCollection(allYourStuff).contains(theStuffYouWant) &&\r\n    !ambientNotification.isActive() && (client.isAmbientSupported() ||\r\n                                        client.alwaysTryAmbientAnyways())) {\r\n  ambientNotification.activate();\r\n}</code></pre>\r\n\r\n\t\t</div>\r\n\t</div>\r\n\r\n \t<h4>Saut de ligne</h4>\r\n\r\n \t<p>Utilisez les sauts de ligne pour grouper de façon logique les portions de code. Par example :</p>\r\n\r\n \t<div class=\"best-practice\">\r\n\t\t<div class=\"content\">\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">doSomethingTo(x);\r\ndoSomethingElseTo(x);\r\nandThen(x);\r\n\r\nnowDoSomethingWith(y);\r\n\r\nandNowWith(z);</code></pre>\r\n\r\n\t\t</div>\r\n\t</div>\r\n\r\n \t<h4>Opérateurs binaires et ternaires</h4>\r\n\r\n \t<p>Toujours mettre l'opérateur sur la ligne précédente. Sinon, les sauts de ligne et l'indentation suivent les mêmes règles que dans d'autres guides de style Google. Ce placement de l'opérateur a été initialement convenu rapport à l'insertion de point-virgule automatique. En fait, l'insertion de point-virgule ne peut pas se produire avant un opérateur binaire, tout nouveau code devrait s'en tenir à ce style pour être parfait.</p>\r\n\r\n  \t<div class=\"best-practice\">\r\n\t\t<div class=\"content\">\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">var x = a ? b : c;  // Tout sur la même ligne est correcte.\r\n\r\n// Indentation +4 est OK.\r\nvar y = a ?\r\n    longButSimpleOperandB : longButSimpleOperandC;\r\n\r\n// indenté avec le premier opérateur est également OK.\r\nvar z = a ?\r\n        moreComplicatedB :\r\n        moreComplicatedC;</code></pre>\r\n\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<p>Ceci inclut également l'opérateur « point ».</p>\r\n\r\n  \t<div class=\"best-practice\">\r\n\t\t<div class=\"content\">\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">var x = foo.bar().\r\n    doSomething().\r\n    doSomethingElse();</code></pre>\r\n\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n\r\n<h3>Parenthèses</h3>\r\n\r\n<p>\r\nSeulement si elles sont nécéssaire.\r\n- <span class=\"eye-catching a-like toggle-more\">En savoir plus</span>\r\n</p>\r\n\r\n<div class=\"toggle-content\">\r\n\t<p>À utiliser avec parciemonie et uniquement quand la sémantique ou la syntaxe les réclames.</p>\r\n\t<p>Ne jamais utiliser de parenthèse pour les opérateurs unaires comme <samp>delete</samp>, <samp>typeof</samp> et <samp>void</samp> ou tout autre mot-clé comme <samp>return</samp>, <samp>throw</samp> ou tout autres (<samp>case</samp>, <samp>in</samp> ou <samp>new</samp>).</p>\r\n</div>\r\n\r\n<h3>Chaînes de caractères</h3>\r\n\r\n<p>\r\nPréférrez ' plutôt que \".\r\n- <span class=\"eye-catching a-like toggle-more\">En savoir plus</span>\r\n</p>\r\n\r\n<div class=\"toggle-content\">\r\n\t<p>Pour une meilleurs lisibilités l'apostrophe (') est préférée aux guillemets (\"). Cela est d'autant plus pratique quand on créer une chaine avec du HTML :</p>\r\n\r\n  \t<div class=\"best-practice\">\r\n\t\t<div class=\"content\">\r\n\r\n<pre class=\"prettyprint linenums\"><code class=\"language-js\">var msg = 'This is some HTML';</code></pre>\r\n\r\n\t\t</div>\r\n\t</div>\r\n</div>", "style" : ".toggle-content {\r\n\tdisplay: none;\r\n}", "script" : "$(\".toggle-more\").click(function () {\r\n\t$(this).parents(\"p\").next(\"div\").toggle('fast');\r\n});", "cache" : { "comment" : { "number" : 0 } } }
{ "_id" : { "$oid" : "530f5f63620731fe86cb71b8" }, "title" : "Gérer un affichage desktop sur mobile avec du Responsive", "urn" : "gerer-un-affichage-desktop-sur-mobile-avec-du-responsive", "dates" : { "published" : "2013-11-08 17:00:00", "updated" : [ "2013-11-08 17:00:00" ] }, "content" : "<p>Quelque chose de bien pratique disparait tous les jours depuis l'arrivée du Responsive Web Design. C'est la fonctionalité d'un affichage Desktop non responsive sur mobile ou tablette. Mais Si ! Celle que l'on trouve en pied de page de site et qui dit « Afficher ce site dans sa version pour Ordinateur ». Comme certain le savent, le fait de gérer un affichage mobile et desktop sur le même site à rendu caduc la nécésité d'un site dédiée mobile dans beaucoup de cas et de ce fait, le lien vers la version desktop qui se trouvait en bas de la version mobile n'existe plus.</p>\r\n\r\n<p>Cela est bien dommage étant donné que de plus en plus de tablette (et même mobile) sont parfaitement capable d'afficher un site Desktop dans de bonne condition. De plus, même si dans certain cas l'ergonomie est bancale, on va pouvoir tout de même consulter cette fichue image que l'on souhaitait montrer à un ami sur mobile et qui malheureusement est <samp>display: none;</samp> « Ha merde, faudra que tu regardes sur un PC ».</p>\r\n\r\n<p>Je vous propose avec le même site de permettre à tout périphérique d'afficher le site dans sa version Desktop avec le même code source bien entendu. C'est partie !</p>\r\n\r\n<h2>Sans plus attendre voici ce que cela permettrait</h2>\r\n\r\n<a href=\"javascript:;\" class=\"super-test\">Test</a>", "cache" : { "comment" : { "number" : 0 } } }
{ "_id" : { "$oid" : "530f5f63620731fe86cb71b9" }, "title" : "<span>Composant</span> <span>JavaScript</span> <span>responsive</span> sans !<span>important</span> en <span>CSS</span>", "urn" : "composant-javascript-responsive-sans-important-en-css", "dates" : { "published" : "2013-10-24 21:25:00", "updated" : [ "2013-10-24 21:25:00" ] }, "content" : "<p>Je remplirai cette partie à la fin de l'article.</p>\r\n\r\n\r\n\r\n", "cache" : { "comment" : { "number" : 0 } } }
{ "__v" : 0, "_id" : { "$oid" : "537236809c8e1b22535cb6b6" }, "cache" : { "comment" : { "number" : 0 } }, "categories" : [ { "$oid" : "530cc2f27188099a66e9bcec" }, { "$oid" : "5310456355dfd5f7698d48bb" }, { "$oid" : "5310456355dfd5f7698d48ba" }, { "$oid" : "5310456355dfd5f7698d48be" }, { "$oid" : "5310456355dfd5f7698d48bc" }, { "$oid" : "53746e72eb856da96ba3f8a3" }, { "$oid" : "530ef6a6789c1a55e4fde0af" } ], "content" : "J'ai évoqué [pourquoi je n'utilisais pas Bootstrap](http://blog.lesieur.name/bootstrap-est-une-regression-pour-un-developpement-front-end-de-qualite/). Cependant, l'un des pré-requis pour un nouveau projet est de l'utilisé aussi j'ai retroussé mes manches pour approfondir la philosophie et j'ai déjà commencé à me casser les dents !\n\nAligner un texte à gauche sur _version mobile_ puis à droite sur  _version desktop_ est chose aisé en CSS avec les [Media Queries](http://www.alsacreations.com/article/lire/930-css3-media-queries.html). [Gérer le fait que deux colonnes côte à côte sur _version desktop_ passe l'une sous l'autre sur _version mobile_ l'est également avec Bootstrap](http://getbootstrap.com/css/). Pourtant aligner un texte à gauche sur _version mobile_ puis à droite sur _version desktop_ aussi facilement que la gestion des colonnes n'est pas possible...\n\nJe vais vous présenter un petit pan de code remédiant à cela.\n\n\n\n\n\n## Comment gérer des alignements différents en fonction de la taille ? ##\n\n### Philosophie des grilles ###\n\nLa philosophie utilisé pour gérer différemment les colonnes d'une grille avec Bootstrap en fonction de la taille du périphérique est de jouer avec les 4 préfixes suivant :\n\n- **xs** : défini un comportement à partir de la taille minimal d'un mobile jusqu'à l'infini en grande taille.\n- **sm** : défini un comportement à partir d'une taille type tablette jusqu'à l'infini en grande taille.\n- **md** : défini un comportement à partir d'une taille type desktop jusqu'à l'infini en grande taille.\n- **lg** : défini un comportement à partir d'une taille type grand desktop jusqu'à l'infini en grande taille.\n\nAinsi dans l'exemple ci-dessous notre élément va prendre 12 colonne sur _version mobile_ puis 8 sur _version tablette_ puis 6 sur _version desktop_ et enfin 4 sur _version grand desktop_ sur une base de 12 colonnes.\n\n```html\n<div class=\"container\">\n    <div class=\"row\">\n        <div class=\"col-xs-12 col-sm-8 col-md-6 col-lg-4\">Contenu</div>\n    </div>\n</div>\n```\n\n\n\n\n### Étendre la philosophie aux alignements de texte ###\n\nAlors quel ne fut pas ma déception quand j'ai essayé de faire ceci en espérant aligner une image à gauche sur mobile et à droite sur plus grand écran :\n\n```html\n<div class=\"container\">\n    <div class=\"row\">\n        <div class=\"text-left-xs text-right-md\">Contenu</div>\n    </div>\n</div>\n```\n\n**Le code ci-dessus ne marche pas**. Afin de le rendre fonctionnel, il va falloir ajouter à votre Bootstrap ceci :\n\n```css\n/* Comportement par défaut */,\n.text-left-sm,\n.text-left-md,\n.text-left-lg,\n.text-center-sm,\n.text-center-md,\n.text-center-lg,\n.text-right-sm,\n.text-right-md,\n.text-right-lg,\n.text-justify-sm,\n.text-justify-md,\n.text-justify-lg { \n\ttext-align: inherit; \n}\n\n/* Style par défaut */\n.text-left-xs { \n\ttext-align: left; \n}\n.text-center-xs { \n\ttext-align: center; \n}\n.text-right-xs { \n\ttext-align: right;\n}\n.text-justify-xs { \n\ttext-align: justify; \n}\n\n/* Style pour tablette */\n@media (min-width: 768px) {\n\t.text-left-sm, \n\t.text-left-xs { \n\t\ttext-align: left; \n\t}\n\t.text-center-sm, \n\t.text-center-xs { \n\t\ttext-align: center; \n\t}\n\t.text-right-sm, \n\t.text-right-xs { \n\t\ttext-align: right; \n\t}\n\t.text-justify-sm, \n\t.text-justify-xs { \n\t\ttext-align: justify; \n\t}\n}\n\n/* Style pour desktop */\n@media (min-width: 992px) {\n  \t.text-left-md, \n  \t.text-left-sm, \n  \t.text-left-xs { \n  \t\ttext-align: left; \n  \t}\n  \t.text-center-md, \n  \t.text-center-sm, \n  \t.text-center-xs { \n  \t\ttext-align: center; \n  \t}\n\t.text-right-md, \n\t.text-right-sm, \n\t.text-right-xs { \n\t\ttext-align: right;\n\t}\n\t.text-justify-md, \n\t.text-justify-sm, \n\t.text-justify-xs { \n\t\ttext-align: justify;\n\t}\n}\n\n/* Style pour grand desktop */\n@media (min-width: 1200px) {\n\t.text-left-lg, \n\t.text-left-md, \n\t.text-left-sm, \n\t.text-left-xs {\n\t\ttext-align: left;\n\t}\n\t.text-center-lg, \n\t.text-center-md, \n\t.text-center-sm, \n\t.text-center-xs {\n\t\ttext-align: center;\n\t}\n\t.text-right-lg, \n\t.text-right-md, \n\t.text-right-sm, \n\t.text-right-xs {\n\t\ttext-align: right;\n\t}\n\t.text-justify-lg, \n\t.text-justify-md, \n\t.text-justify-sm, \n\t.text-justify-xs {\n\t\ttext-align: justify;\n\t}\n}\n```\n\net le tour est joué.\n\n\n\n\n## Et pour le reste ? ##\n\nJ'imagine que ce n'est pas le seul cas de figure ou j'aurai besoin d'ajouter ce type de comportement. Donc si cela arrive avec d'autres propriétés existantes sans préfixe, suivez juste le même schéma.\n\nEt vous ? Quelles sont vos surcharges utiles ? ", "dates" : { "published" : { "$date" : 1400062680000 }, "updated" : [] }, "others" : { "markdown" : true, "published" : true }, "script" : "", "stylesheet" : "", "title" : "Alignement de texte Responsive avec Bootstrap", "urn" : "alignement-de-texte-responsive-avec-bootstrap" }
{ "__v" : 0, "_id" : { "$oid" : "5374aba4a48cab530ff13478" }, "cache" : { "comment" : { "number" : 0 } }, "categories" : [ { "$oid" : "5310456355dfd5f7698d48b8" }, { "$oid" : "5310456355dfd5f7698d48cd" }, { "$oid" : "5310456355dfd5f7698d48ba" }, { "$oid" : "530ef6a6789c1a55e4fde0af" } ], "content" : "La balise HTML script permet de définir quand le code JavaScript dans votre page est exécuté. Les attributs HTML5 async et defer sont à présent supportés par Firefox, Chrome, Safari et Internet Explorer 10+ (sinon ils sont ignorés) et permettent de modifier le comportement de chargement des scripts. Voici de courtes explications sur les différences de chaque appel.\n\n\n\n\n\n## Tableau Explicatif ##\n\n<table class=\"parsing-html-demo\">\n    <tbody><tr>\n        <th class=\"type\" rowspan=\"3\"><samp>&lt;script&gt;</samp></th>\n        <td class=\"hidden\">-</td><td class=\"hidden\">-</td><td class=\"hidden\">-</td><td class=\"hidden\">-</td><td class=\"hidden\">-</td>\n    </tr>\n    <tr>\n        <td class=\"parse\">Analyse HTML</td>\n        <td class=\"load\">Chargement...</td>\n        <td class=\"exec\">Exécution JS</td>\n        <td colspan=\"2\" class=\"parse\">Analyse HTML</td>\n    </tr>\n    <tr class=\"hidden separator\"><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td></tr>\n\n    <tr>\n        <th class=\"type\" rowspan=\"3\"><samp>&lt;script defer&gt;</samp></th>\n        <td class=\"hidden\">-</td><td class=\"hidden\">-</td><td class=\"hidden\">-</td><td class=\"hidden\">-</td><td class=\"hidden\">-</td>\n    </tr>\n    <tr>\n        <td class=\"parse\">Analyse HTML</td>\n        <td class=\"parse load\"><span>Analyse</span> + Chargement...</td>\n        <td colspan=\"2\" class=\"parse\">Analyse HTML</td>\n        <td class=\"exec\">Exécution JS</td>\n    </tr>\n    <tr class=\"hidden separator\"><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td></tr>\n\n    <tr>\n        <th class=\"type\" rowspan=\"3\"><samp>&lt;script async&gt;</samp></th>\n        <td class=\"hidden\">-</td><td class=\"hidden\">-</td><td class=\"hidden\">-</td><td class=\"hidden\">-</td><td class=\"hidden\">-</td>\n    </tr>\n    <tr>\n        <td class=\"parse\">Analyse HTML</td>\n        <td class=\"parse load\"><span>Analyse</span> + Chargement...</td>\n        <td class=\"exec\">Exécution JS</td>\n        <td colspan=\"2\" class=\"parse\">Analyse HTML</td>\n    </tr>\n    <tr class=\"hidden\"><td>-</td><td>-</td><td>-</td><td>-</td><td>-</td></tr>\n</tbody></table>\n\n\n<div class=\"parsing-html-demo\">\n    Legend :\n    <ul>\n         <li class=\"load\">Chargement...</li>\n         <li class=\"exec\">Exécution JS</li>\n         <li class=\"parse\">Analyse HTML</li>\n    </ul>\n</div>\n\n\n\n\n\n## Pour les scripts externes ##\n\n### L'exécution normal ###\n\n`<script src=\"\"></script>`\n\nC'est le comportement standard de l'élément script. L'analyse du code HTML est mise en pause le temps que le script soit exécuté. Pour les serveurs lents et les scripts lourds (en temps d'exécution et poids) cela signifie que l'affichage de la page va mettre du temps.\n\n\n\n\n### L'exécution différée ###\n\n`<script defer src=\"\"></script>`\n\nCela revient à exécuter vos scripts dans l'ordre où ils ont été rencontrés mais seulement à la fin de l'analyse HTML. Cela est la même chose que de mettre vos scripts en pied de page juste avant la fermeture du body mais de tout de même les placer physiquement dans le DOM dans le `header`. En réalité defer existe depuis _IE6_ mais ne garantie pas l'ordre d'exécution avant _IE10_.\n\n\n\n\n### L'exécution asynchrone ###\n\n`<script async src=\"\"></script>`\n\nAucune importance de savoir quand le script sera disponible ? L'asynchrone est votre ami. Le code JavaScript sera exécuté aussitôt qu'il sera disponible. Parfait pour des scripts comme les boutons sociaux ou **Modernizr** (si vous gérez élégamment les phénomènes de [FOUC](http://fr.wikipedia.org/wiki/FOUC)).\n\n\n\n\n\n## Pour les scripts inline ##\n\nLà, async et defer ne servent à rien, ils sont simplement ignorés. Sous Chrome et Safari tous les scripts inline bloque le rendu quelque soit le mot-clé employé et sous Firefox et IE de l'[analyse spéculative](http://web.developpez.com/tutoriels/web/how-browsers-work/#L3-4-2) est faites.\n\n\n\n\n\n## Fallback ##\n\nPour les navigateurs ne supportant pas defer et async comme il se doit vous pouvez utiliser la fallback [async_defer_script.js](https://gist.github.com/fearphage/881274) comme ceci :\n\n```html\n<head>\n     ...\n     <!--[if lt IE 10]><script src=\"async_defer_script.js\"></script><![endif]-->\n     ...\n</head>\n```", "dates" : { "published" : { "$date" : 1398335400000 }, "updated" : [] }, "others" : { "markdown" : true, "published" : true }, "script" : "", "stylesheet" : "div.parsing-html-demo {\n\tdisplay: none;\n}table.parsing-html-demo {\n    border-collapse:collapse;\n    width: 100%;\n    text-align: center;\n    border-top: dashed 1px #000;  \n    border-bottom: dashed 1px #000;    \n}.parsing-html-demo .separator {\n    border-bottom: dashed 1px #000;    \n}.parsing-html-demo .parse {\n    border-bottom: solid 2px #080;\n    color: #080;\n}.parsing-html-demo span {\n    color: #080;\n}.parsing-html-demo .load {\n    border-top: solid 2px #008;\n    color: #008;\n}.parsing-html-demo .exec {\n    border-top: solid 2px #800;\n    color: #800;\n}.parsing-html-demo .type {\n    vertical-align: middle;\n    width: 20%;\n    font-weight: bold;\n}.parsing-html-demo .hidden {\n    text-indent: -7777px;\n}\n@media (max-width: 460px) {\n\t.parsing-html-demo td {\n\t\ttext-indent: -7777px;\n\t\tletter-spacing: -10px;\n\t}\n\tdiv.parsing-html-demo {\n\t\tdisplay: block;\n\t}\n}", "title" : "<span>Différences</span> entre <span>async</span> et <span>defer</span> en <span>HTML5</span>", "urn" : "differences-entre-async-et-defer-en-html5" }
{ "__v" : 0, "_id" : { "$oid" : "5374d4054e21003a10eaa99f" }, "cache" : { "comment" : { "number" : 0 } }, "categories" : [ { "$oid" : "5310456355dfd5f7698d48ba" }, { "$oid" : "5310456355dfd5f7698d48c0" } ], "content" : "Récemment, pour travailler avec mes collègues du Back-end C#, j'ai du « abandonner » Sublim Text 3, mes plugins tel que [Hayaku](https://github.com/hayaku/hayaku) ou [Emmet](https://github.com/sergeche/emmet-sublime) et tout un tas de raccourcis me privant d'une productivité non négligeable.\n\nJ'ai bien cru que cela était fini quand je devais travailler sur leurs projets dans leurs environnements mais heureusement il n'en n'est rien ! Suivez-le guide, je vais vous expliquer.\n\n\n\n\n\n## Étape 1 ##\n\nOuvrez Visual Studio, rendez-vous dans « **Tools** » et sélectionnez « **External Tools**... » :\n\n<div class=\"img\"><img class=\"step-1\" src=\"http://i.stack.imgur.com/XapFz.png\" alt=\"Tools > External Tools...\"></div>\n\n\n\n\n\n## Étape 2 ##\n\nCliquez sur « *Add* ». Affectez dans _Title:_ « _Open in Sublim Text_ », rendez-vous dans le dossier d'installation de _Sublim Text_ et affectez dans _Command:_ « `<chemin_installation>/sublim_text.exe` ». Pour la partie _Arguments:_ affectez la valeur « **$(ItemPath):$(CurLine):$(CurCol)** » : Cela dit à Sublim de s'ouvrir dans le bon fichier, à la bonne ligne. Appliquez à _Initial directory:_ la valeur « **$(ItemDir)** ».\n\n<div class=\"img\"><img class=\"step-2\" src=\"http://i.stack.imgur.com/7EO1r.png\" alt=\"Paramètres...\"></div>\n\n\n\n\n\n## Étape 3 ##\n\nMaintenant si vous allez dans « **Menu > Tools** » vous trouverez votre nouvelle commande « _Open in Sublim Text_ ». Et si on lançait maintenant Sublim Text via un raccourci clavier !\n\n\n\n\n\n## Étape 4 ##\n\nRendez-vous dans « **Menu > Tools > Options** », dans « **Environment** » sélectionnez « **Keyboard** ». Dans le champ _Show command containing:_, cherchez « **externalCommand** » et sélectionnez le numéro correspondant à votre item dans la liste des « Externa tools... ». Positionnez-vous ensuite dans _Press shortcut keys:_ et tapez votre combinaison de touche. Cliquez ensuite sur « **Assign** ».\n\nÉvitez les combinaisons déjà existantes.\n\n<div class=\"img\"><img class=\"step-4\" src=\"http://i.stack.imgur.com/Mo2dB.png\" alt=\"Keybord Shortcut\"></div>\n\n\n\n\n\n## Et c'est fait ! ##\n\nSublim Text est maintenant utilisable rapidement ! Une fois vos modifications faites, fermez ou switchez d'application et Visual Studio mettra à jour vos modifications.\n\n\n\n\n\nSource images : [StackOverflow](http://stackoverflow.com/questions/18450402/moving-from-visual-studio-to-sublime-text)", "dates" : { "published" : { "$date" : 1400168520000 }, "updated" : [] }, "others" : { "markdown" : true, "published" : true }, "script" : "", "stylesheet" : ".article .img {\n    text-align: center;\n}\n\n@media (max-width: 378px) {\n    .article img.step-1 {\n        width: 100%;\n        height: auto;\n    }\n}\n\n@media (max-width: 495px) {\n    .article img.step-2 {\n        width: 100%;\n        height: auto;\n    }\n}\n\n@media (min-width: 780px) and (max-width: 860px) {\n    .article img.step-2 {\n        width: 100%;\n        height: auto;\n    }\n}\n\n.article img.step-4 {\n    width: 100%;\n    height: auto;\n}\n", "title" : "<span>Utiliser</span> <span>Sublim Text</span> avec <span>Visual Studio</span>", "urn" : "utiliser-sublim-text-avec-visual-studio" }
{ "__v" : 0, "_id" : { "$oid" : "53772e8525b3faa72aba6590" }, "cache" : { "comment" : { "number" : 0 } }, "categories" : [ { "$oid" : "53746e72eb856da96ba3f8a3" }, { "$oid" : "5310456355dfd5f7698d48ba" }, { "$oid" : "530cc2f27188099a66e9bcec" }, { "$oid" : "530ef6a6789c1a55e4fde0af" }, { "$oid" : "5310456355dfd5f7698d48c5" }, { "$oid" : "5310456355dfd5f7698d48bb" }, { "$oid" : "5310456355dfd5f7698d48b7" } ], "content" : "Pourquoi je n'utilise pas [Bootstrap] ? Cela peut sembler une « évolution » de nos méthodes de travail Front-end mais gare au loup et attention de ne pas tomber dans un travers que le W3C tente d'enrayer au fur et à mesure des évolutions HTML et CSS.\n\nCommençons par le commencement. Qu'est-ce que [Bootstrap] ? Comme plein d'autre « Librairie » ou « Framework » CSS dans la même veine, [Bootstrap] est un outil permettant d'augmenter la productivité des développeurs Front-end le maîtrisant, dans le but de fournir le plus rapidement possible un rendu visuel ergonomique et si possible responsive.\n\nMon problème ne vient pas tant de sa finalité qui est louable, mais belle et bien de la mise en oeuvre technique qui permet d'atteindre cette finalité. Pour être concis avant de développer : [Bootstrap] est une régression pour un travail Front-end de qualité.\n\nJe ne compte persuader personne, et à défaut de convaincre, je vais au moins vous expliquer mon point de vue.\n\n\n\n\n\n## Les deux approches possibles pour de l'intégration Front-end ##\n\n### L'approche Sémantique/Visuelle (ou celle du [W3C](http://www.w3.org/)) ###\n\nCette approche considère que dans un fichier HTML, les balises doivent avoir du sens et être complétée (que ce soit par leurs genres, leurs noms, leurs ids ou leurs classes) de manière sémantique de façon à donner du sens au document.\n\n> #### Exemple ####\n> Si j'ai deux éléments qui se suivent : le premier pourrait porter l'attribut `class=\"main\"` et le second l'attribut `class=\"aside\"`.\n\n**L'attribut `class` est donc dans cette approche une extension de l'attribut `id` (mais en version multiple) et le HTML garde un unique rôle : le rôle sémantique.**\n\n\n\n\n### L'approche « Tout en un » (ou celle de [Bootstrap] &amp; cie) ###\n\nCette approche considère que dans un fichier HTML, les balises doivent représenter un visuel et être complétées de manière à laisser transparaître rapidement le résultat visuel.\n\n> #### Exemple #### \n> Si j'ai deux éléments qui se suivent : le premier pourrait porter l'attribut `class=\"left\"` et le second l'attribut `class=\"right\"`.\n\n**L'attribut `class` est donc dans cette approche une extension de l'attribut `style` (mais une sorte de raccourci) ou il n'est pas nécessaire de lister les directives CSS en inline mais dans un fichier CSS séparé.**\n\n\n\n\n\n## Comparaison de code des deux approches ##\n\nPour les plus curieux, voici techniquement la différence entres les codes :\n\n\n\n\n### Sémantique et visuel séparé ###\n\n**HTML :**\n\n```html\n<header>\n    <h1>Le titre</h1>\n    <nav>\n        <ul>\n            <li>menu</li>\n            <li>menu</li>\n            <li>menu</li>\n            <li>menu</li>\n        </ul>\n    </nav>\n</header>\n<section>\n    <article>\n        <p>Le contenu<br>\n        Le contenu<br>\n        Le contenu</p>\n    </article>\n    <aside>Les à cotés</aside>\n</section>\n```\n\n**CSS :**\n\n```css\n/* Entrer le padding dans le calcul interne */\nh1,\nnav,\narticle,\naside {\n    box-sizing: border-box;\n}\n\n/* Mettre le titre en gras */\nh1 {\n    font-weight: bold;   \n}\n\n/* Centrer les textes du menu */\nnav {\n    text-align: center;\n}\n\n/* Retrait du comportement de liste standard */\nnav ul {\n    padding-left: 0;\n}\nnav li {\n    list-style-type: none;\n}\n\n/* A partir d'une tablette. */\n@media (min-width: 768px) {\n\n    /* Empècher les écoulements de flottants */\n    header:after,\n    section:after {\n        content: \"\";\n        display: block;\n        clear: both;\n    }\n\n    /* Flotter à gauche en 50% */\n    h1,\n    aside {\n        float: left;\n        width: 50%;\n    }\n\n    /* Flotter à droite en 50% */\n    h1,\n    article {\n        float: right;\n        width: 50%;\n    }\n\n    /* Remettre les menus en alignement standard */\n    nav {\n        text-align: left;\n    }\n\n    /* Mettre le menu en ligne */\n    nav li {\n        display: inline-block;\n    }\n\n    /* Placer le titre à droite */\n    h1 {\n        text-align: right;\n    }\n    \n}\n```\n\n**Rendu**\n\n> \n<div class=\"example-header\">\n    <div class=\"example-logo\"><p>Le logo</p></div>\n    <div class=\"example-menu\">\n        <ul>\n            <li>menu</li>\n            <li>menu</li>\n            <li>menu</li>\n            <li>menu</li>\n        </ul>   \n    </div>\n</div>\n<div class=\"example-content\">\n    <div class=\"example-main\">\n        <p>Le contenu<br>\n        Le contenu<br>\n        Le contenu</p>\n    </div>\n    <div class=\"example-aside\"><p>Les à cotés</p></div>\n</div>\n\n_Note : vous pouvez rétrécir votre fenêtre sur périphérique desktop pour voir le résultat mobile._\n\n\n\n\n### Framework CSS comme Bootstrap ###\n\n**HTML :**\n\n```html\n<header class=\"container\">\n    <div class=\"row\">\n        <h1 class=\"col-sm-6 col-sm-push-6 text-right-sm\">\n            <strong>Le titre</strong>\n        </h1>\n        <nav class=\"col-sm-6 col-sm-pull-6 text-center-xs text-left-sm\">\n            <div class=\"navbar-collapse collapse in\">\n                <ul class=\"nav navbar-nav\">\n                    <li>Menu</li>\n                    <li>Menu</li>\n                    <li>Menu</li>\n                    <li>Menu</li>\n                </ul>\n            </div>\n        </nav>\n    </div>\n</header>\n\n<section class=\"container\">\n    <div class=\"row\">\n        <article class=\"col-sm-6 col-sm-push-6\">\n            <p>Le contenu<br>\n               Le contenu<br>\n               Le contenu</p>\n        </article>\n        <aside class=\"col-sm-6 col-sm-pull-6\">Les à cotés</aside>\n    </div>\n</section>\n```\n\n**CSS :**\n\n```html\n<!-- État de boite noire, ça marche tel que la doc l'explique -->\n<link rel=\"stylesheet\" href=\"//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css\">\n```\n\n```css\n/* Parce que Bootstrap ne supporte pas tout ce que \nl'on souhaite faire, on surcharge ensuite avec sa \npropre CSS en essayant de conserver \nla philosophie Bootstrap (pas simple) */\n\n/* Comportement par défaut */,\n\n.text-center-sm,\n.text-center-md,\n.text-center-lg,\n.text-right-sm,\n.text-right-md,\n.text-right-lg { \n    text-align: inherit; \n}\n\n/* Style par défaut */\n.text-center-xs { \n    text-align: center; \n}\n.text-right-xs { \n    text-align: right;\n}\n\n/* Style pour tablette */\n@media (min-width: 768px) {\n    .text-center-sm, \n    .text-center-xs { \n        text-align: center; \n    }\n    .text-right-sm, \n    .text-right-xs { \n        text-align: right; \n    }\n}\n\n/* Style pour desktop */\n@media (min-width: 992px) {\n    .text-center-md, \n    .text-center-sm, \n    .text-center-xs { \n        text-align: center; \n    }\n    .text-right-md, \n    .text-right-sm, \n    .text-right-xs { \n        text-align: right;\n    }\n}\n\n/* Style pour grand desktop */\n@media (min-width: 1200px) {\n    .text-center-lg, \n    .text-center-md, \n    .text-center-sm, \n    .text-center-xs {\n        text-align: center;\n    }\n    .text-right-lg, \n    .text-right-md, \n    .text-right-sm, \n    .text-right-xs {\n        text-align: right;\n    }\n}\n```\n\n_Note : une autre approche est de dupliquer un objet que [Bootstrap] ne serait pas facilement afficher dans des états différents en fonction de la taille du périphérique afin de n'en afficher qu'un des deux à la fois._\n\n**Rendu**\n\n> \n<div class=\"example-header\">\n    <div class=\"example-logo\"><p>Le logo</p></div>\n    <div class=\"example-menu\"><p>menu menu menu menu</p></div>\n</div>\n<div class=\"example-content\">\n    <div class=\"example-main\">\n        <p>Le contenu<br>\n        Le contenu<br>\n        Le contenu</p>\n    </div>\n    <div class=\"example-aside\"><p>Les à cotés</p></div>\n</div>\n\n_Note : vous pouvez rétrécir votre fenêtre sur périphérique desktop pour voir le résultat mobile._\n\n\n## Pourquoi l'approche sémantique est la meilleure (selon moi) ##\n\n### La raison historique ; de la séparation du fond et de la forme ###\n\nLe W3C améliore les normes de structures HTML dans un but de séparation de la structure et du rendu. Voyons ça plus en détail :\n\n#### D'abord HTML ####\n\nLe HTML dans ses débuts embarquait des balises permettant de créer du fond (ou de structurer) tel que `<div>`, `<span>`, `<table>`, etc... et des balises permettant de créer de la forme (ou du rendu) tel que `<font>`, `<i>`, `<b>`, `<center>`, etc... Les deux étaient mélangés et c'est bien dans le fichier HTML, au travers de sa structure que l'on décidait qu'un texte devrait être rouge, centré et avoir une taille de 20 pixel.\n\n#### Puis le xHTML ####\n\nUne évolution logique a donc été de supprimer (ou déprécier) les balises porteuses d'un rendu visuel et de leur préférer un sens sémantique (tout en accordant une grande importance au CSS pour l'habillage). Ainsi un texte centré ou rouge se créé via une feuille CSS et on ne considère plus un texte important comme `<b>` (bold) mais plutôt ayant un sens `<strong>` (fort). C'est au développeur de choisir si finalement `<strong>` n'a pas plutôt un rendu italique et souligné via CSS.\n\nIl y a donc une volonté du Web de séparer la structure et le rendu. Ce que je trouve assez logique.\n\n#### On continue avec le HTML5 ####\n\nToujours dans ce soucis de structure sémantique, les balises en elles-mêmes se voit rajoutée du sens et c'est pour cela que `<header>`, `<footer>`, `<section>`, `<article>`, `<aside>`, `<figure>`... font leur apparition.\n\nCela signifie que l'approche de [Bootstrap] prend le contre-pied de cette idée de séparation et instaure selon moi une approche plus liée qui n'est pas en accord avec la philosophie que je partage avec le W3C.\n\n\n\n\n\n## Les raisons techniques ##\n\n### La taille du fichier HTML généré ###\n\nAjouter des classes à outrance pour habiller visuellement sa structure HTML surcharge anormalement le DOM d'au moins trois manières :\n\n- Obligation de wrapper des éléments pour qu'ils fonctionnent tels que [Bootstrap] l'a prévu.\n- Multiplication du nombre de classes dans l'attribut `class`.\n- Duplication de contenu pour afficher/masquer simplement en fonction de la taille du périphérique.\n\nCela défère le poids de la CSS vers le HTML. Or, autant les fichiers CSS peuvent être mis en cache, autant la structure HTML peut difficilement l'être étant donné sa nature changeante en fonction du contrôleur qui la génère.\n\n\n\n### La surcharge CSS ###\n\n[Bootstrap] n'est pas négligeable en taille. Cela impose un pré-chargement plus lourds au premier chargement de page (en supposant qu'ensuite le fichier soit mis en cache). De manière assez amusante, plus Bootstrap \"supporte\" des périphériques petits avec de faibles débits à l'utilisation (ajout de fichiers CSS et JS), plus il est lourd en poids...\n\n\n\n### La maitrise de l'outil ###\n\nL'avantage offert par [Bootstrap] est perdu dès l'instant ou l'outil est utilisé par des personnes ne le connaissant pas (rapidité d'intégration). Pire encore, cela expose l'intégration par de multiples personnes à mélanger l'approche [Bootstrap] à une approche sémantique.\n\n\n\n### Maintenance de code et changement de design ###\n\nLa structure étant intimement liée au Framework [Bootstrap] et au visuel soumis, le code HTML est bon à revoir dans son architecture pour un changement de design. La structure étant liée aux contrôleurs car créée par eux, c'est le Back-end qui se retrouve impacté par un changement de design là ou seulement les CSS et les JS auraient du bouger (sans que le Back soit touché par du changement de design).\n\n\n\n### Ne pas rendre service au Front-end apprenant ###\n\nL'approche « tout en un » masque le plus important : les mécanismes de fonctionnement des classes en elles-mêmes. Pourquoi -pour réaliser telles actions- elles utilisent ces attributs précisément ? Si cet état de boîte noire peut s'avérer intéressant pour des débutants et un gain de temps pour les experts : cela maintient l'écart entre les deux. Et, les seuls apprenant réellement à utiliser les nouveautés du CSS en comprenant les mécanismes sous-jacent sont ceux qui maintiennent [Bootstrap] (ou équivalent) ou ceux qui ne l'utilisent pas.\n\n\n\n### Un problème de SEO ou de performance ? ###\n\nDupliquer du contenu de manière identique dans le DOM dans le seul but de l'afficher à deux endroit différents de la grille [Bootstrap] créer du contenu dupliqué au sein d'une même page. Bien entendu on peut éviter cela en laissant dans le DOM source le code destiné au mobile et en dupliquant en JavaScript celui-ci pour l'afficher sur desktop en sacrifiant un peu de ressource JavaScript et en masquant tant bien que mal le phénomène de [FOUC](http://fr.wikipedia.org/wiki/FOUC).\n\n\n\n\n## Pourquoi utiliser Bootstrap alors ? ##\n\n### À utiliser pour : ###\n\n- Développer des « Proof of Concept » ou remplacer la création PSD par une création temps réel de façon rapide.\n- Faire des sites à la pelle et avec de très petits budgets où le résultat en performance et en qualité reste un problème mais ou l'argent fournis pour la réalisation manque.\n- Habiller un Back-office personnalisé (ou une application web) qui n'a pas fait l'objet d'une créa et que l'on espère « user friendly » rapidement et simplement (une création purement fonctionnelle sans problème de performances à grande échelle ou de soucis de SEO).\n\n\n\n### À ne pas utiliser pour : ###\n\n- Des petits sites car cela augmente bien souvent de 90% le poids du site, il vaut donc mieux ne pas le faire et perdre un peu de temps pour un gain en performance maintenance et sémantique.\n- De grosses structures car cela leur font perdre la flexibilité du changement d'UI sans impacter le Back-end, impose la formation de toutes les ressources Front-end travaillant sur le projet à Bootstrap et il résulte de la construction même des pages un impact SEO non négligeable due au poids du HTML, sa sémantique limitée et plus globalement au temps de chargement des pages...\n\n> #### Semantic UI ####\n\n> **`Bonne idée :`** Pour ma part, quitte à devoir être HTML-driven et non pas Stylesheet-driven pour l'habillage CSS, autant utiliser des Framework tel que Semantic UI qui au moins garde la philosophie du composant qui explique ce qu'il fait et non ce à quoi il ressemble.\n\n> > [Voir le projet Semantic UI](http://semantic-ui.com/)\n\n\n\n\n\n## Mélanger les deux approches pour en garder les avantages ? ##\n\nSi l'on extrait les problèmes majeures en considérant que nos ressources seront formées à utiliser [Bootstrap] nous nous retrouvons avec les deux points suivants.\n\n\n\n\n### La lourdeur de la librairie ###\n\nQue ce soit pour [Bootstrap] ou pour une autre librairie, le premier chargement sera laborieux (avant que le fichier n'ai été téléchargé une fois et mis en cache). On peut palier à ce problème en utilisant une version du script hébergé sur des serveurs comme c'est le cas pour jQuery par exemple. Ainsi pour Bootstrap ont peut se faire servir par <a href=\"http://www.bootstrapcdn.com/\" title=\"CDN for Bootstrap\">http://www.bootstrapcdn.com/</a>. L'avantage est que tous les sites utilisant le chargement par CDN Bootsrap participe à mettre en cache pour vous le fichier. Cela signifie que ce n'est plus nécessairement votre première page ouverte qui ralentira le chargement du visiteur mais peut-être celle d'un autre site.</p>\n\n\n\n\n### Remettre les classes « tout en un » de nouveau dans la CSS ###\n\nFinalement ce qu'il nous faudrait pour résoudre notre soucis et remettre la sémantique à l'ordre du jour, c'est d'adresser dans la feuille CSS (et non dans la page HTML elle-même) notre suite de classe. Si nous pouvions par exemple transformer ceci :\n\n```html\n<div class=\"clr\">\n    <div class=\"left hidden boxsizing w50\">\n        Le logo\n    </div>\n</div>\n```\n\nen ceci\n\n```html\n<div class=\"header\">\n    <div class=\"logo\">\n        Le logo\n    </div>\n</div>\n```\n\n```css\n/* Fichier complet type Bootstrap */\n\n.header {\n\t@extend .clr\t\n}\n.logo {\n\t@extend .left .hidden .boxsizing .w50\n}\n```\n\nle tour serait joué.\n\nC'est exactement ce que permettent des approches comme <a href=\"http://sass-lang.com/\" title=\"Sass - Syntactically Awesome Stylesheets\">SASS</a> ou <a href=\"http://lesscss.org/\" title=\"LESS &laquo; The Dynamic Stylesheet language\">LESS</a>. Elles permettent d'écrire de manière intuitive et non redondante des suites de sélecteurs CSS pour au final générer le fichier CSS qui va bien. Je ne vais pas expliquer ici comment cela fonctionne mais de cette manière vous pourriez remplir vos classes HTML de manière sémantique tout en conservant vos habitudes d'intégration avec [Bootstrap] par exemple.\n\n\n\n\n\n## Mon retour rapide sur l'utilisation Bootstrap ##\n\nJe trouve que les types de site réalisé avec Bootstrap se ressemble tous et qu'il devient difficile de faire quelque chose s'en éloignant sans finalement perdre du temps. [Bootstrap] devient ici plus contraignant alors qu'on était justement sensé gagner du temps à l'utiliser. Mais ceci n'est peut-être qu'une question de goût ou d'habitude.\n\n [Bootstrap]: \"http://getbootstrap.com/\" (Le framework de développement Front-end responsive et mobile first le plus populaire du web)\n\n", "dates" : { "published" : { "$date" : 1400348400000 }, "updated" : [] }, "others" : { "markdown" : true, "published" : true }, "script" : "", "stylesheet" : " /* Entrer le padding dans le calcul interne */\n.example-logo,\n.example-menu,\n.example-main,\n.example-aside {\n    box-sizing: border-box;\n}\n\n/* Mettre le titre en gras */\n.example-logo {\n    font-weight: bold;   \n}\n\n/* Centrer les textes du menu */\n.example-menu {\n    text-align: center;\n}\n\n/* Retrait du comportement de liste standard */\n.example-menu ul {\n    padding-left: 0;\n}\n.example-menu li {\n    list-style-type: none;\n}\n\n/* A partir d'une tablette. */\n@media (min-width: 768px) {\n     /* Empècher les écoulements de flottants */\n    .example-header:after,\n    .example-content:after {\n        content: \"\";\n        display: block;\n        clear: both;\n    }   \n\n    /* Flotter à gauche en 50% */\n    .example-menu,\n    .example-aside {\n        float: left;\n        width: 50%;\n    }\n\n    /* Flotter à droite en 50% */\n    .example-logo,\n    .example-main {\n        float: right;\n        width: 50%;\n    }\n\n    /* Remettre les menus en alignement standard */\n    .example-menu {\n        text-align: left;\n    }\n\n    /* Mettre le menu en ligne */\n    .example-menu li {\n        display: inline-block;\n    }\n\n    /* Placer le titre à droite */\n    .example-logo {\n        text-align: right;\n    }\n}", "title" : "<span>Bootstrap</span> est une régression pour un <span>développement</span> <span>Front-end</span> de <span>qualité</span>", "urn" : "bootstrap-est-une-regression-pour-un-developpement-front-end-de-qualite" }
{ "__v" : 0, "_id" : { "$oid" : "537b2d0406b95d3a0a73cb01" }, "cache" : { "comment" : { "number" : 0 } }, "categories" : [ { "$oid" : "5310456355dfd5f7698d48b8" }, { "$oid" : "5310456355dfd5f7698d48bb" }, { "$oid" : "5310456355dfd5f7698d48ba" }, { "$oid" : "530ef6a6789c1a55e4fde0af" } ], "content" : "On me demande souvent quelle est la structure JavaScript que j'utilise pour développer mes sites web. C'est une question à laquelle je ne sais jamais si un simple « [jQuery] » suffit ou si l'on s'attend à m'entendre répondre « [MooTools] », « [jQuery UI] », « [Backbone] », « [Knockout] », « [AngularJs] » ou je ne sais quelle autre composant/librairie/framework JavaScript Front-end extraordinaire !\n\n [jQuery]: \"http://jquery.com/\" (jQuery JavaScript Library)\n [MooTools]: \"http://mootools.net/\" (MooTools JavaScript Framework)\n [jQuery UI]: \"https://jqueryui.com/\" (jQuery UI JavaScript Components)\n [Backbone]: \"http://backbonejs.org/\" (Backbone JavaScript Framework)\n [Knockout]: \"http://knockoutjs.com/\" (Knockout JavaScript Framework)\n [AngularJs]: \"http://angularjs.org/\" (AngularJs JavaScript Framework)\n\nAu delà du fait que l'utilisation de ses ressources précédemment citées dépend du fait que l'on souhaite réaliser un site web ou un outil web ou une application web etc. je finis toujours par expliquer que j'utilise ma propre architecture JavaScript à travers toutes les différentes pages d'un site web et qu'au cas par cas, je charge les javascript dont j'ai besoin (parfois il est plus judicieux de charger de manière asynchrone un [ckeditor] sur l'unique page ou il est utile que de ce le trimbaler partout sur le site !).\n\n [ckeditor]: \"http://ckeditor.com/\" (The best web text editor for everyone)\n\nJe vais donc vous livrer à travers cet article l'architecture JavaScript que j'ai adopté. Afin de la comprendre pas à pas, j'utiliserai comme fil conducteur la réalisation d'un site vitrine. Ma façon de structurer le JavaScript client n'est pas absolue mais elle vous permettra de comprendre la logique derrière mes différents sites dont vous trouverez les sources sur GitHub ([comme pour ce blog](https://github.com/Haeresis/BlogAtlas/blob/master/assets/javascript/common.js)) ou même la logique du moteur de site [node.js] : [NodeAtlas].\n\n [Node.js]: \"http://nodejs.org/\" (Node.js is a platform built on Chrome's JavaScript runtime for easily building fast, scalable network applications)\n [NodeAtlas]: \"http://haeresis.github.io/NodeAtlas/\" (NodeAtlas vous permet de créer et maintenir des Assets HTML ou sites multilingues simplement en Node.js)\n\n\n\n\n\n## Architecture JavaScript d'un site web ##\n\nPour commencer, j'estime qu'il y a quatre zones de JavaScript par page que je nomme **Boot**, **Framework**, **Common** et **Specific**. Aucune ligne JavaScript ne doit se trouver en dehors de ces quatre zones. Ces quatre zones, dans un site en production sont matérialisées par quatre (au maximum) fichiers.\n\nEn voici l'exemple sur une page d'accueil :\n\n```html\n<!DOCTYPE html>\n<html lang=\"fr-fr\">\n    <head>\n        <meta charset=\"utf-8\" />\n        <title>La page d'accueil</title>\n        <!-- Meta / Feuilles de style -->\n        <script type=\"text/javascript\" src=\"javascript/boot.min.js\"></script>\n    </head>\n    <body class=\"home\">\n        <!-- Contenu de la page -->\n        <script type=\"text/javascript\" src=\"javascript/framework.min.js\"></script>\n        <script type=\"text/javascript\" src=\"javascript/home.min.js\"></script>\n        <script type=\"text/javascript\" src=\"javascript/common.min.js\"></script>\n    </body>\n</html>\n```\n\n\n\n\n### La zone de Boot ###\n\nCette zone est facultative. Elle est la seule à ralentir le chargement de la page car les fichiers JavaScript de cette zone sont chargés et exécutés avant le rendu visuel final de la page, avant même que la balise `body` ne soit chargée. C'est pour cela que les bonnes pratiques demandent au maximum de charger les fichiers en pied de page et que ce qui sera chargé dans le `head` fasse un poids minimal en taille de fichier et en temps d'exécution JavaScript. Le type de script qui se trouve ici est celui qui va modifier la structure HTML au dessus du body à savoir sur l'élément `html` ou dans le `head`. Cela en vu d'éviter le phénomène de [FOUC](http://fr.wikipedia.org/wiki/FOUC).\n\nOn retrouve donc ici, avant minification et rassemblement des JavaScript, des scripts comme « [Modernizr] » ou « [HTMLShiv] » qui vont impacter le rendu des balises avec les feuilles CSS. C'est ici qu'on laissera une ligne de code pour injecter par exemple une classe `js` dans la balise `html` afin d'avertir les futurs scripts ou les sélecteurs CSS que JavaScript est activé. Si aucun de ces scripts ne vous intéressent pour votre site, la zone de Boot peut donc être ignorée.\n\n [Modernizr]: \"http://modernizr.com/\" (An indispensable tool)\n [HTMLShiv]: \"https://code.google.com/p/html5shiv/\" (HTML5 IE enabling script)\n\n\n\n\n### La zone de Framework ###\n\nC'est ici que vont se trouver le chargement de toutes vos librairies/frameworks JavaScript utile à l'intégralité du site. Vous chargerez également des plugins pour vos librairies ou même vos propres fonctions JavaScript. Bref, ici c'est tout ce que vous utilisez Cross-site.\n\nCela peut ressembler à ça dans un environnement de développement :\n\n```html\n<!DOCTYPE html>\n<html lang=\"fr-fr\">\n    <head>\n        <!-- Titre / Meta / Feuilles de style -->\n    </head>\n    <body class=\"home\">\n        <!-- Contenu de la page -->\n        <script type=\"text/javascript\" src=\"javascript/jquery/date.js\"></script>\n        <script type=\"text/javascript\" src=\"javascript/jquery/string.js\"></script>\n        <script type=\"text/javascript\" src=\"javascript/jquery/jquery-2.1.0.js\"></script>\n        <script type=\"text/javascript\" src=\"javascript/jquery/jquery.ba-hashchange.js\"></script>\n        <script type=\"text/javascript\" src=\"javascript/jquery-ui/jquery-ui-1.10.4.js\"></script>\n        \n        <script type=\"text/javascript\" src=\"javascript/ckeditor/ckeditor.js\"></script>\n        <script type=\"text/javascript\" src=\"javascript/ckeditor/config.js\"></script>\n        <script type=\"text/javascript\" src=\"javascript/ckeditor/lang/fr.js\"></script>\n        <!-- Autres JavaScript -->\n    </body>\n</html>\n```\n\n\n\n\n### La zone Common ###\n\nC'est la première des deux zones que nous allons décortiquer plus bas dans cette article (les zones précédentes étant dans 95% des cas du code générique). Ici, tout va être dédié à l'interaction des scripts de la zone Framework avec le DOM du site. Cependant, ce fichier unique en version de développement (dans la majorité des cas) comme en version de production sera chargé sur toutes les pages du site comme les deux premières zones. Ne sera donc déclarées ici que les fonctions qui seront appelées sur plus d'une page.\n\n\n\n\n### La zone Specific ###\n\nCette dernière zone est facultative et _spécifique_ à chaque page. Elle se matérialise par un fichier portant le nom du template de page associé à lui. Sur la page d'accueil ce fichier est donc `home.js` tandis que sur la page de contact il s'appelle `contact-us.js`. Il ne doit contenir **que** du code unique à la page courante.\n\nSi le code de cette zone pour un template spécifique donne un fichier bien trop petit en poids pour qu'il soit négligeable à côté du `common.js`, il peut être intéressant de mettre quelques lignes normalement spécifique dans la partie commune. Nous verrons cela plus loin.\n\n\n\n\n\n## Site web de fil rouge ##\n\nPour commencer, nous allons imaginer un petit site web embarquant diverses zones HTML (des composants) qui auront chacune des fonctions JavaScript propres à travers différentes pages. Voici sans plus attendre les différents types de pages embarquant nos divers composants :\n\n### Liste des templates de page ###\n\n#### La page d'accueil ####\n\n- Le composant _Menu principal_\n- Le composant _Aperçu des pages_\n- Le composant _Aperçu des produits_\n- Le composant _Formulaire d'inscription à la newsletter_\n- Le composant _Retour en haut de page_\n\n_Contenu de **home.htm**_\n\n```html\n<!DOCTYPE html>\n<html lang=\"fr-fr\">\n    <head>\n        <meta charset=\"utf-8\" />\n        <title>La page d'accueil</title>\n    </head>\n    <body class=\"home\">\n        <nav class=\"main-nav\"><!-- Zone Menu principal --></nav>\n        <nav class=\"page-overview\"><!-- Zone Aperçu des pages --></nav>\n        <nav class=\"product-overview\"><!-- Zone Aperçu des produits --></nav>\n        <form class=\"newsletter-form\"><!-- Zone Formulaire d'inscription à la newsletter --></form>\n        <nav class=\"back-to-top\"><!-- Zone Retour en haut de page --></nav>\n    </body>\n</html>\n```\n\n\n\n#### Les pages de produits ####\n\n- Le composant _Menu principal_\n- Le composant _Aperçu des produits_\n- Le composant _Description d'un produit_\n\n_Contenu de **products/`<name-of-product>`.htm**_\n\n```html\n<!DOCTYPE html>\n<html lang=\"fr-fr\">\n    <head>\n        <meta charset=\"utf-8\" />\n        <title>La page de produit</title>\n    </head>\n    <body class=\"product\">\n        <nav class=\"main-nav\"><!-- Zone Menu principal --></nav>\n        <nav class=\"product-overview\"><!-- Zone Aperçu des produits --></nav>\n        <article class=\"product-content\"><!-- Zone Description d'un produit --></article>\n    </body>\n</html>\n```\n\n\n\n#### Les page d'articles ####\n\n- Le composant _Menu principal_\n- Le composant _Aperçu des articles_\n- Le composant _Contenu d'un article_\n- Le composant _Retour en haut de page_\n\n_Contenu de **articles/`<title-of-article>`.htm**_\n\n```html\n<!DOCTYPE html>\n<html lang=\"fr-fr\">\n    <head>\n        <meta charset=\"utf-8\" />\n        <title>La page d'article</title>\n    </head>\n    <body class=\"article\">\n        <nav class=\"main-nav\"><!-- Zone Menu principal --></nav>\n        <nav class=\"article-overview\"><!-- Zone Aperçu des articles --></nav>\n        <article class=\"article-content\"><!-- Zone Contenu d'un article --></article>\n        <nav class=\"back-to-top\"><!-- Zone Retour en haut de page --></nav>\n    </body>\n</html>\n```\n\n\n\n#### La page F.A.Q. ####\n\n- Le composant _Menu principal_\n- Le composant _Liste de Question/Réponse_\n- Le composant _Retour en haut de page_\n\n_Contenu de **faq**.htm_\n\n```html\n<!DOCTYPE html>\n<html lang=\"fr-fr\">\n\t<head>\n\t\t<meta charset=\"utf-8\" />\n\t\t<title>La page de la faq</title>\n\t</head>\n\t<body class=\"faq\">\n\t\t<nav class=\"main-nav\"><!-- Zone Menu principal --></nav>\n\t\t<section class=\"questions-answers-list\"><!-- Zone Liste de Question/Réponse --></section>\n\t\t<nav class=\"back-to-top\"><!-- Zone Retour en haut de page --></nav>\n\t</body>\n</html>\n```\n#### La page de contact ####\n\n- Le composant _Menu principal_\n- Le composant _Formulaire d'envoi d'un email_\n\n_Contenu de **contact-us.htm**_\n\n```html\n<!DOCTYPE html>\n<html lang=\"fr-fr\">\n    <head>\n        <meta charset=\"utf-8\" />\n        <title>La page de contact</title>\n    </head>\n    <body class=\"contact-us\">\n        <nav class=\"main-nav\"><!-- Zone Menu principal --></nav>\n        <form class=\"contact-us-form\"><!-- Zone Formulaire d'envoi d'un email --></form>\n    </body>\n</html>\n```\n\n\n\n\n\n### Liste des composants ###\n\nOn peut donc repérer un certain nombre de composant sur lesquels nous allons appliquer des interactions JavaScript.\n\n#### Le composant _Menu principal_ ####\n\n- Celui-ci à des sous-menus qui ne s'affichent qu'avec des interactions par clique qui vont nécessiter du JavaScript. Il dispose également d'une barre de recherche pour trouver une page dans le site qui nécessitera également du JavaScript.\n\n#### Le composant _Aperçu des pages_ ####\n\nCelui-ci sera un slider complet (flèches, swipe tactile, barre de progression) avec effets de transition qui va nécésiter du JavaScript.\n\n#### Le composant _Aperçu des produits_ ####\n\n- Celui-ci sera un slider affichant une liste d'éléments en ligne qui partent en overflow horizontal. Ceci va nécessiter du JavaScript.\n\n#### Le composant _Formulaire d'inscription à la newsletter_ ####\n\n- Celui-ci collectera les informations du formulaire pour ensuite les envoyer en AJAX si il passe les tests de validation. Ceci va nécessiter du JavaScript.\n\n#### Le composant _Retour en haut de page_ ####\n\n- Celui-ci renverra en haut de page avec un effet de défilement doux qui nécessitera du JavaScript.\n\n#### Le composant _Description d'un produit_ ####\n\n- Celui-ci sera découpé en trois parties, chacune cachées derrière des onglets. Passer d'une partie à l'autre nécessitera du JavaScript.\n\n#### Le composant _Aperçu des articles_ ####\n\n- Même comportement que pour Aperçu des produits.\n\n#### Le composant _Contenu d'un article_ ####\n\n- Pas de JavaScript prévu pour ce composant.\n\n#### Le composant _Liste de Question/Réponse_ ####\n\n- Celui-ci comportera une liste de question/réponse dont la réponse sera initialement cachée. Afficher les réponses nécessitera du JavaScript.\n\n#### Le composant _Formulaire d'envoi d'un email_ ####\n\n- Celui-ci collectera les informations du formulaire pour ensuite les envoyer en AJAX s'il passe les tests de validation. Ceci va nécessiter du JavaScript.\n\n\n\n\n\n## Aménager le fichier Common et les fichiers Specific ##\n\nLe plus simple en terme de structure serait de faire un fichier à plat contenant l'intégralité de notre JavaScript. Il nous faudra de quoi parcourir le DOM aisément aussi j'utiliserai [jQuery] (ce qui pour la structure final n'est pas obligatoire, mais aidera à la compréhension tout au long de l'article).\n\nCette structure ne tiendra pas la route si le site doit grandir, mais c'est une base que je vais vous exposer pour vous expliquer la suite (qui elle tiendra la route !).\n\n_Contenu de **javascript/common.js**_\n\n```js\nvar temp;\nvar timer;\n\nfunction openMenu() { /* Code... */ }\n\nfunction launchSearch() { /* Code... */ }\n\n$(\".main-nav\" /* handler */).bind(/* event */, function () {\n    openMenu();\n    /* ... */\n});\n\n$(\".main-nav\" /* handler */).bind(/* event */, function () { \n    launchSearch();\n    /* ... */\n});\n\n/* ... */\n\n\n/* Aperçu des page */\n\nfunction createSlider() { /* ... */ }\nfunction changeStepSlider() { /* ... */ }\nfunction startAutoSlider() { /* ... */ }\n\ncreateSlider();\nchangeStepSlider();\nstartAutoSlider();\n\n/* ... */\n```\n\nLa plupart des variables se retrouvent dans le contexte d'exécution global ce qui peut faire des conflits. Si vous souhaitez enlever des fonctionnalités, il faut mettre sous commentaire. Segmenter votre code revient à lire entre les lignes etc. Bref ça manque d'une structure.\n\n\n\n\n### Un namespace commun et par page ###\n\nPour commencer, il faut absolument isoler les parties de code pour éviter les conflits, pouvoir utiliser du JavaScript en _Strict Mode_ là où ça nous chante et pouvoir rapidement repérer du code en fonction de sur quelle page il doit intervenir.\n\n\n\n#### Isolation et exécution ####\n\nPour isoler du code en JavaScript, il faut le faire tourner dans des contextes d'exécution différents. Les contextes d'exécution sont créer uniquement à l'intérieur des fonctions. Il va donc falloir créer des fonctions d'isolation mais tout de même organisées à travers un système de namespace de manière à ce que n'importe quelle fonction soit accessible n'importe où dans le code, et sans conflit.\n\n_Contenu de **javascript/common.js** (changement 1)_\n\n```js\n// Création d'un objet unique accessible de partout.\nvar website = website || {}; // Si « website » a déjà été crée dans un précédent fichier on le reprend. Sinon on le créer.\n\n// Création d'un context d'execution isolant.\n// Ce contexte d'exécution représente le code exécuté sur toutes les pages du site.\n(function (publics) { // Tout ce qui devra être accessible en dehors de ce contexte d'execution sera accroché à « publics » et accessible via « website ».\n    \"use strict\"; // Mode Strict pour ce contexte d'execution.\n\n    var privates = {}; // Tout ce qui ne devra pas quitter le contexte d'execution sera accroché à « privates » et accessible uniquement via « privates ».\n\n    /* Attributs / Fonctions privées */\n\n    /* Attributs / Fonctions publiques */\n    \n    publics.init = function () {\n        // Le code ici sera exécutable via « website.init() ».\n    };\n}(website));\n\n// On exécute le code commun sur la page courante.\nwebsite.init();\n```\n\nÀ partir de notre site exemple, créons les fonctionnalités qui seront appelées sur le template home.\n\n\n\n#### Structure publique / privée ####\n\nVoici par exemple ce que pourrait contenir le fichier `common.js` pour notre site s'il n'était composé que de la page au template _home_ et de rien d'autre.\n\n_Contenu de **javascript/common.js** (changement 2)_\n\n```js\nvar website = website || {};\n\n(function (publics) {\n    \"use strict\";\n\n    var privates = {};\n\n    /* Menu principal */\n    publics.openMenu = function () {\n        // Permet d'ouvrir les sous menus.\n        // ...\n    };\n    publics.search = function () {\n        // Permet de lancer une recherche.\n        // ...\n    };\n    \n    /* Aperçu des pages */\n    privates.initSlider = function () {\n        // Transforme le DOM pour convenir au mécanirme.\n        // Création de barre de progression, de flèches, etc...\n        // ...\n    };\n    privates.changeSlider = function () {\n        // Permet de changer de slide.\n        // ...\n    };\n    privates.manageSliderArrows = function () {\n        // Permet de gérer les flèches.\n        // ...\n    };\n    privates.manageSliderProgressDot = function () {\n        // Permet de gérer la barre d'état.\n        // ...\n    };\n    privates.startSlider = function () {\n        // Permet de faire tourner le slider.\n        // ...\n        privates.timerSlider = setInterval(/* fonction */, 5000);\n        // ...\n    };\n    privates.stopSlider = function () {\n        // Permet d'arrêter le slider.\n        // ...\n        clearInterval(privates.timerSlider);\n        // ...\n    };\n    publics.slider = function () {\n        // Permet de générer le slider.\n        privates.initSlider();\n        privates.manageSliderArrows();\n        privates.manageSliderProgressDot();\n        privates.startSlider();\n    };\n    \n    /* Aperçu des produits */\n    privates.initOverview = function ($component) {\n        // Transforme le DOM pour convenir au mécanirme.\n        // Création de flèches.\n        // ...\n    };\n    privates.defilOverview = function ($component) {\n        // Permet de faire défiler les items.\n        // ...\n    };\n    privates.manageOverviewArrows = function ($component) {\n        // Permet de gérer les flèches.\n        // ...\n    };\n\n    // Ici on spécifie un paramètre « component » car la fonction « overview » est destinée \n    // à fonctionner avec plusieurs composants à savoir les composants « Aperçu des produits » \n    // et « Aperçu des articles » qui ont le même comportement. C'est à l'appel de la fonction\n    // que l'on passera la bonne structure.\n\n    publics.overview = function ($component) {\n        // Permet de générer le slider.\n        privates.initOverview($component);\n        privates.defilOverview($component);\n        privates.manageOverviewArrows($component);\n    };\n\n    /* Formulaire d'inscription à la newsletter */\n    private.validateForm = function (/* formulaire */, callback) {\n        // Permet de vérifier les erreurs du formulaire.\n        // ...\n        callback();\n    };\n    publics.newsletterRegistration = function () {\n        // Enregistre une nouvelle personne à la newsletter.\n        private.validateForm(/* formulaire */, function () {\n            // ...\n        });\n    };\n\n    /* Retour en haut de page */\n    publics.backToTop = function () {\n        // Retour en haut de page.\n        // ...\n    };\n\n    // On initialise les fonction que l'on souhaite utiliser.\n    publics.init = function () {\n        website.openMenu();\n        website.search();\n        website.slider();\n        website.overview();\n        publics.newsletterRegistration();\n        website.backToTop();\n    };\n}(website));\n\n// On execute le code commun sur la page courante.\nwebsite.init();\n```\n\n\n\n\n#### Segmentation ####\n\nSi votre partie common est trop grande, rien ne vous empêche de la scinder en plusieurs parties. Vous pouvez également décrocher une grosse partie de fonction commune à un mécanisme pour en faire un fichier volant plus facilement réutilisable tel quel dans un autre site.\n\n_Contenu de **javascript/common.js** (changement 3)_\n\n```js\nvar website = website || {};\n\n(function (publics) {\n    var privates = {};\n\n    /* Menu principal */\n    publics.openMenu = function () { /* ... */ };\n    publics.search = function () { /* ... */ };\n\n    /* Aperçu des produits */\n    privates.initOverview = function ($component) { /* ... */ };\n    privates.defilOverview = function ($component) { /* ... */ };\n    privates.manageOverviewArrows = function ($component) { /* ... */ };\n    publics.overview = function ($component) { /* ... */ };\n    \n    /* Formulaire d'inscription à la newsletter */\n    private.validateForm = function (/* formulaire */, callback) { /* ... */ };\n    publics.newsletterRegistration = function () { /* ... */ };\n\n    /* Retour en haut de page */\n    publics.backToTop = function () { /* ... */ };\n}(website));\n```\n\n_Contenu de **javascript/slider.js**_\n\n```js\nvar website = website || {};\n\n(function (publics) {\n    var privates = {};\n\n    /* Aperçu des pages */\n    privates.initSlider = function () { /* ... */ };\n    privates.changeSlider = function () { /* ... */ };\n    privates.manageSliderArrows = function () { /* ... */ };\n    privates.manageSliderProgressDot = function () { /* ... */ };\n    privates.startSlider = function () { /* ... */ };\n    privates.stopSlider = function () { /* ... */ };\n    publics.slider = function () { /* ... */ };\n}(website));\n```\n\n_Contenu de **javascript/run.js**_\n\n```js\nvar website = website || {};\n\n(function (publics) {\n    // On initialise les fonction que l'on souhaite utiliser.\n    publics.init = function () {\n        website.openMenu();\n        website.search();\n        website.slider();\n        website.overview();\n        publics.newsletterRegistration();\n        website.backToTop();\n    }\n}(website));\n\n// On execute le code commun sur la page courante.\nwebsite.init();\n```\n\nVous remarquerez par la même occasion que slider.js ressemble étrangement à une sorte de « plugin ». Effectivement il serait possible d'utiliser un plugin [jQuery] à la place de notre propre slider. Bien entendu dans ce cas il serrait rattaché à `$` et non plus à `website`.\n\n\n\n\n### Common vs Specific ###\n\n#### Dans des fichiers séparés ####\n\nNous allons continuer avec un **common** unique et mettre en place le fichier _spécifique_ du template de page `home`.\n\n_Contenu de **javascript/common.js** (changement 4)_\n\n```js\nvar website = website || {};\n\n(function (publics) {\n    \"use strict\";\n\n    var privates = {};\n\n    /* Menu principal */\n    publics.openMenu = function () { /* ... */ };\n    publics.search = function () { /* ... */ };\n    \n\n    // Aperçu des pages étant uniquement sur la home, il part dans le fichier spécifique home.js.\n\n\n    /* Aperçu des produits */\n    privates.initOverview = function ($component) { /* ... */ };\n    privates.defilOverview = function ($component) { /* ... */ };\n    privates.manageOverviewArrows = function ($component) { /* ... */ };\n    publics.overview = function ($component) { /* ... */ };\n    \n\n    // Le validateur de formulaire va nous resservir pour la page de contact. Il est donc commun à tout le site.\n    // Cependant le JavaScript spécifique à la newsletter est déporté dans « home.js ».\n    // Pour que « validateForm » soit accessible maintenant en dehors de la zone commune, il passe publique.\n    \n    /* Validateur de formulaire */\n    publics.validateForm = function (/* formulaire */, callback) { /* ... */ };\n\n\n    /* Retour en haut de page */\n    publics.backToTop = function () { /* ... */ };\n\n    // On initialise les fonction que l'on souhaite utiliser.\n    publics.init = function () { \n        website.openMenu();\n        website.search();\n    };\n}(website));\n\n// On execute le code commun sur la page courante.\nwebsite.init();\n```\n\nPour le JavaScript spécifique de **home**, on va déporter l'ensemble des fonction dans `website.home`.\n\n_Contenu de **javascript/home.js**_\n\n```js\nvar website = website || {};\n\n(function (publics) {\n    \"use strict\";\n\n    var privates = {};\n\n    /* Aperçu des pages */\n    privates.initSlider = function () { /* ... */ };\n    privates.changeSlider = function () { /* ... */ };\n    privates.manageSliderArrows = function () { /* ... */ };\n    privates.manageSliderProgressDot = function () { /* ... */ };\n    privates.startSlider = function () { /* ... */ };\n    privates.stopSlider = function () { /* ... */ };\n    publics.slider = function () { /* ... */ };\n\n    /* Formulaire d'inscription à la newsletter */\n    publics.newsletterRegistration = function () {\n        // Enregistre une nouvelle personne à la newsletter.\n        website.validateForm(/* formulaire */, function () {\n            // ...\n        });\n    };\n\n    // On initialise les fonction que l'on souhaite utiliser.\n    publics.init = function () {\n        website.overview($(\".product-overview\"));\n        website.backToTop();\n        website.home.slider();\n        website.home.newsletterRegistration();\n    };\n\n}(website.home = {})); // On accroche le JavaScript de la home dans un namespace (attribut) spécifique.\n\n// On execute le code destiné à la page home.\nwebsite.home.init();\n```\n\nEt la page du template **home** serait alors :\n\n_Contenu de **home.htm** (Changement 1)_\n\n```html\n<!DOCTYPE html>\n<html lang=\"fr-fr\">\n    <head>\n        <meta charset=\"utf-8\" />\n        <title>La page d'accueil</title>\n\n        <!-- Script de Boot -->\n    </head>\n    <body class=\"home\">\n        <nav class=\"main-nav\"><!-- Zone Menu principal --></nav>\n        <nav class=\"page-overview\"><!-- Zone Aperçu des pages --></nav>\n        <nav class=\"product-overview\"><!-- Zone Aperçu des produits --></nav>\n        <form class=\"newsletter-form\"><!-- Zone Formulaire d'inscription à la newsletter --></form>\n        <nav class=\"back-to-top\"><!-- Zone Retour en haut de page --></nav>\n\n        <!-- Scripts de Framework -->\n        <script type=\"text/javascript\" src=\"javascript/home.js\"></script>\n        <script type=\"text/javascript\" src=\"javascript/common.js\"></script>\n    </body>\n</html>\n```\n\nImaginons à présent que nous nous penchions sur le JavaScript spécifique du template des pages article dans le namespace de `website.article`. Nous remarquons vite qu'à part de l'initialisation, cette page ne possède pas de code spécifique pour sa page contrairement à **home**. Voyez plutôt :\n\n_Contenu de **javascript/article.js**_\n\n```js\nvar website = website || {};\n\n(function (publics) {\n    \"use strict\";\n\n    // On initialise les fonctions que l'on souhaite utiliser.\n    publics.init = function () {\n        website.overview($(\".article-overview\"));\n        website.backToTop();\n    };\n\n}(website.article = {})); // On accroche le JavaScript de article dans un namespace (attribut) spécifique.\n\n// On execute le code destiné à la page article.\nwebsite.article.init();\n```\n\nCe template ressemblerait alors à ceci :\n\n_Contenu de **articles/`<title-of-article>`.htm** (Changement 1)_\n\n```html\n<!DOCTYPE html>\n<html lang=\"fr-fr\">\n    <head>\n        <meta charset=\"utf-8\" />\n        <title>La page d'article</title>\n        ><!-- Script de Boot --></nav>\n    </head>\n    <body class=\"article\">\n        <nav class=\"main-nav\"><!-- Zone Menu principal --></nav>\n        <nav class=\"article-overview\"><!-- Zone Aperçu des articles --></nav>\n        <article class=\"article-content\"><!-- Zone Contenu d'un article --></article>\n        <nav class=\"back-to-top\"><!-- Zone Retour en haut de page --></nav>\n        <!-- Scripts de Framework -->\n        <script type=\"text/javascript\" src=\"javascript/article.js\"></script>\n        <script type=\"text/javascript\" src=\"javascript/common.js\"></script>\n    </body>\n</html>\n```\n\n\n\n#### Dans le fichier common ####\n\nComme vu avec le template **article**, le code est tellement pauvre qu'il peut être placé dans `common.js`, ce qui donnerait quelque chose comme :\n\n_Contenu de **javascript/common.js** (changement 5)_\n\n```js\nvar website = website || {};\n\n// Partie Commune\n(function (publics) {\n    \"use strict\";\n\n    var privates = {};\n\n    /* ... */\n\n    /* ... */\n\n    publics.init = function () { /* ... */ };\n}(website));\n\n// Partie article tellement petite qu'il vaut mieux l'inclure dans common.\n(function (publics) {\n    \"use strict\";\n\n    publics.init = function () { /* ... */ };\n}(website.article = {}));\n\n// Lancement des deux parties.\nwebsite.init();\nwebsite.article.init();\n```\n\n**Cependant cela signifirait que le code `website.article.init()` serait exécuté sur toutes les pages alors qu'il n'aurait besoin que d'être exécuté sur article. C'est là que nous allons créer un lanceur de init() conditionnel au template de page qui appel les scripts !**\n\n\n\n\n### Exécution conditionnelle au template ###\n\nQuand le contenu des fichiers spécifiques est séparé et appelé uniquement sur le template de page auquel il est destiné, on est sur que l'exécution de code dans ce fichier ne se ferra pas sur d'autres pages (puisqu'il ne seront pas inclus). Hors ce n'est pas le cas, comme vous pouvez le constater, avec le code spécifique de la page article qui a été inclus dans le fichier de code commun (pour des questions de performance). Il suffit simplement de conditionner l'exécution de tous les `init()` des fichiers spécifiques avec la présence ou non d'une classe associée au template sur lequel il sont sensé s'exécuter. `common.js` deviendrait donc :\n\n_Contenu de **javascript/common.js** (changement 6)_\n\n```js\nvar website = website || {};\n\n// Partie Commune\n(function (publics) {\n    \"use strict\";\n\n    var privates = {};\n\n    /* ... */\n\n    /* ... */\n\n    publics.init = function () { /* ... */ };\n}(website));\n\n\n// Partie article tellement petite qu'il vaut mieux l'inclure dans common.\n(function (publics) {\n    \"use strict\";\n\n    publics.init = function () { /* ... */ };\n}(website.article = {}));\n\n\n// On permet de placer les fichiers dans n'importe qu'elle ordre.\n// Cette zone est l'unique zone ou l'on exécutera l'intégralité du JavaScript de tout le site.\n$(function () {\n    \"use strict\";\n\n    // On vérifie quel est le template courant\n    // en vérifiant le nom de la première classe du body.\n    // Effectivement chaque body de chaque template de page à\n    // sa classe qui lui est propre.\n\n    var specific = $(\"body\") // On réclame le body.\n        .attr(\"class\") // On lit ses classes.\n        .split(\" \")[0] // On récupère la première.\n        .replace(/-/g, \"\"); // On la formate en une chaine identique au namespace !\n\n    // Pour la page home, « var specific = \"home\" » et le namespace est « website.home ».\n    // Pour la page article, « var specific = \"article\" » et le namespace est « website.article ».\n    // Pour la page contact-us, « var specific = \"contactus\" » et le namespace est « website.contactus ».\n    \n    // On lance le code commun quoi qu'il arrive.\n    website.init();\n\n    // Ici on lance le code spécifique si un namespace correspondant existe.\n    if (website[specific] !== undefined) {\n        website[specific].init();\n    }\n});\n```\n\nTous les autres `init()` disparaissent des autres fichiers et seul `common.js` est alors habilité à exécuter du code spécifique en fonction du template ou il est appelé.\n\n\n\n\n\n## Structure JavaScript du fil rouge ##\n\nNous y sommes : voici la structure JavaScript utilisée pour le site fil rouge de la partie **Site web de fil rouge** avec les spécificités évoquées dans la partie **Amennager le fichier Common et les fichiers Specific**. Voici ce que nous imaginons ; tous les scripts sont assez petits pour être dans `common.js` sauf `home.js` et `contact-us.js` qui seront des fichiers séparés.\n\nGardez à l'esprit que vous pouvez toujours très bien garder vos JavaScript dans des fichiers séparés peu importe leurs taille et de les associer dans les mêmes fichiers au besoin uniquement pour les versions minifiées.\n\n\n\n\n### common, product, faq, article, run ###\n\n_Contenu de **javascript/common.js** (changement final)_\n\n```js\nvar website = website || {};\n\n/***********/\n/* website */\n/***********/\n(function (publics) {\n    \"use strict\";\n\n    var privates = {};\n\n    /* Menu principal */\n    publics.openMenu = function () { /* ... */ };\n    publics.search = function () { /* ... */ };\n    \n    /* Aperçu des produits */\n    privates.initOverview = function ($component) { /* ... */ };\n    privates.defilOverview = function ($component) { /* ... */ };\n    privates.manageOverviewArrows = function ($component) { /* ... */ };\n    publics.overview = function ($component) { /* ... */ };\n\n    /* Validateur de formulaire */\n    publics.validateForm = function (/* formulaire */, callback) { /* ... */ };\n\n    /* Retour en haut de page */\n    publics.backToTop = function () { /* ... */ };\n\n    publics.init = function () { \n        website.openMenu();\n        website.search();\n    };\n}(website));\n\n\n\n/*******************/\n/* website.product */\n/*******************/\n(function (publics) {\n    \"use strict\";\n\n    /* Description d'un produit */\n    publics.switchTab = function () { /* ... */ };\n\n    publics.init = function () {\n        website.overview($(\".product-overview\"));\n        website.product.switchTab();\n    };\n}(website.product = {}));\n\n\n\n/***************/\n/* website.faq */\n/***************/\n(function (publics) {\n    \"use strict\";\n\n    /* Liste de Question/Réponse */\n    publics.slideDown = function () { /* ... */ };\n\n    publics.init = function () {\n        website.faq.slideDown();\n        website.backToTop();\n    };\n}(website.faq = {}));\n\n\n\n/*******************/\n/* website.article */\n/*******************/\n(function (publics) {\n    \"use strict\";\n\n    publics.init = function () {\n        website.overview($(\".article-overview\"));\n        website.backToTop();\n    };\n}(website.article = {}));\n\n\n\n/*******/\n/* Run */\n/*******/\n$(function () {\n    \"use strict\";\n\n    var specific = $(\"body\").attr(\"class\").split(\" \")[0].replace(/-/g, \"\");\n\n    website.init();\n\n    if (website[specific] !== undefined) {\n        website[specific].init();\n    }\n});\n```\n\n_Contenu de **products/`<name-of-product>`.htm** (Changement final)_\n\n```html\n<!DOCTYPE html>\n<html lang=\"fr-fr\">\n    <head>\n        <meta charset=\"utf-8\" />\n        <title>La page de produit</title>\n\n        <!-- Script de Boot -->\n    </head>\n    <body class=\"product\">\n        <nav class=\"main-nav\"><!-- Zone Menu principal --></nav>\n        <nav class=\"product-overview\"><!-- Zone Aperçu des produits --></nav>\n        <article class=\"product-content\"><!-- Zone Description d'un produit --></article>\n\n        <!-- Scripts de Framework -->\n        <script type=\"text/javascript\" src=\"javascript/common.js\"></script>\n    </body>\n</html>\n```\n\n_Contenu de **articles/`<title-of-article>`.htm** (Changement final)_\n\n```html\n<!DOCTYPE html>\n<html lang=\"fr-fr\">\n    <head>\n        <meta charset=\"utf-8\" />\n        <title>La page d'article</title>\n\n        <!-- Script de Boot -->\n    </head>\n    <body class=\"article\">\n        <nav class=\"main-nav\"><!-- Zone Menu principal --></nav>\n        <nav class=\"article-overview\"><!-- Zone Aperçu des articles --></nav>\n        <article class=\"article-content\"><!-- Zone Contenu d'un article --></article>\n        <nav class=\"back-to-top\"><!-- Zone Retour en haut de page --></nav>\n\n        <!-- Scripts de Framework -->\n        <script type=\"text/javascript\" src=\"javascript/common.js\"></script>\n    </body>\n</html>\n```\n\n_Contenu de **faq.htm** (Changement final)_\n\n```html\n<!DOCTYPE html>\n<html lang=\"fr-fr\">\n    <head>\n        <meta charset=\"utf-8\" />\n        <title>La page de la faq</title>\n\n        <!-- Script de Boot -->\n    </head>\n    <body class=\"faq\">\n        <nav class=\"main-nav\"><!-- Zone Menu principal --></nav>\n        <section class=\"questions-answers-list\"><!-- Zone Liste de Question/Réponse --></section>\n        <nav class=\"back-to-top\"><!-- Zone Retour en haut de page --></nav>\n\n        <!-- Scripts de Framework -->\n        <script type=\"text/javascript\" src=\"javascript/common.js\"></script>\n    </body>\n</html>\n```\n\n\n\n\n### Home ###\n\n_Contenu de **javascript/home.js**_\n\n```js\nvar website = website || {};\n\n/****************/\n/* website.home */\n/****************/\n(function (publics) {\n    \"use strict\";\n\n    var privates = {};\n\n    /* Aperçu des pages */\n    privates.initSlider = function () { /* ... */ };\n    privates.changeSlider = function () { /* ... */ };\n    privates.manageSliderArrows = function () { /* ... */ };\n    privates.manageSliderProgressDot = function () { /* ... */ };\n    privates.startSlider = function () { /* ... */ };\n    privates.stopSlider = function () { /* ... */ };\n    publics.slider = function () { /* ... */ };\n\n    /* Formulaire d'inscription à la newsletter */\n    publics.newsletterRegistration = function () {\n        website.validateForm(/* formulaire */, function () { /* ... */ });\n    };\n    \n    publics.init = function () {\n        website.overview($(\".product-overview\"));\n        website.backToTop();\n        website.home.slider();\n        website.home.newsletterRegistration();\n    };\n}(website.home = {}));\n```\n\n_Contenu de **home.htm** (Changement final)_\n\n```html\n<!DOCTYPE html>\n<html lang=\"fr-fr\">\n    <head>\n        <meta charset=\"utf-8\" />\n        <title>La page d'accueil</title>\n\n        <!-- Script de Boot -->\n    </head>\n    <body class=\"home\">\n        <nav class=\"main-nav\"><!-- Zone Menu principal --></nav>\n        <nav class=\"page-overview\"><!-- Zone Aperçu des pages --></nav>\n        <nav class=\"product-overview\"><!-- Zone Aperçu des produits --></nav>\n        <form class=\"newsletter-form\"><!-- Zone Formulaire d'inscription à la newsletter --></form>\n        <nav class=\"back-to-top\"><!-- Zone Retour en haut de page --></nav>\n        \n        <!-- Scripts de Framework -->\n        <script type=\"text/javascript\" src=\"javascript/home.js\"></script>\n        <script type=\"text/javascript\" src=\"javascript/common.js\"></script>\n    </body>\n</html>\n```\n\n\n\n\n### contact-us ###\n\n_Contenu de **javascript/contact-us.js**_\n\n```js\nvar website = website || {};\n\n/*********************/\n/* website.contactus */\n/*********************/\n(function (publics) {\n    \"use strict\";\n\n    /* Formulaire d'inscription à la newsletter */\n    publics.sendAMessage = function () {\n        website.validateForm(/* formulaire */, function () { /* ... */ });\n    };\n    \n    publics.init = function () {\n        website.backToTop();\n        website.contactus.sendAMessage();\n    };\n}(website.contactus = {}));\n```\n\n_Contenu de **contact-us.htm** (Changement final)_\n\n```html\n<!DOCTYPE html>\n<html lang=\"fr-fr\">\n    <head>\n        <meta charset=\"utf-8\" />\n        <title>La page de contact</title>\n        \n        ><!-- Script de Boot --></nav>\n    </head>\n    <body class=\"contact-us\">\n        <nav class=\"main-nav\"><!-- Zone Menu principal --></nav>\n        <form class=\"contact-us-form\"><!-- Zone Formulaire d'envoi d'un email --></form>\n\n        <!-- Scripts de Framework -->\n        <script type=\"text/javascript\" src=\"javascript/contact-us.js\"></script>\n        <script type=\"text/javascript\" src=\"javascript/common.js\"></script>\n    </body>\n</html>\n```", "dates" : { "published" : { "$date" : 1397661780000 }, "updated" : [] }, "others" : { "markdown" : true, "published" : true }, "script" : "", "stylesheet" : "", "title" : "<span>Structurer</span> le <span>JavaScript</span> de son <span>site</span> avec ou sans <span>Framework</span>", "urn" : "structurer-le-javascript-de-son-site-avec-ou-sans-framework" }
{ "__v" : 0, "_id" : { "$oid" : "537dc9a011b6ff1424354acd" }, "cache" : { "comment" : { "number" : 0 } }, "categories" : [ { "$oid" : "530cc2f27188099a66e9bcec" }, { "$oid" : "5310456355dfd5f7698d48cf" }, { "$oid" : "5310456355dfd5f7698d48c5" }, { "$oid" : "5310456355dfd5f7698d48ba" }, { "$oid" : "5310456355dfd5f7698d48c3" }, { "$oid" : "5310456355dfd5f7698d48bb" }, { "$oid" : "5310456355dfd5f7698d48b7" }, { "$oid" : "5310456355dfd5f7698d48b6" }, { "$oid" : "530ef6a6789c1a55e4fde0af" } ], "content" : "Il y a des solutions simples pour gérer avec une feuille CSS l'affichage de différentes langues. Vous vous êtes peut-être déjà confronté à un problème similaire : votre super menu s'affichant en ligne est parfait dans la langue des Vulcains avec une taille de caractère mais malheureusement ne l'ai plus avec la langue des Na'vis. \n\nQuand votre site sera déployé pour des localisations différentes, les feuilles CSS ne pourront alors pas être les mêmes et vous allez maintenir autant de fichiers différents que de localisation ? C'est ce que vous ferriez en faisant un très mauvais choix. Arrêtons-nous 5 minutes pour explorer une piste bien pratique pour assurer la maintenance d'une feuille CSS et de ces différentes localisations.\n\n\n\n\n\n## Oubliez les multiples variantes d'une même feuille CSS ##\n\nUne idée rapide serait de créer une feuille CSS initiale basée sur le rendu de texte « Lorem Ipsum » et de vérifier que son affichage se passe sans accroche. Il conviendrait ensuite de dupliquer cette CSS de base une fois finie et de modifier toutes les propriétés CSS qui divergent pour une autre langue de manière à ce que tout se passe bien également.\n\nMais QUID de la maintenance ? Si maintenant je dois modifier la feuille CSS de base à partir de laquelle mes 30 variantes par localisations ont été crées : je vais devoir réinjecter localisation par localisation toutes les nouvelles modifications en prenant soin de ne pas écraser dans chacune les lignes qui varies en fonction de la langue. Je ne vous parle même pas des conflits.\n\nIl y a également de fortes chances pour qu'au final, prise par groupe, les variantes pour 30 localisations ne soient qu'au nombre de 3 (petits mots, mots moyens et grands mots). Ça fait beaucoup de fichiers inutiles, car redondant, tout ça.\n\n\n\n\n\n## Une feuille CSS unique pour toutes les localisations ##\n\nEt si plutôt que d'éparpiller le code de manière redondante dans autant de fichier qu'il y a de localisation, nous gérions la localisation dans un seul et unique fichier ? Vous allez me dire que chaque localisation aurait alors des lignes qui ne la concerne pas et souffrirait d'un poids de page inutilement élevé ? Vous avez raison, mais faisons abstraction de ce point pour le moment.\n\n\n\n\n### Création avec comme base l'anglais ###\n\nTout commence de la même manière : on crée sa feuille CSS en se basant sur la langue anglaise qui a été fournie comme référence pour la création. Après plusieurs lignes, notre design est fini et les textes s'affichent comme suit :\n\n**HTML5 en anglais**\n\n```html\n<!DOCTYPE html>\n<html lang=\"en-us\">\n    <head>\n        <meta charset=\"utf-8\" />\n        <title>Localisation example</title>\n    </head>\n    <body>\n        <div class=\"logo\">\n            <h1><a href=\"javascript:;\" title=\"Return to Home\">Title</a></h1>\n        </div>\n        <nav class=\"main-nav\">\n            <ul>\n                <li><a href=\"javascript:;\" title=\"Home\">Home</a></li>\n                <li><a href=\"javascript:;\" title=\"Products\">Products</a></li>\n                <li><a href=\"javascript:;\" title=\"Care and Advice\">Care and Advice</a></li>\n                <li><a href=\"javascript:;\" title=\"Fun and Games\">Fun and Games</a></li>\n                <li><a href=\"javascript:;\" title=\"News\">News</a></li>\n            </ul>\n        </nav>\n    </body>\n</html>\n```\n\n**CSS3 sans localisation**\n\n```css\n/* Séparateurs haut et bas de l'exemple */\nbody {\n     border-bottom: 1px solid #aaa;\n     border-top: 1px solid #aaa;\n     padding: 8px 0;\n}\n\n/* Maintenir le titre à gauche */\n.logo {\n    position: absolute;\n    font-size: 1.7em;\n    font-weight: bold;\n    padding: 0 16px;\n}\n\n/* Placer la zone menu à droite */\n.main-nav {\n    float: right;\n}\n\n/* Rendre le ul « transparent » */\n.main-nav ul {\n    list-style: none;\n    margin: 0;\n    padding: 0;\n}\n\n/* Permettre aux items d'êtres en ligne */\n.main-nav li {\n    display: inline-block;\n    padding-left: 0;\n}\n\n/* Inclure de l'espace à gauche de tous les items sauf le premier */\n.main-nav li + li {\n    padding: 8px 0 8px 11px;\n}\n\n/* Créer un séparateur entre chaque item */\n.main-nav li + li:before {\n    margin-right: 13px;\n    content: \"|\";\n}\n```\n\n**Rendu**\n\n<div class=\"example\">\n\t<div class=\"elogo\">\n\t\t<div class=\"h1\"><a href=\"javascript:;\" title=\"Return to Home\">Title</a></div>\n\t</div>\n\t<div class=\"emain-nav\">\n\t\t<ul>\n\t\t\t<li><a href=\"javascript:;\" title=\"Home\">Home</a></li>\n\t\t\t<li><a href=\"javascript:;\" title=\"Products\">Products</a></li>\n\t\t\t<li><a href=\"javascript:;\" title=\"Care and Advice\">Care and Advice</a></li>\n\t\t\t<li><a href=\"javascript:;\" title=\"Fun and Games\">Fun and Games</a></li>\n\t\t\t<li><a href=\"javascript:;\" title=\"News\">News</a></li>\n\t\t</ul>\n\t</div>\n</div>\n\n\n\n\n### Localisation en français et problèmes ###\n\nLe marché français souhaite une version du site dans sa langue et fournit donc les traductions pour la localisation. Après injection, notre code HTML ressemble à ça :\n\n**HTML5 en français**\n\n```html\n<!DOCTYPE html>\n<html lang=\"fr-fr\">\n    <head>\n        <meta charset=\"utf-8\" />\n        <title>Exemple de localisation</title>\n    </head>\n    <body>\n        <div class=\"logo\">\n            <h1><a href=\"javascript:;\" title=\"Retour à l'accueil\">Titre</a></h1>\n        </div>\n        <nav class=\"main-nav\">\n            <ul>\n                <li><a href=\"javascript:;\" title=\"Accueil\">Accueil</a></li>\n                <li><a href=\"javascript:;\" title=\"Produits\">Produits</a></li>\n                <li><a href=\"javascript:;\" title=\"Soins et Conseils\">Soins et Conseils</a></li>\n                <li><a href=\"javascript:;\" title=\"Divertissements et Jeux\">Divertissements et Jeux</a></li>\n                <li><a href=\"javascript:;\" title=\"Actualités\">Actualités</a></li>\n            </ul>\n        </nav>\n    </body>\n</html>\n```\n\n**et CSS3 identique à la précédente feuille**\n\n**Rendu**\n\n<div class=\"example\">\n\t<div class=\"elogo\">\n\t\t<div class=\"h1\"><a href=\"javascript:;\" title=\"Retour à l'accueil\">Titre</a></div>\n\t</div>\n\t<div class=\"emain-nav\">\n\t\t<ul>\n\t\t\t<li><a href=\"javascript:;\" title=\"Accueil\">Accueil</a></li>\n\t\t\t<li><a href=\"javascript:;\" title=\"Produits\">Produits</a></li>\n\t\t\t<li><a href=\"javascript:;\" title=\"Soins et Conseils\">Soins et Conseils</a></li>\n\t\t\t<li><a href=\"javascript:;\" title=\"Divertissements et Jeux\">Divertissements et Jeux</a></li>\n\t\t\t<li><a href=\"javascript:;\" title=\"Actualités\">Actualités</a></li>\n\t\t</ul>\n\t</div>\n</div>\n\nEt là votre mise en page est mise à mal. Une première solution serait de forcer la traduction à ne pas avoir de caractères en plus que la version anglaise. Parfois c'est envisageable... et parfois pour certaine langue c'est impossible.\n\n> _Note : j'ai volontairement forcé la largeur du composant à 560px (désactivation de la responsivité) pour que vous puissiez constater le problème quelque soit votre périphérique d'affichage._\n\n\n\n\n### Localisation de la feuille CSS ###\n\nC'est là que vous vous demandez s'il ne va pas falloir maintenir une feuille différente qui sera chargée ou non sur la page en fonction de la localisation. Le problème est que vous allez par exemple faire une feuille différente pour la localisation française et espagnole alors que pour un peu les ajustements seront identiques pour ces deux localisations. Puis, par la suite, le texte va changer et vous ferez la chasse aux ajustements à travers tous vos fichiers.\n\nPour ma part, je vous propose de gérer toutes les localisations dans les CSS initiales ; par exemple tout en bas. Effectivement, quand le site sera affiché dans telle ou telle langue il y aura des instructions chargées inutilement. Mais dans la masse de propriétés « non localisée » la taille devient négligeable.\n\nModifions donc notre feuille CSS initiale :\n\n```css\n/*-------------------*\\\n    $SOMMAIRE\n\\*-------------------*/\n\n/**\n * SOMMAIRE..........c'est moi !\n * STANDARD..........les propriétés CSS de la page.\n * LOCALISATION......les propriétés variants en fonction de la langue.\n */\n\n\n\n\n\n/*-------------------*\\\n    $STANDARD\n\\*-------------------*/\n\n/* Séparateurs haut et bas de l'exemple */\nbody {\n     border-bottom: 1px solid #aaa;\n     border-top: 1px solid #aaa;\n     padding: 8px 0;\n}\n\n/* Maintenir le titre à gauche */\n.logo {\n    position: absolute;\n    font-size: 1.7em;\n    font-weight: bold;\n    padding: 0 16px;\n}\n\n/* Placer la zone menu à droite */\n.main-nav {\n    float: right;\n}\n\n/* Rendre le ul « transparent » */\n.main-nav ul {\n    list-style: none;\n    margin: 0;\n    padding: 0;\n}\n\n/* Permettre aux items d'êtres en ligne */\n.main-nav li {\n    display: inline-block;\n    padding-left: 0;\n}\n\n/* Inclure de l'espace à gauche de tous les items sauf le premier */\n.main-nav li + li { /*** localisé ***/\n    padding: 8px 0 8px;\n    padding-left: 11px; /* Propriété sortie pour être surchargée seule plus loin */\n}\n\n/* Créer un séparateur entre chaque item */\n.main-nav li + li:before {\n    margin-right: 13px;\n    content: \"|\";\n}\n\n\n\n\n/*-------------------*\\\n    $LOCALISATION\n\\*-------------------*/\n.main-nav li + li:lang(fr) {\n    padding-left: 4px;\n}\n.main-nav li + li:before:lang(fr) {\n    margin-right: 6px;\n}\n```\n\n**Rendu**\n\n<div class=\"example fr\">\n\t<div class=\"elogo\">\n\t\t<div class=\"h1\"><a href=\"javascript:;\" title=\"Retour à l'accueil\">Titre</a></div>\n\t</div>\n\t<div class=\"emain-nav\">\n\t\t<ul>\n\t\t\t<li><a href=\"javascript:;\" title=\"Accueil\">Accueil</a></li>\n\t\t\t<li><a href=\"javascript:;\" title=\"Produits\">Produits</a></li>\n\t\t\t<li><a href=\"javascript:;\" title=\"Soins et Conseils\">Soins et Conseils</a></li>\n\t\t\t<li><a href=\"javascript:;\" title=\"Divertissements et Jeux\">Divertissements et Jeux</a></li>\n\t\t\t<li><a href=\"javascript:;\" title=\"Actualités\">Actualités</a></li>\n\t\t</ul>\n\t</div>\n</div>\n\n\n\n\n\n### Le pseudo-sélecteur `:lang()` et l'attribut `lang` ###\n\nGrâce au pseudo-sélecteur `:lang()` vous pouvez conditionnellement appliquer du style à un élément HTML en HTML5 en fonction du contenu de l'attribut `lang` de la balise `<html>`.\n\nDans le cas de figure ci-dessous :\n\n```html\n<html lang=\"fr-fr\">\n    ...\n    <div class=\"content\">Texte</div>\n    ...\n</html>\n```\n\nles sélecteurs 1 et 2 ci-après seront appliqués, mais pas le 3 :\n\n```css\n.content:lang(fr-fr) {\n    color: #ccc;\n}\n\n.content:lang(fr) {\n    font-weight: bold;\n}\n\n.content:lang(en-us) {\n    color: #f00;\n}\n```\n\n\n\n## Support xHTML/HTML4 ou CSS 2.1 ##\n\nCette technique peut également être utilisée sans le pseudo-sélecteur `:lang()` qui a l'avantage de matcher avec « fr-fr » si on spécifie simplement « fr » mais de ne pas fonctionner tout cours avec les navigateurs les plus ~~inutiles~~ vieux.\n\n### Seulement avec du CSS 2.1 ###\n\nIl convient de remplacer `:lang(fr-fr)` en fin d'instruction par `[lang=fr-fr]` en début. Ainsi le code précédent devient :\n\n```css\n[lang=fr-fr] .content {\n    color: #ccc;\n}\n\n[lang=fr] .content,\n[lang=fr-fr] .content {\n    font-weight: bold;\n}\n\n[lang=en-us] .content {\n    color: #f00;\n}\n```\n\n\n\n### Sans HTML5 ###\n\nL'idée est ici de remplacer `<html lang=\"fr-fr\">` qui n'est pas valide xHTML/HTML4 par `<html class=\"fr-fr\">` et de manager côté Back-end la présence ou non de cette classe en fonction de la langue. Le code CSS devient alors :\n\n```css\n.fr-fr .content {\n    color: #ccc;\n}\n\n.fr .content,\n.fr-fr .content {\n    font-weight: bold;\n}\n\n.en-us .content {\n    color: #f00;\n}\n```\n\n> _Note : n'hésitez pas, même en HTML5, à ajouter cette classe pour améliorer les performances de vos sélecteurs._\n\n\n\n\n\n## Le mot de la fin ##\n\nAu final vous maintiendrez beaucoup moins de fichier et pourrez gérer les différentes tailles de contenu par groupe de pays !\n\n```css\n.header:lang(es),\n.header:lang(de),\n.header:lang(fr) {\n    /* Propriété communes */\n}\n.header:lang(us) {\n    /* Propriété communes */\n}\n.content:lang(de),\n.content:lang(fr) {\n    /* Propriété communes */\n}\n.content:lang(es),\n.content:lang(us) {\n    /* Propriété communes */\n}\n.footer:lang(fr) {\n    /* Propriété communes */\n}\n.footer:lang(de),\n.footer:lang(es),\n.footer:lang(us) {\n    /* Propriété communes */\n}\n```", "dates" : { "published" : { "$date" : 1383230820000 }, "updated" : [] }, "others" : { "markdown" : true, "published" : true }, "script" : "", "stylesheet" : ".example {\npadding: 8px 0;\nborder-top: 1px solid #aaa;\nborder-bottom: 1px solid #aaa;\nbackground-color: #fff;\n}\n.example .h1 {\nfont-size: 28px;\nfont-size: 2.8rem;\nmargin-top: 8px;\nfont-family: Lato,\"Helvetica Neue\",Helvetica,Arial,sans-serif;\n}\n.dark .example {\nbackground-color: #000;\n}\n.example:after {\nclear: both;\ncontent: \"\";\ndisplay: block;\n}\n.example .elogo {\nposition: absolute;\nfont-size: 1.7em;\nfont-weight: bold;\npadding: 0 16px;\n}\n.example .emain-nav {\nfloat: right;\n}\n.example .emain-nav ul {\nlist-style: none;\nmargin: 0;\npadding: 0;\n}\n.example .emain-nav li {\ndisplay: inline-block;\npadding-left: 0;\n}\n.example .emain-nav li + li {\npadding: 8px 0 8px;\npadding-left: 11px;\n}\n.example .emain-nav li + li:before {\nmargin-right: 13px;\ncontent: \"|\";\n}\n.fr.example .emain-nav li + li:before {\nmargin-right: 6px;\n}\n.fr.example .emain-nav li + li {\npadding-left: 4px;\n}\n\n/*@media (max-width: 950px) {\n\t.example .emain-nav li:nth-child(6),\n\t.example .emain-nav li:nth-child(5),\n\t.example .emain-nav li:nth-child(3) {\n\t\tdisplay:none;\n\t}\n\t.example {\n\t\twidth: 360px;\n\t}\n}*/\n\n.example {\n\twidth: 560px;\n}", "title" : "Bien <span>gérer</span> la <span>localisation</span> des sites en <span>CSS3</span> et <span>HTML5</span>", "urn" : "bien-gerer-la-localisation-des-sites-en-css3-et-html5" }
{ "__v" : 0, "_id" : { "$oid" : "537f05c76012d1b53d2bdba9" }, "cache" : { "comment" : { "number" : 0 } }, "categories" : [ { "$oid" : "5310456355dfd5f7698d48cd" }, { "$oid" : "5310456355dfd5f7698d48c1" }, { "$oid" : "5310456355dfd5f7698d48ba" }, { "$oid" : "530ef6a6789c1a55e4fde0af" } ], "content" : "Quand une page web est chargée, les éléments externes à celle-ci sont appelés tout au long de son chargement pour permettre au navigateur d'afficher le résultat visuel final. Cela prend du temps, et certains chargements bloquent le rendu alors que d'autres non. D'autres encore sont ignorés tant qu'une action de la part de l'utilisateur n'a pas été effectuée.\n\nPour bien comprendre et manager ses chargements de page, je vous propose de comprendre une liste de comportement au chargement des ressources pour Chrome, Safari, Firefox, IE et Opera.\n\n\n\n\n\n## Les images ##\n\n> Est-ce qu'une image dans la balise `<img>` qui ne doit pas apparaître au rendu déclenche une requête HTTP ?\n\n| Chrome | Firefox | IE  | Safari | Opera |\n|:------:|:-------:|:---:|:------:|:-----:|\n| Oui    | Oui     | Oui | Oui    | Oui   |\n\n**Exemple :**\n\n```html\n<div style=\"display: none\">\n    <img src=\"image.png\" alt\"Image\">\n</div>\n```\n\n> **`Oui.`** Les navigateurs téléchargent les images indépendamment des styles CSS appliqués, [cela fait parti de la spécification HTML](http://www.whatwg.org/specs/web-apps/current-work/multipage/edits.html#the-img-element).\n\n> Ce comportement est la bête noire de pas mal d'implémentation JavaScript pour adapter les images, car l'image est demandée avant même que le JavaScript n'est le temps d'en appeler une autre via la propriété `src` ou même d'en obtenir sa taille.\n\n\n-----\n\n\n## Les backgrounds ##\n\n### Inclues dans un élément non affiché ###\n\n> Est-ce qu'un élément possédant une image de background et inclus dans un élément invisible déclenche une requête HTTP ?\n\n| Chrome | Firefox | IE  | Safari | Opera |\n|:------:|:-------:|:---:|:------:|:-----:|\n| Non    | Non     | Non | Non    | Non   |\n\n**Exemple :**\n\n```html\n<div style=\"display: none\">\n    <div style=\"background: url('image.png')\"></div>\n</div>\n```\n\n> *`Non.`* Les images de background en CSS diffèrent des balises `img`, elles ne sont pas réclamées au moment ou le code HTML est analysé.\n\n> Si un élément est en `display: none`, calculer les styles des éléments enfant est une perte de temps car il n'y aura aucun impact sur le rendu du document, ainsi les images de background pour les éléments enfants cachés ne sont jamais calculées, ni même téléchargées.\n\n\n\n### Sur un élément non affiché ###\n\n> Est-ce qu'un élément possédant une image de background et non visible déclenche une requête HTTP ?\n\n| Chrome | Firefox | IE  | Safari | Opera |\n|:------:|:-------:|:---:|:------:|:-----:|\n| Oui    | **Non** | Oui | Oui    | Oui   |\n\n**Exemple :**\n\n```html\n<div style=\"background: url('image.png'); display: none\"></div>\n```\n\n> **`Pas tout le temps.`** Les navigateurs font parfois des choses différentes les un des autres !\n\n> Donc ici la `<div>` n'est pas rendu, mais il est nécessaire que le style soit analysé pour s'en apercevoir. IE, Safari, Opera et Chrome lance la demande en file d'attente aussitôt qu'ils ont analysé les styles CSS.\n\n\n\n### Sur un élément transparent ###\n\n> Est-ce qu'un élément possédant une image de background et transparent déclenche une requête HTTP ?\n\n| Chrome | Firefox | IE  | Safari | Opera |\n|:------:|:-------:|:---:|:------:|:-----:|\n| Oui    | Oui     | Oui | Oui    | Oui   |\n\n**Exemple :**\n\n```html\n<div style=\"background: url('image.png'); visibility: hidden\"></div>\n```\n\n> **`Oui.`** Les éléments avec un `visibility: hidden` prennent toujours de la place sur la page, pour que cela soit possible, cette place à besoin d'être calculée. Et ce mécanisme lance une requête de chargement.\n\n\n\n### Inclus dans un élément transparent ###\n\n> Est-ce qu'un élément possédant une image de background et inclus dans un élément transparent déclenche une requête HTTP ?\n\n| Chrome | Firefox | IE  | Safari | Opera |\n|:------:|:-------:|:---:|:------:|:-----:|\n| Oui    | Oui     | Oui | Oui    | Oui   |\n\n**Exemple :**\n\n```html\n<div style=\"visibility: hidden\">\n    <div style=\"background: url('image.png')\"></div>\n</div>\n```\n\n> **`Oui.`** Même punition que l'élément du dessus.\n\n\n-----\n\n\n## Les images via JavaScript ##\n\n> Créer une balise image et lui affecter une valeur dans sa source déclenche une requête HTTP ?\n\n| Chrome | Firefox | IE  | Safari | Opera |\n|:------:|:-------:|:---:|:------:|:-----:|\n| Oui    | Oui     | Oui | Oui    | Oui   |\n\n**Exemple :**\n\n```javascript\nvar img = document.createElement('img');\nimg.src = 'image.png';\n```\n\n> **`Oui.`** L'élément `img` n'attend tout simplement pas pour faire ses requêtes.\n\n> La source d'une `img` est [téléchargée aussitôt que l'attribut `src` est (re)défini](http://www.whatwg.org/specs/web-apps/current-work/multipage/edits.html#the-img-element). Il n'y a pas besoin pour cela que l'image soit insérée dans le document.\n\n> Si vous avez besoin de déclencher rapidement une requête http et que vous vous moquez de la réponse le plus rapide est de faire `new Image().src = <url>;`.\n\n\n-----\n\n\n## Les backgrounds via JavaScript ##\n\n### Création simple ###\n\n> Créer une balise et lui affecter une valeur de background dans son style déclenche une requête HTTP ?\n\n| Chrome | Firefox | IE  | Safari | Opera |\n|:------:|:-------:|:---:|:------:|:-----:|\n| Non    | Non     | Non | Non    | Non   |\n\n**Exemple :**\n\n```javascript\nvar div = document.createElement('div');\ndiv.style.background = \"url('image.png')\";\n```\n\n> *`Non.`* De la même manière que dans le document HTML, les images de background ne sont pas téléchargées tant que leurs styles ne sont pas résolu. Cela n'arrive pas tant que l'image n'est pas insérée dans le document.\n\n\n\n### Injection puis retrait ###\n\n> Créer une balise et lui affecter une valeur de background dans son style, puis l'ajouter au DOM et le retirer, déclenche une requête HTTP ?\n\n| Chrome | Firefox | IE  | Safari | Opera |\n|:------:|:-------:|:---:|:------:|:-----:|\n| Non    | Non     | Non | Non    | Non   |\n\n**Exemple :**\n\n```javascript\nvar div = document.createElement('div');\ndiv.style.background = \"url('image.png')\";\ndocument.body.appendChild(div);\n/* ... du code ... */\ndocument.body.removeChild(div);\n```\n\n> *`Non.`* En effet, la nature mono-thread de JavaScript et du DOM signifie qu'un élément est ajouté et retiré avant même que le navigateur n'ai besoin de se soucier d'en faire le rendu.\n\n> *Note : Le code ci-dessous déclenche quand même une requête HTTP sous IE à cause de* `div.innerHTML`*.*\n\n> ```js\nvar div = document.createElement('div');\ndiv.style.background = \"url('image.png')\";\ndocument.body.appendChild(div);\n/* ... du code ... */\ndiv.innerHTML;\n/* ... du code ... */\ndocument.body.removeChild(div);\n```\n\n\n\n### Injection puis retrait avec certaines fonctions ###\n\n> Créer une balise et lui affecter une valeur de background dans son style, puis l'ajouter au DOM et le retirer tout en demandant entre les deux une information sur la balise, déclenche une requête HTTP ?\n\n| Chrome | Firefox | IE  | Safari | Opera |\n|:------:|:-------:|:---:|:------:|:-----:|\n| Oui    | Oui     | Oui | Oui    | Oui   |\n\n**Exemple :**\n\n```js\nvar div = document.createElement('div');\ndiv.style.background = \"url('image.png')\";\ndocument.body.appendChild(div);\n/* ... du code ... */\ndiv.offsetWidth;\n/* ... du code ... */\ndocument.body.removeChild(div);\n```\n\n> **`Oui.`** Pour récupérer la taille d'un élément dans le navigateur, il faut résoudre ses styles et calculer leurs affichages. Comme vu précédemment, cela induit une requête.\n\n\n-----\n\n\n## Les scripts ##\n\n### Avec un type inconnu ###\n\n> Est-ce qu'un fichier dans la balise `<script>` avec un type MIME inconnu déclenche une requête HTTP ?\n\n| Chrome | Firefox | IE      | Safari | Opera |\n|:------:|:-------:|:-------:|:------:|:-----:|\n| Non    | **Oui** | **Oui** | Non    | Non   |\n\n**Exemple :**\n\n```js\n<script src=\"script.js\" type=\"foo/bar\"></script>\n```\n\n> *`Pas toujours.`* Cela induit une requête dans Firefox et IE. Aucun des navigateurs n'est censé exécuter des scripts dont le type est inconnu, mais Firefox et IE vont télécharger le script indépendamment de son type.\n\n> [La specification HTML](http://www.whatwg.org/specs/web-apps/current-work/multipage/scripting-1.html#script-processing-prepare) dit aux navigateurs d'ignorer les scripts avec un type non supporté.\n\n> *Note : Bien que le type* `text/html` *soit supporté par les navigateurs, cela n'est pas le cas via la balise* `<script>`*.*\n\n> *Note 2 : l'attribut ancien* `language` *suit le même procéder dans les 5 navigateurs.*\n\n\n\n### Sans type ###\n\n> Est-ce qu'un fichier dans la balise `<script>` sans type MIME déclenche une requête HTTP ?\n\n| Chrome | Firefox | IE  | Safari | Opera |\n|:------:|:-------:|:---:|:------:|:-----:|\n| Oui    | Oui     | Oui | Oui    | Oui   |\n\n**Exemple :**\n\n```js\n<script src=\"script.js\"></script>\n```\n\n> **`Oui.`** Si un script n'a pas d'attribut `type` ou `language`, `text/javascript` est utilisé. C'est un comportement commun des navigateurs [qui fait parti de la specification HTML](http://www.whatwg.org/specs/web-apps/current-work/multipage/scripting-1.html#script-processing-prepare).\n\n\n-----\n\n\n## Chargement dynamique de scripts ##\n\n### Création simple ###\n\n> Créer un script et lui affecter un fichier déclenche une requête HTTP ?\n\n| Chrome | Firefox | IE      | Safari | Opera |\n|:------:|:-------:|:-------:|:------:|:-----:|\n| Non    | Non     | **Oui** | Non    | Non   |\n\n**Exemple :**\n\n```js\nvar script = document.createElement('script');\nscript.src = 'script.js';\n```\n\n> *`Pas toujours.`* Ce que dit [la specification](http://www.whatwg.org/specs/web-apps/current-work/multipage/scripting-1.html#dfnReturnLink-0) :\n\n> > Quand un élément script... rencontre l'un des événements listés... celui-ci doit être synchronisé quand l'élément sera inséré dans le document...\n\n> IE ne suit pas les règles en effectuant la requête avant que le script ne soit inséré dans le document, bien que cela permette de télécharger un script et l'analyser de manière séparé.\n\n\n\n### Injection puis retrait ###\n\n> Créer un script et lui affecter un fichier, puis l'ajouter au DOM et le retirer, déclenche une requête HTTP ?\n\n| Chrome | Firefox | IE  | Safari | Opera |\n|:------:|:-------:|:---:|:------:|:-----:|\n| Oui    | Oui     | Oui | Oui    | Oui   |\n\n**Exemple :**\n\n```js\nvar script = document.createElement('script');\nscript.src = 'script.js';\ndocument.body.appendChild(script);\ndocument.body.removeChild(script);\n```\n\n> **`Oui.`** Regardons de nouveau [la specification](http://www.whatwg.org/specs/web-apps/current-work/multipage/scripting-1.html#dfnReturnLink-0) :\n\n> > Quand un élément script... rencontre l'un des événement listé... celui-ci doit être synchronisé quand l'élément sera inséré dans le document...\n\n> La préparation du script est synchrone, elle n'attend pas la fin de l'exécution du code.\n\n\n-----\n\n\n## Chargement dynamique de fichiers ##\n\n### Création simple ###\n\n> Créer une balise `link` et lui affecter un fichier déclenche une requête HTTP ?\n\n| Chrome | Firefox | IE  | Safari | Opera |\n|:------:|:-------:|:---:|:------:|:-----:|\n| Non    | Non     | Non | Non    | Non   |\n\n**Exemple :**\n\n```js\nvar link = document.createElement('link');\nlink.rel = 'stylesheet';\nlink.href = 'style.css';\n```\n\n> *`Non.`* Pas de requête cette fois ci, en accord avec [la specification](http://www.whatwg.org/specs/web-apps/current-work/multipage/links.html#link-type-stylesheet) :\n\n> > Le moment approprié pour obtenir une ressource externe via un `link` créé est le moment où celui-ci est inséré dans le document...\n\n> ...donc on ne s'attend pas à voir partir une requête tant que l'élément n'est pas inséré dans le DOM.\n\n\n\n### Injection puis retrait ###\n\n> Créer une balise `link` et lui affecter un fichier, puis l'ajouter au DOM et le retirer, déclenche une requête HTTP ?\n\n| Chrome | Firefox | IE  | Safari | Opera |\n|:------:|:-------:|:---:|:------:|:-----:|\n| Oui    | Oui     | Oui | Oui    | Oui   |\n\n**Exemple :**\n\n```js\nvar link = document.createElement('link');\nlink.rel = 'stylesheet';\nlink.href = 'style.css';\ndocument.body.appendChild(link);\ndocument.body.removeChild(link);\n```\n\n> **`Oui.`** Le style par défaut donné à une ressource `link` est `text/css` donc ne pas mettre de `type` n’empêche pas la requête d'être faites.\n\n> Aussi, comme pour les scripts, les stylesheets requièrent une action synchrone. Retirer l'élément juste après n’empêche pas la requête d'être faites.\n\n\n\n### Avec un mauvais type ###\n\n> Créer une balise `link` avec un mauvais type MIME et lui affecter un fichier déclenche une requête HTTP ?\n\n| Chrome  | Firefox | IE  | Safari  | Opera   |\n|:-------:|:-------:|:---:|:-------:|:-------:|\n| **Oui** | Non     | Non | **Oui** | **Oui** |\n\n**Exemple :**\n\n```js\nvar link = document.createElement('link');\nlink.rel = 'stylesheet';\nlink.href = 'style.css';\nlink.type = 'text/javascript';\ndocument.body.appendChild(link);\n```\n\n> *`Pas toujours.`* La spécification ne couvre pas ce qui arrive quand un content-type non supporté par `link` est mentionné. Chrome, Opera et Safari font tout de même la requête ici, bien qu'ils n'analysent même pas le style...\n\n\n-----\n\n\n## Les iframes ##\n\n### Sans rien ###\n\n> Est-ce qu'une balise `<iframe>` déclenche une requête HTTP ?\n\n| Chrome | Firefox | IE  | Safari | Opera   |\n|:------:|:-------:|:---:|:------:|:-------:|\n| Non    | Non     | Non | Non    | **Oui** |\n\n**Exemple :**\n\n```html\n<iframe></iframe>\n```\n\n> *`Pas toujours.`* La [specification](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-iframe-element.html#process-the-iframe-attributes) dit à propos d'une iframe sans `src` :\n\n> > Si un élément n'a pas d'attribut `src` de spécifié... simplement levé un événement nommé « load » sur l'élément iframe.\n\n> Seul Opera lance une requête sur la page « about:blank ».\n\n\n\n#### Avec une source vide ####\n\n> Est-ce qu'une balise `<iframe>` avec une source vide déclenche une requête HTTP ?\n\n| Chrome | Firefox | IE  | Safari | Opera   |\n|:------:|:-------:|:---:|:------:|:-------:|\n| Non    | Non     | Non | Non    | **Oui** |\n\n**Exemple :**\n\n```html\n<iframe src=\"\"></iframe>\n```\n\n> *`Pas toujours.`* Continuons avec la [specification](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-iframe-element.html#process-the-iframe-attributes) :\n\n> > De plus si la valeur de l'attribut est une string vide l'url sera `about:blank`.\n\n> Aucune requête n'est faites, sauf pour Opera.\n\n\n\n### Avec un identificateur de fragment (hash) ###\n\n> Est-ce qu'une balise `<iframe>` avec un identificateur de fragment déclenche une requête HTTP ?\n\n| Chrome | Firefox | IE      | Safari | Opera |\n|:------:|:-------:|:-------:|:------:|:-----:|\n| Oui    | **Non** | **Non** | Oui    | Oui   |\n\n**Exemple :**\n\n```html\n<iframe src=\"#\"></iframe>\n```\n\n> **`Pas toujours.`** Lisons encore plus de [specification](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-iframe-element.html#process-the-iframe-attributes) :\n\n> > De plus, résoudre la valeur de la source relativement à la source de l'iframe parent.\n\n> On s'attend donc à une requête, cependant...\n\n> > Si il existe un ancêtre dans le contexte du document actif à cette adresse il faut ignorer l'identificateur de fragment.\n\n> Et donc il ne devrait pas y avoir de requête à cet endroit. Finalement personne ne fait ce qu'il faut sur ce point.\n\n\n\n### Avec une chaîne GET ###\n\n> Est-ce qu'une balise `<iframe>` avec une chaîne GET déclenche une requête HTTP ?\n\n| Chrome | Firefox | IE  | Safari | Opera |\n|:------:|:-------:|:---:|:------:|:-----:|\n| Oui    | Oui     | Oui | Oui    | Oui   |\n\n**Exemple :**\n\n```html\n<iframe src=\"?\"></iframe>\n```\n\n> **`Oui.`** `?` est ure url différente aussi cela lève une requête.\n\n\n-----\n\n\n## Changer le DOM avec `document.write` ##\n\n### Commentaires ###\n\n> Ne pas ouvrir un commentaire directement mais l'écrire en script autour d'une balise image déclenche une requête HTTP ?\n\n| Chrome | Firefox | IE      | Safari | Opera |\n|:------:|:-------:|:-------:|:------:|:-----:|\n| Non    | **Oui** | **Oui** | Non    | Non   |\n\n**Exemple :**\n\n```html\n<script>document.write('<'+'!--')</script>\n<img src=\"image.png\">\n-->\n```\n\n> *`Pas toujours.`* Si un commentaire HTML est écrit, le `img` à l'intérieur n'est jamais analysé et donc il n'y a aucune requête. Cependant, plusieurs navigateurs améliore leur performances en regardant plus en avant. Si ils tombent sur un script inline, au lieu de s'arrêter ils continuent afin de gagner en temps, quitte à faire de l'affichage inutile (car inhibé par le script précédent). On appel cela de l'[analyse spéculative](https://developer.mozilla.org/en-US/docs/HTML/Optimizing_Your_Pages_for_Speculative_Parsing).\n\nFirefox et IE continue d'analyser le document pendant que le script est en cours d'exécution. Ils vont donc lancer une requête en rencontrant l'image. Quand le script à fini son analyse il va inhiber la balise `img` car un commentaire HTML se sera inséré entre temps. Malheureusement la requête aura déjà été faites.\n\nChrome fait également de l'analyse spéculative pour les scripts externes mais pas dans le cas de script inline.\n\n\n\n### Commentaires asynchrones ###\n\n> Ne pas ouvrir un commentaire directement mais l'écrire en script asynchrone autour d'une balise image déclenche une requête HTTP ?\n\n| Chrome | Firefox | IE      | Safari | Opera |\n|:------:|:-------:|:-------:|:------:|:-----:|\n| Non    | **Oui** | **Oui** | Non    | Non   |\n\n**Exemple :**\n\n```html\n<script async>document.write('<'+'!--')</script>\n<img src=\"image.png\">\n-->\n```\n\n> *`Pas toujours.`* Même en `async` les scripts inline sont bloquant comme je l'ai déjà [expliqué dans un précédent billet](http://blog.lesieur.name/differences-entre-async-et-defer-en-html5/#pour-les-scripts-inline).\n\n> *Note 2 : cela est la même chose en ce qui concerne l'attribut * `defer`*.*\n\n\n-----\n\n\n## Recalcule d'affichage de page ##\n\n#### Avec un disperseur d’événement ####\n\nRetailler la fenêtre avec une demande de rechargement par dispersement au redimensionnement déclenche une requête HTTP ?\n\n| Chrome  | Firefox | IE      | Safari  | Opera   |\n|:-------:|:-------:|:-------:|:-------:|:-------:|\n| **Oui** | Non     | **Oui** | **Oui** | **Oui** |\n\n**Exemple :**\n\n```javascript\nwindow.onresize = function() {\n  window.location.reload();\n};\nvar event = document.createEvent('Event');\nevent.initEvent('resize', false, false);\nwindow.dispatchEvent(event);\n```\n\n> *`Pas toujours.`* Disperser l’événement `resize` déclenche un rechargement de page ? Non, cela est une [violation de la specification](http://www.whatwg.org/specs/web-apps/current-work/multipage/history.html#dom-location-reload).\n\n> > Quand une méthode `reload()` est invoquée... Si l'exécution courante est un événement dispersé de redimensionnement... abandonner cette étape.\n\n> Tout le monde à faux sauf Firefox cette fois.\n\n> *Note : Le code ci-dessous déclenche bien une requête chez tout le monde.*\n\n> ```js\nwindow.onresize = function() {\n  window.location.reload();\n};\nwindow.onresize();\n```\n\n\n-----\n\n\n## Chargement de police ##\n\n### Seulement avec `@font-face` ###\n\nLa simple déclaration d'une police déclenche une requête HTTP ?\n\n| Chrome | Firefox | IE  | Safari | Opera |\n|:------:|:-------:|:---:|:------:|:-----:|\n| Non    | Non     | Non | Non    | Non   |\n\n**Exemple :**\n\n```html\n<style>\n  @font-face {\n    font-family: 'myfont';\n    src: url('font.woff');\n    unicode-range: U+61-7A; /* lowercase a-z */\n  }\n</style>\n```\n\n> *`Non.`* Pas de requête si on ne fait que la déclarer.\n\n\n\n### Avec application CSS ###\n\nLa déclaration d'une police appelé depuis un sélecteur CSS déclenche une requête HTTP ?\n\n| Chrome | Firefox | IE  | Safari | Opera |\n|:------:|:-------:|:---:|:------:|:-----:|\n| Non    | Non     | Non | Non    | Non   |\n\n**Exemple :**\n\n```html\n<style>\n  @font-face {\n    font-family: 'myfont';\n    src: url('font.woff');\n    unicode-range: U+61-7A; /* lowercase a-z */\n  }\n  p { font-family: myfont, sans-serif; }\n</style>\n```\n\n> *`Non.`* Pas de requête si on ne fait que la déclarer et l'associer.\n\n\n\n### Avec présence d'une balise ###\n\nLa déclaration d'une police appelé depuis un sélecteur CSS sur une balise présente déclenche une requête HTTP ?\n\n| Chrome | Firefox | IE  | Safari | Opera |\n|:------:|:-------:|:---:|:------:|:-----:|\n| Oui    | Oui     | Oui | Oui    | Oui   |\n\n**Exemple :**\n\n```html\n<style>\n  @font-face {\n    font-family: 'myfont';\n    src: url('font.woff');\n    unicode-range: U+61-7A; /* lowercase a-z */\n  }\n  p { font-family: myfont, sans-serif; }\n</style>\n<p></p>\n```\n\n> **`Oui.`** Effectivement si une balise vide a une police d'appliquée, une requête est lancée même si visuellement elle ne rend rien.\n\n\n-----\n\n\n## Conclusion ##\n\nCe qu'il ressort c'est que l'on ne peut pas se fier aux spécifications pour prévoir avec certitude le comportement de chaque navigateur, mais ça, ça n'étonne personne ! Dans le domaine des requêtes HTTP il n'y a aucun bon élève.", "dates" : { "published" : { "$date" : 1403177400000 }, "updated" : [] }, "others" : { "markdown" : true, "published" : true }, "script" : "", "stylesheet" : ".text table {\nwidth: 100%\n}", "title" : "<span>Maîtriser</span> les <span>requêtes</span> au <span>chargement</span> d'une page <span>web</span>", "urn" : "maitriser-les-requetes-au-chargement-d-une-page-web" }
{ "__v" : 0, "_id" : { "$oid" : "53a44667252cf3af329c2664" }, "cache" : { "comment" : { "number" : 0 } }, "categories" : [ { "$oid" : "5310456355dfd5f7698d48ba" }, { "$oid" : "530ef6a6789c1a55e4fde0af" }, { "$oid" : "530cc2f27188099a66e9bcec" }, { "$oid" : "5310456355dfd5f7698d48ca" }, { "$oid" : "5310456355dfd5f7698d48bc" }, { "$oid" : "5310456355dfd5f7698d48bb" }, { "$oid" : "5310456355dfd5f7698d48bd" } ], "content" : "Il y a quelque temps, j'expliquais qu'il était difficile d'obtenir [un travail Front-end de qualité avec des Frameworks CSS](http://blog.lesieur.name/bootstrap-est-une-regression-pour-un-developpement-front-end-de-qualite/) HTML-Driven. Le gros reproche que je fais à ces Frameworks est de prendre le contre pied de l'approche du W3C qui met tout en oeuvre avec HTML5 et CSS3 pour complètement effacer toute trace de design dans l'architecture HTML et la rendre structurellement sémantique.\n\nUn Framework CSS c'est vraiment pratique pour ne pas trop se mouiller et gagner du temps parait-il. On me dit d'ailleurs souvent que les systèmes de Grid c'est bien pratique. Ce que j'en pense pour ma part c'est qu'on ne peut jamais sortir des chemins battu d'un Framework lourd à moins de parfaitement connaître les mécanismes de celui-ci pour le contrer. Et dès lors qu'on est assez aguerrit pour comprendre des mécanismes menant à des « [abstractions qui fuient](http://french.joelonsoftware.com/Articles/LeakyAbstractions.html) », on est alors assez aguerrit pour s'en passer.\n\n**Sachez que l'on peut facilement se passer de Framework pour gérer une grille Responsive Web Design propre et maintenable en évitant ainsi d'horribles codes comme `<div class=\"header col-xs-12 col-sm-6 col-sm-push-6 text-right-sm bg-info\">` tout en restant maître de ce que l'on fait.** [Cette page CodePen en est un exemple](http://codepen.io/Haeresis/pen/wkIiq).\n\nSuivez-moi, je vais vous montrer !\n\n\n\n\n\n## Création d'une structure HTML ##\n\nEntrons dans le vif du sujet. Pour commencer, nous allons nous attacher à comprendre comment manager facilement notre grille via une feuille CSS, aussi la structure sera pour le moment plate et non sémantique. Là voici :\n\n**HTML**\n\n```html\n<html>\n    <head>\n        <title>Responsive and Semantic CSS Grid CSS-Driven</title>\n        <link rel=\"stylesheet\" href=\"common.css\">\n    </head>\n    <body>\n        <div class=\"page\">\n            <div class=\"brand\"></div>\n            <div class=\"slogan\"></div>\n            <div class=\"title\"></div>\n            <div class=\"main-nav\"></div>\n            <div class=\"overview\"></div>\n            <div class=\"anchor-nav\"></div>\n            <div class=\"main\"></div>\n            <div class=\"call-to-action\"></div>\n            <div class=\"call-to-action\"></div>\n            <div class=\"call-to-action\"></div>\n            <div class=\"call-to-action\"></div>\n            <div class=\"call-to-action\"></div>\n            <div class=\"call-to-action\"></div>\n            <div class=\"secondary-nav\"></div>\n            <div class=\"utils\"></div>\n            <div class=\"legals\"></div>\n        </div>\n    </body>\n</html>\n```\n\n\n\n\n\n## Mise en place de la grille CSS ##\n\nComme vous pouvez le constater pour le moment, la structure HTML est vide de contenu. Nous allons l'injecter pendant nos tests unitaires via la CSS.\n\n\n\n### Tests visuels ###\n\nNous allons commencer par habiller l'exemple précédent avec un style de test pour bien vérifier que la construction de la grille se fait sans soucis. C'est une étape non nécessaire mais qui aidera grandement à commenter l'architecture de la page facilement. Injectons ce code voué à être commenté en dernier lieu :\n\n**CSS (dans common.css)**\n\n```css\n.brand:before,\n.slogan:before,\n.title:before,\n.main-nav:before,\n.overview:before,\n.anchor-nav:before,\n.main:before,\n.call-to-action:before,\n.secondary-nav:before,\n.legals:before,\n.utils:before {\n   width: 100%;\n   display: inline-block;\n}\n\n.brand:before {\n    content: \"Brand\";\n   background-color: rgba(0, 0, 150, 0.5);\n}\n.slogan:before {\n   content: \"Slogan\";\n   background-color: rgba(150, 150, 0, 0.5);\n}\n.title:before {\n   content: \"Title\";\n   background-color: rgba(255, 0, 0, 0.2);\n}\n.main-nav:before {\n   content: \"Nav\";\n   background-color: rgba(0, 255, 0, 0.2);\n}\n.overview:before {\n   content: \"Overview\";\n   background-color: rgba(150, 0, 0, 0.5);\n}\n.anchor-nav:before {\n   content: \"Anchor nav\";\n   background-color: rgba(0, 0, 255, 0.2);\n}\n.main:before {\n   content: \"Main\";\n   background-color: rgba(255, 255, 0, 0.2);\n}\n.call-to-action:before {\n   content: \"Call to action\";\n   background-color: rgba(255, 0, 255, 0.2);\n}\n.secondary-nav:before {\n   content: \"Secondary nav\";\n   background-color: rgba(0, 150, 0, 0.5);\n}\n.legals:before {\n   content: \"Legals\";\n   background-color: rgba(0, 255, 255, 0.2);\n}\n.utils:before {\n   content: \"Utils\";\n   background-color: rgba(150, 0, 150, 0.5);\n}\n```\n\n\n\n### Grille de base ###\n\nC'est ici que nous allons définir notre ensemble de grilles existantes sur le site web. Pour notre exemple nous n'allons créer qu'une grille de 12 colonnes.\n\n\n#### Rappel d'une grille dans un Framework CSS ####\n\nLa grille consiste a diviser l'espace alloué à l'affichage du site en 12 colonnes dans notre exemple. Chaque partie de la grille pourra donc être large de un douzième (1/12) de la taille d'affichage à douze douzième (12/12). Si un composant fait 8 colonnes et que celui qui le suit en fait 4, ils tiendront l'un à côté de l'autre. Par contre, si le second en fais 8 également, il s'affichera à la ligne, car ne pouvant pas rentrer à côté.\n\n#### À vos calculatrices ####\n\nSi on estime qu'une colonne faisant 100% de la ligne vaut 12 unités alors :\n\n- 1 unité = (1 * 100) / 12 = 8.33333333%\n- 2 unités = (2 * 100) / 12 = 16.66666667%\n- 3 unités = (3 * 100) / 12 = 25%\n- 4 unités = (4 * 100) / 12 = 33.33333333%\n- 5 unités = (5 * 100) / 12 = 41.66666667%\n- 6 unités = (6 * 100) / 12 = 50%\n- 7 unités = (7 * 100) / 12 = 58.33333333%\n- 8 unités = (8 * 100) / 12 = 66.66666667%\n- 9 unités = (9 * 100) / 12 = 75%\n- 10 unités = (10 * 100) / 12 = 83.33333333%\n- 11 unités = (11 * 100) / 12 = 91.66666667%\n- 12 unités = (12 * 100) / 12 = 100%\n\nce qui nous donnerais une grille de référence dans un Framework comme celle-ci :\n\n**CSS (dans common.css)**\n\n*Espace pris par les 12 tailles de colonne possible*\n\n```css\n/*\n.span12-12 { width: 100%; }\n.span12-11 { width: 91.66666667%; }\n.span12-10 { width: 83.33333333%; }\n.span12-9 { width: 75%; }\n.span12-8 { width: 66.66666667%; }\n.span12-7 { width: 58.33333333%; }\n.span12-6 { width: 50%; }\n.span12-5 { width: 41.66666667%; }\n.span12-4 { width: 33.33333333%; }\n.span12-3 { width: 25%; }\n.span12-2 { width: 16.66666667%; }\n.span12-1 { width: 8.33333333%; }\n*/\n```\n\n*Espace vers la gauche nécessaire pour générer une colonne vide*\n\n```css\n/*\n.prepend12-12 { margin-left: 100%; }\n.prepend12-11 { margin-left: 91.66666667%; }\n.prepend12-10 { margin-left: 83.33333333%; }\n.prepend12-9 { margin-left: 75%; }\n.prepend12-8 { margin-left: 66.66666667%; }\n.prepend12-7 { margin-left: 58.33333333%; }\n.prepend12-6 { margin-left: 50%; }\n.prepend12-5 { margin-left: 41.66666667%; }\n.prepend12-4 { margin-left: 33.33333333%; }\n.prepend12-3 { margin-left: 25%; }\n.prepend12-2 { margin-left: 16.66666667%; }\n.prepend12-1 { margin-left: 8.33333333%; }\n.prepend12-0 { margin-left: 0; }\n*/\n```\n\n*Espace vers la droite nécessaire pour générer une colonne vide*\n\n```css\n/*\n.append12-12 { margin-right: 100%; }\n.append12-11 { margin-right: 91.66666667%; }\n.append12-10 { margin-right: 83.33333333%; }\n.append12-9 { margin-right: 75%; }\n.append12-8 { margin-right: 66.66666667%; }\n.append12-7 { margin-right: 58.33333333%; }\n.append12-6 { margin-right: 50%; }\n.append12-5 { margin-right: 41.66666667%; }\n.append12-4 { margin-right: 33.33333333%; }\n.append12-3 { margin-right: 25%; }\n.append12-2 { margin-right: 16.66666667%; }\n.append12-1 { margin-right: 8.33333333%; }\n.append12-0 { margin-right: 0; }\n*/\n```\n\n*Décalage vers la gauche nécessaire pour reculer les colonnes dans la grille en vue de les intervertir*\n\n```css\n/*\n.pull12-12 { right: 100%; }\n.pull12-11 { right: 91.66666667%; }\n.pull12-10 { right: 83.33333333%; }\n.pull12-9 { right: 75%; }\n.pull12-8 { right: 66.66666667%; }\n.pull12-7 { right: 58.33333333%; }\n.pull12-6 { right: 50%; }\n.pull12-5 { right: 41.66666667%; }\n.pull12-4 { right: 33.33333333%; }\n.pull12-3 { right: 25%; }\n.pull12-2 { right: 16.66666667%; }\n.pull12-1 { right: 8.33333333%; }\n.pull12-0 { right: 0; }\n*/\n```\n\n*Décalage vers la droite nécessaire pour avancer les colonnes dans la grille en vue de les intervertir*\n\n```css\n/*\n.push12-12 { left: 100%; }\n.push12-11 { left: 91.66666667%; }\n.push12-10 { left: 83.33333333%; }\n.push12-9 { left: 75%; }\n.push12-8 { left: 66.66666667%; }\n.push12-7 { left: 58.33333333%; }\n.push12-6 { left: 50%; }\n.push12-5 { left: 41.66666667%; }\n.push12-4 { left: 33.33333333%; }\n.push12-3 { left: 25%; }\n.push12-2 { left: 16.66666667%; }\n.push12-1 { left: 8.33333333%; }\n.push12-0 { left: 0; }\n*/\n```\n\n*Propriété pour permettre le déplacement de colonne et les gouttières inter colonne (arbitrairement placé à 16px)*\n\n```css\n/*\n.pull-push { position: relative; }\n.gutter { padding-left: 16px; padding-right: 16px; }\n.pull-push-reset { position: static; }\n.gutter-reset { padding-left: 0; padding-right: 0; }\n*/\n```\n\n\n#### La grille et le Responsive Web Design ####\n\nPour commencer nous allons initialiser la grille et les colonnes qui la compose.\n\nNotre site sera habillé en Mobile First, nous allons également définir nos gaps de responsivité. [Vous pouvez lire cet article pour plus de compréhension sur le Responsive Web Design, le Mobile First et les gaps de responsivité](http://blog.lesieur.name/les-concepts-autour-du-responsive-web-design/).\n\n**CSS (dans common.css)**\n\n*Propriété pour manager les colonnes*\n\n```css\n    .page:after,\n.grid:after {\n    content: \"\";\n    clear: both;\n    display: block;\n}\n\n    .brand,\n    .slogan,\n    .title,\n    .main-nav,\n    .overview,\n    .anchor-nav,\n    .main,\n    .call-to-action,\n    .secondary-nav,\n    .utils,\n    .legals,\n.column {\n    float: left;\n    width: 100%;\n}\n```\n\nPour faire fonctionner ce mécanisme de colonnes côte à côte qui passe à la ligne si elles manquent de place nous utiliserons des balises flottantes. L'idée est de nommer la zone avec la classe « .column » mais ne jamais l'utiliser dans le code HTML. À la place, c'est les éléments HTML de type « column » qui seront empilé au dessus.\n\nDe la même manière vous constaterez que l'élément `.page:after` est référencé comme se comportant comme l'élément `.grid:after`.\n\n*Media Queries pour gérer le comportement de chaque colonne en fonction de la taille d'affichage*\n\n```css\n/* Mobile / Small tablet */\n\n/* Tablet / Small desktop */\n@media (min-width: 768px) {\n}\n\n/* Desktop */\n@media (min-width: 992px) {\n}\n\n/* Large desktop */\n@media (min-width: 1200px) {\n}\n```\n\nAvant de vous expliquer les étapes pour rapidement manager votre grille voici à quoi doit ressembler votre feuille CSS, et ce qu'elle donne appliquée sur notre structure HTML exemple.\n\n> **`L'`** **Exemple :**\n\n> - [Voir le résultat en plein écran en cliquant ici](http://codepen.io/Haeresis/full/jtDEm)\n> - [Voir le code source en cliquant ici](http://codepen.io/Haeresis/pen/jtDEm)\n\n\n\n\n\n## Manager ses Grilles ##\n\nPour notre exemple nous n'utilisons qu'une grille. Mais il est tout à fait possible d'en avoir plusieurs (12 colonnes, 16 colonnes, etc.) et d'en changer en fonction du template de page (ou pour les grilles imbriquées différentes).\n\n\n\n### Étape 1 : Importer les règles ###\n\nLe rendu ci-dessus étant déjà celui-sur Mobile, nous allons alimenter le rendu pour Tablette et plus.\n\n> À partir de 768px, je souhaite que la partie « Brand » occupe 2 colonnes. Je place donc mon curseur dans mon fichier à cette ligne dans mon exemple de grille mise en commentaire :\n\n> ```css\n.span12-2 { width: 16.66666667%; }\n```\n\n> et avec le raccourci de duplication rapide de ligne (sur Sublim Text celui-ci est `Ctrl + Shift + D`) j'obtiens une duplication de celle-ci :\n\n> ```css\n.span12-2 { width: 16.66666667%; }\n.span12-2 { width: 16.66666667%; }\n```\n\n> avec mon raccourci d’interversion rapide de ligne, je vais aller placer la propriété dupliquée dans la bonne Media Query (sur Sublim Text celui-ci est `Ctrl + Shift + Flèche du bas` pour descendre une ligne ou Ctrl + Shift + Flèche du haut` pour la monter). Cela nous donne alors :\n\n> ```css\n/* Tablet / Small desktop */\n@media (min-width: 768px) {\n.span12-2 { width: 16.66666667%; }\n}\n```\n\n\n### Étape 2 : Associer la balise ###\n\nContinuons.\n\n> Puisque je souhaite que « Brand » fasse deux colonnes, je place mon curseur sur la ligne ou je l'ai référencé comme étant de type colonne (attaché à « .column »),\n\n> ```css\n    .brand,\n```\n\n> je duplique la ligne,\n\n> ```css\n    .brand,\n    .brand,\n```\n\n> et je place le duplicata sur la règle de deux colonnes que j'ai créé plus tôt :\n\n> ```css\n/* Tablet / Small desktop */\n@media (min-width: 768px) {\n    .brand,\n.span12-2 { width: 16.66666667%; }\n}\n```\n\n\n\n### Étape 3 : Recommencer pour toute la grille Tablette ###\n\nIl nous reste à présent à faire de même pour les autres colonnes.\n\n> Je souhaite que Title fasse également 2 colonnes sur 12 :\n\n> ```css\n/* Tablet / Small desktop */\n@media (min-width: 768px) {\n  .brand,\n  .title,\n.span-2 { width: 16.66666667%; }\n}\n```\n\n> Je souhaite que Anchor nav et Utils fasse également 3 colonnes sur 12 :\n\n> ```css\n/* Tablet / Small desktop */\n@media (min-width: 768px) {\n  .brand,\n  .title,\n.span-2 { width: 16.66666667%; }\n  .anchor-nav,\n  .utils,\n.span-3 { width: 25%; }\n}\n```\n\n> Je souhaite que les Call to Action fassent 6 colonnes sur 12, que Legals et Main en fassent 9 et que Main nav et Slogan en fasse 10 :\n\n> ```css\n/* Tablet / Small desktop */\n@media (min-width: 768px) {\n  .brand,\n  .title,\n.span-2 { width: 16.66666667%; }\n  .anchor-nav,\n  .utils,\n.span-3 { width: 25%; }\n  .call-to-action,\n.span-6 { width: 50%; }\n  .legals,\n  .main,\n.span-9 { width: 75%; }\n  .main-nav,\n  .slogan,\n.span-10 { width: 83.33333333%; }\n}\n```\n\nEt notre grille commence à prendre forme !\n\n> **`L'`** **Exemple :**\n\n> - [Voir le résultat en plein écran en cliquant ici](http://codepen.io/Haeresis/full/kfdsp)\n> - [Voir le code source en cliquant ici](http://codepen.io/Haeresis/pen/kfdsp)\n\n_**N'hésitez pas à retailler la fenêtre de votre navigateur pour constater les différences en fonction de votre périphérique d'affichage.**_\n\n\n\n### Étape 4 : Faire de même pour d'autres règles ###\n\nSur le même principe, nous allons ajouter des gouttières à nos colonnes pour les espacer les une des autres.\n\n> Nous allons donc récupérer toutes les colonnes sur lesquels nous souhaitons appliquer des gouttières. Comme nous les voulons pour toutes les différentes tailles nous allons les attacher dans la partie Mobile :\n\n```css\n/* Mobile / Small tablet */\n  .brand,\n  .slogan,\n  .title,\n  .main-nav,\n  .overview,\n  .anchor-nav,\n  .main,\n  .call-to-action,\n  .secondary-nav,\n  .utils,\n  .legals,\n.gutter { padding-left: 16px; padding-right: 16px; }\n```\n\nCe qui donne :\n\n> **`L'`** **Exemple :**\n\n> - [Voir le résultat en plein écran en cliquant ici](http://codepen.io/Haeresis/full/dAKch)\n> - [Voir le code source en cliquant ici](http://codepen.io/Haeresis/pen/dAKch)\n\nNous allons à présent intervertir à partir de l'affichage mobile les Brand et Slogan.\n\n> Pour cela nous allons poussez Brand de 10 colonnes et reculer Slogan de 2 colonnes. Nous allons passer les colonnes en relative.\n\n> Nous allons donc importer les règles,\n\n> ```css\n.pull-push { position: relative; }\n```\n\n> ```css\n.push-10 { left: 83.33333333%; }\n```\n\n> ```css\n.pull-2 { right: 16.66666667%; }\n```\n\n> et attacher\n\n> ```css\n  .brand,\n```\n\n> ```css\n  .slogan,\n```\n\n> dans l'affichage Tablette. Idem pour Legals et Utils avec 9 colonnes en avant et 3 colonnes en arrière :\n\n> ```css\n/* Tablet / Small desktop */\n@media (min-width: 768px) {\n  .brand,\n  .title,\n.span-2 { width: 16.66666667%; }\n  .anchor-nav,\n  .utils,\n.span-3 { width: 25%; }  \n  .call-to-action,\n.span-6 { width: 50%; }\n  .legals,\n  .main,\n.span-9 { width: 75%; }\n  .main-nav,\n  .slogan,\n.span-10 { width: 83.33333333%; }\n/**/\n  .utils,\n  .legals,\n  .brand,\n  .slogan,\n.pull-push { position: relative; }\n/**/\n  .utils,\n.push-9 { left: 75%; }\n  .brand,\n.push-10 { left: 83.33333333%; }\n  .slogan,\n.pull-2 { right: 16.66666667%; }\n  .legals,\n.pull-3 { right: 25%; }\n}\n```\n\nCe qui donne :\n\n> **`L'`** **Exemple :**\n\n> - [Voir le résultat en plein écran en cliquant ici](http://codepen.io/Haeresis/full/KyGcs)\n> - [Voir le code source en cliquant ici](http://codepen.io/Haeresis/pen/KyGcs)\n\n\n\n### Étape 5 : Alimenter toutes les tailles de périphérique ###\n\nIl est à présent temps de faire de même pour Desktop et Large Desktop. Cela va vous faire importer de nouvelles règles ou en écraser des précédentes.\n\n> Par exemple avec cette configuration Desktop : Anchor nav, les Call to Action et Main vont changer de comportement :\n\n> ```css\n/* Desktop */\n@media (min-width: 992px) {\n  .anchor-nav,  \n  .call-to-action,\n.span-4 { width: 33.33333333%; }\n  .main,\n.span-8 { width: 66.66666667%; }\n}\n```\n\nNous allons en profiter pour introduire les colonnes invisibles avec le Large Desktop :\n\n> Nous allons importer les règles :\n\n> ```css\n.prepend-2 { margin-left: 16.66666667%; }\n```\n\n> et\n\n> ```css\n.append-2 { margin-right: 16.66666667%; }\n```\n\n> Pour créer des colonnes inexistantes de part et d'autres de nos Call to Action. Nous allons les cibler avec la propriété CSS3 `:nth-child()` :\n\n> ```css\n/* Large desktop */\n@media (min-width: 1200px) {\n  .anchor-nav,\n.span-3 { width: 25%; }\n  .call-to-action\n.span-4 { width: 33.33333333%; }\n  .main,\n.span-9 { width: 75%; }\n/**/\n  .call-to-action:nth-child(8),\n  .call-to-action:nth-child(10),\n  .call-to-action:nth-child(12),\n.prepend-2 { margin-left: 16.66666667%; }\n/**/\n  .call-to-action:nth-child(9),\n  .call-to-action:nth-child(11),\n  .call-to-action:nth-child(13),\n.append-2 { margin-right: 16.66666667%; }\n}\n```\n\nCe qui donne :\n\n> **`L'`** **Exemple :**\n\n> - [Voir le résultat en plein écran en cliquant ici](http://codepen.io/Haeresis/full/kKHuy)\n> - [Voir le code source en cliquant ici](http://codepen.io/Haeresis/pen/kKHuy)\n\n\n\n\n\n## Grille CSS Sémantique ##\n\nMaintenant que nous avons vu que la grille fonctionne avec un empilement de `div` tout ce qu'il y a de plus classique, offrons à notre structure un petit côté sémantique et observons que cela n'affecte en rien le fonctionnement de la grille. C'est même bien plus pratique dans le cas de composant en liste comme pour les Call to Action !\n\n\n\n### Nouvelle structure ###\n\nVoici une structure HTML fonctionnelle avec nos grilles.\n\n**HTML**\n\n```html\n<html>\n    <head>\n        <title>Responsive and Semantic CSS Grid CSS-Driven</title>\n        <link rel=\"stylesheet\" href=\"common.css\">      \n    </head>\n    <body>\n        <header>\n            <div class=\"brand\"></div>\n            <div class=\"slogan\"></div>\n            <div class=\"title\"></div>\n            <nav class=\"main-nav\"></nav>\n        </header>\n        <div class=\"content\">\n            <section class=\"overview\"></section>\n            <nav class=\"anchor-nav\"></nav>\n            <article class=\"main\"></article>\n            <ul class=\"call-to-action-list\">\n                <li class=\"call-to-action\"></li>\n                <li class=\"call-to-action\"></li>\n                <li class=\"call-to-action\"></li>\n                <li class=\"call-to-action\"></li>\n                <li class=\"call-to-action\"></li>\n                <li class=\"call-to-action\"></li>\n            </ul>\n        </div>\n        <footer>\n            <nav class=\"secondary-nav\"></nav>\n            <div class=\"utils\"></div>\n            <div class=\"legals\"></div>\n        </footer>\n    </body>\n</html>\n```\n\n\n\n### Ajustement CSS ###\n\nComme la structure a légèrement changé, nous allons également légèrement changer nos associations.\n\n> ```css\n    .page:after,\n.grid:after {\n    content: \"\";\n    clear: both;\n    display: block;\n}\n```\n\n> devient\n\n> ```css\n  body > header:after,\n  body > footer:after,\n  .content:after,\n.grid:after {\n  content: \"\";\n  clear: both;\n  display: block;\n}\n```\n\nCréation d'un annulateur de liste dans la grille pour les balises comme `.call-to-action-list`.\n\n> ```css\n.list-reset { margin: 0;padding: 0;list-style-type: none; }\n```\n\n> Association dans la partie Mobile et plus :\n\n> ```css\n  .call-to-action-list,\n.list-reset { margin: 0;padding: 0;list-style-type: none; }\n```\n\nEt facilitation du ciblage des Call to Action devenu des listes :\n\n> ```css\n  .call-to-action:nth-child(8),\n  .call-to-action:nth-child(10),\n  .call-to-action:nth-child(12),\n.prepend-2 { margin-left: 16.66666667%; }\n/**/\n  .call-to-action:nth-child(9),\n  .call-to-action:nth-child(11),\n  .call-to-action:nth-child(13),\n.append-2 { margin-right: 16.66666667%; }\n```\n\n> devient\n\n> ```css\n  .call-to-action:nth-child(odd),\n.prepend-2 { margin-left: 16.66666667%; }\n/**/\n  .call-to-action:nth-child(even),\n.append-2 { margin-right: 16.66666667%; }\n```\n\nCe qui donne :\n\n> **`L'`** **Exemple :**\n\n> - [Voir le résultat en plein écran en cliquant ici](http://codepen.io/Haeresis/full/Lshcj)\n> - [Voir le code source en cliquant ici](http://codepen.io/Haeresis/pen/Lshcj)\n\n\n\n\n\n## Grille imbriquée ##\n\nLe système de grille peut ensuite s'appliquer à l'intérieur même des colonnes. En fonction de ce que vous souhaitez faire, il peut être intéressant de retirer les gouttières d'un élément parent pour les appliquer à la sous grille.\n\nVoici la zone Main rempli avec une sous grille. Main fait alors office de `.grid`, Article et Steps office de `.column`\n\n**HTML**\n\n```html\n<!-- ... header ... -->\n\n<div class=\"content\">\n  <section class=\"overview\"></section>\n  <nav class=\"anchor-nav\"></nav>\n\n\n  <article class=\"main\">\n    <div class=\"article\"></div>\n    <ol class=\"step-list\">\n      <li class=\"step\"></li>\n      <li class=\"step\"></li>\n      <li class=\"step\"></li>\n    </ol>\n  </article>\n\n\n  <ul class=\"call-to-action-list\">\n    <li class=\"call-to-action\"></li>\n    <li class=\"call-to-action\"></li>\n    <li class=\"call-to-action\"></li>\n    <li class=\"call-to-action\"></li>\n    <li class=\"call-to-action\"></li>\n    <li class=\"call-to-action\"></li>\n  </ul>\n</div>\n\n<!-- ... footer ... -->\n```\n\nNous allons donc améliorer nos CSS de test en rajoutant,\n\n```css\n.main:before {\n  content: none;\n}\n.article:before {\n  content: \"Article\";\n  background-color: rgba(255, 255, 0, 0.2);\n  width: 100%;\n  display: inline-block;\n}\n.step:before {\n  content: \"Steps\";\n  background-color: rgba(0, 255, 0, 0.2);\n  width: 100%;\n  display: inline-block;\n}\n\n```\n\nen rajoutant les listes ordonnées sans style pour la grille,\n\n```css\n    .step-list,\n    .call-to-action-list,\n.list-reset { margin: 0;padding: 0;list-style-type: none; }\n```\n\nen retirant les gouttières des « .column » faisant office de « .grid » et\n\n```css\n/* Mobile / Small tablet */\n    .brand,\n    .slogan,\n    .title,\n    .main-nav,\n    .overview,\n    .anchor-nav,\n    .call-to-action,\n    .secondary-nav,\n    .utils,\n    .legals,\n.gutter { padding-left: 16px; padding-right: 16px; }\n```\n\nen abonnant `.step-list` et `.step` aux `.grid`, `.column` et `gutter`\n\n```css\n    .brand,\n    .slogan,\n    .title,\n    .main-nav,\n    .overview,\n    .anchor-nav,\n    .main,\n    .article,\n    .step,\n    .call-to-action,\n    .secondary-nav,\n    .utils,\n    .legals,\n.column {\n    float: left;\n    width: 100%;\n}\n\n/* Mobile / Small tablet */\n    .brand,\n    .slogan,\n    .title,\n    .main-nav,\n    .overview,\n    .anchor-nav,\n    .article,\n    .step,\n    .call-to-action,\n    .secondary-nav,\n    .utils,\n    .legals,\n.gutter { padding-left: 16px; padding-right: 16px; }\n```\n\nIl ne nous reste plus qu'à manager le comportement des colonnes en fonction des périphériques :\n\n```css\n/* Tablet / Small desktop */\n@media (min-width: 768px) {\n    .brand,\n    .title,\n.span-2 { width: 16.66666667%; }\n    .anchor-nav,\n    .utils,\n.span-3 { width: 25%; }\n    .step,\n.span-4 { width: 33.33333333%; }    \n    .call-to-action,\n.span-6 { width: 50%; }\n    .legals,\n    .main,\n.span-9 { width: 75%; }\n    .main-nav,\n    .slogan,\n.span-10 { width: 83.33333333%; }\n\n    .utils,\n    .legals,\n    .brand,\n    .slogan,\n.pull-push { position: relative; }\n\n    .utils,\n.push-9 { left: 75%; }\n    .brand,\n.push-10 { left: 83.33333333%; }\n    .slogan,\n.pull-2 { right: 16.66666667%; }\n    .legals,\n.pull-3 { right: 25%; }\n}\n```\n\n> **`L'`** **Exemple :**\n\n> - [Voir le résultat en plein écran en cliquant ici](http://codepen.io/Haeresis/full/hcGib)\n> - [Voir le code source en cliquant ici](http://codepen.io/Haeresis/pen/hcGib)\n\n\n\n\n\n## Équivalent d'un clearfix ##\n\nEn remplissant notre architecture avec du contenu on s'aperçoit qu'il y a des problèmes de chevauchement.\n\nC'est le cas avec la zone Title dans l'exemple ci-après :\n\n> **`L'`** **Exemple :**\n\n> - [Voir le résultat en plein écran en cliquant ici](http://codepen.io/Haeresis/full/aJKkd)\n> - [Voir le code source en cliquant ici](http://codepen.io/Haeresis/pen/aJKkd)\n\nPour résoudre cela, il suffit de créer une règle CSS `clearfix` et d'associer la zone Title.\n\n```css\n    .title,\n.clearfix { clear: both; }\n```\n\n*Note : J'en profite également pour empêcher le site d'être plus large que 1200px*\n\n> **`L'`** **Exemple :**\n\n> - [Voir le résultat en plein écran en cliquant ici](http://codepen.io/Haeresis/full/emwIv)\n> - [Voir le code source en cliquant ici](http://codepen.io/Haeresis/pen/emwIv)\n\n\n\n\n\n## Pour aller plus loin ##\n\n### Alignement ###\n\nIl est tout à fait possible de reproduire ce type de fonctionnement pour autre chose que la grille. Par exemple pour l'alignement des textes, images, etc.\n\nCréons par exemple les règles exemples suivantes :\n\n```css\n/*------------------------------------*\\\n    $ALIGMENT\n\\*------------------------------------*/\n\n/*\n.text-left { text-align: left; }\n.text-center { text-align: center; }\n.text-right { text-align: right; }\n.text-justify { text-align: justify; }\n*/\n```\n\net appliquons la CSS sur les zones de la manière suivante :\n\n```css\n/* Mobile / Small tablet */\n    .utils,\n.text-center { text-align: center; }\n\n/* Tablet / Small desktop */\n@media (min-width: 768px) {\n     .brand,\n     .utils,\n.text-right { text-align: right; }\n}\n```\n\n> **`L'`** **Exemple :**\n\n> - [Voir le résultat en plein écran en cliquant ici](http://codepen.io/Haeresis/full/lyqir)\n> - [Voir le code source en cliquant ici](http://codepen.io/Haeresis/pen/lyqir)\n\n\n\n### Afficher / Masquer ###\n\nDe la même manière il est possible d'afficher ou de masquer certaines zones en fonction de la résolution d'affichage.\n\n```css\n/*------------------------------------*\\\n    $VISTIBLE / HIDDEN\n\\*------------------------------------*/\n\n/*\n.display-block, visible { display: block; }\n.display-inline { display: inline-block; }\n.display-inline-block { display: inline-block; }\n...\n.display-none, hidden { display: none; }\n*/\n```\n\nN'affichons que 2 des 3 Call to Action en Tablette et en Large Desktop et les Step seulement à partir de Tablette :\n\n```css\n/* Mobile / Small tablet */\n    .step,\n.display-none, hidden { display: none; }\n\n/* Tablet / Small desktop */\n@media (min-width: 768px) {\n    .step,\n.display-block, visible { display: block; }\n    .call-to-action:nth-child(n + 3),\n.display-none, hidden { display: none; }\n}\n\n/* Desktop */\n@media (min-width: 992px) {\n    .call-to-action:nth-child(n + 3),\n.display-block, visible { display: block; }\n}\n\n/* Large desktop */\n@media (min-width: 1200px) {\n    .call-to-action:nth-child(n + 3),\n.display-none, hidden { display: none; }\n}\n```\n\n> **`L'`** **Exemple :**\n\n> - [Voir le résultat en plein écran en cliquant ici](http://codepen.io/Haeresis/full/kvcBg)\n> - [Voir le code source en cliquant ici](http://codepen.io/Haeresis/pen/kvcBg)\n\n\n\n\n\n## Pour finir ##\n\nLa rapidité d’adressage et la maintenance du code CSS est tout aussi aisé sinon plus rapide avec un bon éditeur de texte. La perte de temps réside dans la préparation des classes possibles avant affectation mais rien ne vous empêche d'aller les piocher dans les divers Frameworks CSS existant et de faire vos mélanges !", "dates" : { "published" : { "$date" : 1403530500000 }, "updated" : [] }, "others" : { "markdown" : true, "published" : true }, "script" : "", "stylesheet" : "", "title" : "<span>Grille</span> <span>CSS</span> <span>Responsive</span> et <span>Sémantique</span> sans <span>Framework</span>", "urn" : "grille-css-responsive-et-semantique-sans-framework" }
{ "__v" : 0, "_id" : { "$oid" : "53ae894483fce724706bdf36" }, "cache" : { "comment" : { "number" : 0 } }, "categories" : [ { "$oid" : "53aec7ad17ee9f4db5874c66" }, { "$oid" : "5310456355dfd5f7698d48c9" }, { "$oid" : "5310456355dfd5f7698d48c1" }, { "$oid" : "5310456355dfd5f7698d48cd" }, { "$oid" : "5310456355dfd5f7698d48c0" } ], "content" : "Connaissez vous les langages Markdown ? Mais si, il est probable que vous en connaissiez sans même savoir qu'ils pouvaient être nommé. Vous avez déjà écris un texte sur un [Wiki](http://www.mediawiki.org/wiki/MediaWiki/fr) ? Rédiger une carte sur [Trello](https://trello.com/) ? Rédigé un Readme sur [GitHub](https://github.com/) ou sur [BitBucket](https://bitbucket.org/) ? Un commentaire sur [CodePen](https://codepen.io/) ? Vous les avez déjà croisé ces `.md` rarement reconnus de base par les Bloc-notes.\n\n<figure>\n<img src=\"https://lh4.googleusercontent.com/-JzGPxdNncG0/UrnipAQI0sI/AAAAAAAAEpU/hhp7J_RE11Y/w400-h306-no/2014-01-22+StackEdit+-+New+Authoring+Process.png\" alt=\"Responsive Web Design\">\n<figcaption>Source : lh4.googleusercontent.com</figcaption>\n</figure>\n\nNon ? Si cela ne vous parle pas, sachez que Markdown pourrait devenir votre meilleur ami pour écrire des spécifications précises ou vagues sur vos projets, seul ou avec vos collègues avec un minimum d'efforts grâce à [StackEdit.io]. Vous pourriez même au final écrire toutes sortes de choses facilement !\n\n\n\n\n## Qu'est-ce que le langage Markdown ##\n\nJe me suis peut être emballé en disant « les langages Markdown ». En fait, ce langage n'a jamais été formellement standardisé bien que tous s'accordent à dire qu'il [suit ses règles ci](http://fr.wikipedia.org/wiki/Markdown).\n\n> **Wikipedia** : Markdown est un langage de balisage léger créé par John Gruber et Aaron Swartz en 2004. Son but est d'offrir une syntaxe facile à lire et à écrire. Un document formaté selon Markdown devrait pouvoir être publié comme tel, en texte, sans donner l’impression qu’il a été marqué par des balises ou des instructions de formatage.\n\nC'est à dire que les balises Wikipedia ne sont pas les mêmes que le langage Markdown mais sont un langage de « type Markdown » dans le sens où, hors d'une visionneuse de formatage, le texte reste parfaitement compréhensible de tous (contrairement par exemple au formatage HTML qui en mode `source` peut sembler compliqué pour qui ne le connaît pas).\n\n\n\n\n## StackEdit.io, le super éditeur Markdown en ligne ##\n\n[StackEdit.io] est un logiciel embarqué via navigateur, accessible en ligne et hors ligne ! Il fonctionne parfaitement avec Google Chrome par exemple, surtout en mode « Applications » (Menu > Outils > Créer des raccourcis vers les applications...).\n\nVous managez vos documents dans l'application, (création / suppression) et vous les enregistrez dans le Cloud de manière définitive via des plateformes de stockage tierces (Google Drive, DropBox, ...).\n\nVous pouvez même rédiger vos documents en temps réel à plusieurs.\n\nTout cela dans le but de publier vos documentations dans vos repositories internes sous forme de Readme, ou de fournir des spécifications fonctionnelles au format PDF ou HTML facilement. De créer du contenu pour vos cartes Trellos, bref... De rédiger en Markdown.\n\n\n\n\n## Testez-le ! ##\n\nPour tester [StackEdit.io], rendez vous sur [https://stackedit.io/](https://stackedit.io/).\n\n> **`une`** **Note** : [StackEdit.io] est également une très bonne visionneuse Markdown en ligne. Vous pouvez donc lui fournir n'importe qu'elle url de fichier `.md` et envoyer le lien de lecture à quelqu'un ! Par exemple, voici :\n\n> - ### [La version française du document de bienvenue StackEdit.io](https://stackedit.io/viewer#!provider=gist&gistId=46e7665286651d79f7d5&filename=StackEdit.io%20-%20Document%20de%20bienvenue) ###\n\n  [StackEdit.io]: \"https://stackedit.io/\"", "dates" : { "published" : { "$date" : 1403947320000 }, "updated" : [] }, "others" : { "markdown" : true, "published" : true }, "script" : "", "stylesheet" : "", "title" : "StackEdit.io, l'éditeur Markdown en ligne par excellence !", "urn" : "stackeditio-l-editeur-markdown-en-ligne-par-excellence" }
{ "__v" : 0, "_id" : { "$oid" : "53e38776a8f05c9a1dbb971d" }, "cache" : { "comment" : { "number" : 0 } }, "categories" : [ { "$oid" : "5310456355dfd5f7698d48bd" }, { "$oid" : "5310456355dfd5f7698d48ba" }, { "$oid" : "530ef6a6789c1a55e4fde0af" }, { "$oid" : "5310456355dfd5f7698d48b9" }, { "$oid" : "5310456355dfd5f7698d48bf" }, { "$oid" : "5310456355dfd5f7698d48be" } ], "content" : "S'il y a bien une action redondante et qui nécessite de passer par la case JavaScript, c'est bien la validation des formulaires ! Mais sachez qu'il est possible de les valider sans utiliser une seule ligne de code ! J'avoue, je triche un peu quand je dis ça. En réalité il n'y a rien de magique et il faudra tout de même inclure trois scripts pour réaliser cela, mais il ne sera pas nécessaire que **vous** écriviez du JavaScript.\n\nVoyons ici quel sont ces scripts et parcourons les différents cas de figure pour valider des champs vides, vérifier qu'un email est bien formé ou encore qu'une confirmation de mot de passe correspond bien au mot de passe initialement tapé. Par exemple, pour vérifier qu'un champ « Pseudo » est bien remplis et indiquer la place de son message d'erreur, il suffirait de le déclarer dans un formulaire comme ceci :\n\n```html\n<label for=\"pseudo\">Pseudo</label>\n<input type=\"text\" name=\"pseudo\" id=\"pseudo\" placeholder=\"Haeresis\"\n       data-rule-required=\"true\"\n       data-msg-required=\"Le champ Pseudo est requis.\" />\n<span data-valmsg-for=\"pseudo\" data-valmsg-replace=\"true\"></span>\n```\n\nC'est donc parti pour :\n\n1. Trouver votre bonheur dans l'exemple complet suivant ;\n   <div style=\"margin-top: 8px;\" class=\"codepen\"><p data-height=\"600\" data-theme-id=\"0\" data-slug-hash=\"AzJgF\" data-default-tab=\"result\" class='codepen'>See the Pen <a href='http://codepen.io/Haeresis/pen/AzJgF/'>Validation de formulaire Inline sans JavaScript</a> by Bruno Lesieur (<a href='http://codepen.io/Haeresis'>@Haeresis</a>) on <a href='http://codepen.io'>CodePen</a>.</p></div>\n\n2. Ou/Et lire la suite de ce billet pour en apprendre un peu plus sur le jQuery Validation Unobstrusive Plugin.\n\n<script async src=\"//codepen.io/assets/embed/ei.js\"></script>\n\n\n## Les 3 Scripts Magiques ##\n\n### jQuery ###\n\nLe premier des trois scripts est l'incontournable [jQuery](http://jqueryvalidation.org/). Celui-ci va servir aux deux suivants pour cibler les champs à valider de manière simple sur tous les types de navigateur, mais ça, vous le saviez probablement déjà.\n\n\n\n### jQuery Validate Plugin ###\n\nLe deuxième script est le de plus en plus populaire [jQuery Validate Plugin](http://jqueryvalidation.org/) qui avec un ensemble d'instructions JavaScript permet de manager la manière dont le formulaire doit se comporter lors de la validation post soumission. C'est là généralement (même si vous utilisez habituellement un autre script que ce plugin) que vous répéter toujours le même code JavaScript redondant pour assigner vos messages d'erreur à vos inputs.\n\n\n\n### jQuery Validation Unobstrusive Plugin ###\n\nVoici le troisième script magique qui va vous permettre de pré-valider votre formulaire côté client sans utiliser une seule ligne de JavaScript sur votre page ! Si vous n'y connaissez rien, et bien c'est le moment de jouer un peu avec votre DOM... uniquement à la main depuis le code HTML !\n\n> Note : le plus gros défaut de ce plugin est qu'il doit être utilisé dans un cadre de travail Microsoft. Dans tous autres cas, Microsoft ce réserve le droit de vous en interdire l'utilisation. Vous voilà donc prévenu :)\n\n\n\n\n## Mise en place rapide ##\n\nVoici un petit formulaire sans prétention qui va fonctionner...\n\n**Partie utile placée dans Body**\n\n```html\n<form action=\"\" method=\"post\">\n    <div class=\"field\">\n        <label for=\"pseudo\">Pseudo</label>\n        \n        <!-- Ajout de data-rule-required et data-msg-required -->\n        <input type=\"text\" id=\"pseudo\" name=\"pseudo\" placeholder=\"Haeresis\"\n               data-rule-required=\"true\"\n               data-msg-required=\"Le champ Pseudo est requis.\"\n        />\n        \n        <!-- Placement du message d'erreur dédié spécifiquement. -->\n        <span data-valmsg-for=\"pseudo\" data-valmsg-replace=\"true\"></span>\n    </div>\n    \n    <!-- Ajout de la liste total des messages d'erreur pour information. -->\n    <div class=\"validation-summary-valid\" data-valmsg-summary=\"true\">\n        <ul>\n            <li style=\"display:none\"></li>\n        </ul>\n    </div>\n    \n    <div class=\"submit\">\n        <input type=\"submit\" value=\"Valider\" />\n    </div>   \n</form>\n```\n\n...une fois nos trois scripts mis en place.\n\n**Appel des trois scripts, de préférence en pied de Body**\n\n```html\n<!-- jQuery -->\n<script src='//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js'></script>\n<!-- jQuery Validate Plugin -->\n<script src='//cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.11.1/jquery.validate.min.js'></script>\n<!-- jQuery Validation Unobstrusive Plugin -->\n<script src='//ajax.aspnetcdn.com/ajax/mvc/5.1/jquery.validate.unobtrusive.js'></script>\n```\n\nIl ne reste alors plus qu'a styler les messages d'erreur...\n\n**CSS pour styler les messages d'erreur**\n\n```css\n/* Couleur des messages d'erreur totaux */\n.validation-summary-errors,\n/* Couleur des messages d'erreur spécifiques */\n.field-validation-error {\n  color: #f00;\n}\n\n/* Couleur des bord des champs spécifiques */\n.input-validation-error {\n  border: 1px solid #f00;\n}\n```\n\n## Voir tous les types de champs ! ##\n\nVous pouvez consulter ici tous les autres types de champs et fonctionnement custom avec quelques lignes de JavaScript.\n\n<div class=\"codepen\"><p data-height=\"600\" data-theme-id=\"0\" data-slug-hash=\"AzJgF\" data-default-tab=\"html\" class='codepen'>See the Pen <a href='http://codepen.io/Haeresis/pen/AzJgF/'>Validation de formulaire Inline sans JavaScript</a> by Bruno Lesieur (<a href='http://codepen.io/Haeresis'>@Haeresis</a>) on <a href='http://codepen.io'>CodePen</a>.</p></div>", "dates" : { "published" : { "$date" : 1407423840000 }, "updated" : [] }, "others" : { "markdown" : true, "published" : true }, "script" : "", "stylesheet" : ".codepen {\n    margin-top: 8px;\n}", "title" : "<span>Valider</span> les <span>formulaires</span> simplement, et sans <span>JavaScript</span>", "urn" : "valider-les-formulaires-simplement-et-sans-javascript" }
